(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Yv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Em={exports:{}},Za={},Tm={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=Symbol.for("react.element"),Xv=Symbol.for("react.portal"),Jv=Symbol.for("react.fragment"),Zv=Symbol.for("react.strict_mode"),e_=Symbol.for("react.profiler"),t_=Symbol.for("react.provider"),n_=Symbol.for("react.context"),r_=Symbol.for("react.forward_ref"),s_=Symbol.for("react.suspense"),i_=Symbol.for("react.memo"),o_=Symbol.for("react.lazy"),pf=Symbol.iterator;function a_(t){return t===null||typeof t!="object"?null:(t=pf&&t[pf]||t["@@iterator"],typeof t=="function"?t:null)}var Im={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sm=Object.assign,Am={};function Vs(t,e,n){this.props=t,this.context=e,this.refs=Am,this.updater=n||Im}Vs.prototype.isReactComponent={};Vs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function km(){}km.prototype=Vs.prototype;function $c(t,e,n){this.props=t,this.context=e,this.refs=Am,this.updater=n||Im}var Hc=$c.prototype=new km;Hc.constructor=$c;Sm(Hc,Vs.prototype);Hc.isPureReactComponent=!0;var mf=Array.isArray,Cm=Object.prototype.hasOwnProperty,qc={current:null},Nm={key:!0,ref:!0,__self:!0,__source:!0};function Rm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Cm.call(e,r)&&!Nm.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:io,type:t,key:i,ref:a,props:s,_owner:qc.current}}function l_(t,e){return{$$typeof:io,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wc(t){return typeof t=="object"&&t!==null&&t.$$typeof===io}function u_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gf=/\/+/g;function Bl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?u_(""+t.key):e.toString(36)}function ta(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case io:case Xv:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Bl(a,0):r,mf(s)?(n="",t!=null&&(n=t.replace(gf,"$&/")+"/"),ta(s,e,n,"",function(f){return f})):s!=null&&(Wc(s)&&(s=l_(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(gf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",mf(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Bl(i,l);a+=ta(i,e,n,c,s)}else if(c=a_(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Bl(i,l++),a+=ta(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Vo(t,e,n){if(t==null)return t;var r=[],s=0;return ta(t,r,"","",function(i){return e.call(n,i,s++)}),r}function c_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},na={transition:null},h_={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:na,ReactCurrentOwner:qc};function Pm(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Vo,forEach:function(t,e,n){Vo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vo(t,function(){e++}),e},toArray:function(t){return Vo(t,function(e){return e})||[]},only:function(t){if(!Wc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Vs;ne.Fragment=Jv;ne.Profiler=e_;ne.PureComponent=$c;ne.StrictMode=Zv;ne.Suspense=s_;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h_;ne.act=Pm;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=qc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Cm.call(e,c)&&!Nm.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:io,type:t.type,key:s,ref:i,props:r,_owner:a}};ne.createContext=function(t){return t={$$typeof:n_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:t_,_context:t},t.Consumer=t};ne.createElement=Rm;ne.createFactory=function(t){var e=Rm.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:r_,render:t}};ne.isValidElement=Wc;ne.lazy=function(t){return{$$typeof:o_,_payload:{_status:-1,_result:t},_init:c_}};ne.memo=function(t,e){return{$$typeof:i_,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=na.transition;na.transition={};try{t()}finally{na.transition=e}};ne.unstable_act=Pm;ne.useCallback=function(t,e){return ht.current.useCallback(t,e)};ne.useContext=function(t){return ht.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};ne.useEffect=function(t,e){return ht.current.useEffect(t,e)};ne.useId=function(){return ht.current.useId()};ne.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return ht.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};ne.useRef=function(t){return ht.current.useRef(t)};ne.useState=function(t){return ht.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return ht.current.useTransition()};ne.version="18.3.1";Tm.exports=ne;var ie=Tm.exports;const d_=Yv(ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_=ie,p_=Symbol.for("react.element"),m_=Symbol.for("react.fragment"),g_=Object.prototype.hasOwnProperty,y_=f_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v_={key:!0,ref:!0,__self:!0,__source:!0};function bm(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)g_.call(e,r)&&!v_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:p_,type:t,key:i,ref:a,props:s,_owner:y_.current}}Za.Fragment=m_;Za.jsx=bm;Za.jsxs=bm;Em.exports=Za;var h=Em.exports,Tu={},jm={exports:{}},St={},Vm={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,Q){var q=M.length;M.push(Q);e:for(;0<q;){var j=q-1>>>1,W=M[j];if(0<s(W,Q))M[j]=Q,M[q]=W,q=j;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var Q=M[0],q=M.pop();if(q!==Q){M[0]=q;e:for(var j=0,W=M.length,te=W>>>1;j<te;){var Y=2*(j+1)-1,je=M[Y],Se=Y+1,at=M[Se];if(0>s(je,q))Se<W&&0>s(at,je)?(M[j]=at,M[Se]=q,j=Se):(M[j]=je,M[Y]=q,j=Y);else if(Se<W&&0>s(at,q))M[j]=at,M[Se]=q,j=Se;else break e}}return Q}function s(M,Q){var q=M.sortIndex-Q.sortIndex;return q!==0?q:M.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,y=null,_=3,A=!1,R=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(M){for(var Q=n(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=M)r(f),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(f)}}function V(M){if(P=!1,I(M),!R)if(n(c)!==null)R=!0,ze(z);else{var Q=n(f);Q!==null&&Vt(V,Q.startTime-M)}}function z(M,Q){R=!1,P&&(P=!1,k(g),g=-1),A=!0;var q=_;try{for(I(Q),y=n(c);y!==null&&(!(y.expirationTime>Q)||M&&!C());){var j=y.callback;if(typeof j=="function"){y.callback=null,_=y.priorityLevel;var W=j(y.expirationTime<=Q);Q=t.unstable_now(),typeof W=="function"?y.callback=W:y===n(c)&&r(c),I(Q)}else r(c);y=n(c)}if(y!==null)var te=!0;else{var Y=n(f);Y!==null&&Vt(V,Y.startTime-Q),te=!1}return te}finally{y=null,_=q,A=!1}}var B=!1,E=null,g=-1,w=5,S=-1;function C(){return!(t.unstable_now()-S<w)}function v(){if(E!==null){var M=t.unstable_now();S=M;var Q=!0;try{Q=E(!0,M)}finally{Q?x():(B=!1,E=null)}}else B=!1}var x;if(typeof T=="function")x=function(){T(v)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,fe=J.port2;J.port1.onmessage=v,x=function(){fe.postMessage(null)}}else x=function(){D(v,0)};function ze(M){E=M,B||(B=!0,x())}function Vt(M,Q){g=D(function(){M(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){R||A||(R=!0,ze(z))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(_){case 1:case 2:case 3:var Q=3;break;default:Q=_}var q=_;_=Q;try{return M()}finally{_=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,Q){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=_;_=M;try{return Q()}finally{_=q}},t.unstable_scheduleCallback=function(M,Q,q){var j=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?j+q:j):q=j,M){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,M={id:p++,callback:Q,priorityLevel:M,startTime:q,expirationTime:W,sortIndex:-1},q>j?(M.sortIndex=q,e(f,M),n(c)===null&&M===n(f)&&(P?(k(g),g=-1):P=!0,Vt(V,q-j))):(M.sortIndex=W,e(c,M),R||A||(R=!0,ze(z))),M},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(M){var Q=_;return function(){var q=_;_=Q;try{return M.apply(this,arguments)}finally{_=q}}}})(Dm);Vm.exports=Dm;var __=Vm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_=ie,It=__;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mm=new Set,bi={};function Lr(t,e){vs(t,e),vs(t+"Capture",e)}function vs(t,e){for(bi[t]=e,t=0;t<e.length;t++)Mm.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=Object.prototype.hasOwnProperty,w_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yf={},vf={};function E_(t){return Iu.call(vf,t)?!0:Iu.call(yf,t)?!1:w_.test(t)?vf[t]=!0:(yf[t]=!0,!1)}function T_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I_(t,e,n,r){if(e===null||typeof e>"u"||T_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kc=/[\-:]([a-z])/g;function Gc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kc,Gc);Ye[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kc,Gc);Ye[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kc,Gc);Ye[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qc(t,e,n,r){var s=Ye.hasOwnProperty(e)?Ye[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(I_(e,n,s,r)&&(n=null),r||s===null?E_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var In=x_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Do=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),Yc=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),Lm=Symbol.for("react.provider"),Fm=Symbol.for("react.context"),Xc=Symbol.for("react.forward_ref"),Au=Symbol.for("react.suspense"),ku=Symbol.for("react.suspense_list"),Jc=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),Om=Symbol.for("react.offscreen"),_f=Symbol.iterator;function ni(t){return t===null||typeof t!="object"?null:(t=_f&&t[_f]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,$l;function hi(t){if($l===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$l=e&&e[1]||""}return`
`+$l+t}var Hl=!1;function ql(t,e){if(!t||Hl)return"";Hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Hl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hi(t):""}function S_(t){switch(t.tag){case 5:return hi(t.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return t=ql(t.type,!1),t;case 11:return t=ql(t.type.render,!1),t;case 1:return t=ql(t.type,!0),t;default:return""}}function Cu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xr:return"Fragment";case Yr:return"Portal";case Su:return"Profiler";case Yc:return"StrictMode";case Au:return"Suspense";case ku:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fm:return(t.displayName||"Context")+".Consumer";case Lm:return(t._context.displayName||"Context")+".Provider";case Xc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jc:return e=t.displayName||null,e!==null?e:Cu(t.type)||"Memo";case Vn:e=t._payload,t=t._init;try{return Cu(t(e))}catch{}}return null}function A_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cu(e);case 8:return e===Yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k_(t){var e=zm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mo(t){t._valueTracker||(t._valueTracker=k_(t))}function Um(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nu(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bm(t,e){e=e.checked,e!=null&&Qc(t,"checked",e,!1)}function Ru(t,e){Bm(t,e);var n=Zn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pu(t,e.type,Zn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pu(t,e,n){(e!=="number"||va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var di=Array.isArray;function ls(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ef(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(di(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zn(n)}}function $m(t,e){var n=Zn(e.value),r=Zn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lo,qm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ji(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C_=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(t){C_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_i[e]=_i[t]})});function Wm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_i.hasOwnProperty(t)&&_i[t]?(""+e).trim():e+"px"}function Km(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Wm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var N_=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vu(t,e){if(e){if(N_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Du(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mu=null;function Zc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lu=null,us=null,cs=null;function If(t){if(t=lo(t)){if(typeof Lu!="function")throw Error(O(280));var e=t.stateNode;e&&(e=sl(e),Lu(t.stateNode,t.type,e))}}function Gm(t){us?cs?cs.push(t):cs=[t]:us=t}function Qm(){if(us){var t=us,e=cs;if(cs=us=null,If(t),e)for(t=0;t<e.length;t++)If(e[t])}}function Ym(t,e){return t(e)}function Xm(){}var Wl=!1;function Jm(t,e,n){if(Wl)return t(e,n);Wl=!0;try{return Ym(t,e,n)}finally{Wl=!1,(us!==null||cs!==null)&&(Xm(),Qm())}}function Vi(t,e){var n=t.stateNode;if(n===null)return null;var r=sl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Fu=!1;if(yn)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){Fu=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{Fu=!1}function R_(t,e,n,r,s,i,a,l,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(p){this.onError(p)}}var xi=!1,_a=null,xa=!1,Ou=null,P_={onError:function(t){xi=!0,_a=t}};function b_(t,e,n,r,s,i,a,l,c){xi=!1,_a=null,R_.apply(P_,arguments)}function j_(t,e,n,r,s,i,a,l,c){if(b_.apply(this,arguments),xi){if(xi){var f=_a;xi=!1,_a=null}else throw Error(O(198));xa||(xa=!0,Ou=f)}}function Fr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sf(t){if(Fr(t)!==t)throw Error(O(188))}function V_(t){var e=t.alternate;if(!e){if(e=Fr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sf(s),t;if(i===r)return Sf(s),e;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function eg(t){return t=V_(t),t!==null?tg(t):null}function tg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tg(t);if(e!==null)return e;t=t.sibling}return null}var ng=It.unstable_scheduleCallback,Af=It.unstable_cancelCallback,D_=It.unstable_shouldYield,M_=It.unstable_requestPaint,be=It.unstable_now,L_=It.unstable_getCurrentPriorityLevel,eh=It.unstable_ImmediatePriority,rg=It.unstable_UserBlockingPriority,wa=It.unstable_NormalPriority,F_=It.unstable_LowPriority,sg=It.unstable_IdlePriority,el=null,Xt=null;function O_(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(el,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:B_,z_=Math.log,U_=Math.LN2;function B_(t){return t>>>=0,t===0?32:31-(z_(t)/U_|0)|0}var Fo=64,Oo=4194304;function fi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=fi(l):(i&=a,i!==0&&(r=fi(i)))}else a=n&~s,a!==0?r=fi(a):i!==0&&(r=fi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bt(e),s=1<<n,r|=t[n],e&=~s;return r}function $_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Bt(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=$_(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function zu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ig(){var t=Fo;return Fo<<=1,!(Fo&4194240)&&(Fo=64),t}function Kl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bt(e),t[e]=n}function q_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function th(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function og(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ag,nh,lg,ug,cg,Uu=!1,zo=[],Un=null,Bn=null,$n=null,Di=new Map,Mi=new Map,Mn=[],W_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kf(t,e){switch(t){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Di.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(e.pointerId)}}function si(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=lo(e),e!==null&&nh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function K_(t,e,n,r,s){switch(e){case"focusin":return Un=si(Un,t,e,n,r,s),!0;case"dragenter":return Bn=si(Bn,t,e,n,r,s),!0;case"mouseover":return $n=si($n,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Di.set(i,si(Di.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mi.set(i,si(Mi.get(i)||null,t,e,n,r,s)),!0}return!1}function hg(t){var e=wr(t.target);if(e!==null){var n=Fr(e);if(n!==null){if(e=n.tag,e===13){if(e=Zm(n),e!==null){t.blockedOn=e,cg(t.priority,function(){lg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ra(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mu=r,n.target.dispatchEvent(r),Mu=null}else return e=lo(n),e!==null&&nh(e),t.blockedOn=n,!1;e.shift()}return!0}function Cf(t,e,n){ra(t)&&n.delete(e)}function G_(){Uu=!1,Un!==null&&ra(Un)&&(Un=null),Bn!==null&&ra(Bn)&&(Bn=null),$n!==null&&ra($n)&&($n=null),Di.forEach(Cf),Mi.forEach(Cf)}function ii(t,e){t.blockedOn===e&&(t.blockedOn=null,Uu||(Uu=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,G_)))}function Li(t){function e(s){return ii(s,t)}if(0<zo.length){ii(zo[0],t);for(var n=1;n<zo.length;n++){var r=zo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Un!==null&&ii(Un,t),Bn!==null&&ii(Bn,t),$n!==null&&ii($n,t),Di.forEach(e),Mi.forEach(e),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)hg(n),n.blockedOn===null&&Mn.shift()}var hs=In.ReactCurrentBatchConfig,Ta=!0;function Q_(t,e,n,r){var s=he,i=hs.transition;hs.transition=null;try{he=1,rh(t,e,n,r)}finally{he=s,hs.transition=i}}function Y_(t,e,n,r){var s=he,i=hs.transition;hs.transition=null;try{he=4,rh(t,e,n,r)}finally{he=s,hs.transition=i}}function rh(t,e,n,r){if(Ta){var s=Bu(t,e,n,r);if(s===null)ru(t,e,r,Ia,n),kf(t,r);else if(K_(s,t,e,n,r))r.stopPropagation();else if(kf(t,r),e&4&&-1<W_.indexOf(t)){for(;s!==null;){var i=lo(s);if(i!==null&&ag(i),i=Bu(t,e,n,r),i===null&&ru(t,e,r,Ia,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ru(t,e,r,null,n)}}var Ia=null;function Bu(t,e,n,r){if(Ia=null,t=Zc(r),t=wr(t),t!==null)if(e=Fr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Zm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ia=t,null}function dg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L_()){case eh:return 1;case rg:return 4;case wa:case F_:return 16;case sg:return 536870912;default:return 16}default:return 16}}var Fn=null,sh=null,sa=null;function fg(){if(sa)return sa;var t,e=sh,n=e.length,r,s="value"in Fn?Fn.value:Fn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return sa=s.slice(t,1<r?1-r:void 0)}function ia(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uo(){return!0}function Nf(){return!1}function At(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Uo:Nf,this.isPropagationStopped=Nf,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ih=At(Ds),ao=Te({},Ds,{view:0,detail:0}),X_=At(ao),Gl,Ql,oi,tl=Te({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oi&&(oi&&t.type==="mousemove"?(Gl=t.screenX-oi.screenX,Ql=t.screenY-oi.screenY):Ql=Gl=0,oi=t),Gl)},movementY:function(t){return"movementY"in t?t.movementY:Ql}}),Rf=At(tl),J_=Te({},tl,{dataTransfer:0}),Z_=At(J_),e1=Te({},ao,{relatedTarget:0}),Yl=At(e1),t1=Te({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),n1=At(t1),r1=Te({},Ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),s1=At(r1),i1=Te({},Ds,{data:0}),Pf=At(i1),o1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=l1[t])?!!e[t]:!1}function oh(){return u1}var c1=Te({},ao,{key:function(t){if(t.key){var e=o1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oh,charCode:function(t){return t.type==="keypress"?ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h1=At(c1),d1=Te({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=At(d1),f1=Te({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oh}),p1=At(f1),m1=Te({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),g1=At(m1),y1=Te({},tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),v1=At(y1),_1=[9,13,27,32],ah=yn&&"CompositionEvent"in window,wi=null;yn&&"documentMode"in document&&(wi=document.documentMode);var x1=yn&&"TextEvent"in window&&!wi,pg=yn&&(!ah||wi&&8<wi&&11>=wi),jf=String.fromCharCode(32),Vf=!1;function mg(t,e){switch(t){case"keyup":return _1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function w1(t,e){switch(t){case"compositionend":return gg(e);case"keypress":return e.which!==32?null:(Vf=!0,jf);case"textInput":return t=e.data,t===jf&&Vf?null:t;default:return null}}function E1(t,e){if(Jr)return t==="compositionend"||!ah&&mg(t,e)?(t=fg(),sa=sh=Fn=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pg&&e.locale!=="ko"?null:e.data;default:return null}}var T1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!T1[t.type]:e==="textarea"}function yg(t,e,n,r){Gm(r),e=Sa(e,"onChange"),0<e.length&&(n=new ih("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ei=null,Fi=null;function I1(t){Cg(t,0)}function nl(t){var e=ts(t);if(Um(e))return t}function S1(t,e){if(t==="change")return e}var vg=!1;if(yn){var Xl;if(yn){var Jl="oninput"in document;if(!Jl){var Mf=document.createElement("div");Mf.setAttribute("oninput","return;"),Jl=typeof Mf.oninput=="function"}Xl=Jl}else Xl=!1;vg=Xl&&(!document.documentMode||9<document.documentMode)}function Lf(){Ei&&(Ei.detachEvent("onpropertychange",_g),Fi=Ei=null)}function _g(t){if(t.propertyName==="value"&&nl(Fi)){var e=[];yg(e,Fi,t,Zc(t)),Jm(I1,e)}}function A1(t,e,n){t==="focusin"?(Lf(),Ei=e,Fi=n,Ei.attachEvent("onpropertychange",_g)):t==="focusout"&&Lf()}function k1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(Fi)}function C1(t,e){if(t==="click")return nl(e)}function N1(t,e){if(t==="input"||t==="change")return nl(e)}function R1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:R1;function Oi(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Iu.call(e,s)||!Ht(t[s],e[s]))return!1}return!0}function Ff(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Of(t,e){var n=Ff(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ff(n)}}function xg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wg(){for(var t=window,e=va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=va(t.document)}return e}function lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P1(t){var e=wg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xg(n.ownerDocument.documentElement,n)){if(r!==null&&lh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Of(n,i);var a=Of(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var b1=yn&&"documentMode"in document&&11>=document.documentMode,Zr=null,$u=null,Ti=null,Hu=!1;function zf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hu||Zr==null||Zr!==va(r)||(r=Zr,"selectionStart"in r&&lh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ti&&Oi(Ti,r)||(Ti=r,r=Sa($u,"onSelect"),0<r.length&&(e=new ih("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zr)))}function Bo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var es={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionend:Bo("Transition","TransitionEnd")},Zl={},Eg={};yn&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function rl(t){if(Zl[t])return Zl[t];if(!es[t])return t;var e=es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Eg)return Zl[t]=e[n];return t}var Tg=rl("animationend"),Ig=rl("animationiteration"),Sg=rl("animationstart"),Ag=rl("transitionend"),kg=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(t,e){kg.set(t,e),Lr(e,[t])}for(var eu=0;eu<Uf.length;eu++){var tu=Uf[eu],j1=tu.toLowerCase(),V1=tu[0].toUpperCase()+tu.slice(1);sr(j1,"on"+V1)}sr(Tg,"onAnimationEnd");sr(Ig,"onAnimationIteration");sr(Sg,"onAnimationStart");sr("dblclick","onDoubleClick");sr("focusin","onFocus");sr("focusout","onBlur");sr(Ag,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D1=new Set("cancel close invalid load scroll toggle".split(" ").concat(pi));function Bf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,j_(r,e,void 0,t),t.currentTarget=null}function Cg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Bf(s,l,f),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,f=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Bf(s,l,f),i=c}}}if(xa)throw t=Ou,xa=!1,Ou=null,t}function ye(t,e){var n=e[Qu];n===void 0&&(n=e[Qu]=new Set);var r=t+"__bubble";n.has(r)||(Ng(e,t,2,!1),n.add(r))}function nu(t,e,n){var r=0;e&&(r|=4),Ng(n,t,r,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function zi(t){if(!t[$o]){t[$o]=!0,Mm.forEach(function(n){n!=="selectionchange"&&(D1.has(n)||nu(n,!1,t),nu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,nu("selectionchange",!1,e))}}function Ng(t,e,n,r){switch(dg(e)){case 1:var s=Q_;break;case 4:s=Y_;break;default:s=rh}n=s.bind(null,e,n,t),s=void 0,!Fu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ru(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=wr(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Jm(function(){var f=i,p=Zc(n),y=[];e:{var _=kg.get(t);if(_!==void 0){var A=ih,R=t;switch(t){case"keypress":if(ia(n)===0)break e;case"keydown":case"keyup":A=h1;break;case"focusin":R="focus",A=Yl;break;case"focusout":R="blur",A=Yl;break;case"beforeblur":case"afterblur":A=Yl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=p1;break;case Tg:case Ig:case Sg:A=n1;break;case Ag:A=g1;break;case"scroll":A=X_;break;case"wheel":A=v1;break;case"copy":case"cut":case"paste":A=s1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=bf}var P=(e&4)!==0,D=!P&&t==="scroll",k=P?_!==null?_+"Capture":null:_;P=[];for(var T=f,I;T!==null;){I=T;var V=I.stateNode;if(I.tag===5&&V!==null&&(I=V,k!==null&&(V=Vi(T,k),V!=null&&P.push(Ui(T,V,I)))),D)break;T=T.return}0<P.length&&(_=new A(_,R,null,n,p),y.push({event:_,listeners:P}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",_&&n!==Mu&&(R=n.relatedTarget||n.fromElement)&&(wr(R)||R[vn]))break e;if((A||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,A?(R=n.relatedTarget||n.toElement,A=f,R=R?wr(R):null,R!==null&&(D=Fr(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(A=null,R=f),A!==R)){if(P=Rf,V="onMouseLeave",k="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=bf,V="onPointerLeave",k="onPointerEnter",T="pointer"),D=A==null?_:ts(A),I=R==null?_:ts(R),_=new P(V,T+"leave",A,n,p),_.target=D,_.relatedTarget=I,V=null,wr(p)===f&&(P=new P(k,T+"enter",R,n,p),P.target=I,P.relatedTarget=D,V=P),D=V,A&&R)t:{for(P=A,k=R,T=0,I=P;I;I=Wr(I))T++;for(I=0,V=k;V;V=Wr(V))I++;for(;0<T-I;)P=Wr(P),T--;for(;0<I-T;)k=Wr(k),I--;for(;T--;){if(P===k||k!==null&&P===k.alternate)break t;P=Wr(P),k=Wr(k)}P=null}else P=null;A!==null&&$f(y,_,A,P,!1),R!==null&&D!==null&&$f(y,D,R,P,!0)}}e:{if(_=f?ts(f):window,A=_.nodeName&&_.nodeName.toLowerCase(),A==="select"||A==="input"&&_.type==="file")var z=S1;else if(Df(_))if(vg)z=N1;else{z=k1;var B=A1}else(A=_.nodeName)&&A.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(z=C1);if(z&&(z=z(t,f))){yg(y,z,n,p);break e}B&&B(t,_,f),t==="focusout"&&(B=_._wrapperState)&&B.controlled&&_.type==="number"&&Pu(_,"number",_.value)}switch(B=f?ts(f):window,t){case"focusin":(Df(B)||B.contentEditable==="true")&&(Zr=B,$u=f,Ti=null);break;case"focusout":Ti=$u=Zr=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,zf(y,n,p);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":zf(y,n,p)}var E;if(ah)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Jr?mg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(pg&&n.locale!=="ko"&&(Jr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Jr&&(E=fg()):(Fn=p,sh="value"in Fn?Fn.value:Fn.textContent,Jr=!0)),B=Sa(f,g),0<B.length&&(g=new Pf(g,t,null,n,p),y.push({event:g,listeners:B}),E?g.data=E:(E=gg(n),E!==null&&(g.data=E)))),(E=x1?w1(t,n):E1(t,n))&&(f=Sa(f,"onBeforeInput"),0<f.length&&(p=new Pf("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:f}),p.data=E))}Cg(y,e)})}function Ui(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vi(t,n),i!=null&&r.unshift(Ui(t,i,s)),i=Vi(t,e),i!=null&&r.push(Ui(t,i,s))),t=t.return}return r}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $f(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,s?(c=Vi(n,i),c!=null&&a.unshift(Ui(n,c,l))):s||(c=Vi(n,i),c!=null&&a.push(Ui(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var M1=/\r\n?/g,L1=/\u0000|\uFFFD/g;function Hf(t){return(typeof t=="string"?t:""+t).replace(M1,`
`).replace(L1,"")}function Ho(t,e,n){if(e=Hf(e),Hf(t)!==e&&n)throw Error(O(425))}function Aa(){}var qu=null,Wu=null;function Ku(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gu=typeof setTimeout=="function"?setTimeout:void 0,F1=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(t){return qf.resolve(null).then(t).catch(z1)}:Gu;function z1(t){setTimeout(function(){throw t})}function su(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Li(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Li(e)}function Hn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ms,Bi="__reactProps$"+Ms,vn="__reactContainer$"+Ms,Qu="__reactEvents$"+Ms,U1="__reactListeners$"+Ms,B1="__reactHandles$"+Ms;function wr(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wf(t);t!==null;){if(n=t[Yt])return n;t=Wf(t)}return e}t=n,n=t.parentNode}return null}function lo(t){return t=t[Yt]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function sl(t){return t[Bi]||null}var Yu=[],ns=-1;function ir(t){return{current:t}}function _e(t){0>ns||(t.current=Yu[ns],Yu[ns]=null,ns--)}function me(t,e){ns++,Yu[ns]=t.current,t.current=e}var er={},ot=ir(er),mt=ir(!1),Cr=er;function _s(t,e){var n=t.type.contextTypes;if(!n)return er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gt(t){return t=t.childContextTypes,t!=null}function ka(){_e(mt),_e(ot)}function Kf(t,e,n){if(ot.current!==er)throw Error(O(168));me(ot,e),me(mt,n)}function Rg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(O(108,A_(t)||"Unknown",s));return Te({},n,r)}function Ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||er,Cr=ot.current,me(ot,t),me(mt,mt.current),!0}function Gf(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=Rg(t,e,Cr),r.__reactInternalMemoizedMergedChildContext=t,_e(mt),_e(ot),me(ot,t)):_e(mt),me(mt,n)}var dn=null,il=!1,iu=!1;function Pg(t){dn===null?dn=[t]:dn.push(t)}function $1(t){il=!0,Pg(t)}function or(){if(!iu&&dn!==null){iu=!0;var t=0,e=he;try{var n=dn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dn=null,il=!1}catch(s){throw dn!==null&&(dn=dn.slice(t+1)),ng(eh,or),s}finally{he=e,iu=!1}}return null}var rs=[],ss=0,Na=null,Ra=0,kt=[],Ct=0,Nr=null,fn=1,pn="";function vr(t,e){rs[ss++]=Ra,rs[ss++]=Na,Na=t,Ra=e}function bg(t,e,n){kt[Ct++]=fn,kt[Ct++]=pn,kt[Ct++]=Nr,Nr=t;var r=fn;t=pn;var s=32-Bt(r)-1;r&=~(1<<s),n+=1;var i=32-Bt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,fn=1<<32-Bt(e)+s|n<<s|r,pn=i+t}else fn=1<<i|n<<s|r,pn=t}function uh(t){t.return!==null&&(vr(t,1),bg(t,1,0))}function ch(t){for(;t===Na;)Na=rs[--ss],rs[ss]=null,Ra=rs[--ss],rs[ss]=null;for(;t===Nr;)Nr=kt[--Ct],kt[Ct]=null,pn=kt[--Ct],kt[Ct]=null,fn=kt[--Ct],kt[Ct]=null}var Tt=null,Et=null,xe=!1,zt=null;function jg(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,Et=Hn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Nr!==null?{id:fn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tt=t,Et=null,!0):!1;default:return!1}}function Xu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ju(t){if(xe){var e=Et;if(e){var n=e;if(!Qf(t,e)){if(Xu(t))throw Error(O(418));e=Hn(n.nextSibling);var r=Tt;e&&Qf(t,e)?jg(r,n):(t.flags=t.flags&-4097|2,xe=!1,Tt=t)}}else{if(Xu(t))throw Error(O(418));t.flags=t.flags&-4097|2,xe=!1,Tt=t}}}function Yf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function qo(t){if(t!==Tt)return!1;if(!xe)return Yf(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ku(t.type,t.memoizedProps)),e&&(e=Et)){if(Xu(t))throw Vg(),Error(O(418));for(;e;)jg(t,e),e=Hn(e.nextSibling)}if(Yf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Hn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=Tt?Hn(t.stateNode.nextSibling):null;return!0}function Vg(){for(var t=Et;t;)t=Hn(t.nextSibling)}function xs(){Et=Tt=null,xe=!1}function hh(t){zt===null?zt=[t]:zt.push(t)}var H1=In.ReactCurrentBatchConfig;function ai(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Wo(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xf(t){var e=t._init;return e(t._payload)}function Dg(t){function e(k,T){if(t){var I=k.deletions;I===null?(k.deletions=[T],k.flags|=16):I.push(T)}}function n(k,T){if(!t)return null;for(;T!==null;)e(k,T),T=T.sibling;return null}function r(k,T){for(k=new Map;T!==null;)T.key!==null?k.set(T.key,T):k.set(T.index,T),T=T.sibling;return k}function s(k,T){return k=Gn(k,T),k.index=0,k.sibling=null,k}function i(k,T,I){return k.index=I,t?(I=k.alternate,I!==null?(I=I.index,I<T?(k.flags|=2,T):I):(k.flags|=2,T)):(k.flags|=1048576,T)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function l(k,T,I,V){return T===null||T.tag!==6?(T=du(I,k.mode,V),T.return=k,T):(T=s(T,I),T.return=k,T)}function c(k,T,I,V){var z=I.type;return z===Xr?p(k,T,I.props.children,V,I.key):T!==null&&(T.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Vn&&Xf(z)===T.type)?(V=s(T,I.props),V.ref=ai(k,T,I),V.return=k,V):(V=da(I.type,I.key,I.props,null,k.mode,V),V.ref=ai(k,T,I),V.return=k,V)}function f(k,T,I,V){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=fu(I,k.mode,V),T.return=k,T):(T=s(T,I.children||[]),T.return=k,T)}function p(k,T,I,V,z){return T===null||T.tag!==7?(T=Ar(I,k.mode,V,z),T.return=k,T):(T=s(T,I),T.return=k,T)}function y(k,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=du(""+T,k.mode,I),T.return=k,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Do:return I=da(T.type,T.key,T.props,null,k.mode,I),I.ref=ai(k,null,T),I.return=k,I;case Yr:return T=fu(T,k.mode,I),T.return=k,T;case Vn:var V=T._init;return y(k,V(T._payload),I)}if(di(T)||ni(T))return T=Ar(T,k.mode,I,null),T.return=k,T;Wo(k,T)}return null}function _(k,T,I,V){var z=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:l(k,T,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Do:return I.key===z?c(k,T,I,V):null;case Yr:return I.key===z?f(k,T,I,V):null;case Vn:return z=I._init,_(k,T,z(I._payload),V)}if(di(I)||ni(I))return z!==null?null:p(k,T,I,V,null);Wo(k,I)}return null}function A(k,T,I,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return k=k.get(I)||null,l(T,k,""+V,z);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Do:return k=k.get(V.key===null?I:V.key)||null,c(T,k,V,z);case Yr:return k=k.get(V.key===null?I:V.key)||null,f(T,k,V,z);case Vn:var B=V._init;return A(k,T,I,B(V._payload),z)}if(di(V)||ni(V))return k=k.get(I)||null,p(T,k,V,z,null);Wo(T,V)}return null}function R(k,T,I,V){for(var z=null,B=null,E=T,g=T=0,w=null;E!==null&&g<I.length;g++){E.index>g?(w=E,E=null):w=E.sibling;var S=_(k,E,I[g],V);if(S===null){E===null&&(E=w);break}t&&E&&S.alternate===null&&e(k,E),T=i(S,T,g),B===null?z=S:B.sibling=S,B=S,E=w}if(g===I.length)return n(k,E),xe&&vr(k,g),z;if(E===null){for(;g<I.length;g++)E=y(k,I[g],V),E!==null&&(T=i(E,T,g),B===null?z=E:B.sibling=E,B=E);return xe&&vr(k,g),z}for(E=r(k,E);g<I.length;g++)w=A(E,k,g,I[g],V),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?g:w.key),T=i(w,T,g),B===null?z=w:B.sibling=w,B=w);return t&&E.forEach(function(C){return e(k,C)}),xe&&vr(k,g),z}function P(k,T,I,V){var z=ni(I);if(typeof z!="function")throw Error(O(150));if(I=z.call(I),I==null)throw Error(O(151));for(var B=z=null,E=T,g=T=0,w=null,S=I.next();E!==null&&!S.done;g++,S=I.next()){E.index>g?(w=E,E=null):w=E.sibling;var C=_(k,E,S.value,V);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(k,E),T=i(C,T,g),B===null?z=C:B.sibling=C,B=C,E=w}if(S.done)return n(k,E),xe&&vr(k,g),z;if(E===null){for(;!S.done;g++,S=I.next())S=y(k,S.value,V),S!==null&&(T=i(S,T,g),B===null?z=S:B.sibling=S,B=S);return xe&&vr(k,g),z}for(E=r(k,E);!S.done;g++,S=I.next())S=A(E,k,g,S.value,V),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?g:S.key),T=i(S,T,g),B===null?z=S:B.sibling=S,B=S);return t&&E.forEach(function(v){return e(k,v)}),xe&&vr(k,g),z}function D(k,T,I,V){if(typeof I=="object"&&I!==null&&I.type===Xr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Do:e:{for(var z=I.key,B=T;B!==null;){if(B.key===z){if(z=I.type,z===Xr){if(B.tag===7){n(k,B.sibling),T=s(B,I.props.children),T.return=k,k=T;break e}}else if(B.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Vn&&Xf(z)===B.type){n(k,B.sibling),T=s(B,I.props),T.ref=ai(k,B,I),T.return=k,k=T;break e}n(k,B);break}else e(k,B);B=B.sibling}I.type===Xr?(T=Ar(I.props.children,k.mode,V,I.key),T.return=k,k=T):(V=da(I.type,I.key,I.props,null,k.mode,V),V.ref=ai(k,T,I),V.return=k,k=V)}return a(k);case Yr:e:{for(B=I.key;T!==null;){if(T.key===B)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){n(k,T.sibling),T=s(T,I.children||[]),T.return=k,k=T;break e}else{n(k,T);break}else e(k,T);T=T.sibling}T=fu(I,k.mode,V),T.return=k,k=T}return a(k);case Vn:return B=I._init,D(k,T,B(I._payload),V)}if(di(I))return R(k,T,I,V);if(ni(I))return P(k,T,I,V);Wo(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(n(k,T.sibling),T=s(T,I),T.return=k,k=T):(n(k,T),T=du(I,k.mode,V),T.return=k,k=T),a(k)):n(k,T)}return D}var ws=Dg(!0),Mg=Dg(!1),Pa=ir(null),ba=null,is=null,dh=null;function fh(){dh=is=ba=null}function ph(t){var e=Pa.current;_e(Pa),t._currentValue=e}function Zu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ds(t,e){ba=t,dh=is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function bt(t){var e=t._currentValue;if(dh!==t)if(t={context:t,memoizedValue:e,next:null},is===null){if(ba===null)throw Error(O(308));is=t,ba.dependencies={lanes:0,firstContext:t}}else is=is.next=t;return e}var Er=null;function mh(t){Er===null?Er=[t]:Er.push(t)}function Lg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mh(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function gh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,mh(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function oa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,th(t,n)}}function Jf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ja(t,e,n,r){var s=t.updateQueue;Dn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,f=c.next;c.next=null,a===null?i=f:a.next=f,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=c))}if(i!==null){var y=s.baseState;a=0,p=f=c=null,l=i;do{var _=l.lane,A=l.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,P=l;switch(_=e,A=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){y=R.call(A,y,_);break e}y=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,_=typeof R=="function"?R.call(A,y,_):R,_==null)break e;y=Te({},y,_);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[l]:_.push(l))}else A={eventTime:A,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=A,c=y):p=p.next=A,a|=_;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(1);if(p===null&&(c=y),s.baseState=c,s.firstBaseUpdate=f,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Pr|=a,t.lanes=a,t.memoizedState=y}}function Zf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var uo={},Jt=ir(uo),$i=ir(uo),Hi=ir(uo);function Tr(t){if(t===uo)throw Error(O(174));return t}function yh(t,e){switch(me(Hi,e),me($i,t),me(Jt,uo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ju(e,t)}_e(Jt),me(Jt,e)}function Es(){_e(Jt),_e($i),_e(Hi)}function Og(t){Tr(Hi.current);var e=Tr(Jt.current),n=ju(e,t.type);e!==n&&(me($i,t),me(Jt,n))}function vh(t){$i.current===t&&(_e(Jt),_e($i))}var we=ir(0);function Va(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ou=[];function _h(){for(var t=0;t<ou.length;t++)ou[t]._workInProgressVersionPrimary=null;ou.length=0}var aa=In.ReactCurrentDispatcher,au=In.ReactCurrentBatchConfig,Rr=0,Ee=null,Le=null,Be=null,Da=!1,Ii=!1,qi=0,q1=0;function et(){throw Error(O(321))}function xh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function wh(t,e,n,r,s,i){if(Rr=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,aa.current=t===null||t.memoizedState===null?Q1:Y1,t=n(r,s),Ii){i=0;do{if(Ii=!1,qi=0,25<=i)throw Error(O(301));i+=1,Be=Le=null,e.updateQueue=null,aa.current=X1,t=n(r,s)}while(Ii)}if(aa.current=Ma,e=Le!==null&&Le.next!==null,Rr=0,Be=Le=Ee=null,Da=!1,e)throw Error(O(300));return t}function Eh(){var t=qi!==0;return qi=0,t}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ee.memoizedState=Be=t:Be=Be.next=t,Be}function jt(){if(Le===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?Ee.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(O(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?Ee.memoizedState=Be=t:Be=Be.next=t}return Be}function Wi(t,e){return typeof e=="function"?e(t):e}function lu(t){var e=jt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,f=i;do{var p=f.lane;if((Rr&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var y={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=y,a=r):c=c.next=y,Ee.lanes|=p,Pr|=p}f=f.next}while(f!==null&&f!==i);c===null?a=r:c.next=l,Ht(r,e.memoizedState)||(pt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,Pr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uu(t){var e=jt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ht(i,e.memoizedState)||(pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function zg(){}function Ug(t,e){var n=Ee,r=jt(),s=e(),i=!Ht(r.memoizedState,s);if(i&&(r.memoizedState=s,pt=!0),r=r.queue,Th(Hg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Ki(9,$g.bind(null,n,r,s,e),void 0,null),$e===null)throw Error(O(349));Rr&30||Bg(n,e,s)}return s}function Bg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $g(t,e,n,r){e.value=n,e.getSnapshot=r,qg(e)&&Wg(t)}function Hg(t,e,n){return n(function(){qg(e)&&Wg(t)})}function qg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function Wg(t){var e=_n(t,1);e!==null&&$t(e,t,1,-1)}function ep(t){var e=Qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},e.queue=t,t=t.dispatch=G1.bind(null,Ee,t),[e.memoizedState,t]}function Ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kg(){return jt().memoizedState}function la(t,e,n,r){var s=Qt();Ee.flags|=t,s.memoizedState=Ki(1|e,n,void 0,r===void 0?null:r)}function ol(t,e,n,r){var s=jt();r=r===void 0?null:r;var i=void 0;if(Le!==null){var a=Le.memoizedState;if(i=a.destroy,r!==null&&xh(r,a.deps)){s.memoizedState=Ki(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=Ki(1|e,n,i,r)}function tp(t,e){return la(8390656,8,t,e)}function Th(t,e){return ol(2048,8,t,e)}function Gg(t,e){return ol(4,2,t,e)}function Qg(t,e){return ol(4,4,t,e)}function Yg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xg(t,e,n){return n=n!=null?n.concat([t]):null,ol(4,4,Yg.bind(null,e,t),n)}function Ih(){}function Jg(t,e){var n=jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zg(t,e){var n=jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function e0(t,e,n){return Rr&21?(Ht(n,e)||(n=ig(),Ee.lanes|=n,Pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function W1(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=au.transition;au.transition={};try{t(!1),e()}finally{he=n,au.transition=r}}function t0(){return jt().memoizedState}function K1(t,e,n){var r=Kn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},n0(t))r0(e,n);else if(n=Lg(t,e,n,r),n!==null){var s=ct();$t(n,t,r,s),s0(n,e,r)}}function G1(t,e,n){var r=Kn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(n0(t))r0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,a)){var c=e.interleaved;c===null?(s.next=s,mh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Lg(t,e,s,r),n!==null&&(s=ct(),$t(n,t,r,s),s0(n,e,r))}}function n0(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function r0(t,e){Ii=Da=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,th(t,n)}}var Ma={readContext:bt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Q1={readContext:bt,useCallback:function(t,e){return Qt().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:tp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,la(4194308,4,Yg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return la(4194308,4,t,e)},useInsertionEffect:function(t,e){return la(4,2,t,e)},useMemo:function(t,e){var n=Qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=K1.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=Qt();return t={current:t},e.memoizedState=t},useState:ep,useDebugValue:Ih,useDeferredValue:function(t){return Qt().memoizedState=t},useTransition:function(){var t=ep(!1),e=t[0];return t=W1.bind(null,t[1]),Qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=Qt();if(xe){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),$e===null)throw Error(O(349));Rr&30||Bg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tp(Hg.bind(null,r,i,t),[t]),r.flags|=2048,Ki(9,$g.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qt(),e=$e.identifierPrefix;if(xe){var n=pn,r=fn;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=q1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y1={readContext:bt,useCallback:Jg,useContext:bt,useEffect:Th,useImperativeHandle:Xg,useInsertionEffect:Gg,useLayoutEffect:Qg,useMemo:Zg,useReducer:lu,useRef:Kg,useState:function(){return lu(Wi)},useDebugValue:Ih,useDeferredValue:function(t){var e=jt();return e0(e,Le.memoizedState,t)},useTransition:function(){var t=lu(Wi)[0],e=jt().memoizedState;return[t,e]},useMutableSource:zg,useSyncExternalStore:Ug,useId:t0,unstable_isNewReconciler:!1},X1={readContext:bt,useCallback:Jg,useContext:bt,useEffect:Th,useImperativeHandle:Xg,useInsertionEffect:Gg,useLayoutEffect:Qg,useMemo:Zg,useReducer:uu,useRef:Kg,useState:function(){return uu(Wi)},useDebugValue:Ih,useDeferredValue:function(t){var e=jt();return Le===null?e.memoizedState=t:e0(e,Le.memoizedState,t)},useTransition:function(){var t=uu(Wi)[0],e=jt().memoizedState;return[t,e]},useMutableSource:zg,useSyncExternalStore:Ug,useId:t0,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ec(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var al={isMounted:function(t){return(t=t._reactInternals)?Fr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Kn(t),i=mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=qn(t,i,s),e!==null&&($t(e,t,s,r),oa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Kn(t),i=mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=qn(t,i,s),e!==null&&($t(e,t,s,r),oa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=Kn(t),s=mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=qn(t,s,r),e!==null&&($t(e,t,r,n),oa(e,t,r))}};function np(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Oi(n,r)||!Oi(s,i):!0}function i0(t,e,n){var r=!1,s=er,i=e.contextType;return typeof i=="object"&&i!==null?i=bt(i):(s=gt(e)?Cr:ot.current,r=e.contextTypes,i=(r=r!=null)?_s(t,s):er),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=al,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&al.enqueueReplaceState(e,e.state,null)}function tc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=bt(i):(i=gt(e)?Cr:ot.current,s.context=_s(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ec(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&al.enqueueReplaceState(s,s.state,null),ja(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ts(t,e){try{var n="",r=e;do n+=S_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function cu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var J1=typeof WeakMap=="function"?WeakMap:Map;function o0(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fa||(Fa=!0,dc=r),nc(t,e)},n}function a0(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nc(t,e),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function sp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new J1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dx.bind(null,t,e,n),e.then(t,t))}function ip(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function op(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,qn(n,e,1))),n.lanes|=1),t)}var Z1=In.ReactCurrentOwner,pt=!1;function ut(t,e,n,r){e.child=t===null?Mg(e,null,n,r):ws(e,t.child,n,r)}function ap(t,e,n,r,s){n=n.render;var i=e.ref;return ds(e,s),r=wh(t,e,n,r,i,s),n=Eh(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xn(t,e,s)):(xe&&n&&uh(e),e.flags|=1,ut(t,e,r,s),e.child)}function lp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!bh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,l0(t,e,i,r,s)):(t=da(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oi,n(a,r)&&t.ref===e.ref)return xn(t,e,s)}return e.flags|=1,t=Gn(i,r),t.ref=e.ref,t.return=e,e.child=t}function l0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oi(i,r)&&t.ref===e.ref)if(pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,xn(t,e,s)}return rc(t,e,n,r,s)}function u0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(as,wt),wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(as,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me(as,wt),wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,me(as,wt),wt|=r;return ut(t,e,s,n),e.child}function c0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rc(t,e,n,r,s){var i=gt(n)?Cr:ot.current;return i=_s(e,i),ds(e,s),n=wh(t,e,n,r,i,s),r=Eh(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xn(t,e,s)):(xe&&r&&uh(e),e.flags|=1,ut(t,e,n,s),e.child)}function up(t,e,n,r,s){if(gt(n)){var i=!0;Ca(e)}else i=!1;if(ds(e,s),e.stateNode===null)ua(t,e),i0(e,n,r),tc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=bt(f):(f=gt(n)?Cr:ot.current,f=_s(e,f));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==f)&&rp(e,a,r,f),Dn=!1;var _=e.memoizedState;a.state=_,ja(e,r,a,s),c=e.memoizedState,l!==r||_!==c||mt.current||Dn?(typeof p=="function"&&(ec(e,n,p,r),c=e.memoizedState),(l=Dn||np(e,n,l,r,_,c,f))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Fg(t,e),l=e.memoizedProps,f=e.type===e.elementType?l:Ft(e.type,l),a.props=f,y=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=bt(c):(c=gt(n)?Cr:ot.current,c=_s(e,c));var A=n.getDerivedStateFromProps;(p=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||_!==c)&&rp(e,a,r,c),Dn=!1,_=e.memoizedState,a.state=_,ja(e,r,a,s);var R=e.memoizedState;l!==y||_!==R||mt.current||Dn?(typeof A=="function"&&(ec(e,n,A,r),R=e.memoizedState),(f=Dn||np(e,n,f,r,_,R,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,R,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,R,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),a.props=r,a.state=R,a.context=c,r=f):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return sc(t,e,n,r,i,s)}function sc(t,e,n,r,s,i){c0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Gf(e,n,!1),xn(t,e,i);r=e.stateNode,Z1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ws(e,t.child,null,i),e.child=ws(e,null,l,i)):ut(t,e,l,i),e.memoizedState=r.state,s&&Gf(e,n,!0),e.child}function h0(t){var e=t.stateNode;e.pendingContext?Kf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kf(t,e.context,!1),yh(t,e.containerInfo)}function cp(t,e,n,r,s){return xs(),hh(s),e.flags|=256,ut(t,e,n,r),e.child}var ic={dehydrated:null,treeContext:null,retryLane:0};function oc(t){return{baseLanes:t,cachePool:null,transitions:null}}function d0(t,e,n){var r=e.pendingProps,s=we.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),me(we,s&1),t===null)return Ju(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=cl(a,r,0,null),t=Ar(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=oc(n),e.memoizedState=ic,t):Sh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ex(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Gn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Gn(l,i):(i=Ar(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?oc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=ic,r}return i=t.child,t=i.sibling,r=Gn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sh(t,e){return e=cl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ko(t,e,n,r){return r!==null&&hh(r),ws(e,t.child,null,n),t=Sh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ex(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=cu(Error(O(422))),Ko(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cl({mode:"visible",children:r.children},s,0,null),i=Ar(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ws(e,t.child,null,a),e.child.memoizedState=oc(a),e.memoizedState=ic,i);if(!(e.mode&1))return Ko(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(O(419)),r=cu(i,r,void 0),Ko(t,e,a,r)}if(l=(a&t.childLanes)!==0,pt||l){if(r=$e,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),$t(r,t,s,-1))}return Ph(),r=cu(Error(O(421))),Ko(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Et=Hn(s.nextSibling),Tt=e,xe=!0,zt=null,t!==null&&(kt[Ct++]=fn,kt[Ct++]=pn,kt[Ct++]=Nr,fn=t.id,pn=t.overflow,Nr=e),e=Sh(e,r.children),e.flags|=4096,e)}function hp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zu(t.return,e,n)}function hu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function f0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ut(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hp(t,n,e);else if(t.tag===19)hp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Va(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Va(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hu(e,!0,n,null,i);break;case"together":hu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ua(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tx(t,e,n){switch(e.tag){case 3:h0(e),xs();break;case 5:Og(e);break;case 1:gt(e.type)&&Ca(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;me(Pa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?d0(t,e,n):(me(we,we.current&1),t=xn(t,e,n),t!==null?t.sibling:null);me(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return f0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,u0(t,e,n)}return xn(t,e,n)}var p0,ac,m0,g0;p0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ac=function(){};m0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Tr(Jt.current);var i=null;switch(n){case"input":s=Nu(t,s),r=Nu(t,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=bu(t,s),r=bu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Aa)}Vu(n,r);var a;n=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var l=s[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(bi.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in r){var c=r[f];if(l=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(bi.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&ye("scroll",t),i||l===c||(i=[])):(i=i||[]).push(f,c))}n&&(i=i||[]).push("style",n);var f=i;(e.updateQueue=f)&&(e.flags|=4)}};g0=function(t,e,n,r){n!==r&&(e.flags|=4)};function li(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nx(t,e,n){var r=e.pendingProps;switch(ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return gt(e.type)&&ka(),tt(e),null;case 3:return r=e.stateNode,Es(),_e(mt),_e(ot),_h(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(mc(zt),zt=null))),ac(t,e),tt(e),null;case 5:vh(e);var s=Tr(Hi.current);if(n=e.type,t!==null&&e.stateNode!=null)m0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return tt(e),null}if(t=Tr(Jt.current),qo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yt]=e,r[Bi]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(s=0;s<pi.length;s++)ye(pi[s],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":xf(r,i),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ye("invalid",r);break;case"textarea":Ef(r,i),ye("invalid",r)}Vu(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ho(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ho(r.textContent,l,t),s=["children",""+l]):bi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ye("scroll",r)}switch(n){case"input":Mo(r),wf(r,i,!0);break;case"textarea":Mo(r),Tf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Aa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Yt]=e,t[Bi]=r,p0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Du(n,r),n){case"dialog":ye("cancel",t),ye("close",t),s=r;break;case"iframe":case"object":case"embed":ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<pi.length;s++)ye(pi[s],t);s=r;break;case"source":ye("error",t),s=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),s=r;break;case"details":ye("toggle",t),s=r;break;case"input":xf(t,r),s=Nu(t,r),ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),ye("invalid",t);break;case"textarea":Ef(t,r),s=bu(t,r),ye("invalid",t);break;default:s=r}Vu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Km(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qm(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ji(t,c):typeof c=="number"&&ji(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ye("scroll",t):c!=null&&Qc(t,i,c,a))}switch(n){case"input":Mo(t),wf(t,r,!1);break;case"textarea":Mo(t),Tf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ls(t,!!r.multiple,i,!1):r.defaultValue!=null&&ls(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Aa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(t&&e.stateNode!=null)g0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Tr(Hi.current),Tr(Jt.current),qo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(i=r.nodeValue!==n)&&(t=Tt,t!==null))switch(t.tag){case 3:Ho(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ho(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return tt(e),null;case 13:if(_e(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Et!==null&&e.mode&1&&!(e.flags&128))Vg(),xs(),e.flags|=98560,i=!1;else if(i=qo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Yt]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),i=!1}else zt!==null&&(mc(zt),zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Fe===0&&(Fe=3):Ph())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return Es(),ac(t,e),t===null&&zi(e.stateNode.containerInfo),tt(e),null;case 10:return ph(e.type._context),tt(e),null;case 17:return gt(e.type)&&ka(),tt(e),null;case 19:if(_e(we),i=e.memoizedState,i===null)return tt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)li(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Va(t),a!==null){for(e.flags|=128,li(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&be()>Is&&(e.flags|=128,r=!0,li(i,!1),e.lanes=4194304)}else{if(!r)if(t=Va(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),li(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!xe)return tt(e),null}else 2*be()-i.renderingStartTime>Is&&n!==1073741824&&(e.flags|=128,r=!0,li(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=be(),e.sibling=null,n=we.current,me(we,r?n&1|2:n&1),e):(tt(e),null);case 22:case 23:return Rh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function rx(t,e){switch(ch(e),e.tag){case 1:return gt(e.type)&&ka(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(),_e(mt),_e(ot),_h(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vh(e),null;case 13:if(_e(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(we),null;case 4:return Es(),null;case 10:return ph(e.type._context),null;case 22:case 23:return Rh(),null;case 24:return null;default:return null}}var Go=!1,st=!1,sx=typeof WeakSet=="function"?WeakSet:Set,$=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function lc(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var dp=!1;function ix(t,e){if(qu=Ta,t=wg(),lh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,f=0,p=0,y=t,_=null;t:for(;;){for(var A;y!==n||s!==0&&y.nodeType!==3||(l=a+s),y!==i||r!==0&&y.nodeType!==3||(c=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(A=y.firstChild)!==null;)_=y,y=A;for(;;){if(y===t)break t;if(_===n&&++f===s&&(l=a),_===i&&++p===r&&(c=a),(A=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=A}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wu={focusedElem:t,selectionRange:n},Ta=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,D=R.memoizedState,k=e.stateNode,T=k.getSnapshotBeforeUpdate(e.elementType===e.type?P:Ft(e.type,P),D);k.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(V){Ce(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return R=dp,dp=!1,R}function Si(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&lc(e,n,i)}s=s.next}while(s!==r)}}function ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y0(t){var e=t.alternate;e!==null&&(t.alternate=null,y0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[Bi],delete e[Qu],delete e[U1],delete e[B1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v0(t){return t.tag===5||t.tag===3||t.tag===4}function fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Aa));else if(r!==4&&(t=t.child,t!==null))for(cc(t,e,n),t=t.sibling;t!==null;)cc(t,e,n),t=t.sibling}function hc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hc(t,e,n),t=t.sibling;t!==null;)hc(t,e,n),t=t.sibling}var qe=null,Ot=!1;function jn(t,e,n){for(n=n.child;n!==null;)_0(t,e,n),n=n.sibling}function _0(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(el,n)}catch{}switch(n.tag){case 5:st||os(n,e);case 6:var r=qe,s=Ot;qe=null,jn(t,e,n),qe=r,Ot=s,qe!==null&&(Ot?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Ot?(t=qe,n=n.stateNode,t.nodeType===8?su(t.parentNode,n):t.nodeType===1&&su(t,n),Li(t)):su(qe,n.stateNode));break;case 4:r=qe,s=Ot,qe=n.stateNode.containerInfo,Ot=!0,jn(t,e,n),qe=r,Ot=s;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&lc(n,e,a),s=s.next}while(s!==r)}jn(t,e,n);break;case 1:if(!st&&(os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ce(n,e,l)}jn(t,e,n);break;case 21:jn(t,e,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,jn(t,e,n),st=r):jn(t,e,n);break;default:jn(t,e,n)}}function pp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sx),e.forEach(function(r){var s=px.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Ot=!1;break e;case 3:qe=l.stateNode.containerInfo,Ot=!0;break e;case 4:qe=l.stateNode.containerInfo,Ot=!0;break e}l=l.return}if(qe===null)throw Error(O(160));_0(i,a,s),qe=null,Ot=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(f){Ce(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)x0(e,t),e=e.sibling}function x0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Gt(t),r&4){try{Si(3,t,t.return),ll(3,t)}catch(P){Ce(t,t.return,P)}try{Si(5,t,t.return)}catch(P){Ce(t,t.return,P)}}break;case 1:Lt(e,t),Gt(t),r&512&&n!==null&&os(n,n.return);break;case 5:if(Lt(e,t),Gt(t),r&512&&n!==null&&os(n,n.return),t.flags&32){var s=t.stateNode;try{ji(s,"")}catch(P){Ce(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Bm(s,i),Du(l,a);var f=Du(l,i);for(a=0;a<c.length;a+=2){var p=c[a],y=c[a+1];p==="style"?Km(s,y):p==="dangerouslySetInnerHTML"?qm(s,y):p==="children"?ji(s,y):Qc(s,p,y,f)}switch(l){case"input":Ru(s,i);break;case"textarea":$m(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?ls(s,!!i.multiple,A,!1):_!==!!i.multiple&&(i.defaultValue!=null?ls(s,!!i.multiple,i.defaultValue,!0):ls(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bi]=i}catch(P){Ce(t,t.return,P)}}break;case 6:if(Lt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Ce(t,t.return,P)}}break;case 3:if(Lt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Li(e.containerInfo)}catch(P){Ce(t,t.return,P)}break;case 4:Lt(e,t),Gt(t);break;case 13:Lt(e,t),Gt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ch=be())),r&4&&pp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(st=(f=st)||p,Lt(e,t),st=f):Lt(e,t),Gt(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!p&&t.mode&1)for($=t,p=t.child;p!==null;){for(y=$=p;$!==null;){switch(_=$,A=_.child,_.tag){case 0:case 11:case 14:case 15:Si(4,_,_.return);break;case 1:os(_,_.return);var R=_.stateNode;if(typeof R.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){Ce(r,n,P)}}break;case 5:os(_,_.return);break;case 22:if(_.memoizedState!==null){gp(y);continue}}A!==null?(A.return=_,$=A):gp(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{s=y.stateNode,f?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,c=y.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wm("display",a))}catch(P){Ce(t,t.return,P)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(P){Ce(t,t.return,P)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Lt(e,t),Gt(t),r&4&&pp(t);break;case 21:break;default:Lt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v0(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ji(s,""),r.flags&=-33);var i=fp(t);hc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=fp(t);cc(t,l,a);break;default:throw Error(O(161))}}catch(c){Ce(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ox(t,e,n){$=t,w0(t)}function w0(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Go;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||st;l=Go;var f=st;if(Go=a,(st=c)&&!f)for($=s;$!==null;)a=$,c=a.child,a.tag===22&&a.memoizedState!==null?yp(s):c!==null?(c.return=a,$=c):yp(s);for(;i!==null;)$=i,w0(i),i=i.sibling;$=s,Go=l,st=f}mp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):mp(t)}}function mp(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!st)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zf(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zf(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&Li(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}st||e.flags&512&&uc(e)}catch(_){Ce(e,e.return,_)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function gp(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function yp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ll(4,e)}catch(c){Ce(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ce(e,s,c)}}var i=e.return;try{uc(e)}catch(c){Ce(e,i,c)}break;case 5:var a=e.return;try{uc(e)}catch(c){Ce(e,a,c)}}}catch(c){Ce(e,e.return,c)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var ax=Math.ceil,La=In.ReactCurrentDispatcher,Ah=In.ReactCurrentOwner,Pt=In.ReactCurrentBatchConfig,ae=0,$e=null,De=null,Ge=0,wt=0,as=ir(0),Fe=0,Gi=null,Pr=0,ul=0,kh=0,Ai=null,ft=null,Ch=0,Is=1/0,hn=null,Fa=!1,dc=null,Wn=null,Qo=!1,On=null,Oa=0,ki=0,fc=null,ca=-1,ha=0;function ct(){return ae&6?be():ca!==-1?ca:ca=be()}function Kn(t){return t.mode&1?ae&2&&Ge!==0?Ge&-Ge:H1.transition!==null?(ha===0&&(ha=ig()),ha):(t=he,t!==0||(t=window.event,t=t===void 0?16:dg(t.type)),t):1}function $t(t,e,n,r){if(50<ki)throw ki=0,fc=null,Error(O(185));oo(t,n,r),(!(ae&2)||t!==$e)&&(t===$e&&(!(ae&2)&&(ul|=n),Fe===4&&Ln(t,Ge)),yt(t,r),n===1&&ae===0&&!(e.mode&1)&&(Is=be()+500,il&&or()))}function yt(t,e){var n=t.callbackNode;H_(t,e);var r=Ea(t,t===$e?Ge:0);if(r===0)n!==null&&Af(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Af(n),e===1)t.tag===0?$1(vp.bind(null,t)):Pg(vp.bind(null,t)),O1(function(){!(ae&6)&&or()}),n=null;else{switch(og(r)){case 1:n=eh;break;case 4:n=rg;break;case 16:n=wa;break;case 536870912:n=sg;break;default:n=wa}n=N0(n,E0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E0(t,e){if(ca=-1,ha=0,ae&6)throw Error(O(327));var n=t.callbackNode;if(fs()&&t.callbackNode!==n)return null;var r=Ea(t,t===$e?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=za(t,r);else{e=r;var s=ae;ae|=2;var i=I0();($e!==t||Ge!==e)&&(hn=null,Is=be()+500,Sr(t,e));do try{cx();break}catch(l){T0(t,l)}while(1);fh(),La.current=i,ae=s,De!==null?e=0:($e=null,Ge=0,e=Fe)}if(e!==0){if(e===2&&(s=zu(t),s!==0&&(r=s,e=pc(t,s))),e===1)throw n=Gi,Sr(t,0),Ln(t,r),yt(t,be()),n;if(e===6)Ln(t,r);else{if(s=t.current.alternate,!(r&30)&&!lx(s)&&(e=za(t,r),e===2&&(i=zu(t),i!==0&&(r=i,e=pc(t,i))),e===1))throw n=Gi,Sr(t,0),Ln(t,r),yt(t,be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:_r(t,ft,hn);break;case 3:if(Ln(t,r),(r&130023424)===r&&(e=Ch+500-be(),10<e)){if(Ea(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Gu(_r.bind(null,t,ft,hn),e);break}_r(t,ft,hn);break;case 4:if(Ln(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Bt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ax(r/1960))-r,10<r){t.timeoutHandle=Gu(_r.bind(null,t,ft,hn),r);break}_r(t,ft,hn);break;case 5:_r(t,ft,hn);break;default:throw Error(O(329))}}}return yt(t,be()),t.callbackNode===n?E0.bind(null,t):null}function pc(t,e){var n=Ai;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=za(t,e),t!==2&&(e=ft,ft=n,e!==null&&mc(e)),t}function mc(t){ft===null?ft=t:ft.push.apply(ft,t)}function lx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ht(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ln(t,e){for(e&=~kh,e&=~ul,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bt(e),r=1<<n;t[n]=-1,e&=~r}}function vp(t){if(ae&6)throw Error(O(327));fs();var e=Ea(t,0);if(!(e&1))return yt(t,be()),null;var n=za(t,e);if(t.tag!==0&&n===2){var r=zu(t);r!==0&&(e=r,n=pc(t,r))}if(n===1)throw n=Gi,Sr(t,0),Ln(t,e),yt(t,be()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,ft,hn),yt(t,be()),null}function Nh(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Is=be()+500,il&&or())}}function br(t){On!==null&&On.tag===0&&!(ae&6)&&fs();var e=ae;ae|=1;var n=Pt.transition,r=he;try{if(Pt.transition=null,he=1,t)return t()}finally{he=r,Pt.transition=n,ae=e,!(ae&6)&&or()}}function Rh(){wt=as.current,_e(as)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,F1(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ka();break;case 3:Es(),_e(mt),_e(ot),_h();break;case 5:vh(r);break;case 4:Es();break;case 13:_e(we);break;case 19:_e(we);break;case 10:ph(r.type._context);break;case 22:case 23:Rh()}n=n.return}if($e=t,De=t=Gn(t.current,null),Ge=wt=e,Fe=0,Gi=null,kh=ul=Pr=0,ft=Ai=null,Er!==null){for(e=0;e<Er.length;e++)if(n=Er[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Er=null}return t}function T0(t,e){do{var n=De;try{if(fh(),aa.current=Ma,Da){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Da=!1}if(Rr=0,Be=Le=Ee=null,Ii=!1,qi=0,Ah.current=null,n===null||n.return===null){Fe=1,Gi=e,De=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Ge,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=l,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var A=ip(a);if(A!==null){A.flags&=-257,op(A,a,l,i,e),A.mode&1&&sp(i,f,e),e=A,c=f;var R=e.updateQueue;if(R===null){var P=new Set;P.add(c),e.updateQueue=P}else R.add(c);break e}else{if(!(e&1)){sp(i,f,e),Ph();break e}c=Error(O(426))}}else if(xe&&l.mode&1){var D=ip(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),op(D,a,l,i,e),hh(Ts(c,l));break e}}i=c=Ts(c,l),Fe!==4&&(Fe=2),Ai===null?Ai=[i]:Ai.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var k=o0(i,c,e);Jf(i,k);break e;case 1:l=c;var T=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Wn===null||!Wn.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=a0(i,l,e);Jf(i,V);break e}}i=i.return}while(i!==null)}A0(n)}catch(z){e=z,De===n&&n!==null&&(De=n=n.return);continue}break}while(1)}function I0(){var t=La.current;return La.current=Ma,t===null?Ma:t}function Ph(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),$e===null||!(Pr&268435455)&&!(ul&268435455)||Ln($e,Ge)}function za(t,e){var n=ae;ae|=2;var r=I0();($e!==t||Ge!==e)&&(hn=null,Sr(t,e));do try{ux();break}catch(s){T0(t,s)}while(1);if(fh(),ae=n,La.current=r,De!==null)throw Error(O(261));return $e=null,Ge=0,Fe}function ux(){for(;De!==null;)S0(De)}function cx(){for(;De!==null&&!D_();)S0(De)}function S0(t){var e=C0(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?A0(t):De=e,Ah.current=null}function A0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rx(n,e),n!==null){n.flags&=32767,De=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,De=null;return}}else if(n=nx(n,e,wt),n!==null){De=n;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Fe===0&&(Fe=5)}function _r(t,e,n){var r=he,s=Pt.transition;try{Pt.transition=null,he=1,hx(t,e,n,r)}finally{Pt.transition=s,he=r}return null}function hx(t,e,n,r){do fs();while(On!==null);if(ae&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(q_(t,i),t===$e&&(De=$e=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qo||(Qo=!0,N0(wa,function(){return fs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pt.transition,Pt.transition=null;var a=he;he=1;var l=ae;ae|=4,Ah.current=null,ix(t,n),x0(n,t),P1(Wu),Ta=!!qu,Wu=qu=null,t.current=n,ox(n),M_(),ae=l,he=a,Pt.transition=i}else t.current=n;if(Qo&&(Qo=!1,On=t,Oa=s),i=t.pendingLanes,i===0&&(Wn=null),O_(n.stateNode),yt(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fa)throw Fa=!1,t=dc,dc=null,t;return Oa&1&&t.tag!==0&&fs(),i=t.pendingLanes,i&1?t===fc?ki++:(ki=0,fc=t):ki=0,or(),null}function fs(){if(On!==null){var t=og(Oa),e=Pt.transition,n=he;try{if(Pt.transition=null,he=16>t?16:t,On===null)var r=!1;else{if(t=On,On=null,Oa=0,ae&6)throw Error(O(331));var s=ae;for(ae|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for($=f;$!==null;){var p=$;switch(p.tag){case 0:case 11:case 15:Si(8,p,i)}var y=p.child;if(y!==null)y.return=p,$=y;else for(;$!==null;){p=$;var _=p.sibling,A=p.return;if(y0(p),p===f){$=null;break}if(_!==null){_.return=A,$=_;break}$=A}}}var R=i.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Si(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,$=k;break e}$=i.return}}var T=t.current;for($=T;$!==null;){a=$;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,$=I;else e:for(a=T;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(z){Ce(l,l.return,z)}if(l===a){$=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,$=V;break e}$=l.return}}if(ae=s,or(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(el,t)}catch{}r=!0}return r}finally{he=n,Pt.transition=e}}return!1}function _p(t,e,n){e=Ts(n,e),e=o0(t,e,1),t=qn(t,e,1),e=ct(),t!==null&&(oo(t,1,e),yt(t,e))}function Ce(t,e,n){if(t.tag===3)_p(t,t,n);else for(;e!==null;){if(e.tag===3){_p(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){t=Ts(n,t),t=a0(e,t,1),e=qn(e,t,1),t=ct(),e!==null&&(oo(e,1,t),yt(e,t));break}}e=e.return}}function dx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Ge&n)===n&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>be()-Ch?Sr(t,0):kh|=n),yt(t,e)}function k0(t,e){e===0&&(t.mode&1?(e=Oo,Oo<<=1,!(Oo&130023424)&&(Oo=4194304)):e=1);var n=ct();t=_n(t,e),t!==null&&(oo(t,e,n),yt(t,n))}function fx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k0(t,n)}function px(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),k0(t,n)}var C0;C0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,tx(t,e,n);pt=!!(t.flags&131072)}else pt=!1,xe&&e.flags&1048576&&bg(e,Ra,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ua(t,e),t=e.pendingProps;var s=_s(e,ot.current);ds(e,n),s=wh(null,e,r,t,s,n);var i=Eh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(i=!0,Ca(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gh(e),s.updater=al,e.stateNode=s,s._reactInternals=e,tc(e,r,t,n),e=sc(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&uh(e),ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ua(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gx(r),t=Ft(r,t),s){case 0:e=rc(null,e,r,t,n);break e;case 1:e=up(null,e,r,t,n);break e;case 11:e=ap(null,e,r,t,n);break e;case 14:e=lp(null,e,r,Ft(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),rc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),up(t,e,r,s,n);case 3:e:{if(h0(e),t===null)throw Error(O(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Fg(t,e),ja(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ts(Error(O(423)),e),e=cp(t,e,r,n,s);break e}else if(r!==s){s=Ts(Error(O(424)),e),e=cp(t,e,r,n,s);break e}else for(Et=Hn(e.stateNode.containerInfo.firstChild),Tt=e,xe=!0,zt=null,n=Mg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===s){e=xn(t,e,n);break e}ut(t,e,r,n)}e=e.child}return e;case 5:return Og(e),t===null&&Ju(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Ku(r,s)?a=null:i!==null&&Ku(r,i)&&(e.flags|=32),c0(t,e),ut(t,e,a,n),e.child;case 6:return t===null&&Ju(e),null;case 13:return d0(t,e,n);case 4:return yh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ws(e,null,r,n):ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),ap(t,e,r,s,n);case 7:return ut(t,e,e.pendingProps,n),e.child;case 8:return ut(t,e,e.pendingProps.children,n),e.child;case 12:return ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,me(Pa,r._currentValue),r._currentValue=a,i!==null)if(Ht(i.value,a)){if(i.children===s.children&&!mt.current){e=xn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=mn(-1,n&-n),c.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Zu(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(O(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Zu(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ds(e,n),s=bt(s),r=r(s),e.flags|=1,ut(t,e,r,n),e.child;case 14:return r=e.type,s=Ft(r,e.pendingProps),s=Ft(r.type,s),lp(t,e,r,s,n);case 15:return l0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),ua(t,e),e.tag=1,gt(r)?(t=!0,Ca(e)):t=!1,ds(e,n),i0(e,r,s),tc(e,r,s,n),sc(null,e,r,!0,t,n);case 19:return f0(t,e,n);case 22:return u0(t,e,n)}throw Error(O(156,e.tag))};function N0(t,e){return ng(t,e)}function mx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,r){return new mx(t,e,n,r)}function bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gx(t){if(typeof t=="function")return bh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xc)return 11;if(t===Jc)return 14}return 2}function Gn(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function da(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")bh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xr:return Ar(n.children,s,i,e);case Yc:a=8,s|=8;break;case Su:return t=Rt(12,n,e,s|2),t.elementType=Su,t.lanes=i,t;case Au:return t=Rt(13,n,e,s),t.elementType=Au,t.lanes=i,t;case ku:return t=Rt(19,n,e,s),t.elementType=ku,t.lanes=i,t;case Om:return cl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lm:a=10;break e;case Fm:a=9;break e;case Xc:a=11;break e;case Jc:a=14;break e;case Vn:a=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Rt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ar(t,e,n,r){return t=Rt(7,t,r,e),t.lanes=n,t}function cl(t,e,n,r){return t=Rt(22,t,r,e),t.elementType=Om,t.lanes=n,t.stateNode={isHidden:!1},t}function du(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function fu(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jh(t,e,n,r,s,i,a,l,c){return t=new yx(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gh(i),t}function vx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function R0(t){if(!t)return er;t=t._reactInternals;e:{if(Fr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(gt(n))return Rg(t,n,e)}return e}function P0(t,e,n,r,s,i,a,l,c){return t=jh(n,r,!0,t,s,i,a,l,c),t.context=R0(null),n=t.current,r=ct(),s=Kn(n),i=mn(r,s),i.callback=e??null,qn(n,i,s),t.current.lanes=s,oo(t,s,r),yt(t,r),t}function hl(t,e,n,r){var s=e.current,i=ct(),a=Kn(s);return n=R0(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qn(s,e,a),t!==null&&($t(t,s,a,i),oa(t,s,a)),a}function Ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vh(t,e){xp(t,e),(t=t.alternate)&&xp(t,e)}function _x(){return null}var b0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dh(t){this._internalRoot=t}dl.prototype.render=Dh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));hl(t,e,null,null)};dl.prototype.unmount=Dh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;br(function(){hl(null,t,null,null)}),e[vn]=null}};function dl(t){this._internalRoot=t}dl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ug();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mn.length&&e!==0&&e<Mn[n].priority;n++);Mn.splice(n,0,t),n===0&&hg(t)}};function Mh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wp(){}function xx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var f=Ua(a);i.call(f)}}var a=P0(e,r,t,0,null,!1,!1,"",wp);return t._reactRootContainer=a,t[vn]=a.current,zi(t.nodeType===8?t.parentNode:t),br(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var f=Ua(c);l.call(f)}}var c=jh(t,0,!1,null,null,!1,!1,"",wp);return t._reactRootContainer=c,t[vn]=c.current,zi(t.nodeType===8?t.parentNode:t),br(function(){hl(e,c,n,r)}),c}function pl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ua(a);l.call(c)}}hl(e,a,t,s)}else a=xx(n,e,t,s,r);return Ua(a)}ag=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fi(e.pendingLanes);n!==0&&(th(e,n|1),yt(e,be()),!(ae&6)&&(Is=be()+500,or()))}break;case 13:br(function(){var r=_n(t,1);if(r!==null){var s=ct();$t(r,t,1,s)}}),Vh(t,1)}};nh=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=ct();$t(e,t,134217728,n)}Vh(t,134217728)}};lg=function(t){if(t.tag===13){var e=Kn(t),n=_n(t,e);if(n!==null){var r=ct();$t(n,t,e,r)}Vh(t,e)}};ug=function(){return he};cg=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Lu=function(t,e,n){switch(e){case"input":if(Ru(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sl(r);if(!s)throw Error(O(90));Um(r),Ru(r,s)}}}break;case"textarea":$m(t,n);break;case"select":e=n.value,e!=null&&ls(t,!!n.multiple,e,!1)}};Ym=Nh;Xm=br;var wx={usingClientEntryPoint:!1,Events:[lo,ts,sl,Gm,Qm,Nh]},ui={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ex={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eg(t),t===null?null:t.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||_x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yo.isDisabled&&Yo.supportsFiber)try{el=Yo.inject(Ex),Xt=Yo}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wx;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mh(e))throw Error(O(200));return vx(t,e,null,n)};St.createRoot=function(t,e){if(!Mh(t))throw Error(O(299));var n=!1,r="",s=b0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jh(t,1,!1,null,null,n,!1,r,s),t[vn]=e.current,zi(t.nodeType===8?t.parentNode:t),new Dh(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=eg(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return br(t)};St.hydrate=function(t,e,n){if(!fl(e))throw Error(O(200));return pl(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!Mh(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=b0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=P0(e,null,t,1,n??null,s,!1,i,a),t[vn]=e.current,zi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dl(e)};St.render=function(t,e,n){if(!fl(e))throw Error(O(200));return pl(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!fl(t))throw Error(O(40));return t._reactRootContainer?(br(function(){pl(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};St.unstable_batchedUpdates=Nh;St.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fl(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return pl(t,e,n,!1,r)};St.version="18.3.1-next-f1338f8080-20240426";function j0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j0)}catch(t){console.error(t)}}j0(),jm.exports=St;var Tx=jm.exports,Ep=Tx;Tu.createRoot=Ep.createRoot,Tu.hydrateRoot=Ep.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ix=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,f=c?t[s+2]:0,p=i>>2,y=(i&3)<<4|l>>4;let _=(l&15)<<2|f>>6,A=f&63;c||(A=64,a||(_=64)),r.push(n[p],n[y],n[_],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(V0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ix(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||f==null||y==null)throw new Sx;const _=i<<2|l>>4;if(r.push(_),f!==64){const A=l<<4&240|f>>2;if(r.push(A),y!==64){const R=f<<6&192|y;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ax=function(t){const e=V0(t);return D0.encodeByteArray(e,!0)},Ba=function(t){return Ax(t).replace(/\./g,"")},kx=function(t){try{return D0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=()=>Cx().__FIREBASE_DEFAULTS__,Rx=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Px=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kx(t[1]);return e&&JSON.parse(e)},Lh=()=>{try{return Nx()||Rx()||Px()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bx=t=>{var e,n;return(n=(e=Lh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jx=t=>{const e=bx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},M0=()=>{var t;return(t=Lh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Ba(JSON.stringify(n)),Ba(JSON.stringify(a)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lx(){var t;const e=(t=Lh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fx(){return!Lx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ox(){try{return typeof indexedDB=="object"}catch{return!1}}function zx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="FirebaseError";class Ls extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ux,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L0.prototype.create)}}class L0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Bx(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ls(s,l,r)}}function Bx(t,e){return t.replace($x,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $x=/\{\$([^}]+)}/g;function gc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Tp(i)&&Tp(a)){if(!gc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Tp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wx(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qx(t){return t===xr?void 0:t}function Wx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Hx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const Gx={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},Qx=oe.INFO,Yx={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},Xx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Yx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class F0{constructor(e){this.name=e,this._logLevel=Qx,this._logHandler=Xx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const Jx=(t,e)=>e.some(n=>t instanceof n);let Ip,Sp;function Zx(){return Ip||(Ip=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ew(){return Sp||(Sp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O0=new WeakMap,yc=new WeakMap,z0=new WeakMap,pu=new WeakMap,Fh=new WeakMap;function tw(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Qn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&O0.set(n,t)}).catch(()=>{}),Fh.set(e,t),e}function nw(t){if(yc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});yc.set(t,e)}let vc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rw(t){vc=t(vc)}function sw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mu(this),e,...n);return z0.set(r,e.sort?e.sort():[e]),Qn(r)}:ew().includes(t)?function(...e){return t.apply(mu(this),e),Qn(O0.get(this))}:function(...e){return Qn(t.apply(mu(this),e))}}function iw(t){return typeof t=="function"?sw(t):(t instanceof IDBTransaction&&nw(t),Jx(t,Zx())?new Proxy(t,vc):t)}function Qn(t){if(t instanceof IDBRequest)return tw(t);if(pu.has(t))return pu.get(t);const e=iw(t);return e!==t&&(pu.set(t,e),Fh.set(e,t)),e}const mu=t=>Fh.get(t);function ow(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Qn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Qn(a.result),c.oldVersion,c.newVersion,Qn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const aw=["get","getKey","getAll","getAllKeys","count"],lw=["put","add","delete","clear"],gu=new Map;function Ap(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gu.get(e))return gu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||aw.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return gu.set(e,i),i}rw(t=>({...t,get:(e,n,r)=>Ap(e,n)||t.get(e,n,r),has:(e,n)=>!!Ap(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _c="@firebase/app",kp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new F0("@firebase/app"),hw="@firebase/app-compat",dw="@firebase/analytics-compat",fw="@firebase/analytics",pw="@firebase/app-check-compat",mw="@firebase/app-check",gw="@firebase/auth",yw="@firebase/auth-compat",vw="@firebase/database",_w="@firebase/data-connect",xw="@firebase/database-compat",ww="@firebase/functions",Ew="@firebase/functions-compat",Tw="@firebase/installations",Iw="@firebase/installations-compat",Sw="@firebase/messaging",Aw="@firebase/messaging-compat",kw="@firebase/performance",Cw="@firebase/performance-compat",Nw="@firebase/remote-config",Rw="@firebase/remote-config-compat",Pw="@firebase/storage",bw="@firebase/storage-compat",jw="@firebase/firestore",Vw="@firebase/vertexai-preview",Dw="@firebase/firestore-compat",Mw="firebase",Lw="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="[DEFAULT]",Fw={[_c]:"fire-core",[hw]:"fire-core-compat",[fw]:"fire-analytics",[dw]:"fire-analytics-compat",[mw]:"fire-app-check",[pw]:"fire-app-check-compat",[gw]:"fire-auth",[yw]:"fire-auth-compat",[vw]:"fire-rtdb",[_w]:"fire-data-connect",[xw]:"fire-rtdb-compat",[ww]:"fire-fn",[Ew]:"fire-fn-compat",[Tw]:"fire-iid",[Iw]:"fire-iid-compat",[Sw]:"fire-fcm",[Aw]:"fire-fcm-compat",[kw]:"fire-perf",[Cw]:"fire-perf-compat",[Nw]:"fire-rc",[Rw]:"fire-rc-compat",[Pw]:"fire-gcs",[bw]:"fire-gcs-compat",[jw]:"fire-fst",[Dw]:"fire-fst-compat",[Vw]:"fire-vertex","fire-js":"fire-js",[Mw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new Map,Ow=new Map,wc=new Map;function Cp(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ha(t){const e=t.name;if(wc.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;wc.set(e,t);for(const n of $a.values())Cp(n,t);for(const n of Ow.values())Cp(n,t);return!0}function zw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new L0("app","Firebase",Uw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=Lw;function U0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Yn.create("bad-app-name",{appName:String(s)});if(n||(n=M0()),!n)throw Yn.create("no-options");const i=$a.get(s);if(i){if(gc(n,i.options)&&gc(r,i.config))return i;throw Yn.create("duplicate-app",{appName:s})}const a=new Kx(s);for(const c of wc.values())a.addComponent(c);const l=new Bw(n,r,a);return $a.set(s,l),l}function Hw(t=xc){const e=$a.get(t);if(!e&&t===xc&&M0())return U0();if(!e)throw Yn.create("no-app",{appName:t});return e}function ps(t,e,n){var r;let s=(r=Fw[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(l.join(" "));return}Ha(new Qi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebase-heartbeat-database",Ww=1,Yi="firebase-heartbeat-store";let yu=null;function B0(){return yu||(yu=ow(qw,Ww,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yn.create("idb-open",{originalErrorMessage:t.message})})),yu}async function Kw(t){try{const n=(await B0()).transaction(Yi),r=await n.objectStore(Yi).get($0(t));return await n.done,r}catch(e){if(e instanceof Ls)wn.warn(e.message);else{const n=Yn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function Np(t,e){try{const r=(await B0()).transaction(Yi,"readwrite");await r.objectStore(Yi).put(e,$0(t)),await r.done}catch(n){if(n instanceof Ls)wn.warn(n.message);else{const r=Yn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function $0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=1024,Qw=30*24*60*60*1e3;class Yw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=Qw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rp(),{heartbeatsToSend:r,unsentEntries:s}=Xw(this._heartbeatsCache.heartbeats),i=Ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return wn.warn(n),""}}}function Rp(){return new Date().toISOString().substring(0,10)}function Xw(t,e=Gw){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Pp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Pp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Jw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ox()?zx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Kw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Np(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Np(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Pp(t){return Ba(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){Ha(new Qi("platform-logger",e=>new uw(e),"PRIVATE")),Ha(new Qi("heartbeat",e=>new Yw(e),"PRIVATE")),ps(_c,kp,t),ps(_c,kp,"esm2017"),ps("fire-js","")}Zw("");var eE="firebase",tE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(eE,tE,"app");var bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kr,H0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function w(){}w.prototype=g.prototype,E.D=g.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(S,C,v){for(var x=Array(arguments.length-2),J=2;J<arguments.length;J++)x[J-2]=arguments[J];return g.prototype[C].apply(S,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,g,w){w||(w=0);var S=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)S[C]=g.charCodeAt(w++)|g.charCodeAt(w++)<<8|g.charCodeAt(w++)<<16|g.charCodeAt(w++)<<24;else for(C=0;16>C;++C)S[C]=g[w++]|g[w++]<<8|g[w++]<<16|g[w++]<<24;g=E.g[0],w=E.g[1],C=E.g[2];var v=E.g[3],x=g+(v^w&(C^v))+S[0]+3614090360&4294967295;g=w+(x<<7&4294967295|x>>>25),x=v+(C^g&(w^C))+S[1]+3905402710&4294967295,v=g+(x<<12&4294967295|x>>>20),x=C+(w^v&(g^w))+S[2]+606105819&4294967295,C=v+(x<<17&4294967295|x>>>15),x=w+(g^C&(v^g))+S[3]+3250441966&4294967295,w=C+(x<<22&4294967295|x>>>10),x=g+(v^w&(C^v))+S[4]+4118548399&4294967295,g=w+(x<<7&4294967295|x>>>25),x=v+(C^g&(w^C))+S[5]+1200080426&4294967295,v=g+(x<<12&4294967295|x>>>20),x=C+(w^v&(g^w))+S[6]+2821735955&4294967295,C=v+(x<<17&4294967295|x>>>15),x=w+(g^C&(v^g))+S[7]+4249261313&4294967295,w=C+(x<<22&4294967295|x>>>10),x=g+(v^w&(C^v))+S[8]+1770035416&4294967295,g=w+(x<<7&4294967295|x>>>25),x=v+(C^g&(w^C))+S[9]+2336552879&4294967295,v=g+(x<<12&4294967295|x>>>20),x=C+(w^v&(g^w))+S[10]+4294925233&4294967295,C=v+(x<<17&4294967295|x>>>15),x=w+(g^C&(v^g))+S[11]+2304563134&4294967295,w=C+(x<<22&4294967295|x>>>10),x=g+(v^w&(C^v))+S[12]+1804603682&4294967295,g=w+(x<<7&4294967295|x>>>25),x=v+(C^g&(w^C))+S[13]+4254626195&4294967295,v=g+(x<<12&4294967295|x>>>20),x=C+(w^v&(g^w))+S[14]+2792965006&4294967295,C=v+(x<<17&4294967295|x>>>15),x=w+(g^C&(v^g))+S[15]+1236535329&4294967295,w=C+(x<<22&4294967295|x>>>10),x=g+(C^v&(w^C))+S[1]+4129170786&4294967295,g=w+(x<<5&4294967295|x>>>27),x=v+(w^C&(g^w))+S[6]+3225465664&4294967295,v=g+(x<<9&4294967295|x>>>23),x=C+(g^w&(v^g))+S[11]+643717713&4294967295,C=v+(x<<14&4294967295|x>>>18),x=w+(v^g&(C^v))+S[0]+3921069994&4294967295,w=C+(x<<20&4294967295|x>>>12),x=g+(C^v&(w^C))+S[5]+3593408605&4294967295,g=w+(x<<5&4294967295|x>>>27),x=v+(w^C&(g^w))+S[10]+38016083&4294967295,v=g+(x<<9&4294967295|x>>>23),x=C+(g^w&(v^g))+S[15]+3634488961&4294967295,C=v+(x<<14&4294967295|x>>>18),x=w+(v^g&(C^v))+S[4]+3889429448&4294967295,w=C+(x<<20&4294967295|x>>>12),x=g+(C^v&(w^C))+S[9]+568446438&4294967295,g=w+(x<<5&4294967295|x>>>27),x=v+(w^C&(g^w))+S[14]+3275163606&4294967295,v=g+(x<<9&4294967295|x>>>23),x=C+(g^w&(v^g))+S[3]+4107603335&4294967295,C=v+(x<<14&4294967295|x>>>18),x=w+(v^g&(C^v))+S[8]+1163531501&4294967295,w=C+(x<<20&4294967295|x>>>12),x=g+(C^v&(w^C))+S[13]+2850285829&4294967295,g=w+(x<<5&4294967295|x>>>27),x=v+(w^C&(g^w))+S[2]+4243563512&4294967295,v=g+(x<<9&4294967295|x>>>23),x=C+(g^w&(v^g))+S[7]+1735328473&4294967295,C=v+(x<<14&4294967295|x>>>18),x=w+(v^g&(C^v))+S[12]+2368359562&4294967295,w=C+(x<<20&4294967295|x>>>12),x=g+(w^C^v)+S[5]+4294588738&4294967295,g=w+(x<<4&4294967295|x>>>28),x=v+(g^w^C)+S[8]+2272392833&4294967295,v=g+(x<<11&4294967295|x>>>21),x=C+(v^g^w)+S[11]+1839030562&4294967295,C=v+(x<<16&4294967295|x>>>16),x=w+(C^v^g)+S[14]+4259657740&4294967295,w=C+(x<<23&4294967295|x>>>9),x=g+(w^C^v)+S[1]+2763975236&4294967295,g=w+(x<<4&4294967295|x>>>28),x=v+(g^w^C)+S[4]+1272893353&4294967295,v=g+(x<<11&4294967295|x>>>21),x=C+(v^g^w)+S[7]+4139469664&4294967295,C=v+(x<<16&4294967295|x>>>16),x=w+(C^v^g)+S[10]+3200236656&4294967295,w=C+(x<<23&4294967295|x>>>9),x=g+(w^C^v)+S[13]+681279174&4294967295,g=w+(x<<4&4294967295|x>>>28),x=v+(g^w^C)+S[0]+3936430074&4294967295,v=g+(x<<11&4294967295|x>>>21),x=C+(v^g^w)+S[3]+3572445317&4294967295,C=v+(x<<16&4294967295|x>>>16),x=w+(C^v^g)+S[6]+76029189&4294967295,w=C+(x<<23&4294967295|x>>>9),x=g+(w^C^v)+S[9]+3654602809&4294967295,g=w+(x<<4&4294967295|x>>>28),x=v+(g^w^C)+S[12]+3873151461&4294967295,v=g+(x<<11&4294967295|x>>>21),x=C+(v^g^w)+S[15]+530742520&4294967295,C=v+(x<<16&4294967295|x>>>16),x=w+(C^v^g)+S[2]+3299628645&4294967295,w=C+(x<<23&4294967295|x>>>9),x=g+(C^(w|~v))+S[0]+4096336452&4294967295,g=w+(x<<6&4294967295|x>>>26),x=v+(w^(g|~C))+S[7]+1126891415&4294967295,v=g+(x<<10&4294967295|x>>>22),x=C+(g^(v|~w))+S[14]+2878612391&4294967295,C=v+(x<<15&4294967295|x>>>17),x=w+(v^(C|~g))+S[5]+4237533241&4294967295,w=C+(x<<21&4294967295|x>>>11),x=g+(C^(w|~v))+S[12]+1700485571&4294967295,g=w+(x<<6&4294967295|x>>>26),x=v+(w^(g|~C))+S[3]+2399980690&4294967295,v=g+(x<<10&4294967295|x>>>22),x=C+(g^(v|~w))+S[10]+4293915773&4294967295,C=v+(x<<15&4294967295|x>>>17),x=w+(v^(C|~g))+S[1]+2240044497&4294967295,w=C+(x<<21&4294967295|x>>>11),x=g+(C^(w|~v))+S[8]+1873313359&4294967295,g=w+(x<<6&4294967295|x>>>26),x=v+(w^(g|~C))+S[15]+4264355552&4294967295,v=g+(x<<10&4294967295|x>>>22),x=C+(g^(v|~w))+S[6]+2734768916&4294967295,C=v+(x<<15&4294967295|x>>>17),x=w+(v^(C|~g))+S[13]+1309151649&4294967295,w=C+(x<<21&4294967295|x>>>11),x=g+(C^(w|~v))+S[4]+4149444226&4294967295,g=w+(x<<6&4294967295|x>>>26),x=v+(w^(g|~C))+S[11]+3174756917&4294967295,v=g+(x<<10&4294967295|x>>>22),x=C+(g^(v|~w))+S[2]+718787259&4294967295,C=v+(x<<15&4294967295|x>>>17),x=w+(v^(C|~g))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(C+(x<<21&4294967295|x>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+v&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var w=g-this.blockSize,S=this.B,C=this.h,v=0;v<g;){if(C==0)for(;v<=w;)s(this,E,v),v+=this.blockSize;if(typeof E=="string"){for(;v<g;)if(S[C++]=E.charCodeAt(v++),C==this.blockSize){s(this,S),C=0;break}}else for(;v<g;)if(S[C++]=E[v++],C==this.blockSize){s(this,S),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var w=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=w&255,w/=256;for(this.u(E),E=Array(16),g=w=0;4>g;++g)for(var S=0;32>S;S+=8)E[w++]=this.g[g]>>>S&255;return E};function i(E,g){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=g(E)}function a(E,g){this.h=g;for(var w=[],S=!0,C=E.length-1;0<=C;C--){var v=E[C]|0;S&&v==g||(w[C]=v,S=!1)}this.g=w}var l={};function c(E){return-128<=E&&128>E?i(E,function(g){return new a([g|0],0>g?-1:0)}):new a([E|0],0>E?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return y;if(0>E)return D(f(-E));for(var g=[],w=1,S=0;E>=w;S++)g[S]=E/w|0,w*=4294967296;return new a(g,0)}function p(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return D(p(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=f(Math.pow(g,8)),S=y,C=0;C<E.length;C+=8){var v=Math.min(8,E.length-C),x=parseInt(E.substring(C,C+v),g);8>v?(v=f(Math.pow(g,v)),S=S.j(v).add(f(x))):(S=S.j(w),S=S.add(f(x)))}return S}var y=c(0),_=c(1),A=c(16777216);t=a.prototype,t.m=function(){if(P(this))return-D(this).m();for(var E=0,g=1,w=0;w<this.g.length;w++){var S=this.i(w);E+=(0<=S?S:4294967296+S)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(P(this))return"-"+D(this).toString(E);for(var g=f(Math.pow(E,6)),w=this,S="";;){var C=V(w,g).g;w=k(w,C.j(g));var v=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,R(w))return v+S;for(;6>v.length;)v="0"+v;S=v+S}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function P(E){return E.h==-1}t.l=function(E){return E=k(this,E),P(E)?-1:R(E)?0:1};function D(E){for(var g=E.g.length,w=[],S=0;S<g;S++)w[S]=~E.g[S];return new a(w,~E.h).add(_)}t.abs=function(){return P(this)?D(this):this},t.add=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0,C=0;C<=g;C++){var v=S+(this.i(C)&65535)+(E.i(C)&65535),x=(v>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);S=x>>>16,v&=65535,x&=65535,w[C]=x<<16|v}return new a(w,w[w.length-1]&-2147483648?-1:0)};function k(E,g){return E.add(D(g))}t.j=function(E){if(R(this)||R(E))return y;if(P(this))return P(E)?D(this).j(D(E)):D(D(this).j(E));if(P(E))return D(this.j(D(E)));if(0>this.l(A)&&0>E.l(A))return f(this.m()*E.m());for(var g=this.g.length+E.g.length,w=[],S=0;S<2*g;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(var C=0;C<E.g.length;C++){var v=this.i(S)>>>16,x=this.i(S)&65535,J=E.i(C)>>>16,fe=E.i(C)&65535;w[2*S+2*C]+=x*fe,T(w,2*S+2*C),w[2*S+2*C+1]+=v*fe,T(w,2*S+2*C+1),w[2*S+2*C+1]+=x*J,T(w,2*S+2*C+1),w[2*S+2*C+2]+=v*J,T(w,2*S+2*C+2)}for(S=0;S<g;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=g;S<2*g;S++)w[S]=0;return new a(w,0)};function T(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function I(E,g){this.g=E,this.h=g}function V(E,g){if(R(g))throw Error("division by zero");if(R(E))return new I(y,y);if(P(E))return g=V(D(E),g),new I(D(g.g),D(g.h));if(P(g))return g=V(E,D(g)),new I(D(g.g),g.h);if(30<E.g.length){if(P(E)||P(g))throw Error("slowDivide_ only works with positive integers.");for(var w=_,S=g;0>=S.l(E);)w=z(w),S=z(S);var C=B(w,1),v=B(S,1);for(S=B(S,2),w=B(w,2);!R(S);){var x=v.add(S);0>=x.l(E)&&(C=C.add(w),v=x),S=B(S,1),w=B(w,1)}return g=k(E,C.j(g)),new I(C,g)}for(C=y;0<=E.l(g);){for(w=Math.max(1,Math.floor(E.m()/g.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),v=f(w),x=v.j(g);P(x)||0<x.l(E);)w-=S,v=f(w),x=v.j(g);R(v)&&(v=_),C=C.add(v),E=k(E,x)}return new I(C,E)}t.A=function(E){return V(this,E).h},t.and=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0;S<g;S++)w[S]=this.i(S)&E.i(S);return new a(w,this.h&E.h)},t.or=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0;S<g;S++)w[S]=this.i(S)|E.i(S);return new a(w,this.h|E.h)},t.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0;S<g;S++)w[S]=this.i(S)^E.i(S);return new a(w,this.h^E.h)};function z(E){for(var g=E.g.length+1,w=[],S=0;S<g;S++)w[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(w,E.h)}function B(E,g){var w=g>>5;g%=32;for(var S=E.g.length-w,C=[],v=0;v<S;v++)C[v]=0<g?E.i(v+w)>>>g|E.i(v+w+1)<<32-g:E.i(v+w);return new a(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,H0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,kr=a}).apply(typeof bp<"u"?bp:typeof self<"u"?self:typeof window<"u"?window:{});var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q0,mi,W0,fa,Ec,K0,G0,Q0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xo=="object"&&Xo];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var N=o[m];if(!(N in d))break e;d=d[N]}o=o[o.length-1],m=d[o],u=u(m),u!=m&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var d=0,m=!1,N={next:function(){if(!m&&d<o.length){var b=d++;return{value:u(b,o[b]),done:!1}}return m=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,d){return o.call.apply(o.bind,arguments)}function y(o,u,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,m),o.apply(u,N)}}return function(){return o.apply(u,arguments)}}function _(o,u,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,_.apply(null,arguments)}function A(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function R(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,N,b){for(var U=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)U[pe-2]=arguments[pe];return u.prototype[N].apply(m,U)}}function P(o){const u=o.length;if(0<u){const d=Array(u);for(let m=0;m<u;m++)d[m]=o[m];return d}return[]}function D(o,u){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(c(m)){const N=o.length||0,b=m.length||0;o.length=N+b;for(let U=0;U<b;U++)o[N+U]=m[U]}else o.push(m)}}class k{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function T(o){return/^[\s\xa0]*$/.test(o)}function I(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function V(o){return V[" "](o),o}V[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function B(o,u,d){for(const m in o)u.call(d,o[m],m,o)}function E(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function g(o){const u={};for(const d in o)u[d]=o[d];return u}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,u){let d,m;for(let N=1;N<arguments.length;N++){m=arguments[N];for(d in m)o[d]=m[d];for(let b=0;b<w.length;b++)d=w[b],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function C(o){var u=1;o=o.split(":");const d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function v(o){l.setTimeout(()=>{throw o},0)}function x(){var o=Q;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class J{constructor(){this.h=this.g=null}add(u,d){const m=fe.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var fe=new k(()=>new ze,o=>o.reset());class ze{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Vt,M=!1,Q=new J,q=()=>{const o=l.Promise.resolve(void 0);Vt=()=>{o.then(j)}};var j=()=>{for(var o;o=x();){try{o.h.call(o.g)}catch(d){v(d)}var u=fe;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}M=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,u),l.removeEventListener("test",d,u)}catch{}return o}();function je(o,u){if(te.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(z){e:{try{V(u.nodeName);var N=!0;break e}catch{}N=!1}N||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Se[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&je.aa.h.call(this)}}R(je,te);var Se={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),yo=0;function vo(o,u,d,m,N){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=N,this.key=++yo,this.da=this.fa=!1}function lr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Sn(o){this.src=o,this.g={},this.h=0}Sn.prototype.add=function(o,u,d,m,N){var b=o.toString();o=this.g[b],o||(o=this.g[b]=[],this.h++);var U=ur(o,u,m,N);return-1<U?(u=o[U],d||(u.fa=!1)):(u=new vo(u,this.src,b,!!m,N),u.fa=d,o.push(u)),u};function Ne(o,u){var d=u.type;if(d in o.g){var m=o.g[d],N=Array.prototype.indexOf.call(m,u,void 0),b;(b=0<=N)&&Array.prototype.splice.call(m,N,1),b&&(lr(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function ur(o,u,d,m){for(var N=0;N<o.length;++N){var b=o[N];if(!b.da&&b.listener==u&&b.capture==!!d&&b.ha==m)return N}return-1}var An="closure_lm_"+(1e6*Math.random()|0),Wt={};function cr(o,u,d,m,N){if(m&&m.once)return _t(o,u,d,m,N);if(Array.isArray(u)){for(var b=0;b<u.length;b++)cr(o,u[b],d,m,N);return null}return d=dr(d),o&&o[at]?o.K(u,d,f(m)?!!m.capture:!!m,N):hr(o,u,d,!1,m,N)}function hr(o,u,d,m,N,b){if(!u)throw Error("Invalid event type");var U=f(N)?!!N.capture:!!N,pe=Dt(o);if(pe||(o[An]=pe=new Sn(o)),d=pe.add(u,d,m,U,b),d.proxy)return d;if(m=kn(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)Y||(N=U),N===void 0&&(N=!1),o.addEventListener(u.toString(),m,N);else if(o.attachEvent)o.attachEvent(Cn(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function kn(){function o(d){return u.call(o.src,o.listener,d)}const u=on;return o}function _t(o,u,d,m,N){if(Array.isArray(u)){for(var b=0;b<u.length;b++)_t(o,u[b],d,m,N);return null}return d=dr(d),o&&o[at]?o.L(u,d,f(m)?!!m.capture:!!m,N):hr(o,u,d,!0,m,N)}function rn(o,u,d,m,N){if(Array.isArray(u))for(var b=0;b<u.length;b++)rn(o,u[b],d,m,N);else m=f(m)?!!m.capture:!!m,d=dr(d),o&&o[at]?(o=o.i,u=String(u).toString(),u in o.g&&(b=o.g[u],d=ur(b,d,m,N),-1<d&&(lr(b[d]),Array.prototype.splice.call(b,d,1),b.length==0&&(delete o.g[u],o.h--)))):o&&(o=Dt(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ur(u,d,m,N)),(d=-1<o?u[o]:null)&&sn(d))}function sn(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[at])Ne(u.i,o);else{var d=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(d,m,o.capture):u.detachEvent?u.detachEvent(Cn(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=Dt(u))?(Ne(d,o),d.h==0&&(d.src=null,u[An]=null)):lr(o)}}}function Cn(o){return o in Wt?Wt[o]:Wt[o]="on"+o}function on(o,u){if(o.da)o=!0;else{u=new je(u,this);var d=o.listener,m=o.ha||o.src;o.fa&&sn(o),o=d.call(m,u)}return o}function Dt(o){return o=o[An],o instanceof Sn?o:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function dr(o){return typeof o=="function"?o:(o[an]||(o[an]=function(u){return o.handleEvent(u)}),o[an])}function Ae(){W.call(this),this.i=new Sn(this),this.M=this,this.F=null}R(Ae,W),Ae.prototype[at]=!0,Ae.prototype.removeEventListener=function(o,u,d,m){rn(this,o,u,d,m)};function Re(o,u){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new te(u,o);else if(u instanceof te)u.target=u.target||o;else{var N=u;u=new te(m,o),S(u,N)}if(N=!0,d)for(var b=d.length-1;0<=b;b--){var U=u.g=d[b];N=Kt(U,m,!0,u)&&N}if(U=u.g=o,N=Kt(U,m,!0,u)&&N,N=Kt(U,m,!1,u)&&N,d)for(b=0;b<d.length;b++)U=u.g=d[b],N=Kt(U,m,!1,u)&&N}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],m=0;m<d.length;m++)lr(d[m]);delete o.g[u],o.h--}}this.F=null},Ae.prototype.K=function(o,u,d,m){return this.i.add(String(o),u,!1,d,m)},Ae.prototype.L=function(o,u,d,m){return this.i.add(String(o),u,!0,d,m)};function Kt(o,u,d,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var N=!0,b=0;b<u.length;++b){var U=u[b];if(U&&!U.da&&U.capture==d){var pe=U.listener,He=U.ha||U.src;U.fa&&Ne(o.i,U),N=pe.call(He,m)!==!1&&N}}return N&&!m.defaultPrevented}function Nn(o,u,d){if(typeof o=="function")d&&(o=_(o,d));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ur(o){o.g=Nn(()=>{o.g=null,o.i&&(o.i=!1,Ur(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class $s extends W{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ur(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(o){W.call(this),this.h=o,this.g={}}R(fr,W);var ln=[];function wd(o){B(o.g,function(u,d){this.g.hasOwnProperty(d)&&sn(u)},o),o.g={}}fr.prototype.N=function(){fr.aa.N.call(this),wd(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Al=l.JSON.stringify,Sv=l.JSON.parse,Av=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function kl(){}kl.prototype.h=null;function Ed(o){return o.h||(o.h=o.i())}function Td(){}var Hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cl(){te.call(this,"d")}R(Cl,te);function Nl(){te.call(this,"c")}R(Nl,te);var pr={},Id=null;function _o(){return Id=Id||new Ae}pr.La="serverreachability";function Sd(o){te.call(this,pr.La,o)}R(Sd,te);function qs(o){const u=_o();Re(u,new Sd(u))}pr.STAT_EVENT="statevent";function Ad(o,u){te.call(this,pr.STAT_EVENT,o),this.stat=u}R(Ad,te);function lt(o){const u=_o();Re(u,new Ad(u,o))}pr.Ma="timingevent";function kd(o,u){te.call(this,pr.Ma,o),this.size=u}R(kd,te);function Ws(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Ks(){this.g=!0}Ks.prototype.xa=function(){this.g=!1};function kv(o,u,d,m,N,b){o.info(function(){if(o.g)if(b)for(var U="",pe=b.split("&"),He=0;He<pe.length;He++){var le=pe[He].split("=");if(1<le.length){var Je=le[0];le=le[1];var Ze=Je.split("_");U=2<=Ze.length&&Ze[1]=="type"?U+(Je+"="+le+"&"):U+(Je+"=redacted&")}}else U=null;else U=b;return"XMLHTTP REQ ("+m+") [attempt "+N+"]: "+u+`
`+d+`
`+U})}function Cv(o,u,d,m,N,b,U){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+N+"]: "+u+`
`+d+`
`+b+" "+U})}function Br(o,u,d,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Rv(o,d)+(m?" "+m:"")})}function Nv(o,u){o.info(function(){return"TIMEOUT: "+u})}Ks.prototype.info=function(){};function Rv(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var N=m[1];if(Array.isArray(N)&&!(1>N.length)){var b=N[0];if(b!="noop"&&b!="stop"&&b!="close")for(var U=1;U<N.length;U++)N[U]=""}}}}return Al(d)}catch{return u}}var xo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rl;function wo(){}R(wo,kl),wo.prototype.g=function(){return new XMLHttpRequest},wo.prototype.i=function(){return{}},Rl=new wo;function Rn(o,u,d,m){this.j=o,this.i=u,this.l=d,this.R=m||1,this.U=new fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nd}function Nd(){this.i=null,this.g="",this.h=!1}var Rd={},Pl={};function bl(o,u,d){o.L=1,o.v=So(un(u)),o.m=d,o.P=!0,Pd(o,null)}function Pd(o,u){o.F=Date.now(),Eo(o),o.A=un(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),qd(d.i,"t",m),o.C=0,d=o.j.J,o.h=new Nd,o.g=cf(o.j,d?u:null,!o.m),0<o.O&&(o.M=new $s(_(o.Y,o,o.g),o.O)),u=o.U,d=o.g,m=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(ln[0]=N.toString()),N=ln);for(var b=0;b<N.length;b++){var U=cr(d,N[b],m||u.handleEvent,!1,u.h||u);if(!U)break;u.g[U.key]=U}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),qs(),kv(o.i,o.u,o.A,o.l,o.R,o.m)}Rn.prototype.ca=function(o){o=o.target;const u=this.M;u&&cn(o)==3?u.j():this.Y(o)},Rn.prototype.Y=function(o){try{if(o==this.g)e:{const Ze=cn(this.g);var u=this.g.Ba();const qr=this.g.Z();if(!(3>Ze)&&(Ze!=3||this.g&&(this.h.h||this.g.oa()||Jd(this.g)))){this.J||Ze!=4||u==7||(u==8||0>=qr?qs(3):qs(2)),jl(this);var d=this.g.Z();this.X=d;t:if(bd(this)){var m=Jd(this.g);o="";var N=m.length,b=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),Gs(this);var U="";break t}this.h.i=new l.TextDecoder}for(u=0;u<N;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(b&&u==N-1)});m.length=0,this.h.g+=o,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=d==200,Cv(this.i,this.u,this.A,this.l,this.R,Ze,d),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,He=this.g;if((pe=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(pe)){var le=pe;break t}}le=null}if(d=le)Br(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vl(this,d);else{this.o=!1,this.s=3,lt(12),mr(this),Gs(this);break e}}if(this.P){d=!0;let Mt;for(;!this.J&&this.C<U.length;)if(Mt=Pv(this,U),Mt==Pl){Ze==4&&(this.s=4,lt(14),d=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Rd){this.s=4,lt(15),Br(this.i,this.l,U,"[Invalid Chunk]"),d=!1;break}else Br(this.i,this.l,Mt,null),Vl(this,Mt);if(bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||U.length!=0||this.h.h||(this.s=1,lt(16),d=!1),this.o=this.o&&d,!d)Br(this.i,this.l,U,"[Invalid Chunked Response]"),mr(this),Gs(this);else if(0<U.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),zl(Je),Je.M=!0,lt(11))}}else Br(this.i,this.l,U,null),Vl(this,U);Ze==4&&mr(this),this.o&&!this.J&&(Ze==4?of(this.j,this):(this.o=!1,Eo(this)))}else Gv(this.g),d==400&&0<U.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),mr(this),Gs(this)}}}catch{}finally{}};function bd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Pv(o,u){var d=o.C,m=u.indexOf(`
`,d);return m==-1?Pl:(d=Number(u.substring(d,m)),isNaN(d)?Rd:(m+=1,m+d>u.length?Pl:(u=u.slice(m,m+d),o.C=m+d,u)))}Rn.prototype.cancel=function(){this.J=!0,mr(this)};function Eo(o){o.S=Date.now()+o.I,jd(o,o.I)}function jd(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ws(_(o.ba,o),u)}function jl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Rn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Nv(this.i,this.A),this.L!=2&&(qs(),lt(17)),mr(this),this.s=2,Gs(this)):jd(this,this.S-o)};function Gs(o){o.j.G==0||o.J||of(o.j,o)}function mr(o){jl(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,wd(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Vl(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||Dl(d.h,o))){if(!o.K&&Dl(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var N=m;if(N[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Po(d),No(d);else break e;Ol(d),lt(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ws(_(d.Za,d),6e3));if(1>=Md(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else yr(d,11)}else if((o.K||d.g==o)&&Po(d),!T(u))for(N=d.Da.g.parse(u),u=0;u<N.length;u++){let le=N[u];if(d.T=le[0],le=le[1],d.G==2)if(le[0]=="c"){d.K=le[1],d.ia=le[2];const Je=le[3];Je!=null&&(d.la=Je,d.j.info("VER="+d.la));const Ze=le[4];Ze!=null&&(d.Aa=Ze,d.j.info("SVER="+d.Aa));const qr=le[5];qr!=null&&typeof qr=="number"&&0<qr&&(m=1.5*qr,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Mt=o.g;if(Mt){const jo=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var b=m.h;b.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Ml(b,b.h),b.h=null))}if(m.D){const Ul=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ul&&(m.ya=Ul,ge(m.I,m.D,Ul))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var U=o;if(m.qa=uf(m,m.J?m.ia:null,m.W),U.K){Ld(m.h,U);var pe=U,He=m.L;He&&(pe.I=He),pe.B&&(jl(pe),Eo(pe)),m.g=U}else rf(m);0<d.i.length&&Ro(d)}else le[0]!="stop"&&le[0]!="close"||yr(d,7);else d.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?yr(d,7):Fl(d):le[0]!="noop"&&d.l&&d.l.ta(le),d.v=0)}}qs(4)}catch{}}var bv=class{constructor(o,u){this.g=o,this.map=u}};function Vd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Md(o){return o.h?1:o.g?o.g.size:0}function Dl(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ml(o,u){o.g?o.g.add(u):o.h=u}function Ld(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Vd.prototype.cancel=function(){if(this.i=Fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Fd(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.D);return u}return P(o.i)}function jv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],d=o.length,m=0;m<d;m++)u.push(o[m]);return u}u=[],d=0;for(m in o)u[d++]=o[m];return u}function Vv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(const m in o)u[d++]=m;return u}}}function Od(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=Vv(o),m=jv(o),N=m.length,b=0;b<N;b++)u.call(void 0,m[b],d&&d[b],o)}var zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dv(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),N=null;if(0<=m){var b=o[d].substring(0,m);N=o[d].substring(m+1)}else b=o[d];u(b,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function gr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof gr){this.h=o.h,To(this,o.j),this.o=o.o,this.g=o.g,Io(this,o.s),this.l=o.l;var u=o.i,d=new Xs;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),Ud(this,d),this.m=o.m}else o&&(u=String(o).match(zd))?(this.h=!1,To(this,u[1]||"",!0),this.o=Qs(u[2]||""),this.g=Qs(u[3]||"",!0),Io(this,u[4]),this.l=Qs(u[5]||"",!0),Ud(this,u[6]||"",!0),this.m=Qs(u[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}gr.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Ys(u,Bd,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ys(u,Bd,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Ys(d,d.charAt(0)=="/"?Fv:Lv,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Ys(d,zv)),o.join("")};function un(o){return new gr(o)}function To(o,u,d){o.j=d?Qs(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Io(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Ud(o,u,d){u instanceof Xs?(o.i=u,Uv(o.i,o.h)):(d||(u=Ys(u,Ov)),o.i=new Xs(u,o.h))}function ge(o,u,d){o.i.set(u,d)}function So(o){return ge(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Qs(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ys(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Mv),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Mv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Bd=/[#\/\?@]/g,Lv=/[#\?:]/g,Fv=/[#\?]/g,Ov=/[#\?@]/g,zv=/#/g;function Xs(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Pn(o){o.g||(o.g=new Map,o.h=0,o.i&&Dv(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=Xs.prototype,t.add=function(o,u){Pn(this),this.i=null,o=$r(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function $d(o,u){Pn(o),u=$r(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Hd(o,u){return Pn(o),u=$r(o,u),o.g.has(u)}t.forEach=function(o,u){Pn(this),this.g.forEach(function(d,m){d.forEach(function(N){o.call(u,N,m,this)},this)},this)},t.na=function(){Pn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let m=0;m<u.length;m++){const N=o[m];for(let b=0;b<N.length;b++)d.push(u[m])}return d},t.V=function(o){Pn(this);let u=[];if(typeof o=="string")Hd(this,o)&&(u=u.concat(this.g.get($r(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},t.set=function(o,u){return Pn(this),this.i=null,o=$r(this,o),Hd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function qd(o,u,d){$d(o,u),0<d.length&&(o.i=null,o.g.set($r(o,u),P(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var m=u[d];const b=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var N=b;U[m]!==""&&(N+="="+encodeURIComponent(String(U[m]))),o.push(N)}}return this.i=o.join("&")};function $r(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Uv(o,u){u&&!o.j&&(Pn(o),o.i=null,o.g.forEach(function(d,m){var N=m.toLowerCase();m!=N&&($d(this,m),qd(this,N,d))},o)),o.j=u}function Bv(o,u){const d=new Ks;if(l.Image){const m=new Image;m.onload=A(bn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=A(bn,d,"TestLoadImage: error",!1,u,m),m.onabort=A(bn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=A(bn,d,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function $v(o,u){const d=new Ks,m=new AbortController,N=setTimeout(()=>{m.abort(),bn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(b=>{clearTimeout(N),b.ok?bn(d,"TestPingServer: ok",!0,u):bn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(N),bn(d,"TestPingServer: error",!1,u)})}function bn(o,u,d,m,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),m(d)}catch{}}function Hv(){this.g=new Av}function qv(o,u,d){const m=d||"";try{Od(o,function(N,b){let U=N;f(N)&&(U=Al(N)),u.push(m+b+"="+encodeURIComponent(U))})}catch(N){throw u.push(m+"type="+encodeURIComponent("_badmap")),N}}function Ao(o){this.l=o.Ub||null,this.j=o.eb||!1}R(Ao,kl),Ao.prototype.g=function(){return new ko(this.l,this.j)},Ao.prototype.i=function(o){return function(){return o}}({});function ko(o,u){Ae.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(ko,Ae),t=ko.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Zs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Js(this):Zs(this),this.readyState==3&&Wd(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Js(this))},t.Qa=function(o){this.g&&(this.response=o,Js(this))},t.ga=function(){this.g&&Js(this)};function Js(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Zs(o)}t.setRequestHeader=function(o,u){this.u.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function Zs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Kd(o){let u="";return B(o,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function Ll(o,u,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Kd(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):ge(o,u,d))}function ke(o){Ae.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ke,Ae);var Wv=/^https?$/i,Kv=["POST","PUT"];t=ke.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rl.g(),this.v=this.o?Ed(this.o):Ed(Rl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(b){Gd(this,b);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var N in m)d.set(N,m[N]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const b of m.keys())d.set(b,m.get(b));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(b=>b.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Kv,u,void 0))||m||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,U]of d)this.g.setRequestHeader(b,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xd(this),this.u=!0,this.g.send(o),this.u=!1}catch(b){Gd(this,b)}};function Gd(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Qd(o),Co(o)}function Qd(o){o.A||(o.A=!0,Re(o,"complete"),Re(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Re(this,"complete"),Re(this,"abort"),Co(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yd(this):this.bb())},t.bb=function(){Yd(this)};function Yd(o){if(o.h&&typeof a<"u"&&(!o.v[1]||cn(o)!=4||o.Z()!=2)){if(o.u&&cn(o)==4)Nn(o.Ea,0,o);else if(Re(o,"readystatechange"),cn(o)==4){o.h=!1;try{const U=o.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var m;if(m=U===0){var N=String(o.D).match(zd)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),m=!Wv.test(N?N.toLowerCase():"")}d=m}if(d)Re(o,"complete"),Re(o,"success");else{o.m=6;try{var b=2<cn(o)?o.g.statusText:""}catch{b=""}o.l=b+" ["+o.Z()+"]",Qd(o)}}finally{Co(o)}}}}function Co(o,u){if(o.g){Xd(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Re(o,"ready");try{d.onreadystatechange=m}catch{}}}function Xd(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function cn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Sv(u)}};function Jd(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Gv(o){const u={};o=(o.g&&2<=cn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(T(o[m]))continue;var d=C(o[m]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const b=u[N]||[];u[N]=b,b.push(d)}E(u,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Zd(o){this.Aa=0,this.i=[],this.j=new Ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,o),this.cb=ei("retryDelaySeedMs",1e4,o),this.Wa=ei("forwardChannelMaxRetries",2,o),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Vd(o&&o.concurrentRequestLimit),this.Da=new Hv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zd.prototype,t.la=8,t.G=1,t.connect=function(o,u,d,m){lt(0),this.W=o,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=uf(this,null,this.W),Ro(this)};function Fl(o){if(ef(o),o.G==3){var u=o.U++,d=un(o.I);if(ge(d,"SID",o.K),ge(d,"RID",u),ge(d,"TYPE","terminate"),ti(o,d),u=new Rn(o,o.j,u),u.L=2,u.v=So(un(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=u.v,d=!0),d||(u.g=cf(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Eo(u)}lf(o)}function No(o){o.g&&(zl(o),o.g.cancel(),o.g=null)}function ef(o){No(o),o.u&&(l.clearTimeout(o.u),o.u=null),Po(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ro(o){if(!Dd(o.h)&&!o.s){o.s=!0;var u=o.Ga;Vt||q(),M||(Vt(),M=!0),Q.add(u,o),o.B=0}}function Qv(o,u){return Md(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ws(_(o.Ga,o,u),af(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new Rn(this,this.j,o);let b=this.o;if(this.S&&(b?(b=g(b),S(b,this.S)):b=this.S),this.m!==null||this.O||(N.H=b,b=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=nf(this,N,u),d=un(this.I),ge(d,"RID",o),ge(d,"CVER",22),this.D&&ge(d,"X-HTTP-Session-Id",this.D),ti(this,d),b&&(this.O?u="headers="+encodeURIComponent(String(Kd(b)))+"&"+u:this.m&&Ll(d,this.m,b)),Ml(this.h,N),this.Ua&&ge(d,"TYPE","init"),this.P?(ge(d,"$req",u),ge(d,"SID","null"),N.T=!0,bl(N,d,null)):bl(N,d,u),this.G=2}}else this.G==3&&(o?tf(this,o):this.i.length==0||Dd(this.h)||tf(this))};function tf(o,u){var d;u?d=u.l:d=o.U++;const m=un(o.I);ge(m,"SID",o.K),ge(m,"RID",d),ge(m,"AID",o.T),ti(o,m),o.m&&o.o&&Ll(m,o.m,o.o),d=new Rn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=nf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ml(o.h,d),bl(d,m,u)}function ti(o,u){o.H&&B(o.H,function(d,m){ge(u,m,d)}),o.l&&Od({},function(d,m){ge(u,m,d)})}function nf(o,u,d){d=Math.min(o.i.length,d);var m=o.l?_(o.l.Na,o.l,o):null;e:{var N=o.i;let b=-1;for(;;){const U=["count="+d];b==-1?0<d?(b=N[0].g,U.push("ofs="+b)):b=0:U.push("ofs="+b);let pe=!0;for(let He=0;He<d;He++){let le=N[He].g;const Je=N[He].map;if(le-=b,0>le)b=Math.max(0,N[He].g-100),pe=!1;else try{qv(Je,U,"req"+le+"_")}catch{m&&m(Je)}}if(pe){m=U.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,m}function rf(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Vt||q(),M||(Vt(),M=!0),Q.add(u,o),o.v=0}}function Ol(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ws(_(o.Fa,o),af(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,sf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ws(_(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),No(this),sf(this))};function zl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function sf(o){o.g=new Rn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=un(o.qa);ge(u,"RID","rpc"),ge(u,"SID",o.K),ge(u,"AID",o.T),ge(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&ge(u,"TO",o.ja),ge(u,"TYPE","xmlhttp"),ti(o,u),o.m&&o.o&&Ll(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=So(un(u)),d.m=null,d.P=!0,Pd(d,o)}t.Za=function(){this.C!=null&&(this.C=null,No(this),Ol(this),lt(19))};function Po(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function of(o,u){var d=null;if(o.g==u){Po(o),zl(o),o.g=null;var m=2}else if(Dl(o.h,u))d=u.D,Ld(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var N=o.B;m=_o(),Re(m,new kd(m,d)),Ro(o)}else rf(o);else if(N=u.s,N==3||N==0&&0<u.X||!(m==1&&Qv(o,u)||m==2&&Ol(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),N){case 1:yr(o,5);break;case 4:yr(o,10);break;case 3:yr(o,6);break;default:yr(o,2)}}}function af(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function yr(o,u){if(o.j.info("Error code "+u),u==2){var d=_(o.fb,o),m=o.Xa;const N=!m;m=new gr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||To(m,"https"),So(m),N?Bv(m.toString(),d):$v(m.toString(),d)}else lt(2);o.G=0,o.l&&o.l.sa(u),lf(o),ef(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function lf(o){if(o.G=0,o.ka=[],o.l){const u=Fd(o.h);(u.length!=0||o.i.length!=0)&&(D(o.ka,u),D(o.ka,o.i),o.h.i.length=0,P(o.i),o.i.length=0),o.l.ra()}}function uf(o,u,d){var m=d instanceof gr?un(d):new gr(d);if(m.g!="")u&&(m.g=u+"."+m.g),Io(m,m.s);else{var N=l.location;m=N.protocol,u=u?u+"."+N.hostname:N.hostname,N=+N.port;var b=new gr(null);m&&To(b,m),u&&(b.g=u),N&&Io(b,N),d&&(b.l=d),m=b}return d=o.D,u=o.ya,d&&u&&ge(m,d,u),ge(m,"VER",o.la),ti(o,m),m}function cf(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new ke(new Ao({eb:d})):new ke(o.pa),u.Ha(o.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hf(){}t=hf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bo(){}bo.prototype.g=function(o,u){return new xt(o,u)};function xt(o,u){Ae.call(this),this.g=new Zd(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!T(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Hr(this)}R(xt,Ae),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Fl(this.g)},xt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Al(o),o=d);u.i.push(new bv(u.Ya++,o)),u.G==3&&Ro(u)},xt.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,xt.aa.N.call(this)};function df(o){Cl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}R(df,Cl);function ff(){Nl.call(this),this.status=1}R(ff,Nl);function Hr(o){this.g=o}R(Hr,hf),Hr.prototype.ua=function(){Re(this.g,"a")},Hr.prototype.ta=function(o){Re(this.g,new df(o))},Hr.prototype.sa=function(o){Re(this.g,new ff)},Hr.prototype.ra=function(){Re(this.g,"b")},bo.prototype.createWebChannel=bo.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,Q0=function(){return new bo},G0=function(){return _o()},K0=pr,Ec={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,fa=xo,Cd.COMPLETE="complete",W0=Cd,Td.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,mi=Td,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,q0=ke}).apply(typeof Xo<"u"?Xo:typeof self<"u"?self:typeof window<"u"?window:{});const jp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new F0("@firebase/firestore");function ci(){return Vr.logLevel}function K(t,...e){if(Vr.logLevel<=oe.DEBUG){const n=e.map(Oh);Vr.debug(`Firestore (${Fs}): ${t}`,...n)}}function En(t,...e){if(Vr.logLevel<=oe.ERROR){const n=e.map(Oh);Vr.error(`Firestore (${Fs}): ${t}`,...n)}}function Ss(t,...e){if(Vr.logLevel<=oe.WARN){const n=e.map(Oh);Vr.warn(`Firestore (${Fs}): ${t}`,...n)}}function Oh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${Fs}) INTERNAL ASSERTION FAILED: `+t;throw En(e),new Error(e)}function de(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Ls{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}}class rE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sE{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new Y0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new rt(e)}}class iE{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oE{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new iE(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new aE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=uE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function As(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Oe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Oe(0,0))}static max(){return new Z(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends Xi{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const cE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Xi{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return cE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new H(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ve.fromString(e))}static fromName(e){return new G(ve.fromString(e).popFirst(5))}static empty(){return new G(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ve(e.slice()))}}function hE(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new tr(s,G.empty(),e)}function dE(t){return new tr(t.readTime,t.key,-1)}class tr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new tr(Z.min(),G.empty(),-1)}static max(){return new tr(Z.max(),G.empty(),-1)}}function fE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==pE)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(e[f]).next(p=>{a[f]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function gE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ho(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zh.oe=-1;function ml(t){return t==null}function qa(t){return t===0&&1/t==-1/0}function yE(t){return typeof t=="number"&&Number.isInteger(t)&&!qa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function J0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jo(this.root,e,this.comparator,!0)}}class Jo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??We.RED,this.left=s??We.EMPTY,this.right=i??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new We(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return We.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,i){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dp(this.data.getIterator())}getIteratorFrom(e){return new Dp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class Dp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Qe(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Z0("Invalid base64 string: "+i):i}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const vE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(t){if(de(!!t),typeof t=="string"){let e=0;const n=vE.exec(t);if(de(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Bh(t){const e=t.mapValue.fields.__previous_value__;return Uh(e)?Bh(e):e}function Ji(t){const e=nr(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,r,s,i,a,l,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f}}class Zi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uh(t)?4:wE(t)?9007199254740991:xE(t)?10:11:X()}function nn(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ji(t).isEqual(Ji(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=nr(s.timestampValue),l=nr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Dr(s.bytesValue).isEqual(Dr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pe(s.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pe(s.integerValue)===Pe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Pe(s.doubleValue),l=Pe(i.doubleValue);return a===l?qa(a)===qa(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return As(t.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Vp(a)!==Vp(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!nn(a[c],l[c])))return!1;return!0}(t,e);default:return X()}}function eo(t,e){return(t.values||[]).find(n=>nn(n,e))!==void 0}function ks(t,e){if(t===e)return 0;const n=Mr(t),r=Mr(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Pe(i.integerValue||i.doubleValue),c=Pe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Mp(t.timestampValue,e.timestampValue);case 4:return Mp(Ji(t),Ji(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Dr(i),c=Dr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const p=ue(l[f],c[f]);if(p!==0)return p}return ue(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ue(Pe(i.latitude),Pe(a.latitude));return l!==0?l:ue(Pe(i.longitude),Pe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lp(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,f,p;const y=i.fields||{},_=a.fields||{},A=(l=y.value)===null||l===void 0?void 0:l.arrayValue,R=(c=_.value)===null||c===void 0?void 0:c.arrayValue,P=ue(((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0,((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:Lp(A,R)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Zo.mapValue&&a===Zo.mapValue)return 0;if(i===Zo.mapValue)return 1;if(a===Zo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let y=0;y<c.length&&y<p.length;++y){const _=ue(c[y],p[y]);if(_!==0)return _;const A=ks(l[c[y]],f[p[y]]);if(A!==0)return A}return ue(c.length,p.length)}(t.mapValue,e.mapValue);default:throw X()}}function Mp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=nr(t),r=nr(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function Lp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ks(n[s],r[s]);if(i)return i}return ue(n.length,r.length)}function Cs(t){return Tc(t)}function Tc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Tc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Tc(n.fields[a])}`;return s+"}"}(t.mapValue):X()}function Fp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ic(t){return!!t&&"integerValue"in t}function $h(t){return!!t&&"arrayValue"in t}function Op(t){return!!t&&"nullValue"in t}function zp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pa(t){return!!t&&"mapValue"in t}function xE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ci(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ci(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ci(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ci(n)}setAll(e){let n=Ke.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ci(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Os(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Nt(Ci(this.value))}}function ey(t){const e=[];return Os(t.fields,(n,r)=>{const s=new Ke([n]);if(pa(r)){const i=ey(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new it(e,0,Z.min(),Z.min(),Z.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,s){return new it(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new it(e,2,n,Z.min(),Z.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,Z.min(),Z.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.position=e,this.inclusive=n}}function Up(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(a.referenceValue),n.key):r=ks(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n="asc"){this.field=e,this.dir=n}}function EE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{}class Me extends ty{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IE(e,n,r):n==="array-contains"?new kE(e,r):n==="in"?new CE(e,r):n==="not-in"?new NE(e,r):n==="array-contains-any"?new RE(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SE(e,r):new AE(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ks(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qt extends ty{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qt(e,n)}matches(e){return ny(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ny(t){return t.op==="and"}function ry(t){return TE(t)&&ny(t)}function TE(t){for(const e of t.filters)if(e instanceof qt)return!1;return!0}function Sc(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Cs(t.value);if(ry(t))return t.filters.map(e=>Sc(e)).join(",");{const e=t.filters.map(n=>Sc(n)).join(",");return`${t.op}(${e})`}}function sy(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)}(t,e):t instanceof qt?function(r,s){return s instanceof qt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&sy(a,s.filters[l]),!0):!1}(t,e):void X()}function iy(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Cs(n.value)}`}(t):t instanceof qt?function(n){return n.op.toString()+" {"+n.getFilters().map(iy).join(" ,")+"}"}(t):"Filter"}class IE extends Me{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class SE extends Me{constructor(e,n){super(e,"in",n),this.keys=oy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AE extends Me{constructor(e,n){super(e,"not-in",n),this.keys=oy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oy(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class kE extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $h(n)&&eo(n.arrayValue,this.value)}}class CE extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eo(this.value.arrayValue,n)}}class NE extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!eo(this.value.arrayValue,n)}}class RE extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$h(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function $p(t,e=null,n=[],r=[],s=null,i=null,a=null){return new PE(t,e,n,r,s,i,a)}function Hh(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cs(r)).join(",")),e.ue=n}return e.ue}function qh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bp(t.startAt,e.startAt)&&Bp(t.endAt,e.endAt)}function Ac(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bE(t,e,n,r,s,i,a,l){return new zs(t,e,n,r,s,i,a,l)}function Wh(t){return new zs(t)}function Hp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ay(t){return t.collectionGroup!==null}function Ni(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qe(Ke.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new to(i,r))}),n.has(Ke.keyField().canonicalString())||e.ce.push(new to(Ke.keyField(),r))}return e.ce}function Zt(t){const e=ee(t);return e.le||(e.le=jE(e,Ni(t))),e.le}function jE(t,e){if(t.limitType==="F")return $p(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new to(s.field,i)});const n=t.endAt?new Wa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wa(t.startAt.position,t.startAt.inclusive):null;return $p(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kc(t,e){const n=t.filters.concat([e]);return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cc(t,e,n){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gl(t,e){return qh(Zt(t),Zt(e))&&t.limitType===e.limitType}function ly(t){return`${Hh(Zt(t))}|lt:${t.limitType}`}function Kr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>iy(s)).join(", ")}]`),ml(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Cs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Cs(s)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function yl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ni(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const f=Up(a,l,c);return a.inclusive?f<=0:f<0}(r.startAt,Ni(r),s)||r.endAt&&!function(a,l,c){const f=Up(a,l,c);return a.inclusive?f>=0:f>0}(r.endAt,Ni(r),s))}(t,e)}function VE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uy(t){return(e,n)=>{let r=!1;for(const s of Ni(t)){const i=DE(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function DE(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?ks(c,f):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return J0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Ie(G.comparator);function Tn(){return ME}const cy=new Ie(G.comparator);function gi(...t){let e=cy;for(const n of t)e=e.insert(n.key,n);return e}function hy(t){let e=cy;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ir(){return Ri()}function dy(){return Ri()}function Ri(){return new Us(t=>t.toString(),(t,e)=>t.isEqual(e))}const LE=new Ie(G.comparator),FE=new Qe(G.comparator);function re(...t){let e=FE;for(const n of t)e=e.add(n);return e}const OE=new Qe(ue);function zE(){return OE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(e)?"-0":e}}function fy(t){return{integerValue:""+t}}function UE(t,e){return yE(e)?fy(e):Kh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this._=void 0}}function BE(t,e,n){return t instanceof Ka?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Uh(i)&&(i=Bh(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof no?my(t,e):t instanceof ro?gy(t,e):function(s,i){const a=py(s,i),l=qp(a)+qp(s.Pe);return Ic(a)&&Ic(s.Pe)?fy(l):Kh(s.serializer,l)}(t,e)}function $E(t,e,n){return t instanceof no?my(t,e):t instanceof ro?gy(t,e):n}function py(t,e){return t instanceof Ga?function(r){return Ic(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ka extends vl{}class no extends vl{constructor(e){super(),this.elements=e}}function my(t,e){const n=yy(e);for(const r of t.elements)n.some(s=>nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ro extends vl{constructor(e){super(),this.elements=e}}function gy(t,e){let n=yy(e);for(const r of t.elements)n=n.filter(s=>!nn(s,r));return{arrayValue:{values:n}}}class Ga extends vl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function qp(t){return Pe(t.integerValue||t.doubleValue)}function yy(t){return $h(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HE(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof no&&s instanceof no||r instanceof ro&&s instanceof ro?As(r.elements,s.elements,nn):r instanceof Ga&&s instanceof Ga?nn(r.Pe,s.Pe):r instanceof Ka&&s instanceof Ka}(t.transform,e.transform)}class qE{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ma(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _l{}function vy(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xy(t.key,en.none()):new fo(t.key,t.data,en.none());{const n=t.data,r=Nt.empty();let s=new Qe(Ke.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Or(t.key,r,new Ut(s.toArray()),en.none())}}function WE(t,e,n){t instanceof fo?function(s,i,a){const l=s.value.clone(),c=Kp(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Or?function(s,i,a){if(!ma(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Kp(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(_y(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Pi(t,e,n,r){return t instanceof fo?function(i,a,l,c){if(!ma(i.precondition,a))return l;const f=i.value.clone(),p=Gp(i.fieldTransforms,c,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Or?function(i,a,l,c){if(!ma(i.precondition,a))return l;const f=Gp(i.fieldTransforms,c,a),p=a.data;return p.setAll(_y(i)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(i,a,l){return ma(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function KE(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=py(r.transform,s||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,i))}return n||null}function Wp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&As(r,s,(i,a)=>HE(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fo extends _l{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Or extends _l{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _y(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Kp(t,e,n){const r=new Map;de(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,$E(a,l,n[s]))}return r}function Gp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,BE(i,a,e))}return r}class xy extends _l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GE extends _l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WE(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dy();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=vy(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,(n,r)=>Wp(n,r))&&As(this.baseMutations,e.baseMutations,(n,r)=>Wp(n,r))}}class Gh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length);let s=function(){return LE}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Gh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,se;function JE(t){switch(t){default:return X();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function wy(t){if(t===void 0)return En("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ve.OK:return L.OK;case Ve.CANCELLED:return L.CANCELLED;case Ve.UNKNOWN:return L.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return L.INTERNAL;case Ve.UNAVAILABLE:return L.UNAVAILABLE;case Ve.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ve.NOT_FOUND:return L.NOT_FOUND;case Ve.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ve.ABORTED:return L.ABORTED;case Ve.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ve.DATA_LOSS:return L.DATA_LOSS;default:return X()}}(se=Ve||(Ve={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=new kr([4294967295,4294967295],0);function Qp(t){const e=ZE().encode(t),n=new H0;return n.update(e),new Uint8Array(n.digest())}function Yp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new kr([n,r],0),new kr([s,i],0)]}class Qh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yi(`Invalid padding: ${n}`);if(r<0)throw new yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=kr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(kr.fromNumber(r)));return s.compare(eT)===1&&(s=new kr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Qp(e),[r,s]=Yp(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Qh(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=Qp(e),[r,s]=Yp(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xl(Z.min(),s,new Ie(ue),Tn(),re())}}class po{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new po(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Ey{constructor(e,n){this.targetId=e,this.me=n}}class Ty{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Xp{constructor(){this.fe=0,this.ge=Zp(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new po(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Zp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tT{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tn(),this.qe=Jp(),this.Qe=new Ie(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ac(i))if(r===0){const a=new G(i.path);this.Ue(n,a,it.newNoDocument(a,Z.min()))}else de(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),c=l?this.Xe(l,e,a):1;if(c!==0){this.je(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Dr(r).toUint8Array()}catch(c){if(c instanceof Z0)return Ss("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Qh(a,s,i)}catch(c){return Ss(c instanceof yi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Ac(l.target)){const c=new G(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,it.newNoDocument(c,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=re();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const f=this.Je(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new xl(e,n,this.Qe,this.ke,r);return this.ke=Tn(),this.qe=Jp(),this.Qe=new Ie(ue),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Xp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qe(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Jp(){return new Ie(G.comparator)}function Zp(){return new Ie(G.comparator)}const nT=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),rT=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),sT=(()=>({and:"AND",or:"OR"}))();class iT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nc(t,e){return t.useProto3Json||ml(e)?e:{value:e}}function Qa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oT(t,e){return Qa(t,e.toTimestamp())}function tn(t){return de(!!t),Z.fromTimestamp(function(n){const r=nr(n);return new Oe(r.seconds,r.nanos)}(t))}function Yh(t,e){return Rc(t,e).canonicalString()}function Rc(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Sy(t){const e=ve.fromString(t);return de(Ry(e)),e}function Pc(t,e){return Yh(t.databaseId,e.path)}function vu(t,e){const n=Sy(e);if(n.get(1)!==t.databaseId.projectId)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(ky(n))}function Ay(t,e){return Yh(t.databaseId,e)}function aT(t){const e=Sy(t);return e.length===4?ve.emptyPath():ky(e)}function bc(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ky(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function em(t,e,n){return{name:Pc(t,e),fields:n.value.mapValue.fields}}function lT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(f,p){return f.useProto3Json?(de(p===void 0||typeof p=="string"),Xe.fromBase64String(p||"")):(de(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Xe.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){const p=f.code===void 0?L.UNKNOWN:wy(f.code);return new H(p,f.message||"")}(a);n=new Ty(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vu(t,r.document.name),i=tn(r.document.updateTime),a=r.document.createTime?tn(r.document.createTime):Z.min(),l=new Nt({mapValue:{fields:r.document.fields}}),c=it.newFoundDocument(s,i,a,l),f=r.targetIds||[],p=r.removedTargetIds||[];n=new ga(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vu(t,r.document),i=r.readTime?tn(r.readTime):Z.min(),a=it.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ga([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vu(t,r.document),i=r.removedTargetIds||[];n=new ga([],i,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new XE(s,i),l=r.targetId;n=new Ey(l,a)}}return n}function uT(t,e){let n;if(e instanceof fo)n={update:em(t,e.key,e.value)};else if(e instanceof xy)n={delete:Pc(t,e.key)};else if(e instanceof Or)n={update:em(t,e.key,e.data),updateMask:vT(e.fieldMask)};else{if(!(e instanceof GE))return X();n={verify:Pc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ka)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof no)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ro)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ga)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:oT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X()}(t,e.precondition)),n}function cT(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?tn(s.updateTime):tn(i);return a.isEqual(Z.min())&&(a=tn(i)),new qE(a,s.transformResults||[])}(n,e))):[]}function hT(t,e){return{documents:[Ay(t,e.path)]}}function dT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ay(t,s);const i=function(f){if(f.length!==0)return Ny(qt.create(f,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(p=>function(_){return{field:Gr(_.field),direction:mT(_.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Nc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:s}}function fT(t){let e=aT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(y){const _=Cy(y);return _ instanceof qt&&ry(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(_=>function(R){return new to(Qr(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,ml(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(y){const _=!!y.before,A=y.values||[];return new Wa(A,_)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const _=!y.before,A=y.values||[];return new Wa(A,_)}(n.endAt)),bE(e,s,a,i,l,"F",c,f)}function pT(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cy(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qr(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Qr(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qr(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qr(n.unaryFilter.field);return Me.create(a,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Qr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qt.create(n.compositeFilter.filters.map(r=>Cy(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function mT(t){return nT[t]}function gT(t){return rT[t]}function yT(t){return sT[t]}function Gr(t){return{fieldPath:t.canonicalString()}}function Qr(t){return Ke.fromServerFormat(t.fieldPath)}function Ny(t){return t instanceof Me?function(n){if(n.op==="=="){if(zp(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NAN"}};if(Op(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zp(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NOT_NAN"}};if(Op(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gr(n.field),op:gT(n.op),value:n.value}}}(t):t instanceof qt?function(n){const r=n.getFilters().map(s=>Ny(s));return r.length===1?r[0]:{compositeFilter:{op:yT(n.op),filters:r}}}(t):X()}function vT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ry(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n,r,s,i=Z.min(),a=Z.min(),l=Xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.ct=e}}function xT(t){const e=fT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.un=new ET}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(tr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class ET{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ns(0)}static kn(){return new Ns(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.changes=new Us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Pi(r.mutation,s,Ut.empty(),Oe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=Ir();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=gi();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Tn();const a=Ri(),l=function(){return Ri()}();return n.forEach((c,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Or)?i=i.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),Pi(p.mutation,f,p.mutation.getFieldMask(),Oe.now())):a.set(f.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((f,p)=>a.set(f,p)),n.forEach((f,p)=>{var y;return l.set(f,new IT(p,(y=a.get(f))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ri();let s=new Ie((a,l)=>a-l),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let p=r.get(c)||Ut.empty();p=l.applyToLocalView(f,p),r.set(c,p);const y=(s.get(l.batchId)||re()).add(c);s=s.insert(l.batchId,y)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,p=c.value,y=dy();p.forEach(_=>{if(!i.has(_)){const A=vy(n.get(_),r.get(_));A!==null&&y.set(_,A),i=i.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ay(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Ir());let l=-1,c=i;return a.next(f=>F.forEach(f,(p,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,f,i)).next(()=>this.computeViews(e,c,f,re())).next(p=>({batchId:l,changes:hy(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=gi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=gi();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const f=function(y,_){return new zs(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(p=>{p.forEach((y,_)=>{a=a.insert(y,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,it.newInvalidDocument(p)))});let l=gi();return a.forEach((c,f)=>{const p=i.get(c);p!==void 0&&Pi(p.mutation,f,Ut.empty(),Oe.now()),yl(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:xT(s.bundledQuery),readTime:tn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.overlays=new Ie(G.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ir();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Ir(),i=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ie((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=i.get(f.largestBatchId);p===null&&(p=Ir(),i=i.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const l=Ir(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,p)=>l.set(f,p)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new YE(n,r));let i=this.Ir.get(n);i===void 0&&(i=re(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this.Tr=new Qe(Ue.Er),this.dr=new Qe(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new ve([])),r=new Ue(n,e),s=new Ue(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new ve([])),r=new Ue(n,e),s=new Ue(n,e+1);let i=re();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qe(Ue.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new QE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Ue(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),s=new Ue(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(ue);return n.forEach(s=>{const i=new Ue(s,0),a=new Ue(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const a=new Ue(new G(i),0);let l=new Qe(ue);return this.br.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.wr)),!0)},a),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new Ue(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ue(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.Mr=e,this.docs=function(){return new Ie(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=Tn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():it.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Tn();const a=n.path,l=new G(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||fE(dE(p),r)<=0||(s.has(p.key)||yl(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PT(this)}getSize(e){return F.resolve(this.size)}}class PT extends TT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.persistence=e,this.Nr=new Us(n=>Hh(n),qh),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xh,this.targetCount=0,this.kr=Ns.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ns(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zh(0),this.Kr=!1,this.Kr=!0,this.$r=new CT,this.referenceDelegate=e(this),this.Ur=new bT(this),this.indexManager=new wT,this.remoteDocumentCache=function(s){return new RT(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new _T(n),this.Gr=new AT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new NT(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new VT(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class VT extends mE{constructor(e){super(),this.currentSequenceNumber=e}}class Jh{constructor(e){this.persistence=e,this.Jr=new Xh,this.Yr=null}static Zr(e){return new Jh(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Fx()?8:gE(Mx())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new DT;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ci()<=oe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ci()<=oe.DEBUG&&K("QueryEngine","Query:",Kr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ci()<=oe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):F.resolve())}Yi(e,n){if(Hp(n))return F.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cc(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=re(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.ts(n,l);return this.ns(n,f,a,c.readTime)?this.Yi(e,Cc(n,null,"F")):this.rs(e,f,n,c)}))})))}Zi(e,n,r,s){return Hp(n)||s.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?F.resolve(null):(ci()<=oe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kr(n)),this.rs(e,a,n,hE(s,-1)).next(l=>l))})}ts(e,n){let r=new Qe(uy(e));return n.forEach((s,i)=>{yl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ci()<=oe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Kr(n)),this.Ji.getDocumentsMatchingQuery(e,n,tr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ie(ue),this._s=new Us(i=>Hh(i),qh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ST(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function FT(t,e,n,r){return new LT(t,e,n,r)}async function Py(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=re();for(const f of s){a.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of i){l.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:l}))})})}function OT(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,f,p){const y=f.batch,_=y.keys();let A=F.resolve();return _.forEach(R=>{A=A.next(()=>p.getEntry(c,R)).next(P=>{const D=f.docVersions.get(R);de(D!==null),P.version.compareTo(D)<0&&(y.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),p.addEntry(P)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,y))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=re();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function by(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function zT(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,y)=>{const _=s.get(y);if(!_)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,y)));let A=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?A=A.withResumeToken(Xe.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),s=s.insert(y,A),function(P,D,k){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,A,p)&&l.push(n.Ur.updateTargetData(i,A))});let c=Tn(),f=re();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(UT(i,a,e.documentUpdates).next(p=>{c=p.Ps,f=p.Is})),!r.isEqual(Z.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(y=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return F.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,f)).next(()=>c)}).then(i=>(n.os=s,i))}function UT(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Tn();return n.forEach((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{Ps:a,Is:s}})}function BT(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $T(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new zn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function jc(t,e,n){const r=ee(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ho(a))throw a;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function tm(t,e,n){const r=ee(t);let s=Z.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,p){const y=ee(c),_=y._s.get(p);return _!==void 0?F.resolve(y.os.get(_)):y.Ur.getTargetData(f,p)}(r,a,Zt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:Z.min(),n?i:re())).next(l=>(HT(r,VE(e),l),{documents:l,Ts:i})))}function HT(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class nm{constructor(){this.activeTargetIds=zE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qT{constructor(){this.so=new nm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea=null;function _u(){return ea===null?ea=function(){return 268435456+Math.round(2147483648*Math.random())}():ea++,"0x"+ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt="WebChannelConnection";class QT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=_u(),c=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,i,a),this.No(n,c,f,s).then(p=>(K("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Ss("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=KT[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=_u();return new Promise((a,l)=>{const c=new q0;c.setWithCredentials(!0),c.listenOnce(W0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fa.NO_ERROR:const p=c.getResponseJson();K(nt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case fa.TIMEOUT:K(nt,`RPC '${e}' ${i} timed out`),l(new H(L.DEADLINE_EXCEEDED,"Request time out"));break;case fa.HTTP_ERROR:const y=c.getStatus();if(K(nt,`RPC '${e}' ${i} failed with status:`,y,"response text:",c.getResponseText()),y>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const R=function(D){const k=D.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(k)>=0?k:L.UNKNOWN}(A.status);l(new H(R,A.message))}else l(new H(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new H(L.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{K(nt,`RPC '${e}' ${i} completed.`)}});const f=JSON.stringify(s);K(nt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",f,r,15)})}Bo(e,n,r){const s=_u(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Q0(),l=G0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");K(nt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const y=a.createWebChannel(p,c);let _=!1,A=!1;const R=new GT({Io:D=>{A?K(nt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(_||(K(nt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),_=!0),K(nt,`RPC '${e}' stream ${s} sending:`,D),y.send(D))},To:()=>y.close()}),P=(D,k,T)=>{D.listen(k,I=>{try{T(I)}catch(V){setTimeout(()=>{throw V},0)}})};return P(y,mi.EventType.OPEN,()=>{A||(K(nt,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),P(y,mi.EventType.CLOSE,()=>{A||(A=!0,K(nt,`RPC '${e}' stream ${s} transport closed`),R.So())}),P(y,mi.EventType.ERROR,D=>{A||(A=!0,Ss(nt,`RPC '${e}' stream ${s} transport errored:`,D),R.So(new H(L.UNAVAILABLE,"The operation could not be completed")))}),P(y,mi.EventType.MESSAGE,D=>{var k;if(!A){const T=D.data[0];de(!!T);const I=T,V=I.error||((k=I[0])===null||k===void 0?void 0:k.error);if(V){K(nt,`RPC '${e}' stream ${s} received error:`,V);const z=V.status;let B=function(w){const S=Ve[w];if(S!==void 0)return wy(S)}(z),E=V.message;B===void 0&&(B=L.INTERNAL,E="Unknown error status: "+z+" with message "+V.message),A=!0,R.So(new H(B,E)),y.close()}else K(nt,`RPC '${e}' stream ${s} received:`,T),R.bo(T)}}),P(l,K0.STAT_EVENT,D=>{D.stat===Ec.PROXY?K(nt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Ec.NOPROXY&&K(nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function xu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){return new iT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n,r,s,i,a,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jy(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YT extends Vy{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=lT(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?tn(a.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=bc(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Ac(c)?{documents:hT(i,c)}:{query:dT(i,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Iy(i,a.resumeToken);const f=Nc(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=Qa(i,a.snapshotVersion.toTimestamp());const f=Nc(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const r=pT(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=bc(this.serializer),n.removeTarget=e,this.a_(n)}}class XT extends Vy{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cT(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=bc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uT(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Rc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Rc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(L.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ZT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(En(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{zr(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(c){const f=ee(c);f.L_.add(4),await mo(f),f.q_.set("Unknown"),f.L_.delete(4),await El(f)}(this))})}),this.q_=new ZT(r,s)}}async function El(t){if(zr(t))for(const e of t.B_)await e(!0)}async function mo(t){for(const e of t.B_)await e(!1)}function Dy(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),rd(n)?nd(n):Bs(n).r_()&&td(n,e))}function ed(t,e){const n=ee(t),r=Bs(n);n.N_.delete(e),r.r_()&&My(n,e),n.N_.size===0&&(r.r_()?r.o_():zr(n)&&n.q_.set("Unknown"))}function td(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bs(t).A_(e)}function My(t,e){t.Q_.xe(e),Bs(t).R_(e)}function nd(t){t.Q_=new tT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bs(t).start(),t.q_.v_()}function rd(t){return zr(t)&&!Bs(t).n_()&&t.N_.size>0}function zr(t){return ee(t).L_.size===0}function Ly(t){t.Q_=void 0}async function t2(t){t.q_.set("Online")}async function n2(t){t.N_.forEach((e,n)=>{td(t,e)})}async function r2(t,e){Ly(t),rd(t)?(t.q_.M_(e),nd(t)):t.q_.set("Unknown")}async function s2(t,e,n){if(t.q_.set("Online"),e instanceof Ty&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ya(t,r)}else if(e instanceof ga?t.Q_.Ke(e):e instanceof Ey?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await by(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(f);p&&i.N_.set(f,p.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(Xe.EMPTY_BYTE_STRING,p.snapshotVersion)),My(i,c);const y=new zn(p.target,c,f,p.sequenceNumber);td(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Ya(t,r)}}async function Ya(t,e,n){if(!ho(e))throw e;t.L_.add(1),await mo(t),t.q_.set("Offline"),n||(n=()=>by(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await El(t)})}function Fy(t,e){return e().catch(n=>Ya(t,n,e))}async function Tl(t){const e=ee(t),n=rr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;i2(e);)try{const s=await BT(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,o2(e,s)}catch(s){await Ya(e,s)}Oy(e)&&zy(e)}function i2(t){return zr(t)&&t.O_.length<10}function o2(t,e){t.O_.push(e);const n=rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Oy(t){return zr(t)&&!rr(t).n_()&&t.O_.length>0}function zy(t){rr(t).start()}async function a2(t){rr(t).p_()}async function l2(t){const e=rr(t);for(const n of t.O_)e.m_(n.mutations)}async function u2(t,e,n){const r=t.O_.shift(),s=Gh.from(r,e,n);await Fy(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Tl(t)}async function c2(t,e){e&&rr(t).V_&&await async function(r,s){if(function(a){return JE(a)&&a!==L.ABORTED}(s.code)){const i=r.O_.shift();rr(r).s_(),await Fy(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Tl(r)}}(t,e),Oy(t)&&zy(t)}async function sm(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=zr(n);n.L_.add(3),await mo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await El(n)}async function h2(t,e){const n=ee(t);e?(n.L_.delete(2),await El(n)):e||(n.L_.add(2),await mo(n),n.q_.set("Unknown"))}function Bs(t){return t.K_||(t.K_=function(n,r,s){const i=ee(n);return i.w_(),new YT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:t2.bind(null,t),Ro:n2.bind(null,t),mo:r2.bind(null,t),d_:s2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),rd(t)?nd(t):t.q_.set("Unknown")):(await t.K_.stop(),Ly(t))})),t.K_}function rr(t){return t.U_||(t.U_=function(n,r,s){const i=ee(n);return i.w_(),new XT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:a2.bind(null,t),mo:c2.bind(null,t),f_:l2.bind(null,t),g_:u2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Tl(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new sd(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function id(t,e){if(En("AsyncQueue",`${e}: ${t}`),ho(t))return new H(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=gi(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new ms(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ms;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this.W_=new Ie(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Rs{constructor(e,n,r,s,i,a,l,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Rs(e,n,ms.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class f2{constructor(){this.queries=om(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=om(),i.forEach((a,l)=>{for(const c of l.j_)c.onError(r)})})(this,new H(L.ABORTED,"Firestore shutting down"))}}function om(){return new Us(t=>ly(t),gl)}async function Uy(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new d2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=id(a,`Initialization of query '${Kr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&od(n)}async function By(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function p2(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&od(n)}function m2(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function od(t){t.Y_.forEach(e=>{e.next()})}var Vc,am;(am=Vc||(Vc={})).ea="default",am.Cache="cache";class $y{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e){this.key=e}}class qy{constructor(e){this.key=e}}class g2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=uy(e),this.Ra=new ms(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new im,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const _=s.get(p),A=yl(this.query,y)?y:null,R=!!_&&this.mutatedKeys.has(_.key),P=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;_&&A?_.data.isEqual(A.data)?R!==P&&(r.track({type:3,doc:A}),D=!0):this.ga(_,A)||(r.track({type:2,doc:A}),D=!0,(c&&this.Aa(A,c)>0||f&&this.Aa(A,f)<0)&&(l=!0)):!_&&A?(r.track({type:0,doc:A}),D=!0):_&&!A&&(r.track({type:1,doc:_}),D=!0,(c||f)&&(l=!0)),D&&(A?(a=a.add(A),i=P?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,y)=>function(A,R){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return P(A)-P(R)}(p.type,y.type)||this.Aa(p.doc,y.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,f=c!==this.Ea;return this.Ea=c,a.length!==0||f?{snapshot:new Rs(this.query,e.Ra,i,a,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new im,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new qy(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Hy(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class y2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class v2{constructor(e){this.key=e,this.va=!1}}class _2{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Us(l=>ly(l),gl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(G.comparator),this.Na=new Map,this.La=new Xh,this.Ba={},this.ka=new Map,this.qa=Ns.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function x2(t,e,n=!0){const r=Xy(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Wy(r,e,n,!0),s}async function w2(t,e){const n=Xy(t);await Wy(n,e,!0,!1)}async function Wy(t,e,n,r){const s=await $T(t.localStore,Zt(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await E2(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Dy(t.remoteStore,s),l}async function E2(t,e,n,r,s){t.Ka=(y,_,A)=>async function(P,D,k,T){let I=D.view.ma(k);I.ns&&(I=await tm(P.localStore,D.query,!1).then(({documents:E})=>D.view.ma(E,I)));const V=T&&T.targetChanges.get(D.targetId),z=T&&T.targetMismatches.get(D.targetId)!=null,B=D.view.applyChanges(I,P.isPrimaryClient,V,z);return um(P,D.targetId,B.wa),B.snapshot}(t,y,_,A);const i=await tm(t.localStore,e,!0),a=new g2(e,i.Ts),l=a.ma(i.documents),c=po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=a.applyChanges(l,t.isPrimaryClient,c);um(t,n,f.wa);const p=new y2(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function T2(t,e,n){const r=ee(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!gl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await jc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ed(r.remoteStore,s.targetId),Dc(r,s.targetId)}).catch(co)):(Dc(r,s.targetId),await jc(r.localStore,s.targetId,!0))}async function I2(t,e){const n=ee(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ed(n.remoteStore,r.targetId))}async function S2(t,e,n){const r=b2(t);try{const s=await function(a,l){const c=ee(a),f=Oe.now(),p=l.reduce((A,R)=>A.add(R.key),re());let y,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=Tn(),P=re();return c.cs.getEntries(A,p).next(D=>{R=D,R.forEach((k,T)=>{T.isValidDocument()||(P=P.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,R)).next(D=>{y=D;const k=[];for(const T of l){const I=KE(T,y.get(T.key).overlayedDocument);I!=null&&k.push(new Or(T.key,I,ey(I.value.mapValue),en.exists(!0)))}return c.mutationQueue.addMutationBatch(A,f,k,l)}).next(D=>{_=D;const k=D.applyToLocalDocumentSet(y,P);return c.documentOverlayCache.saveOverlays(A,D.batchId,k)})}).then(()=>({batchId:_.batchId,changes:hy(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let f=a.Ba[a.currentUser.toKey()];f||(f=new Ie(ue)),f=f.insert(l,c),a.Ba[a.currentUser.toKey()]=f}(r,s.batchId,n),await go(r,s.changes),await Tl(r.remoteStore)}catch(s){const i=id(s,"Failed to persist write");n.reject(i)}}async function Ky(t,e){const n=ee(t);try{const r=await zT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?de(a.va):s.removedDocuments.size>0&&(de(a.va),a.va=!1))}),await go(n,r,e)}catch(r){await co(r)}}function lm(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=ee(a);c.onlineState=l;let f=!1;c.queries.forEach((p,y)=>{for(const _ of y.j_)_.Z_(l)&&(f=!0)}),f&&od(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function A2(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ie(G.comparator);a=a.insert(i,it.newNoDocument(i,Z.min()));const l=re().add(i),c=new xl(Z.min(),new Map,new Ie(ue),a,l);await Ky(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),ad(r)}else await jc(r.localStore,e,!1).then(()=>Dc(r,e,n)).catch(co)}async function k2(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await OT(n.localStore,e);Qy(n,r,null),Gy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await go(n,s)}catch(s){await co(s)}}async function C2(t,e,n){const r=ee(t);try{const s=await function(a,l){const c=ee(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return c.mutationQueue.lookupMutationBatch(f,l).next(y=>(de(y!==null),p=y.keys(),c.mutationQueue.removeMutationBatch(f,y))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>c.localDocuments.getDocuments(f,p))})}(r.localStore,e);Qy(r,e,n),Gy(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await go(r,s)}catch(s){await co(s)}}function Gy(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Qy(t,e,n){const r=ee(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Dc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Yy(t,r)})}function Yy(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ed(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ad(t))}function um(t,e,n){for(const r of n)r instanceof Hy?(t.La.addReference(r.key,e),N2(t,r)):r instanceof qy?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Yy(t,r.key)):X()}function N2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),ad(t))}function ad(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new v2(n)),t.Oa=t.Oa.insert(n,r),Dy(t.remoteStore,new zn(Zt(Wh(n.path)),r,"TargetPurposeLimboResolution",zh.oe))}}async function go(t,e,n){const r=ee(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{a.push(r.Ka(c,e,n).then(f=>{var p;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Zh.Wi(c.targetId,f);i.push(y)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(c,f){const p=ee(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>F.forEach(f,_=>F.forEach(_.$i,A=>p.persistence.referenceDelegate.addReference(y,_.targetId,A)).next(()=>F.forEach(_.Ui,A=>p.persistence.referenceDelegate.removeReference(y,_.targetId,A)))))}catch(y){if(!ho(y))throw y;K("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const A=p.os.get(_),R=A.snapshotVersion,P=A.withLastLimboFreeSnapshotVersion(R);p.os=p.os.insert(_,P)}}}(r.localStore,i))}async function R2(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await Py(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new H(L.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await go(n,r.hs)}}function P2(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let s=re();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function Xy(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ky.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A2.bind(null,e),e.Ca.d_=p2.bind(null,e.eventManager),e.Ca.$a=m2.bind(null,e.eventManager),e}function b2(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C2.bind(null,e),e}class Xa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return FT(this.persistence,new MT,e.initialUser,this.serializer)}Ga(e){return new jT(Jh.Zr,this.serializer)}Wa(e){return new qT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xa.provider={build:()=>new Xa};class Mc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R2.bind(null,this.syncEngine),await h2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new f2}()}createDatastore(e){const n=wl(e.databaseInfo.databaseId),r=function(i){return new QT(i)}(e.databaseInfo);return function(i,a,l,c){return new JT(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new e2(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>lm(this.syncEngine,n,0),function(){return rm.D()?new rm:new WT}())}createSyncEngine(e,n){return function(s,i,a,l,c,f,p){const y=new _2(s,i,a,l,c,f);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await mo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mc.provider={build:()=>new Mc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=rt.UNAUTHENTICATED,this.clientId=X0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{K("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(K("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=id(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wu(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Py(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await V2(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sm(e.remoteStore,s)),t._onlineComponents=e}async function V2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await wu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),await wu(t,new Xa)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await wu(t,new Xa);return t._offlineComponents}async function Zy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await cm(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await cm(t,new Mc))),t._onlineComponents}function D2(t){return Zy(t).then(e=>e.syncEngine)}async function Lc(t){const e=await Zy(t),n=e.eventManager;return n.onListen=x2.bind(null,e.syncEngine),n.onUnlisten=T2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=w2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I2.bind(null,e.syncEngine),n}function M2(t,e,n={}){const r=new Xn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,f){const p=new Jy({next:_=>{p.Za(),a.enqueueAndForget(()=>By(i,y)),_.fromCache&&c.source==="server"?f.reject(new H(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new $y(l,p,{includeMetadataChanges:!0,_a:!0});return Uy(i,y)}(await Lc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){if(!n)throw new H(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function L2(t,e,n,r){if(e===!0&&r===!0)throw new H(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dm(t){if(!G.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fm(t){if(G.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Il(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Il(t);throw new H(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ev((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nE;switch(r.type){case"firstParty":return new oE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hm.get(n);r&&(K("ComponentProvider","Removing Datastore"),hm.delete(n),r.terminate())}(this),Promise.resolve()}}function F2(t,e,n,r={}){var s;const i=(t=gn(t,Sl))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=rt.MOCK_USER;else{l=Dx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new H(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new rt(f)}t._authCredentials=new rE(new Y0(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ar(this.firestore,e,this._query)}}class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}}class Jn extends ar{constructor(e,n,r){super(e,n,Wh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new G(e))}withConverter(e){return new Jn(this.firestore,e,this._path)}}function so(t,e,...n){if(t=jr(t),tv("collection","path",e),t instanceof Sl){const r=ve.fromString(e,...n);return fm(r),new Jn(t,null,r)}{if(!(t instanceof vt||t instanceof Jn))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return fm(r),new Jn(t.firestore,null,r)}}function nv(t,e,...n){if(t=jr(t),arguments.length===1&&(e=X0.newId()),tv("doc","path",e),t instanceof Sl){const r=ve.fromString(e,...n);return dm(r),new vt(t,null,new G(r))}{if(!(t instanceof vt||t instanceof Jn))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return dm(r),new vt(t.firestore,t instanceof Jn?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jy(this,"async_queue_retry"),this.Vu=()=>{const r=xu();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ho(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw En("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=sd.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ps extends Sl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mm(e),this._firestoreClient=void 0,await e}}}function O2(t,e){const n=typeof t=="object"?t:Hw(),r=typeof t=="string"?t:e||"(default)",s=zw(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=jx("firestore");i&&F2(s,...i)}return s}function ld(t){if(t._terminated)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z2(t),t._firestoreClient}function z2(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,f,p){return new _E(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,ev(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new j2(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bs(Xe.fromBase64String(e))}catch(n){throw new H(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bs(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=/^__.*__$/;class B2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,n,this.fieldTransforms):new fo(e,this.data,n,this.fieldTransforms)}}function sv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class dd{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ja(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sv(this.Cu)&&U2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wl(e)}Qu(e,n,r,s=!1){return new dd({Cu:e,methodName:n,qu:r,path:Ke.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(t){const e=t._freezeSettings(),n=wl(t._databaseId);return new $2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iv(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);lv("Data must be an object, but it was:",a,r);const l=ov(r,a);let c,f;if(i.merge)c=new Ut(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const y of i.mergeFields){const _=q2(e,y,n);if(!a.contains(_))throw new H(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);K2(p,_)||p.push(_)}c=new Ut(p),f=a.fieldTransforms.filter(y=>c.covers(y.field))}else c=null,f=a.fieldTransforms;return new B2(new Nt(l),c,f)}function H2(t,e,n,r=!1){return pd(n,t.Qu(r?4:3,e))}function pd(t,e){if(av(t=jr(t)))return lv("Unsupported field value:",e,t),ov(t,e);if(t instanceof rv)return function(r,s){if(!sv(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=pd(l,s.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=jr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Oe.fromDate(r);return{timestampValue:Qa(s.serializer,i)}}if(r instanceof Oe){const i=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qa(s.serializer,i)}}if(r instanceof cd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bs)return{bytesValue:Iy(s.serializer,r._byteString)};if(r instanceof vt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Kh(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Il(r)}`)}(t,e)}function ov(t,e){const n={};return J0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(t,(r,s)=>{const i=pd(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function av(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof cd||t instanceof bs||t instanceof vt||t instanceof rv||t instanceof hd)}function lv(t,e,n){if(!av(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Il(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function q2(t,e,n){if((e=jr(e))instanceof ud)return e._internalPath;if(typeof e=="string")return uv(t,e);throw Ja("Field path arguments must be of type string or ",t,!1,void 0,n)}const W2=new RegExp("[~\\*/\\[\\]]");function uv(t,e,n){if(e.search(W2)>=0)throw Ja(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ud(...e.split("."))._internalPath}catch{throw Ja(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ja(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new H(L.INVALID_ARGUMENT,l+t+c)}function K2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G2 extends cv{data(){return super.data()}}function md(t,e){return typeof e=="string"?uv(t,e):e instanceof ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gd{}class dv extends gd{}function fv(t,e,...n){let r=[];e instanceof gd&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof vd).length,l=i.filter(c=>c instanceof yd).length;if(a>1||a>0&&l>0)throw new H(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class yd extends dv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yd(e,n,r)}_apply(e){const n=this._parse(e);return mv(e._query,n),new ar(e.firestore,e.converter,kc(e._query,n))}_parse(e){const n=fd(e.firestore);return function(i,a,l,c,f,p,y){let _;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new H(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){vm(y,p);const A=[];for(const R of y)A.push(ym(c,i,R));_={arrayValue:{values:A}}}else _=ym(c,i,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||vm(y,p),_=H2(l,a,y,p==="in"||p==="not-in");return Me.create(f,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vd extends gd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)mv(a,c),a=kc(a,c)}(e._query,n),new ar(e.firestore,e.converter,kc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _d extends dv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _d(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new to(i,a)}(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new zs(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function pv(t,e="asc"){const n=e,r=md("orderBy",t);return _d._create(r,n)}function ym(t,e,n){if(typeof(n=jr(n))=="string"){if(n==="")throw new H(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ay(e)&&n.indexOf("/")!==-1)throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!G.isDocumentKey(r))throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fp(t,new G(r))}if(n instanceof vt)return Fp(t,n._key);throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Il(n)}.`)}function vm(t,e){if(!Array.isArray(t)||t.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mv(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Q2{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Os(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Pe(a.doubleValue));return new hd(i)}convertGeoPoint(e){return new cd(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ji(e));default:return null}}convertTimestamp(e){const n=nr(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);de(Ry(r));const s=new Zi(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||En(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yv extends cv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ya(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(md("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ya extends yv{data(e={}){return super.data(e)}}class vv{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new vi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ya(this._firestore,this._userDataWriter,r.key,r,new vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new ya(s._firestore,s._userDataWriter,l.doc.key,l.doc,new vi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ya(s._firestore,s._userDataWriter,l.doc.key,l.doc,new vi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:Y2(l.type),doc:c,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Y2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class xd extends Q2{constructor(e){super(),this.firestore=e}convertBytes(e){return new bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function X2(t){t=gn(t,ar);const e=gn(t.firestore,Ps),n=ld(e),r=new xd(e);return hv(t._query),M2(n,t._query).then(s=>new vv(e,r,t,s))}function J2(t,e,n){t=gn(t,vt);const r=gn(t.firestore,Ps),s=gv(t.converter,e,n);return wv(r,[iv(fd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function _v(t,e){const n=gn(t.firestore,Ps),r=nv(t),s=gv(t.converter,e);return wv(n,[iv(fd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function xv(t,...e){var n,r,s;t=jr(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||gm(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gm(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let c,f,p;if(t instanceof vt)f=gn(t.firestore,Ps),p=Wh(t._key.path),c={next:y=>{e[a]&&e[a](Z2(f,t,y))},error:e[a+1],complete:e[a+2]};else{const y=gn(t,ar);f=gn(y.firestore,Ps),p=y._query;const _=new xd(f);c={next:A=>{e[a]&&e[a](new vv(f,_,y,A))},error:e[a+1],complete:e[a+2]},hv(t._query)}return function(_,A,R,P){const D=new Jy(P),k=new $y(A,D,R);return _.asyncQueue.enqueueAndForget(async()=>Uy(await Lc(_),k)),()=>{D.Za(),_.asyncQueue.enqueueAndForget(async()=>By(await Lc(_),k))}}(ld(f),p,l,c)}function wv(t,e){return function(r,s){const i=new Xn;return r.asyncQueue.enqueueAndForget(async()=>S2(await D2(r),s,i)),i.promise}(ld(t),e)}function Z2(t,e,n){const r=n.docs.get(e._key),s=new xd(t);return new yv(t,s,e._key,r,new vi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Fs=s})($w),Ha(new Qi("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ps(new sE(r.getProvider("auth-internal")),new lE(r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new H(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zi(f.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ps(jp,"4.7.3",e),ps(jp,"4.7.3","esm2017")})();const eI={apiKey:"AIzaSyCUSBzbKBE2JRiiHZAwtkvJzy72RgrRoEU",authDomain:"smen-italcar.firebaseapp.com",projectId:"smen-italcar",storageBucket:"smen-italcar.firebasestorage.app",messagingSenderId:"188301662792",appId:"1:188301662792:web:1eca55e7e122582a8ed67d"},tI=U0(eI),js=O2(tI);var nI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sI=(t,e)=>{const n=ie.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},f)=>ie.createElement("svg",{ref:f,...nI,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${rI(t)}`,...c},[...e.map(([p,y])=>ie.createElement(p,y)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var ce=sI;const iI=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),gs=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),oI=ce("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]),Fc=ce("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),aI=ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Oc=ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ev=ce("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),_m=ce("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),lI=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),xm=ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),uI=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cI=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),hI=ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),dI=ce("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Tv=ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),fI=ce("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),zc=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),pI=ce("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),wm=ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),mI=ce("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Iv=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),gI=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Eu=ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),yI=ce("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),vI=ce("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Uc=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),_I=ce("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Bc=ce("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),xI=ce("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ys=ce("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),wI=({onBack:t})=>{const[e,n]=ie.useState(1),[r,s]=ie.useState([]),[i,a]=ie.useState(!1),[l,c]=ie.useState(!1),[f,p]=ie.useState(null);ie.useEffect(()=>{const j=fv(so(js,"steg_logs"),pv("id","desc")),W=xv(j,te=>{const Y=te.docs.map(je=>({...je.data(),docId:je.id}));s(Y)});return()=>W()},[]);const y=[{id:1,name:"MT 1 - Mgrine",code:"MEG-001",type:"MT"},{id:2,name:"MT 2 - El Khadhra",code:"ELK-002",type:"MT"},{id:3,name:"MT 3 - Naassen",code:"NAS-003",type:"MT"},{id:4,name:"BT 1 - Showroom Lac",code:"SHR-001",type:"BT"}],[_,A]=ie.useState({unitPriceKwh:.291,powerUnitPrice:5,unitPriceKwhBT:.391,fixedFeesBT:115.5,servicesBT:0,fteGazBT:0,vatRate:19,rtt:3.5,municipalTaxRate:.01,taxCLRate:.005,taxFTERate:.005}),[R,P]=ie.useState({1:{subscribedPower:250,emptyLosses:1300},2:{subscribedPower:70,emptyLosses:670},3:{subscribedPower:30,emptyLosses:160},4:{subscribedPower:0,emptyLosses:0}}),[D,k]=ie.useState(!1),T=()=>{const j=new Date;return`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}`},[I,V]=ie.useState({1:{lastIndex:14500,newIndex:"",cosPhi:"",reactiveCons:"",maxPower:"",date:T(),manualLastIndex:!1,lateFees:"",relanceFees:"",adjustment:""},2:{lastIndex:28900,newIndex:"",cosPhi:"",reactiveCons:"",maxPower:"",date:T(),manualLastIndex:!1,lateFees:"",relanceFees:"",adjustment:""},3:{lastIndex:56200,newIndex:"",cosPhi:"",reactiveCons:"",maxPower:"",date:T(),manualLastIndex:!1,lateFees:"",relanceFees:"",adjustment:""},4:{lastIndex:1e3,newIndex:"",lastIndexPv:500,newIndexPv:"",previousBalance:0,date:T(),manualLastIndex:!1,lateFees:"",relanceFees:"",adjustment:""}}),z=j=>j===""||j===void 0||j===null?"":j.toString().replace(/[^0-9.-]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g," "),B=j=>j.replace(/\s/g,"");ie.useEffect(()=>{const j=r.filter(W=>W.siteId===e);if(j.length>0){const W=j[0],te=y.find(Y=>Y.id===e).type;V(Y=>({...Y,[e]:{...Y[e],lastIndex:W.newIndex,...te==="BT"?{lastIndexPv:W.newIndexPv,previousBalance:W.newCarryOver}:{},manualLastIndex:!1}}))}},[e,r]);const E=(j,W)=>{const te=["lastIndex","newIndex","lastIndexPv","newIndexPv","previousBalance"].includes(j)?B(W):W;V(Y=>{const je=j==="lastIndex";return{...Y,[e]:{...Y[e],[j]:te,manualLastIndex:je?!0:Y[e].manualLastIndex}}})},g=(j,W)=>A(te=>({...te,[j]:W})),w=(j,W)=>{P(te=>({...te,[e]:{...te[e],[j]:W}}))},S=()=>{const j=y.find(Ne=>Ne.id===e),W=I[e],te=R[e],Y=_,je=parseFloat(W.newIndex)||0,Se=parseFloat(W.lastIndex)||0,at=parseFloat(W.lateFees)||0,yo=parseFloat(W.relanceFees)||0,vo=parseFloat(W.adjustment)||0,lr=parseFloat(Y.rtt)||0,Sn=(parseFloat(Y.vatRate)||0)/100;if(j.type==="BT"){const Ne=parseFloat(W.newIndexPv)||0,ur=parseFloat(W.lastIndexPv)||0,An=parseFloat(W.previousBalance)||0,Wt=Math.max(0,je-Se),cr=Math.max(0,Ne-ur),hr=Wt-cr,kn=hr+An;let _t=0,rn=0;kn>0?(_t=kn,rn=0):(_t=0,rn=kn);const sn=parseFloat(Y.unitPriceKwhBT)||0,Cn=parseFloat(Y.fixedFeesBT)||0,on=parseFloat(Y.servicesBT)||0,Dt=_t*sn,an=Cn+on,Ae=(Dt+an)*(1+Sn),Re=_t*(parseFloat(Y.taxCLRate)||0),Kt=_t*(parseFloat(Y.taxFTERate)||0),Nn=parseFloat(Y.fteGazBT)||0,$s=Ae+Re+lr+Kt+Nn+vo+at+yo;return{type:"BT",consumptionGrid:Wt,productionPv:cr,currentMonthBalance:hr,prevBalance:An,totalBalance:kn,billedKwh:_t,newCarryOver:rn,consoAmountHT:Dt,fixedAmountHT:an,totalTTC:Ae,contributionCL:Re,fteElec:Kt,fteGaz:Nn,netToPay:$s,subscribedPowerRef:0}}else{const Ne=parseFloat(W.cosPhi)||1,ur=parseFloat(W.maxPower)||0,An=parseFloat(Y.unitPriceKwh)||0,Wt=parseFloat(te.subscribedPower)||0,cr=parseFloat(Y.powerUnitPrice)||0,hr=parseFloat(Y.municipalTaxRate)||0,kn=parseFloat(te.emptyLosses)||0,_t=Math.max(0,je-Se),rn=_t*.02,sn=_t+kn+rn,Cn=sn*An;let on=0,Dt="none";if(Ne>=.91&&Ne<=1)on=-(Math.round((Ne-.9)*100)*.005),Dt="bonus";else if(Ne>=.8&&Ne<=.9)on=0,Dt="neutral";else{Dt="penalty";let ln=0;Ne<.8&&(ln+=Math.round((.8-Math.max(Ne,.75))*100)*.005),Ne<.75&&(ln+=Math.round((.75-Math.max(Ne,.7))*100)*.01),Ne<.7&&(ln+=Math.round((.7-Math.max(Ne,.6))*100)*.015),Ne<.6&&(ln+=Math.round((.6-Ne)*100)*.02),on=ln}const an=Cn*on,dr=Cn+an,Ae=dr*(1+Sn),Re=Wt*cr,Kt=Re+at+yo,Nn=Kt*(1+Sn),Ur=sn*hr,$s=Ae+Nn+lr+Ur+vo,fr=ur>Wt;return{type:"MT",energyRecorded:_t,loadLosses:rn,billedKwh:sn,baseEnergyAmountHT:Cn,adjustmentRate:on,adjustmentType:Dt,cosPhiAdjustmentAmount:an,total1_TTC:Ae,total1_HT:dr,powerPremium:Re,total2_HT:Kt,total2_TTC:Nn,municipalTax:Ur,netToPay:$s,isPowerOverrun:fr,subscribedPowerRef:Wt}}},C=async j=>{j.preventDefault();const W=y.find(Se=>Se.id===e),te=S(),Y=I[e];if(W.type==="BT"){if(!Y.newIndex||!Y.newIndexPv){p({msg:"Veuillez entrer les index (Rseau et PV)",type:"error"}),setTimeout(()=>p(null),3e3);return}}else if(!Y.newIndex||!Y.cosPhi){p({msg:"Veuillez entrer l'index et le Cos Phi",type:"error"}),setTimeout(()=>p(null),3e3);return}const je={id:Date.now(),recordDate:Y.date,timestamp:new Date().toLocaleTimeString("fr-FR"),siteId:e,siteName:W.name,siteType:W.type,...Y,...te};try{await _v(so(js,"steg_logs"),je),p({msg:"Relev sauvegard en ligne !",type:"success"}),V(Se=>({...Se,[e]:{...Se[e],lastIndex:Y.newIndex,newIndex:"",lastIndexPv:W.type==="BT"?Y.newIndexPv:void 0,newIndexPv:W.type==="BT"?"":void 0,previousBalance:W.type==="BT"?te.newCarryOver:void 0,cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:"",manualLastIndex:!1}}))}catch(Se){console.error("Erreur Firebase:",Se),p({msg:"Erreur de connexion",type:"error"})}setTimeout(()=>p(null),3e3)},v=j=>j.toLocaleString("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:3}),x=j=>j.toLocaleString("fr-TN",{maximumFractionDigits:2}),J=S(),fe=r.filter(j=>j.siteId===e),ze=fe.length>0?fe[0]:null,M=I[e].newIndex!==""||y.find(j=>j.id===e).type==="MT"&&I[e].cosPhi!==""||y.find(j=>j.id===e).type==="BT"&&I[e].newIndexPv!==""?J:ze||J,Q=y.find(j=>j.id===e),q=Q.type==="BT";return h.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[h.jsx("header",{className:`text-white shadow-lg sticky top-0 z-30 transition-colors duration-500
        ${q?"bg-gradient-to-r from-red-800 to-orange-900":"bg-gradient-to-r from-blue-900 to-slate-900"}`,children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-2 md:mb-0",children:[h.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full mr-2 transition-colors",children:h.jsx(gs,{size:20})}),h.jsx("div",{className:`p-2 rounded-lg text-slate-900 shadow-lg ${q?"bg-white":"bg-yellow-500"}`,children:h.jsx(ys,{size:24,strokeWidth:2.5,className:q?"text-red-600":"text-blue-900"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Module Facturation nergie"}),h.jsxs("div",{className:"flex items-center space-x-2 text-xs opacity-80",children:[h.jsx("span",{className:`px-1.5 py-0.5 rounded border ${q?"bg-red-700 border-red-600":"bg-blue-800 border-blue-700"}`,children:q?"BASSE TENSION":"MOYENNE TENSION"}),h.jsx("span",{children:Q.name})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:()=>c(!0),className:"flex items-center bg-white/10 hover:bg-white/20 px-3 py-2 rounded-lg text-xs font-bold border border-white/20",children:[h.jsx(Fc,{size:16,className:"mr-2"})," Guide"]}),!q&&h.jsxs("button",{onClick:()=>a(!0),className:"flex items-center bg-white/10 hover:bg-white/20 px-3 py-2 rounded-lg text-xs font-bold border border-white/20",children:[h.jsx(hI,{size:16,className:"mr-2"})," Info Cos "]})]})]})}),l&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>c(!1),children:h.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full p-6 shadow-2xl relative max-h-[90vh] flex flex-col",onClick:j=>j.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-slate-100",children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center",children:[h.jsx(Fc,{className:"mr-2 text-blue-600"})," Guide d'Utilisation Complet"]}),h.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600 font-bold bg-slate-100 px-3 py-1 rounded",children:"Fermer"})]}),h.jsx("div",{className:"overflow-y-auto pr-4 space-y-8",children:h.jsx("p",{className:"text-sm text-slate-600",children:"Vos donnes sont automatiquement sauvegardes dans la base de donnes scurise."})})]})}),i&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>a(!1),children:h.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full p-6 shadow-2xl relative max-h-[90vh] overflow-y-auto",onClick:j=>j.stopPropagation(),children:[h.jsx("button",{onClick:()=>a(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:""}),h.jsxs("h2",{className:"text-xl font-bold text-blue-900 mb-4 flex items-center",children:[h.jsx(cI,{className:"mr-2"})," Comprendre le Cos "]})]})}),h.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[h.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:y.map(j=>h.jsxs("button",{onClick:()=>n(j.id),className:`p-2 rounded-lg border text-xs font-bold transition-all flex flex-col items-center justify-center text-center h-16
                  ${e===j.id?j.type==="BT"?"bg-red-700 text-white border-red-800 shadow-md ring-2 ring-red-200":"bg-blue-700 text-white border-blue-800 shadow-md ring-2 ring-blue-200":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"}`,children:[h.jsx("span",{children:j.name}),h.jsx("span",{className:"text-[9px] opacity-70 mt-1",children:j.code})]},j.id))}),h.jsxs("form",{onSubmit:C,className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 space-y-6 relative overflow-hidden",children:[q&&h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:h.jsx(Eu,{size:150,className:"text-orange-500"})}),h.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[h.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center",children:[h.jsx(Oc,{className:`mr-2 ${q?"text-red-600":"text-blue-600"}`,size:20}),"Saisie ",q?"Basse Tension":"Moyenne Tension"]}),h.jsx("input",{type:"month",value:I[e].date,onChange:j=>E("date",j.target.value),className:"bg-slate-100 border-none rounded px-3 py-1 font-bold text-slate-700 cursor-pointer focus:ring-2 focus:ring-blue-500"})]}),q?h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[h.jsx(ys,{size:12,className:"mr-1"})," Rseau STEG"]}),h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Ancien Index"}),h.jsx("input",{type:"text",inputMode:"numeric",value:z(I[e].lastIndex||""),onChange:j=>E("lastIndex",j.target.value),className:"w-full text-sm p-2 border rounded font-mono bg-slate-200"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-red-700",children:"Nouvel Index *"}),h.jsx("input",{type:"text",inputMode:"numeric",required:!0,value:z(I[e].newIndex||""),onChange:j=>E("newIndex",j.target.value),className:"w-full text-lg p-2 border-2 border-red-200 rounded focus:border-red-600 outline-none font-mono"})]}),h.jsxs("div",{className:"text-right text-xs font-bold text-red-600",children:["Conso: ",x(J.consumptionGrid)," kWh"]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[h.jsx(Eu,{size:12,className:"mr-1"})," Photovoltaque"]}),h.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Ancien Index"}),h.jsx("input",{type:"text",inputMode:"numeric",value:z(I[e].lastIndexPv||""),onChange:j=>E("lastIndexPv",j.target.value),className:"w-full text-sm p-2 border rounded font-mono bg-orange-100/50"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-orange-700",children:"Nouvel Index *"}),h.jsx("input",{type:"text",inputMode:"numeric",required:!0,value:z(I[e].newIndexPv||""),onChange:j=>E("newIndexPv",j.target.value),className:"w-full text-lg p-2 border-2 border-orange-200 rounded focus:border-orange-500 outline-none font-mono"})]}),h.jsxs("div",{className:"text-right text-xs font-bold text-orange-600",children:["Prod: ",x(J.productionPv)," kWh"]})]})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Solde Mois Prcdent (N-1)"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"bg-slate-200 p-2 rounded-l border border-r-0 border-slate-300",children:h.jsx(oI,{size:16})}),h.jsx("input",{type:"text",inputMode:"numeric",value:z(I[e].previousBalance||""),onChange:j=>E("previousBalance",j.target.value),className:"w-full text-sm p-2 border border-slate-300 rounded-r font-mono",placeholder:"Ex: -200 (Crdit)"})]})]})]}):h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Compteur Actif"}),h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Ancien Index"}),h.jsx("input",{type:"text",value:z(I[e].lastIndex||""),onChange:j=>E("lastIndex",j.target.value),className:"w-full text-sm p-2 border rounded font-mono bg-slate-200"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-blue-700",children:"Nouvel Index *"}),h.jsx("input",{type:"text",required:!0,value:z(I[e].newIndex||""),onChange:j=>E("newIndex",j.target.value),className:"w-full text-lg p-2 border-2 border-blue-200 rounded focus:border-blue-600 outline-none font-mono"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Paramtres"}),h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Cos  *"}),h.jsx("input",{type:"number",step:"0.01",max:"1",required:!0,value:I[e].cosPhi||"",onChange:j=>E("cosPhi",j.target.value),className:"w-full text-sm p-2 border rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Puissance Max *"}),h.jsx("input",{type:"number",required:!0,value:I[e].maxPower||"",onChange:j=>E("maxPower",j.target.value),className:"w-full text-sm p-2 border rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Ractif (Optionnel)"}),h.jsx("input",{type:"number",value:I[e].reactiveCons||"",onChange:j=>E("reactiveCons",j.target.value),className:"w-full text-sm p-2 border rounded"})]})]})]})]}),h.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[h.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Frais & Ajustements"}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase text-slate-500",children:"Retard (DT)"}),h.jsx("input",{type:"number",value:I[e].lateFees||"",onChange:j=>E("lateFees",j.target.value),className:"w-full text-sm p-2 border rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase text-slate-500",children:"Relance (DT)"}),h.jsx("input",{type:"number",value:I[e].relanceFees||"",onChange:j=>E("relanceFees",j.target.value),className:"w-full text-sm p-2 border rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase text-slate-500",children:"Avance/Arrir"}),h.jsx("input",{type:"number",value:I[e].adjustment||"",onChange:j=>E("adjustment",j.target.value),className:"w-full text-sm p-2 border rounded"})]})]})]}),h.jsxs("button",{type:"submit",className:`w-full text-white font-bold py-3 rounded-xl shadow-lg transition-transform active:scale-95 flex items-center justify-center
               ${q?"bg-red-700 hover:bg-red-800 shadow-red-700/20":"bg-blue-700 hover:bg-blue-800 shadow-blue-700/20"}`,children:[h.jsx(Iv,{size:20,className:"mr-2"})," Valider & Sauvegarder"]})]}),h.jsxs("div",{className:"bg-slate-100 rounded-xl border border-slate-200 overflow-hidden",children:[h.jsxs("button",{onClick:()=>k(!D),className:"w-full px-6 py-3 flex justify-between items-center text-xs font-bold text-slate-500 uppercase hover:bg-slate-200",children:[h.jsxs("span",{children:[h.jsx(gI,{size:14,className:"inline mr-2"})," Configuration ",q?"BT":"MT"]}),D?h.jsx(_I,{size:14,className:"text-red-500"}):h.jsx(zc,{size:14})]}),D&&h.jsx("div",{className:"p-4 bg-white border-t border-slate-200 animate-in slide-in-from-top-2",children:q?h.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 font-bold mb-1",children:"Prix kWh BT"}),h.jsx("input",{type:"number",step:"0.001",value:_.unitPriceKwhBT,onChange:j=>g("unitPriceKwhBT",j.target.value),className:"border p-2 w-full rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 font-bold mb-1",children:"Redevance Fixe"}),h.jsx("input",{type:"number",value:_.fixedFeesBT,onChange:j=>g("fixedFeesBT",j.target.value),className:"border p-2 w-full rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 font-bold mb-1",children:"Taxe CL (Taux)"}),h.jsx("input",{type:"number",step:"0.001",value:_.taxCLRate,onChange:j=>g("taxCLRate",j.target.value),className:"border p-2 w-full rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 font-bold mb-1",children:"FTE Elec (Taux)"}),h.jsx("input",{type:"number",step:"0.001",value:_.taxFTERate,onChange:j=>g("taxFTERate",j.target.value),className:"border p-2 w-full rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 font-bold mb-1",children:"Services"}),h.jsx("input",{type:"number",value:_.servicesBT,onChange:j=>g("servicesBT",j.target.value),className:"border p-2 w-full rounded"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 font-bold mb-1",children:"FTE Gaz"}),h.jsx("input",{type:"number",value:_.fteGazBT,onChange:j=>g("fteGazBT",j.target.value),className:"border p-2 w-full rounded"})]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[h.jsx("h4",{className:"font-bold text-blue-700 text-xs mb-2 uppercase",children:"Paramtres Spcifiques Site"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 text-xs font-bold mb-1",children:"Puissance Souscrite (kVA)"}),h.jsx("input",{type:"number",value:R[e].subscribedPower,onChange:j=>w("subscribedPower",j.target.value),className:"border p-2 w-full rounded text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 text-xs font-bold mb-1",children:"Pertes  Vide (kWh)"}),h.jsx("input",{type:"number",value:R[e].emptyLosses,onChange:j=>w("emptyLosses",j.target.value),className:"border p-2 w-full rounded text-sm"})]})]})]}),h.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[h.jsx("h4",{className:"font-bold text-blue-700 text-xs mb-2 uppercase",children:"Tarification Globale MT"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 text-xs font-bold mb-1",children:"Prix nergie (DT/kWh)"}),h.jsx("input",{type:"number",step:"0.001",value:_.unitPriceKwh,onChange:j=>g("unitPriceKwh",j.target.value),className:"border p-2 w-full rounded text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 text-xs font-bold mb-1",children:"Prix Puissance (DT/kVA)"}),h.jsx("input",{type:"number",step:"0.001",value:_.powerUnitPrice,onChange:j=>g("powerUnitPrice",j.target.value),className:"border p-2 w-full rounded text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 text-xs font-bold mb-1",children:"TVA (%)"}),h.jsx("input",{type:"number",value:_.vatRate,onChange:j=>g("vatRate",j.target.value),className:"border p-2 w-full rounded text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-500 text-xs font-bold mb-1",children:"RTT (DT)"}),h.jsx("input",{type:"number",value:_.rtt,onChange:j=>g("rtt",j.target.value),className:"border p-2 w-full rounded text-sm"})]})]})]})]})})]})]}),h.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[h.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-lg border transition-all duration-300 relative overflow-hidden
             ${q?"border-red-200 ring-2 ring-red-50":"border-blue-200 ring-2 ring-blue-50"}`,children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:q?h.jsx(Eu,{size:100}):h.jsx(ys,{size:100})}),h.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-100 pb-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-bold uppercase ${q?"text-red-700":"text-blue-600"}`,children:M?q?"FACTURE BT / PV":"FACTURE MT":"-"}),h.jsx("p",{className:"text-xs text-slate-400",children:Q.name})]}),h.jsx("div",{className:"text-right",children:h.jsx("p",{className:"text-xs text-slate-400",children:I[e].date})})]}),h.jsxs("div",{className:"space-y-3 text-sm",children:[q?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-slate-600",children:[h.jsx("span",{children:"Conso Rseau"}),h.jsxs("span",{className:"font-mono",children:[x(M.consumptionGrid)," kWh"]})]}),h.jsxs("div",{className:"flex justify-between text-orange-600",children:[h.jsx("span",{children:"Prod Photovoltaque"}),h.jsxs("span",{className:"font-mono",children:["-",x(M.productionPv)," kWh"]})]}),h.jsxs("div",{className:"flex justify-between text-slate-500 text-xs bg-slate-50 p-1 rounded",children:[h.jsx("span",{children:"Solde N-1"}),h.jsxs("span",{className:"font-mono",children:[x(M.prevBalance)," kWh"]})]}),h.jsxs("div",{className:`flex justify-between font-bold p-2 rounded ${M.totalBalance>0?"bg-red-50 text-red-700":"bg-emerald-50 text-emerald-700"}`,children:[h.jsx("span",{children:"Solde Final"}),h.jsxs("span",{children:[x(M.totalBalance)," kWh"]})]}),M.totalBalance<=0?h.jsxs("div",{className:"text-xs text-center text-emerald-600 italic",children:["Crdit report : ",x(M.newCarryOver)," kWh"]}):h.jsxs("div",{className:"flex justify-between text-slate-800 font-bold border-t pt-2",children:[h.jsxs("span",{children:["Factur (",x(M.billedKwh)," kWh)"]}),h.jsx("span",{children:v(M.consoAmountHT)})]})]}),h.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed text-xs text-slate-600 space-y-1",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Redevances Fixes"}),h.jsx("span",{children:v(M.fixedAmountHT)})]}),h.jsxs("div",{className:"flex justify-between font-bold text-slate-800 pt-1",children:[h.jsx("span",{children:"Total HT"}),h.jsx("span",{children:v(M.consoAmountHT+M.fixedAmountHT)})]})]}),h.jsxs("div",{className:"space-y-1 text-xs text-slate-500",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"TVA (19%)"}),h.jsx("span",{children:v(M.totalTTC-(M.consoAmountHT+M.fixedAmountHT))})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Contrib. CL"}),h.jsx("span",{children:v(M.contributionCL)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"FTE Elec"}),h.jsx("span",{children:v(M.fteElec)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"RTT"}),h.jsx("span",{children:v(_.rtt)})]})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:[h.jsxs("div",{className:"flex justify-between text-slate-600",children:[h.jsx("span",{children:"nergie Enregistre"}),h.jsxs("span",{className:"font-mono",children:[x(M.energyRecorded)," kWh"]})]}),h.jsxs("div",{className:"flex justify-between text-slate-500 text-xs pl-2",children:[h.jsx("span",{children:"+ Pertes (Vide+Charge)"}),h.jsx("span",{className:"font-mono",children:x(M.billedKwh-M.energyRecorded)})]}),h.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mt-1 bg-slate-50 px-2 py-1 rounded",children:[h.jsxs("span",{children:["Factur (",x(M.billedKwh)," kWh)"]}),h.jsx("span",{children:v(M.baseEnergyAmountHT)})]})]}),h.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:[h.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[h.jsx("span",{children:"Ajustement Cos "}),h.jsx("span",{children:M.adjustmentType})]}),h.jsxs("div",{className:`flex justify-between font-bold ${M.cosPhiAdjustmentAmount>0?"text-red-600":"text-emerald-600"}`,children:[h.jsxs("span",{children:[M.adjustmentRate>0?"+":"",(M.adjustmentRate*100).toFixed(1),"%"]}),h.jsx("span",{children:v(M.cosPhiAdjustmentAmount)})]})]}),h.jsxs("div",{className:"flex justify-between font-bold text-slate-800 bg-blue-50 p-2 rounded",children:[h.jsx("span",{children:"Total 1 (nergie + Bonif/Pnalit)"}),h.jsx("span",{children:v(M.total1_HT)})]}),h.jsxs("div",{className:"flex justify-between text-xs text-slate-500 pt-1",children:[h.jsx("span",{children:"Dont TVA (19%)"}),h.jsx("span",{children:v(M.total1_TTC-M.total1_HT)})]}),h.jsxs("div",{className:"text-xs text-slate-500 pt-2 space-y-1 border-t mt-2",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Prime Puissance Fixe"}),h.jsx("span",{children:v(M.powerPremium)})]}),h.jsxs("div",{className:"flex justify-between font-bold text-slate-700",children:[h.jsx("span",{children:"Total 2 HT"}),h.jsx("span",{children:v(M.total2_HT)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"TVA sur Fixe"}),h.jsx("span",{children:v(M.total2_TTC-M.total2_HT)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"RTT"}),h.jsx("span",{children:v(_.rtt)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Surtaxe Municipale"}),h.jsx("span",{children:v(M.municipalTax)})]})]})]}),(parseFloat(I[e].lateFees)>0||parseFloat(I[e].relanceFees)>0||parseFloat(I[e].adjustment)!==0)&&h.jsxs("div",{className:"pt-2 text-xs text-orange-600 border-t border-slate-100 mt-2 space-y-1",children:[parseFloat(I[e].lateFees)>0&&h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Frais de Retard"}),h.jsx("span",{children:v(parseFloat(I[e].lateFees))})]}),parseFloat(I[e].relanceFees)>0&&h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Frais de Relance"}),h.jsx("span",{children:v(parseFloat(I[e].relanceFees))})]}),parseFloat(I[e].adjustment)!==0&&h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Avance / Arrir"}),h.jsx("span",{children:v(parseFloat(I[e].adjustment))})]})]})]}),h.jsx("div",{className:"mt-6 border-t-2 border-slate-800 pt-4",children:h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsx("span",{className:"text-lg font-black text-slate-900 uppercase",children:"Net  Payer"}),h.jsx("span",{className:`text-3xl font-black font-mono tracking-tight ${q?"text-red-700":"text-blue-700"}`,children:v(M.netToPay)})]})})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col h-[400px]",children:[h.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-3 flex items-center justify-between",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(dI,{size:12,className:"mr-1"})," Historique Cloud"]}),h.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full text-[10px]",children:"En ligne"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1",children:fe.length===0?h.jsx("div",{className:"h-full flex items-center justify-center text-slate-300 text-xs",children:"Aucune donne en ligne"}):fe.map(j=>h.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100 hover:border-blue-200 transition-colors group relative",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-slate-200 pb-2",children:[h.jsxs("span",{className:"font-bold text-slate-700 text-xs flex items-center",children:[h.jsx(Oc,{size:10,className:"mr-1 text-slate-400"})," ",j.recordDate]}),h.jsx("span",{className:`font-mono font-bold text-sm ${j.siteType==="BT"?"text-red-700":"text-blue-700"}`,children:v(j.netToPay)})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[10px] text-slate-600 mt-1",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-slate-400",children:"Ancien"}),h.jsx("span",{className:"font-mono",children:z(j.lastIndex)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-slate-400",children:"Nouveau"}),h.jsx("span",{className:"font-mono",children:z(j.newIndex)})]})]})]},j.docId))})]})]})]}),f&&h.jsxs("div",{className:`fixed bottom-6 right-6 px-6 py-4 rounded-xl shadow-2xl text-white font-medium flex items-center animate-bounce-short z-50
          ${f.type==="error"?"bg-red-500":"bg-emerald-600"}`,children:[f.type==="error"?h.jsx(iI,{className:"mr-2"}):h.jsx(Ev,{className:"mr-2"}),f.msg]})]})},EI=({onBack:t})=>{const[e,n]=ie.useState(1),[r,s]=ie.useState([]),[i,a]=ie.useState(!1),[l,c]=ie.useState(null),[f,p]=ie.useState(null),[y,_]=ie.useState({elecPrice:.291,offLoadFactor:.3});ie.useEffect(()=>{const v=fv(so(js,"air_logs"),pv("id","desc")),x=xv(v,J=>{const fe=J.docs.map(ze=>({...ze.data(),docId:ze.id}));s(fe)});return()=>x()},[]);const A=[{id:1,name:"Compresseur 1",serial:"CAI 827281",model:"Ceccato CSB 30",power:22},{id:2,name:"Compresseur 2",serial:"CAI 808264",model:"Ceccato CSB 30",power:22}],[R,P]=ie.useState({1:{weekDate:"",description:"",lastRun:19960,newRun:"",lastLoad:10500,newLoad:"",lastMaintOilFilter:18e3,lastMaintAirFilter:18e3,lastMaintSeparator:16e3,lastMaintOil:18e3,lastMaintGeneral:19500},2:{weekDate:"",description:"",lastRun:18500,newRun:"",lastLoad:9200,newLoad:"",lastMaintOilFilter:16e3,lastMaintAirFilter:16e3,lastMaintSeparator:14e3,lastMaintOil:16e3,lastMaintGeneral:18e3}}),D={oilFilter:2e3,airFilter:2e3,separator:4e3,oil:2e3,general:500},k={oilFilter:"Filtre  Huile",airFilter:"Filtre  Air",separator:"Sparateur Huile",oil:"Huile",general:"Inspection Gnrale"},[T,I]=ie.useState(null);ie.useEffect(()=>{const v=new Date,x=new Date(v);x.setDate(x.getDate()-x.getDay()+1);const J=x.toISOString().split("T")[0];P(fe=>({...fe,1:{...fe[1],weekDate:J},2:{...fe[2],weekDate:J}}))},[]);const V=(v,x)=>{P(J=>({...J,[e]:{...J[e],[v]:x}}))},z=()=>{const v=R[e],x=A.find(Y=>Y.id===e),J=Math.max(0,(parseFloat(v.newRun)||0)-(parseFloat(v.lastRun)||0)),fe=Math.max(0,(parseFloat(v.newLoad)||0)-(parseFloat(v.lastLoad)||0)),ze=J>0?fe/J*100:0,M=J/47.5*100,Q=Math.max(0,J-fe),q=fe*x.power+Q*x.power*y.offLoadFactor,j=q*y.elecPrice,W=parseFloat(v.newRun)||parseFloat(v.lastRun)||0,te={};return Object.keys(D).forEach(Y=>{const Se=(v[`lastMaint${Y.charAt(0).toUpperCase()+Y.slice(1)}`]||0)+D[Y],at=Se-W;te[Y]={remaining:at,nextDue:Se}}),{runDelta:J,loadDelta:fe,loadRate:ze,utilRate:M,energyKwh:q,costHT:j,maintStatus:te}},B=async v=>{v.preventDefault();const x=z(),J=R[e];if(!J.newRun||!J.newLoad){I("Veuillez remplir les nouveaux index.");return}const fe={id:Date.now(),type:"WEEKLY_REPORT",weekDate:J.weekDate,compName:A.find(ze=>ze.id===e).name,description:J.description,...J,...x};try{await _v(so(js,"air_logs"),fe),I("Relev Hebdomadaire enregistr en ligne !"),P(ze=>({...ze,[e]:{...ze[e],lastRun:J.newRun,newRun:"",lastLoad:J.newLoad,newLoad:"",description:""}}))}catch{I("Erreur connexion Firebase")}setTimeout(()=>I(null),3e3)},E=(v,x)=>{const J=parseFloat(R[e].newRun)||parseFloat(R[e].lastRun);P(fe=>({...fe,[e]:{...fe[e],[`lastMaint${v.charAt(0).toUpperCase()+v.slice(1)}`]:J}})),I("Maintenance enregistre avec succs !"),c(null),setTimeout(()=>I(null),3e3)},g=R[e],w=z(),S=A.find(v=>v.id===e),C=v=>v<=0?"text-red-600 font-bold":v<200?"text-orange-600 font-bold":"text-emerald-600";return h.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[h.jsx("header",{className:"bg-gradient-to-r from-sky-700 to-blue-800 text-white shadow-lg sticky top-0 z-30",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full mr-4 transition-colors",children:h.jsx(gs,{size:20})}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:h.jsx(Bc,{size:24})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold",children:"Gestion Air Comprim"}),h.jsx("p",{className:"text-xs text-sky-100",children:"Suivi Hebdomadaire & Maintenance"})]})]})]}),h.jsxs("button",{onClick:()=>a(!0),className:"flex items-center bg-white/10 px-3 py-2 rounded text-xs font-bold border border-white/20 hover:bg-white/20",children:[h.jsx(Fc,{size:14,className:"mr-2"})," Procdure ES 3000"]})]})}),i&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>a(!1),children:h.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 shadow-2xl relative",onClick:v=>v.stopPropagation(),children:[h.jsx("button",{onClick:()=>a(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:""}),h.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[h.jsx(uI,{className:"mr-2 text-sky-600"})," Relev Heures - Contrleur ES 3000"]}),h.jsx("div",{className:"space-y-6 text-sm text-slate-600",children:h.jsx("p",{children:"Contenu du guide ES 3000..."})})]})}),l&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>c(null),children:h.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-2xl relative",onClick:v=>v.stopPropagation(),children:[h.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[h.jsx(_m,{className:"mr-2 text-emerald-600"}),"Valider Maintenance : ",k[l]]}),h.jsxs("form",{onSubmit:v=>{v.preventDefault();const x=new FormData(v.target);E(l,{date:x.get("date"),tech:x.get("tech"),notes:x.get("notes")})},children:[h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Date Intervention"}),h.jsx("input",{name:"date",type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full border rounded p-2 text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Intervenant"}),h.jsx("input",{name:"tech",type:"text",required:!0,placeholder:"Ex: Technicien X",className:"w-full border rounded p-2 text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Notes"}),h.jsx("textarea",{name:"notes",className:"w-full border rounded p-2 text-sm",rows:"3"})]})]}),h.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[h.jsx("button",{type:"button",onClick:()=>c(null),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded text-sm",children:"Annuler"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 text-sm font-bold",children:"Confirmer"})]})]})]})}),h.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[h.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[h.jsx("div",{className:"grid grid-cols-2 gap-4",children:A.map(v=>h.jsxs("button",{onClick:()=>n(v.id),className:`p-4 rounded-xl border text-left transition-all relative overflow-hidden group ${e===v.id?"bg-white border-sky-500 ring-2 ring-sky-200 shadow-md":"bg-white border-slate-200 hover:border-sky-300"}`,children:[h.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-700 block",children:v.name}),h.jsx("span",{className:"text-xs text-slate-400",children:v.serial})]}),e===v.id&&h.jsx(Ev,{size:20,className:"text-sky-600"})]}),h.jsxs("div",{className:"flex gap-2 mt-2 relative z-10",children:[h.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-600 px-2 py-1 rounded border",children:v.model}),h.jsxs("span",{className:"text-[10px] bg-sky-100 text-sky-700 px-2 py-1 rounded border border-sky-200",children:[v.power," kW"]})]}),e===v.id&&h.jsx("div",{className:"absolute bottom-0 right-0 p-2 opacity-10",children:h.jsx(Bc,{size:60,className:"text-sky-600"})})]},v.id))}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[h.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center",children:[h.jsx(vI,{className:"mr-2 text-sky-600"})," Saisie Hebdomadaire"]}),h.jsxs("div",{className:"flex items-center bg-slate-100 rounded px-2 py-1",children:[h.jsx(Oc,{size:14,className:"text-slate-400 mr-2"}),h.jsx("input",{type:"date",value:g.weekDate,onChange:v=>V("weekDate",v.target.value),className:"bg-transparent text-sm font-bold text-slate-700 outline-none"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[h.jsx(lI,{size:12,className:"mr-1"})," Marche Total (H)"]}),h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Index Prcdent"}),h.jsx(wm,{size:12,className:"text-slate-400 cursor-pointer hover:text-sky-600",onClick:()=>p("run")})]}),h.jsx("input",{type:"number",value:g.lastRun,onChange:v=>V("lastRun",v.target.value),readOnly:f!=="run",className:`w-full border rounded p-2 text-sm font-mono ${f==="run"?"bg-white border-sky-300":"bg-red-50 text-red-800 border-red-100"}`}),f!=="run"&&h.jsxs("p",{className:"text-[9px] text-red-400 mt-1 flex items-center",children:[h.jsx(zc,{size:8,className:"mr-1"})," Ne pas changer sauf erreur"]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-sky-700 mb-1",children:"Nouvel Index *"}),h.jsx("input",{type:"number",value:g.newRun,onChange:v=>V("newRun",v.target.value),className:"w-full border-2 border-sky-200 focus:border-sky-500 rounded p-2 text-lg font-mono outline-none",placeholder:"ex: 20101"})]}),w.runDelta>0&&h.jsxs("div",{className:"text-right text-xs font-bold text-sky-600",children:["Fonctionnement: ",w.runDelta,"h"]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[h.jsx(ys,{size:12,className:"mr-1"})," En Charge (H)"]}),h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Index Prcdent"}),h.jsx(wm,{size:12,className:"text-slate-400 cursor-pointer hover:text-sky-600",onClick:()=>p("load")})]}),h.jsx("input",{type:"number",value:g.lastLoad,onChange:v=>V("lastLoad",v.target.value),readOnly:f!=="load",className:`w-full border rounded p-2 text-sm font-mono ${f==="load"?"bg-white border-sky-300":"bg-red-50 text-red-800 border-red-100"}`}),f!=="load"&&h.jsxs("p",{className:"text-[9px] text-red-400 mt-1 flex items-center",children:[h.jsx(zc,{size:8,className:"mr-1"})," Ne pas changer sauf erreur"]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-emerald-700 mb-1",children:"Nouvel Index *"}),h.jsx("input",{type:"number",value:g.newLoad,onChange:v=>V("newLoad",v.target.value),className:"w-full border-2 border-emerald-200 focus:border-emerald-500 rounded p-2 text-lg font-mono outline-none",placeholder:"ex: 10600"})]}),w.loadDelta>0&&h.jsxs("div",{className:"text-right text-xs font-bold text-emerald-600",children:["Charge: ",w.loadDelta,"h"]})]})]})]}),h.jsxs("button",{onClick:B,className:"w-full bg-sky-600 hover:bg-sky-700 text-white py-3 rounded-xl font-bold shadow-lg shadow-sky-600/20 transition-all flex items-center justify-center mt-6",children:[h.jsx(Iv,{size:18,className:"mr-2"})," Valider Semaine"]})]})]}),h.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[h.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[h.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-4 uppercase flex items-center",children:[h.jsx(Uc,{size:16,className:"mr-2 text-sky-500"})," Analyse Semaine"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[h.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-100",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Taux de Charge"}),h.jsxs("div",{className:"font-bold text-slate-800 text-lg",children:[w.loadRate.toFixed(1),"%"]}),h.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mt-2",children:h.jsx("div",{className:"bg-emerald-500 h-1.5 rounded-full",style:{width:`${w.loadRate}%`}})})]}),h.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-100",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Cot lec. Est."}),h.jsxs("div",{className:"font-bold text-slate-800 text-xl",children:[w.costHT.toFixed(0)," ",h.jsx("span",{className:"text-xs font-normal",children:"DT"})]})]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Note / Justification"}),h.jsx("textarea",{className:"w-full border border-slate-300 rounded p-2 text-sm focus:border-sky-500 outline-none",rows:"2",placeholder:"Ex: Fuite dtecte...",value:g.description||"",onChange:v=>V("description",v.target.value)})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[h.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-4 uppercase flex items-center",children:[h.jsx(xI,{size:16,className:"mr-2 text-amber-500"})," Maintenance Prdictive"]}),h.jsx("div",{className:"space-y-4",children:Object.keys(D).map(v=>h.jsxs("div",{className:"flex flex-col p-3 border border-slate-200 rounded-lg hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("div",{className:"text-sm font-bold text-slate-800",children:k[v]}),h.jsxs("div",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full",children:["Chaque ",D[v],"h"]})]}),h.jsxs("div",{className:"mb-2",children:[h.jsxs("div",{className:`text-xs font-bold mb-1 ${C(w.maintStatus[v].remaining)}`,children:["tat : ",w.maintStatus[v].remaining<=0?`${Math.abs(w.maintStatus[v].remaining)}h de dpassement !`:`${w.maintStatus[v].remaining}h restant`]}),h.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 overflow-hidden",children:h.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${w.maintStatus[v].remaining<0?"bg-red-600":w.maintStatus[v].remaining<200?"bg-red-500":"bg-emerald-400"}`,style:{width:`${Math.max(0,Math.min(100,w.maintStatus[v].remaining/D[v]*100))}%`}})})]}),h.jsxs("button",{onClick:()=>c(v),className:"w-full mt-1 bg-slate-800 hover:bg-slate-700 text-white text-xs py-2 rounded flex items-center justify-center transition-colors",children:[h.jsx(_m,{size:12,className:"mr-2"})," Faire la maintenance"]})]},v))})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 h-[300px] flex flex-col",children:[h.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Historique"}),h.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:r.filter(v=>v.compName===S.name).length===0?h.jsx("div",{className:"h-full flex items-center justify-center text-slate-300 text-xs",children:"Aucune donne"}):r.filter(v=>v.compName===S.name).sort((v,x)=>x.id-v.id).map(v=>{var x,J;return h.jsxs("div",{className:"p-2 border rounded text-xs bg-slate-50 border-slate-100",children:[h.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mb-1",children:[h.jsxs("span",{children:["Semaine ",v.weekDate]}),h.jsxs("span",{className:"text-sky-700",children:[(x=v.costHT)==null?void 0:x.toFixed(0)," DT"]})]}),h.jsxs("div",{className:"flex justify-between text-slate-500 mb-1",children:[h.jsxs("span",{children:["Conso: ",(J=v.energyKwh)==null?void 0:J.toFixed(0)," kWh"]}),h.jsxs("span",{children:["Run: ",v.runDelta,"h"]})]})]},v.docId)})})]})]})]}),T&&h.jsx("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-sky-600 text-white rounded-xl shadow-xl animate-bounce-short z-50",children:T})]})},TI=({onBack:t})=>{const[e,n]=ie.useState("MEGRINE"),[r,s]=ie.useState(!1),[i,a]=ie.useState(null),[l,c]=ie.useState({MEGRINE:{2018:Array(12).fill(""),2019:Array(12).fill(""),2020:Array(12).fill(""),2021:Array(12).fill(""),2022:Array(12).fill(""),2023:Array(12).fill(""),2024:Array(12).fill("")},ELKHADHRA:{2018:Array(12).fill(""),2019:Array(12).fill(""),2020:Array(12).fill(""),2021:Array(12).fill(""),2022:Array(12).fill(""),2023:Array(12).fill(""),2024:Array(12).fill("")},NAASSEN:{2018:Array(12).fill(""),2019:Array(12).fill(""),2020:Array(12).fill(""),2021:Array(12).fill(""),2022:Array(12).fill(""),2023:Array(12).fill(""),2024:Array(12).fill("")},LAC:{2018:Array(12).fill(""),2019:Array(12).fill(""),2020:Array(12).fill(""),2021:Array(12).fill(""),2022:Array(12).fill(""),2023:Array(12).fill(""),2024:Array(12).fill("")}});ie.useEffect(()=>{(async()=>{try{const R=await X2(so(js,"site_history")),P=JSON.parse(JSON.stringify(l));R.forEach(D=>{const[k,T]=D.id.split("_");P[k]&&P[k][T]&&(P[k][T]=D.data().months)}),c(P)}catch(R){console.error("Erreur chargement historique:",R)}})()},[]);const f={MEGRINE:{name:"Mgrine",area:32500,covered:3e4,open:2500,details:"Showroom 1000m  Atelier FIAT 10000m  Atelier IVECO 9000m  ITALCAR Gros 10000m",energyMix:[{name:"lectricit",value:97,color:"#3b82f6"},{name:"Gaz",value:3,color:"#f97316"}],elecUsage:[{name:"Clim/Chauffage",value:40,kpi:"kWh/m",significant:!0},{name:"clairage",value:27,kpi:"kWh/m",significant:!0},{name:"Air Comprim",value:17,kpi:"kWh/Nm",significant:!0},{name:"Informatique",value:8,kpi:"-",significant:!1},{name:"Services",value:5,kpi:"-",significant:!1},{name:"Gaz (Four)",value:3,kpi:"kWh/Vhicule",significant:!1,note:"Non-Significatif (<5%)"}]},ELKHADHRA:{name:"El Khadhra",area:9500,covered:7e3,open:2500,details:"Rception 1000m  Atelier FIAT 3000m  ITALCAR Gros 3000m",energyMix:[{name:"lectricit",value:100,color:"#3b82f6"}],elecUsage:[{name:"Clim/Chauffage",value:61,kpi:"kWh/m",significant:!0},{name:"clairage",value:23,kpi:"kWh/m",significant:!0},{name:"Air Comprim",value:6,kpi:"kWh/Nm",significant:!1},{name:"Informatique",value:5,kpi:"-",significant:!1},{name:"Services",value:5,kpi:"-",significant:!1}]},NAASSEN:{name:"Naassen",area:32500,covered:1820,open:30680,details:"Admin 920m  Atelier 900m  Parc Neuf 30680m",energyMix:[{name:"lectricit",value:100,color:"#3b82f6"}],elecUsage:[{name:"clairage (80% Ext)",value:78,kpi:"kWh/m",significant:!0},{name:"Clim/Chauffage",value:14,kpi:"kWh/m",significant:!1},{name:"Air Comprim",value:5,kpi:"kWh/Nm",significant:!1},{name:"Services",value:2,kpi:"-",significant:!1},{name:"Informatique",value:1,kpi:"-",significant:!1}]},LAC:{name:"Lac",area:2050,covered:850,open:1200,details:"Showroom 850m  Espace Ouvert 1200m",energyMix:[{name:"lectricit",value:100,color:"#3b82f6"}],elecUsage:[{name:"clairage (60% Int)",value:58,kpi:"kWh/m",significant:!0},{name:"Clim/Chauffage",value:36,kpi:"kWh/m",significant:!0},{name:"Informatique",value:3,kpi:"-",significant:!1},{name:"Services",value:3,kpi:"-",significant:!1}]}},p=f[e],y=(A,R,P)=>{c(D=>({...D,[e]:{...D[e],[A]:D[e][A].map((k,T)=>T===R?P:k)}}))},_=async()=>{const A=e,R=Object.keys(l[A]);try{for(const P of R)await J2(nv(js,"site_history",`${A}_${P}`),{months:l[A][P]});a("Historique sauvegard avec succs !"),setTimeout(()=>{a(null),s(!1)},2e3)}catch(P){console.error("Erreur sauvegarde:",P),a("Erreur lors de la sauvegarde.")}};return h.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[h.jsx("header",{className:"bg-gradient-to-r from-emerald-700 to-teal-800 text-white shadow-lg sticky top-0 z-30",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full mr-4 transition-colors",children:h.jsx(gs,{size:20})}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:h.jsx(Tv,{size:24})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold",children:"Tableau de Bord Sites"}),h.jsx("p",{className:"text-xs text-emerald-100",children:"Performance & Indicateurs"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:()=>s(!0),className:"flex items-center bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg border border-white/20 text-xs font-bold transition-colors",children:[h.jsx(xm,{size:14,className:"mr-2"})," Saisir Historique"]}),h.jsxs("div",{className:"flex items-center bg-white/10 px-3 py-1.5 rounded-lg border border-white/20",children:[h.jsx(yI,{size:16,className:"mr-2 text-yellow-300"}),h.jsxs("div",{className:"text-xs",children:[h.jsx("span",{className:"block opacity-70",children:"Temp. Moyenne"}),h.jsx("span",{className:"font-bold",children:"19.5 C"})]})]})]})]})}),r&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>s(!1),children:h.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full p-6 shadow-2xl relative max-h-[90vh] flex flex-col",onClick:A=>A.stopPropagation(),children:[h.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-100 pb-4",children:[h.jsxs("h3",{className:"font-bold text-slate-800 flex items-center text-lg",children:[h.jsx(xm,{className:"mr-2 text-emerald-600"})," Historique - ",f[e].name]}),h.jsx("button",{onClick:()=>s(!1),className:"text-slate-400 hover:text-slate-600",children:""})]}),h.jsx("div",{className:"overflow-y-auto pr-2 flex-1",children:h.jsx("div",{className:"space-y-6",children:[2020,2021,2022,2023,2024].map(A=>h.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[h.jsxs("div",{className:"bg-slate-50 px-4 py-2 border-b border-slate-200 font-bold text-slate-700 flex justify-between items-center",children:[h.jsxs("span",{children:["Anne ",A]}),h.jsxs("span",{className:"text-xs text-emerald-600 font-mono",children:["Total: ",l[e][A].reduce((R,P)=>R+(parseFloat(P)||0),0).toLocaleString()," kWh"]})]}),h.jsx("div",{className:"grid grid-cols-6 gap-px bg-slate-200",children:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Aot","Sep","Oct","Nov","Dc"].map((R,P)=>h.jsxs("div",{className:"bg-white p-2 flex flex-col",children:[h.jsx("label",{className:"text-[10px] text-slate-400 uppercase font-bold mb-1",children:R}),h.jsx("input",{type:"number",className:"w-full text-sm font-mono outline-none text-slate-700 placeholder-slate-200",placeholder:"0",value:l[e][A][P],onChange:D=>y(A,P,D.target.value)})]},P))})]},A))})}),h.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100 flex justify-end",children:h.jsx("button",{onClick:_,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition-all",children:"Enregistrer & Fermer"})}),i&&h.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-4 py-2 rounded shadow-lg text-sm",children:i})]})}),h.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[h.jsx("div",{className:"flex space-x-2 mb-8 overflow-x-auto pb-2",children:Object.keys(f).map(A=>h.jsx("button",{onClick:()=>n(A),className:`px-6 py-3 rounded-xl font-bold text-sm ${e===A?"bg-emerald-600 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-100"}`,children:f[A].name},A))}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[h.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center",children:[h.jsx("div",{className:"p-3 rounded-full bg-blue-50 text-blue-600 mr-4",children:h.jsx(pI,{size:20})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold",children:"Surface Totale"}),h.jsxs("div",{className:"text-xl font-black text-slate-800",children:[p.area.toLocaleString()," m"]})]})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center",children:[h.jsx("div",{className:"p-3 rounded-full bg-emerald-50 text-emerald-600 mr-4",children:h.jsx(ys,{size:20})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold",children:"Source Principale"}),h.jsx("div",{className:"text-xl font-black text-slate-800",children:p.energyMix[0].name})]})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center",children:[h.jsx("div",{className:"p-3 rounded-full bg-amber-50 text-amber-600 mr-4",children:h.jsx(Uc,{size:20})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold",children:"Poste #1"}),h.jsx("div",{className:"text-xl font-black text-slate-800",children:p.elecUsage[0].name})]})]}),h.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center",children:[h.jsx("div",{className:"p-3 rounded-full bg-purple-50 text-purple-600 mr-4",children:h.jsx(fI,{size:20})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold",children:"Ratio Global"}),h.jsxs("div",{className:"text-xl font-black text-slate-800",children:["-- ",h.jsx("span",{className:"text-xs font-normal text-slate-400",children:"kWh/m"})]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[h.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-4 flex items-center",children:[h.jsx(aI,{size:16,className:"mr-2"})," Structure"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold",children:"COUVERT"}),h.jsxs("div",{className:"font-bold text-slate-700 text-lg",children:[p.covered.toLocaleString()," m"]})]}),h.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold",children:"OUVERT"}),h.jsxs("div",{className:"font-bold text-slate-700 text-lg",children:[p.open.toLocaleString()," m"]})]})]}),h.jsxs("div",{className:"text-xs text-slate-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:[h.jsx("span",{className:"font-bold text-blue-800 block mb-1",children:"Affectation :"}),p.details]})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[h.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-4",children:"Mix nergtique"}),h.jsx("div",{className:"flex h-4 rounded-full overflow-hidden mb-4",children:p.energyMix.map((A,R)=>h.jsx("div",{style:{width:`${A.value}%`,backgroundColor:A.color}},R))}),h.jsx("div",{className:"space-y-2",children:p.energyMix.map((A,R)=>h.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-600",children:[h.jsx("span",{children:A.name}),h.jsxs("span",{children:[A.value,"%"]})]},R))})]})]}),h.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[h.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-6 flex items-center",children:[h.jsx(mI,{size:16,className:"mr-2"})," Rpartition Consommation"]}),h.jsx("div",{className:"space-y-4",children:p.elecUsage.map((A,R)=>h.jsxs("div",{className:"flex items-center justify-between group",children:[h.jsxs("div",{className:"w-1/3 pr-2 flex items-center",children:[A.significant&&h.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 mr-2 flex-shrink-0"}),h.jsx("span",{className:"text-sm font-bold text-slate-800",children:A.name})]}),h.jsx("div",{className:"flex-1 px-4",children:h.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:h.jsx("div",{className:`h-full rounded-full ${A.significant?"bg-emerald-500":"bg-slate-300"}`,style:{width:`${A.value}%`}})})}),h.jsxs("div",{className:"w-24 text-right",children:[h.jsxs("span",{className:"font-bold text-slate-700 mr-2",children:[A.value,"%"]}),h.jsx("span",{className:"text-[9px] text-slate-400",children:A.kpi})]})]},R))})]}),h.jsxs("div",{className:"bg-slate-100 rounded-2xl border-2 border-dashed border-slate-300 p-8 text-center",children:[h.jsx(Uc,{size:48,className:"mx-auto text-slate-300 mb-4"}),h.jsx("h3",{className:"text-slate-500 font-bold mb-2",children:"Donnes Historiques"}),h.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Saisissez l'historique pour gnrer les graphiques d'volution."}),h.jsx("button",{onClick:()=>s(!0),className:"bg-white border border-slate-300 text-slate-600 px-4 py-2 rounded-lg text-sm font-bold hover:bg-white hover:text-emerald-600 transition-colors",children:"Grer l'historique"})]})]})]})]})]})},II=({onNavigate:t})=>h.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[h.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[h.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-blue-500 rounded-full blur-[100px]"}),h.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500 rounded-full blur-[120px]"})]}),h.jsxs("div",{className:"z-10 text-center mb-12",children:[h.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Systme de Gestion Industriel"}),h.jsx("p",{className:"text-slate-400 text-lg",children:"ITALCAR - Version Cloud (Scurise)"})]}),h.jsxs("div",{className:"z-10 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl w-full",children:[h.jsxs("button",{onClick:()=>t("steg"),className:"group relative bg-slate-800 hover:bg-slate-700 border-2 border-slate-700 hover:border-blue-500 rounded-3xl p-6 transition-all text-left",children:[h.jsx("div",{className:"absolute top-4 right-4 bg-blue-500/20 p-2 rounded-xl text-blue-400",children:h.jsx(ys,{size:24})}),h.jsx("h2",{className:"text-xl font-bold mb-2",children:"nergie & Facturation"}),h.jsx("p",{className:"text-slate-400 text-xs mb-4 pr-8",children:"Relevs STEG (MT/BT), Calcul Cos ."}),h.jsxs("div",{className:"flex items-center text-blue-400 font-bold text-xs",children:["Accder ",h.jsx(gs,{className:"ml-1 rotate-180",size:12})]})]}),h.jsxs("button",{onClick:()=>t("air"),className:"group relative bg-slate-800 hover:bg-slate-700 border-2 border-slate-700 hover:border-sky-500 rounded-3xl p-6 transition-all text-left",children:[h.jsx("div",{className:"absolute top-4 right-4 bg-sky-500/20 p-2 rounded-xl text-sky-400",children:h.jsx(Bc,{size:24})}),h.jsx("h2",{className:"text-xl font-bold mb-2",children:"Air Comprim"}),h.jsx("p",{className:"text-slate-400 text-xs mb-4 pr-8",children:"Suivi Compresseurs, Maintenance."}),h.jsxs("div",{className:"flex items-center text-sky-400 font-bold text-xs",children:["Accder ",h.jsx(gs,{className:"ml-1 rotate-180",size:12})]})]}),h.jsxs("button",{onClick:()=>t("sites"),className:"group relative bg-slate-800 hover:bg-slate-700 border-2 border-slate-700 hover:border-emerald-500 rounded-3xl p-6 transition-all text-left",children:[h.jsx("div",{className:"absolute top-4 right-4 bg-emerald-500/20 p-2 rounded-xl text-emerald-400",children:h.jsx(Tv,{size:24})}),h.jsx("h2",{className:"text-xl font-bold mb-2",children:"Tableau de Bord Sites"}),h.jsx("p",{className:"text-slate-400 text-xs mb-4 pr-8",children:"Superficies, Usages, KPIs."}),h.jsxs("div",{className:"flex items-center text-emerald-400 font-bold text-xs",children:["Accder ",h.jsx(gs,{className:"ml-1 rotate-180",size:12})]})]})]}),h.jsx("div",{className:"mt-12 text-slate-600 text-xs",children:"v5.0.0 Cloud  SMEn-ITALCAR"})]}),SI=()=>{const[t,e]=ie.useState("dashboard");return h.jsxs(h.Fragment,{children:[t==="dashboard"&&h.jsx(II,{onNavigate:e}),t==="steg"&&h.jsx(wI,{onBack:()=>e("dashboard")}),t==="air"&&h.jsx(EI,{onBack:()=>e("dashboard")}),t==="sites"&&h.jsx(TI,{onBack:()=>e("dashboard")})]})};Tu.createRoot(document.getElementById("root")).render(h.jsx(d_.StrictMode,{children:h.jsx(SI,{})}));
