(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function y1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g0={exports:{}},tu={},v0={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=Symbol.for("react.element"),_1=Symbol.for("react.portal"),x1=Symbol.for("react.fragment"),w1=Symbol.for("react.strict_mode"),E1=Symbol.for("react.profiler"),T1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),b1=Symbol.for("react.forward_ref"),N1=Symbol.for("react.suspense"),S1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),zp=Symbol.iterator;function k1(t){return t===null||typeof t!="object"?null:(t=zp&&t[zp]||t["@@iterator"],typeof t=="function"?t:null)}var y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_0=Object.assign,x0={};function ui(t,e,n){this.props=t,this.context=e,this.refs=x0,this.updater=n||y0}ui.prototype.isReactComponent={};ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w0(){}w0.prototype=ui.prototype;function sh(t,e,n){this.props=t,this.context=e,this.refs=x0,this.updater=n||y0}var ih=sh.prototype=new w0;ih.constructor=sh;_0(ih,ui.prototype);ih.isPureReactComponent=!0;var Bp=Array.isArray,E0=Object.prototype.hasOwnProperty,oh={current:null},T0={key:!0,ref:!0,__self:!0,__source:!0};function I0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)E0.call(e,r)&&!T0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Oo,type:t,key:i,ref:o,props:s,_owner:oh.current}}function C1(t,e){return{$$typeof:Oo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ah(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oo}function R1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $p=/\/+/g;function Xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R1(""+t.key):e.toString(36)}function Ua(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Oo:case _1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xu(o,0):r,Bp(s)?(n="",t!=null&&(n=t.replace($p,"$&/")+"/"),Ua(s,e,n,"",function(h){return h})):s!=null&&(ah(s)&&(s=C1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($p,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Bp(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Xu(i,u);o+=Ua(i,e,n,c,s)}else if(c=k1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Xu(i,u++),o+=Ua(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ya(t,e,n){if(t==null)return t;var r=[],s=0;return Ua(t,r,"","",function(i){return e.call(n,i,s++)}),r}function P1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},za={transition:null},j1={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:za,ReactCurrentOwner:oh};function b0(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:ya,forEach:function(t,e,n){ya(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ya(t,function(){e++}),e},toArray:function(t){return ya(t,function(e){return e})||[]},only:function(t){if(!ah(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=ui;ae.Fragment=x1;ae.Profiler=E1;ae.PureComponent=sh;ae.StrictMode=w1;ae.Suspense=N1;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j1;ae.act=b0;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=oh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)E0.call(e,c)&&!T0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Oo,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:I1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T1,_context:t},t.Consumer=t};ae.createElement=I0;ae.createFactory=function(t){var e=I0.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:b1,render:t}};ae.isValidElement=ah;ae.lazy=function(t){return{$$typeof:A1,_payload:{_status:-1,_result:t},_init:P1}};ae.memo=function(t,e){return{$$typeof:S1,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=za.transition;za.transition={};try{t()}finally{za.transition=e}};ae.unstable_act=b0;ae.useCallback=function(t,e){return ft.current.useCallback(t,e)};ae.useContext=function(t){return ft.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};ae.useEffect=function(t,e){return ft.current.useEffect(t,e)};ae.useId=function(){return ft.current.useId()};ae.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return ft.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};ae.useRef=function(t){return ft.current.useRef(t)};ae.useState=function(t){return ft.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return ft.current.useTransition()};ae.version="18.3.1";v0.exports=ae;var X=v0.exports;const D1=y1(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=X,M1=Symbol.for("react.element"),L1=Symbol.for("react.fragment"),O1=Object.prototype.hasOwnProperty,F1=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function N0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)O1.call(e,r)&&!U1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:M1,type:t,key:i,ref:o,props:s,_owner:F1.current}}tu.Fragment=L1;tu.jsx=N0;tu.jsxs=N0;g0.exports=tu;var l=g0.exports,Fc={},S0={exports:{}},kt={},A0={exports:{}},k0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,M){var G=R.length;R.push(M);e:for(;0<G;){var W=G-1>>>1,Z=R[W];if(0<s(Z,M))R[W]=M,R[G]=Z,G=W;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var M=R[0],G=R.pop();if(G!==M){R[0]=G;e:for(var W=0,Z=R.length,P=Z>>>1;W<P;){var ee=2*(W+1)-1,te=R[ee],ce=ee+1,Ie=R[ce];if(0>s(te,G))ce<Z&&0>s(Ie,te)?(R[W]=Ie,R[ce]=G,W=ce):(R[W]=te,R[ee]=G,W=ee);else if(ce<Z&&0>s(Ie,G))R[W]=Ie,R[ce]=G,W=ce;else break e}}return M}function s(R,M){var G=R.sortIndex-M.sortIndex;return G!==0?G:R.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],p=1,m=null,y=3,S=!1,C=!1,j=!1,U=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(R){for(var M=n(h);M!==null;){if(M.callback===null)r(h);else if(M.startTime<=R)r(h),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(h)}}function V(R){if(j=!1,N(R),!C)if(n(c)!==null)C=!0,B(L);else{var M=n(h);M!==null&&O(V,M.startTime-R)}}function L(R,M){C=!1,j&&(j=!1,I(v),v=-1),S=!0;var G=y;try{for(N(M),m=n(c);m!==null&&(!(m.expirationTime>M)||R&&!b());){var W=m.callback;if(typeof W=="function"){m.callback=null,y=m.priorityLevel;var Z=W(m.expirationTime<=M);M=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(c)&&r(c),N(M)}else r(c);m=n(c)}if(m!==null)var P=!0;else{var ee=n(h);ee!==null&&O(V,ee.startTime-M),P=!1}return P}finally{m=null,y=G,S=!1}}var z=!1,_=null,v=-1,x=5,E=-1;function b(){return!(t.unstable_now()-E<x)}function A(){if(_!==null){var R=t.unstable_now();E=R;var M=!0;try{M=_(!0,R)}finally{M?T():(z=!1,_=null)}}else z=!1}var T;if(typeof w=="function")T=function(){w(A)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Et=Fe.port2;Fe.port1.onmessage=A,T=function(){Et.postMessage(null)}}else T=function(){U(A,0)};function B(R){_=R,z||(z=!0,T())}function O(R,M){v=U(function(){R(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,B(L))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(y){case 1:case 2:case 3:var M=3;break;default:M=y}var G=y;y=M;try{return R()}finally{y=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=y;y=R;try{return M()}finally{y=G}},t.unstable_scheduleCallback=function(R,M,G){var W=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?W+G:W):G=W,R){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=G+Z,R={id:p++,callback:M,priorityLevel:R,startTime:G,expirationTime:Z,sortIndex:-1},G>W?(R.sortIndex=G,e(h,R),n(c)===null&&R===n(h)&&(j?(I(v),v=-1):j=!0,O(V,G-W))):(R.sortIndex=Z,e(c,R),C||S||(C=!0,B(L))),R},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(R){var M=y;return function(){var G=y;y=M;try{return R.apply(this,arguments)}finally{y=G}}}})(k0);A0.exports=k0;var z1=A0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1=X,At=z1;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C0=new Set,ho={};function as(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(ho[t]=e,t=0;t<e.length;t++)C0.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uc=Object.prototype.hasOwnProperty,$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hp={},Wp={};function H1(t){return Uc.call(Wp,t)?!0:Uc.call(Hp,t)?!1:$1.test(t)?Wp[t]=!0:(Hp[t]=!0,!1)}function W1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q1(t,e,n,r){if(e===null||typeof e>"u"||W1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var lh=/[\-:]([a-z])/g;function uh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lh,uh);Je[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lh,uh);Je[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lh,uh);Je[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ch(t,e,n,r){var s=Je.hasOwnProperty(e)?Je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q1(e,n,s,r)&&(n=null),r||s===null?H1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Un=B1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),zc=Symbol.for("react.profiler"),R0=Symbol.for("react.provider"),P0=Symbol.for("react.context"),hh=Symbol.for("react.forward_ref"),Bc=Symbol.for("react.suspense"),$c=Symbol.for("react.suspense_list"),fh=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),j0=Symbol.for("react.offscreen"),qp=Symbol.iterator;function ji(t){return t===null||typeof t!="object"?null:(t=qp&&t[qp]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,Ju;function Bi(t){if(Ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ju=e&&e[1]||""}return`
`+Ju+t}var Zu=!1;function ec(t,e){if(!t||Zu)return"";Zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bi(t):""}function G1(t){switch(t.tag){case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 2:case 15:return t=ec(t.type,!1),t;case 11:return t=ec(t.type.render,!1),t;case 1:return t=ec(t.type,!0),t;default:return""}}function Hc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case Ts:return"Portal";case zc:return"Profiler";case dh:return"StrictMode";case Bc:return"Suspense";case $c:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P0:return(t.displayName||"Context")+".Consumer";case R0:return(t._context.displayName||"Context")+".Provider";case hh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fh:return e=t.displayName||null,e!==null?e:Hc(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return Hc(t(e))}catch{}}return null}function K1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hc(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q1(t){var e=D0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=Q1(t))}function V0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=D0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wc(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M0(t,e){e=e.checked,e!=null&&ch(t,"checked",e,!1)}function qc(t,e){M0(t,e);var n=Er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gc(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gc(t,e,n){(e!=="number"||ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $i=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Er(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if($i(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Er(n)}}function L0(t,e){var n=Er(e.value),r=Er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,F0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y1=["Webkit","ms","Moz","O"];Object.keys(Yi).forEach(function(t){Y1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yi[e]=Yi[t]})});function U0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yi.hasOwnProperty(t)&&Yi[t]?(""+e).trim():e+"px"}function z0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var X1=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yc(t,e){if(e){if(X1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Xc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=null;function ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zc=null,Ls=null,Os=null;function Xp(t){if(t=zo(t)){if(typeof Zc!="function")throw Error(H(280));var e=t.stateNode;e&&(e=ou(e),Zc(t.stateNode,t.type,e))}}function B0(t){Ls?Os?Os.push(t):Os=[t]:Ls=t}function $0(){if(Ls){var t=Ls,e=Os;if(Os=Ls=null,Xp(t),e)for(t=0;t<e.length;t++)Xp(e[t])}}function H0(t,e){return t(e)}function W0(){}var tc=!1;function q0(t,e,n){if(tc)return t(e,n);tc=!0;try{return H0(t,e,n)}finally{tc=!1,(Ls!==null||Os!==null)&&(W0(),$0())}}function po(t,e){var n=t.stateNode;if(n===null)return null;var r=ou(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var ed=!1;if(Cn)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){ed=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{ed=!1}function J1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Xi=!1,ul=null,cl=!1,td=null,Z1={onError:function(t){Xi=!0,ul=t}};function ew(t,e,n,r,s,i,o,u,c){Xi=!1,ul=null,J1.apply(Z1,arguments)}function tw(t,e,n,r,s,i,o,u,c){if(ew.apply(this,arguments),Xi){if(Xi){var h=ul;Xi=!1,ul=null}else throw Error(H(198));cl||(cl=!0,td=h)}}function ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function G0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jp(t){if(ls(t)!==t)throw Error(H(188))}function nw(t){var e=t.alternate;if(!e){if(e=ls(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jp(s),t;if(i===r)return Jp(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function K0(t){return t=nw(t),t!==null?Q0(t):null}function Q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q0(t);if(e!==null)return e;t=t.sibling}return null}var Y0=At.unstable_scheduleCallback,Zp=At.unstable_cancelCallback,rw=At.unstable_shouldYield,sw=At.unstable_requestPaint,Ve=At.unstable_now,iw=At.unstable_getCurrentPriorityLevel,mh=At.unstable_ImmediatePriority,X0=At.unstable_UserBlockingPriority,dl=At.unstable_NormalPriority,ow=At.unstable_LowPriority,J0=At.unstable_IdlePriority,nu=null,on=null;function aw(t){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(nu,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:cw,lw=Math.log,uw=Math.LN2;function cw(t){return t>>>=0,t===0?32:31-(lw(t)/uw|0)|0}var Ea=64,Ta=4194304;function Hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Hi(u):(i&=o,i!==0&&(r=Hi(i)))}else o=n&~s,o!==0?r=Hi(o):i!==0&&(r=Hi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),s=1<<n,r|=t[n],e&=~s;return r}function dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Wt(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=dw(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function nd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z0(){var t=Ea;return Ea<<=1,!(Ea&4194240)&&(Ea=64),t}function nc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function fw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function gh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function ev(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tv,vh,nv,rv,sv,rd=!1,Ia=[],ur=null,cr=null,dr=null,mo=new Map,go=new Map,er=[],pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function em(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(e.pointerId)}}function Vi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zo(e),e!==null&&vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mw(t,e,n,r,s){switch(e){case"focusin":return ur=Vi(ur,t,e,n,r,s),!0;case"dragenter":return cr=Vi(cr,t,e,n,r,s),!0;case"mouseover":return dr=Vi(dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return mo.set(i,Vi(mo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,go.set(i,Vi(go.get(i)||null,t,e,n,r,s)),!0}return!1}function iv(t){var e=$r(t.target);if(e!==null){var n=ls(e);if(n!==null){if(e=n.tag,e===13){if(e=G0(n),e!==null){t.blockedOn=e,sv(t.priority,function(){nv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ba(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jc=r,n.target.dispatchEvent(r),Jc=null}else return e=zo(n),e!==null&&vh(e),t.blockedOn=n,!1;e.shift()}return!0}function tm(t,e,n){Ba(t)&&n.delete(e)}function gw(){rd=!1,ur!==null&&Ba(ur)&&(ur=null),cr!==null&&Ba(cr)&&(cr=null),dr!==null&&Ba(dr)&&(dr=null),mo.forEach(tm),go.forEach(tm)}function Mi(t,e){t.blockedOn===e&&(t.blockedOn=null,rd||(rd=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,gw)))}function vo(t){function e(s){return Mi(s,t)}if(0<Ia.length){Mi(Ia[0],t);for(var n=1;n<Ia.length;n++){var r=Ia[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Mi(ur,t),cr!==null&&Mi(cr,t),dr!==null&&Mi(dr,t),mo.forEach(e),go.forEach(e),n=0;n<er.length;n++)r=er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)iv(n),n.blockedOn===null&&er.shift()}var Fs=Un.ReactCurrentBatchConfig,fl=!0;function vw(t,e,n,r){var s=me,i=Fs.transition;Fs.transition=null;try{me=1,yh(t,e,n,r)}finally{me=s,Fs.transition=i}}function yw(t,e,n,r){var s=me,i=Fs.transition;Fs.transition=null;try{me=4,yh(t,e,n,r)}finally{me=s,Fs.transition=i}}function yh(t,e,n,r){if(fl){var s=sd(t,e,n,r);if(s===null)hc(t,e,r,pl,n),em(t,r);else if(mw(s,t,e,n,r))r.stopPropagation();else if(em(t,r),e&4&&-1<pw.indexOf(t)){for(;s!==null;){var i=zo(s);if(i!==null&&tv(i),i=sd(t,e,n,r),i===null&&hc(t,e,r,pl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hc(t,e,r,null,n)}}var pl=null;function sd(t,e,n,r){if(pl=null,t=ph(r),t=$r(t),t!==null)if(e=ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=G0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pl=t,null}function ov(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iw()){case mh:return 1;case X0:return 4;case dl:case ow:return 16;case J0:return 536870912;default:return 16}default:return 16}}var or=null,_h=null,$a=null;function av(){if($a)return $a;var t,e=_h,n=e.length,r,s="value"in or?or.value:or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $a=s.slice(t,1<r?1-r:void 0)}function Ha(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ba(){return!0}function nm(){return!1}function Ct(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ba:nm,this.isPropagationStopped=nm,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),e}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=Ct(ci),Uo=ke({},ci,{view:0,detail:0}),_w=Ct(Uo),rc,sc,Li,ru=ke({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Li&&(Li&&t.type==="mousemove"?(rc=t.screenX-Li.screenX,sc=t.screenY-Li.screenY):sc=rc=0,Li=t),rc)},movementY:function(t){return"movementY"in t?t.movementY:sc}}),rm=Ct(ru),xw=ke({},ru,{dataTransfer:0}),ww=Ct(xw),Ew=ke({},Uo,{relatedTarget:0}),ic=Ct(Ew),Tw=ke({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Iw=Ct(Tw),bw=ke({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nw=Ct(bw),Sw=ke({},ci,{data:0}),sm=Ct(Sw),Aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cw[t])?!!e[t]:!1}function wh(){return Rw}var Pw=ke({},Uo,{key:function(t){if(t.key){var e=Aw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ha(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wh,charCode:function(t){return t.type==="keypress"?Ha(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ha(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jw=Ct(Pw),Dw=ke({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),im=Ct(Dw),Vw=ke({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wh}),Mw=Ct(Vw),Lw=ke({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ow=Ct(Lw),Fw=ke({},ru,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uw=Ct(Fw),zw=[9,13,27,32],Eh=Cn&&"CompositionEvent"in window,Ji=null;Cn&&"documentMode"in document&&(Ji=document.documentMode);var Bw=Cn&&"TextEvent"in window&&!Ji,lv=Cn&&(!Eh||Ji&&8<Ji&&11>=Ji),om=String.fromCharCode(32),am=!1;function uv(t,e){switch(t){case"keyup":return zw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bs=!1;function $w(t,e){switch(t){case"compositionend":return cv(e);case"keypress":return e.which!==32?null:(am=!0,om);case"textInput":return t=e.data,t===om&&am?null:t;default:return null}}function Hw(t,e){if(bs)return t==="compositionend"||!Eh&&uv(t,e)?(t=av(),$a=_h=or=null,bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lv&&e.locale!=="ko"?null:e.data;default:return null}}var Ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ww[t.type]:e==="textarea"}function dv(t,e,n,r){B0(r),e=ml(e,"onChange"),0<e.length&&(n=new xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zi=null,yo=null;function qw(t){Ev(t,0)}function su(t){var e=As(t);if(V0(e))return t}function Gw(t,e){if(t==="change")return e}var hv=!1;if(Cn){var oc;if(Cn){var ac="oninput"in document;if(!ac){var um=document.createElement("div");um.setAttribute("oninput","return;"),ac=typeof um.oninput=="function"}oc=ac}else oc=!1;hv=oc&&(!document.documentMode||9<document.documentMode)}function cm(){Zi&&(Zi.detachEvent("onpropertychange",fv),yo=Zi=null)}function fv(t){if(t.propertyName==="value"&&su(yo)){var e=[];dv(e,yo,t,ph(t)),q0(qw,e)}}function Kw(t,e,n){t==="focusin"?(cm(),Zi=e,yo=n,Zi.attachEvent("onpropertychange",fv)):t==="focusout"&&cm()}function Qw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return su(yo)}function Yw(t,e){if(t==="click")return su(e)}function Xw(t,e){if(t==="input"||t==="change")return su(e)}function Jw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:Jw;function _o(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Uc.call(e,s)||!Kt(t[s],e[s]))return!1}return!0}function dm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hm(t,e){var n=dm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dm(n)}}function pv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mv(){for(var t=window,e=ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ll(t.document)}return e}function Th(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zw(t){var e=mv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pv(n.ownerDocument.documentElement,n)){if(r!==null&&Th(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=hm(n,i);var o=hm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eE=Cn&&"documentMode"in document&&11>=document.documentMode,Ns=null,id=null,eo=null,od=!1;function fm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;od||Ns==null||Ns!==ll(r)||(r=Ns,"selectionStart"in r&&Th(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&_o(eo,r)||(eo=r,r=ml(id,"onSelect"),0<r.length&&(e=new xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ns)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ss={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},lc={},gv={};Cn&&(gv=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function iu(t){if(lc[t])return lc[t];if(!Ss[t])return t;var e=Ss[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gv)return lc[t]=e[n];return t}var vv=iu("animationend"),yv=iu("animationiteration"),_v=iu("animationstart"),xv=iu("transitionend"),wv=new Map,pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){wv.set(t,e),as(e,[t])}for(var uc=0;uc<pm.length;uc++){var cc=pm[uc],tE=cc.toLowerCase(),nE=cc[0].toUpperCase()+cc.slice(1);Sr(tE,"on"+nE)}Sr(vv,"onAnimationEnd");Sr(yv,"onAnimationIteration");Sr(_v,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(xv,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function mm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tw(r,e,void 0,t),t.currentTarget=null}function Ev(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;mm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;mm(s,u,h),i=c}}}if(cl)throw t=td,cl=!1,td=null,t}function we(t,e){var n=e[dd];n===void 0&&(n=e[dd]=new Set);var r=t+"__bubble";n.has(r)||(Tv(e,t,2,!1),n.add(r))}function dc(t,e,n){var r=0;e&&(r|=4),Tv(n,t,r,e)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Sa]){t[Sa]=!0,C0.forEach(function(n){n!=="selectionchange"&&(rE.has(n)||dc(n,!1,t),dc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sa]||(e[Sa]=!0,dc("selectionchange",!1,e))}}function Tv(t,e,n,r){switch(ov(e)){case 1:var s=vw;break;case 4:s=yw;break;default:s=yh}n=s.bind(null,e,n,t),s=void 0,!ed||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=$r(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}q0(function(){var h=i,p=ph(n),m=[];e:{var y=wv.get(t);if(y!==void 0){var S=xh,C=t;switch(t){case"keypress":if(Ha(n)===0)break e;case"keydown":case"keyup":S=jw;break;case"focusin":C="focus",S=ic;break;case"focusout":C="blur",S=ic;break;case"beforeblur":case"afterblur":S=ic;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Mw;break;case vv:case yv:case _v:S=Iw;break;case xv:S=Ow;break;case"scroll":S=_w;break;case"wheel":S=Uw;break;case"copy":case"cut":case"paste":S=Nw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=im}var j=(e&4)!==0,U=!j&&t==="scroll",I=j?y!==null?y+"Capture":null:y;j=[];for(var w=h,N;w!==null;){N=w;var V=N.stateNode;if(N.tag===5&&V!==null&&(N=V,I!==null&&(V=po(w,I),V!=null&&j.push(wo(w,V,N)))),U)break;w=w.return}0<j.length&&(y=new S(y,C,null,n,p),m.push({event:y,listeners:j}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",y&&n!==Jc&&(C=n.relatedTarget||n.fromElement)&&($r(C)||C[Rn]))break e;if((S||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,S?(C=n.relatedTarget||n.toElement,S=h,C=C?$r(C):null,C!==null&&(U=ls(C),C!==U||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=h),S!==C)){if(j=rm,V="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(j=im,V="onPointerLeave",I="onPointerEnter",w="pointer"),U=S==null?y:As(S),N=C==null?y:As(C),y=new j(V,w+"leave",S,n,p),y.target=U,y.relatedTarget=N,V=null,$r(p)===h&&(j=new j(I,w+"enter",C,n,p),j.target=N,j.relatedTarget=U,V=j),U=V,S&&C)t:{for(j=S,I=C,w=0,N=j;N;N=_s(N))w++;for(N=0,V=I;V;V=_s(V))N++;for(;0<w-N;)j=_s(j),w--;for(;0<N-w;)I=_s(I),N--;for(;w--;){if(j===I||I!==null&&j===I.alternate)break t;j=_s(j),I=_s(I)}j=null}else j=null;S!==null&&gm(m,y,S,j,!1),C!==null&&U!==null&&gm(m,U,C,j,!0)}}e:{if(y=h?As(h):window,S=y.nodeName&&y.nodeName.toLowerCase(),S==="select"||S==="input"&&y.type==="file")var L=Gw;else if(lm(y))if(hv)L=Xw;else{L=Qw;var z=Kw}else(S=y.nodeName)&&S.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(L=Yw);if(L&&(L=L(t,h))){dv(m,L,n,p);break e}z&&z(t,y,h),t==="focusout"&&(z=y._wrapperState)&&z.controlled&&y.type==="number"&&Gc(y,"number",y.value)}switch(z=h?As(h):window,t){case"focusin":(lm(z)||z.contentEditable==="true")&&(Ns=z,id=h,eo=null);break;case"focusout":eo=id=Ns=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,fm(m,n,p);break;case"selectionchange":if(eE)break;case"keydown":case"keyup":fm(m,n,p)}var _;if(Eh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else bs?uv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(lv&&n.locale!=="ko"&&(bs||v!=="onCompositionStart"?v==="onCompositionEnd"&&bs&&(_=av()):(or=p,_h="value"in or?or.value:or.textContent,bs=!0)),z=ml(h,v),0<z.length&&(v=new sm(v,t,null,n,p),m.push({event:v,listeners:z}),_?v.data=_:(_=cv(n),_!==null&&(v.data=_)))),(_=Bw?$w(t,n):Hw(t,n))&&(h=ml(h,"onBeforeInput"),0<h.length&&(p=new sm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=_))}Ev(m,e)})}function wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=po(t,n),i!=null&&r.unshift(wo(t,i,s)),i=po(t,e),i!=null&&r.push(wo(t,i,s))),t=t.return}return r}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=po(n,i),c!=null&&o.unshift(wo(n,c,u))):s||(c=po(n,i),c!=null&&o.push(wo(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sE=/\r\n?/g,iE=/\u0000|\uFFFD/g;function vm(t){return(typeof t=="string"?t:""+t).replace(sE,`
`).replace(iE,"")}function Aa(t,e,n){if(e=vm(e),vm(t)!==e&&n)throw Error(H(425))}function gl(){}var ad=null,ld=null;function ud(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cd=typeof setTimeout=="function"?setTimeout:void 0,oE=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,aE=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(t){return ym.resolve(null).then(t).catch(lE)}:cd;function lE(t){setTimeout(function(){throw t})}function fc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vo(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),rn="__reactFiber$"+di,Eo="__reactProps$"+di,Rn="__reactContainer$"+di,dd="__reactEvents$"+di,uE="__reactListeners$"+di,cE="__reactHandles$"+di;function $r(t){var e=t[rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rn]||n[rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_m(t);t!==null;){if(n=t[rn])return n;t=_m(t)}return e}t=n,n=t.parentNode}return null}function zo(t){return t=t[rn]||t[Rn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function As(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function ou(t){return t[Eo]||null}var hd=[],ks=-1;function Ar(t){return{current:t}}function Te(t){0>ks||(t.current=hd[ks],hd[ks]=null,ks--)}function _e(t,e){ks++,hd[ks]=t.current,t.current=e}var Tr={},lt=Ar(Tr),vt=Ar(!1),Yr=Tr;function Ks(t,e){var n=t.type.contextTypes;if(!n)return Tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yt(t){return t=t.childContextTypes,t!=null}function vl(){Te(vt),Te(lt)}function xm(t,e,n){if(lt.current!==Tr)throw Error(H(168));_e(lt,e),_e(vt,n)}function Iv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,K1(t)||"Unknown",s));return ke({},n,r)}function yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,Yr=lt.current,_e(lt,t),_e(vt,vt.current),!0}function wm(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=Iv(t,e,Yr),r.__reactInternalMemoizedMergedChildContext=t,Te(vt),Te(lt),_e(lt,t)):Te(vt),_e(vt,n)}var wn=null,au=!1,pc=!1;function bv(t){wn===null?wn=[t]:wn.push(t)}function dE(t){au=!0,bv(t)}function kr(){if(!pc&&wn!==null){pc=!0;var t=0,e=me;try{var n=wn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,au=!1}catch(s){throw wn!==null&&(wn=wn.slice(t+1)),Y0(mh,kr),s}finally{me=e,pc=!1}}return null}var Cs=[],Rs=0,_l=null,xl=0,Pt=[],jt=0,Xr=null,En=1,Tn="";function Ur(t,e){Cs[Rs++]=xl,Cs[Rs++]=_l,_l=t,xl=e}function Nv(t,e,n){Pt[jt++]=En,Pt[jt++]=Tn,Pt[jt++]=Xr,Xr=t;var r=En;t=Tn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var i=32-Wt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,En=1<<32-Wt(e)+s|n<<s|r,Tn=i+t}else En=1<<i|n<<s|r,Tn=t}function Ih(t){t.return!==null&&(Ur(t,1),Nv(t,1,0))}function bh(t){for(;t===_l;)_l=Cs[--Rs],Cs[Rs]=null,xl=Cs[--Rs],Cs[Rs]=null;for(;t===Xr;)Xr=Pt[--jt],Pt[jt]=null,Tn=Pt[--jt],Pt[jt]=null,En=Pt[--jt],Pt[jt]=null}var St=null,Nt=null,Ne=!1,$t=null;function Sv(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Em(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,Nt=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xr!==null?{id:En,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,Nt=null,!0):!1;default:return!1}}function fd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pd(t){if(Ne){var e=Nt;if(e){var n=e;if(!Em(t,e)){if(fd(t))throw Error(H(418));e=hr(n.nextSibling);var r=St;e&&Em(t,e)?Sv(r,n):(t.flags=t.flags&-4097|2,Ne=!1,St=t)}}else{if(fd(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ne=!1,St=t}}}function Tm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function ka(t){if(t!==St)return!1;if(!Ne)return Tm(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ud(t.type,t.memoizedProps)),e&&(e=Nt)){if(fd(t))throw Av(),Error(H(418));for(;e;)Sv(t,e),e=hr(e.nextSibling)}if(Tm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=St?hr(t.stateNode.nextSibling):null;return!0}function Av(){for(var t=Nt;t;)t=hr(t.nextSibling)}function Qs(){Nt=St=null,Ne=!1}function Nh(t){$t===null?$t=[t]:$t.push(t)}var hE=Un.ReactCurrentBatchConfig;function Oi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Ca(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Im(t){var e=t._init;return e(t._payload)}function kv(t){function e(I,w){if(t){var N=I.deletions;N===null?(I.deletions=[w],I.flags|=16):N.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=gr(I,w),I.index=0,I.sibling=null,I}function i(I,w,N){return I.index=N,t?(N=I.alternate,N!==null?(N=N.index,N<w?(I.flags|=2,w):N):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,w,N,V){return w===null||w.tag!==6?(w=wc(N,I.mode,V),w.return=I,w):(w=s(w,N),w.return=I,w)}function c(I,w,N,V){var L=N.type;return L===Is?p(I,w,N.props.children,V,N.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Jn&&Im(L)===w.type)?(V=s(w,N.props),V.ref=Oi(I,w,N),V.return=I,V):(V=Xa(N.type,N.key,N.props,null,I.mode,V),V.ref=Oi(I,w,N),V.return=I,V)}function h(I,w,N,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=Ec(N,I.mode,V),w.return=I,w):(w=s(w,N.children||[]),w.return=I,w)}function p(I,w,N,V,L){return w===null||w.tag!==7?(w=Kr(N,I.mode,V,L),w.return=I,w):(w=s(w,N),w.return=I,w)}function m(I,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=wc(""+w,I.mode,N),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _a:return N=Xa(w.type,w.key,w.props,null,I.mode,N),N.ref=Oi(I,null,w),N.return=I,N;case Ts:return w=Ec(w,I.mode,N),w.return=I,w;case Jn:var V=w._init;return m(I,V(w._payload),N)}if($i(w)||ji(w))return w=Kr(w,I.mode,N,null),w.return=I,w;Ca(I,w)}return null}function y(I,w,N,V){var L=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return L!==null?null:u(I,w,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _a:return N.key===L?c(I,w,N,V):null;case Ts:return N.key===L?h(I,w,N,V):null;case Jn:return L=N._init,y(I,w,L(N._payload),V)}if($i(N)||ji(N))return L!==null?null:p(I,w,N,V,null);Ca(I,N)}return null}function S(I,w,N,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return I=I.get(N)||null,u(w,I,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _a:return I=I.get(V.key===null?N:V.key)||null,c(w,I,V,L);case Ts:return I=I.get(V.key===null?N:V.key)||null,h(w,I,V,L);case Jn:var z=V._init;return S(I,w,N,z(V._payload),L)}if($i(V)||ji(V))return I=I.get(N)||null,p(w,I,V,L,null);Ca(w,V)}return null}function C(I,w,N,V){for(var L=null,z=null,_=w,v=w=0,x=null;_!==null&&v<N.length;v++){_.index>v?(x=_,_=null):x=_.sibling;var E=y(I,_,N[v],V);if(E===null){_===null&&(_=x);break}t&&_&&E.alternate===null&&e(I,_),w=i(E,w,v),z===null?L=E:z.sibling=E,z=E,_=x}if(v===N.length)return n(I,_),Ne&&Ur(I,v),L;if(_===null){for(;v<N.length;v++)_=m(I,N[v],V),_!==null&&(w=i(_,w,v),z===null?L=_:z.sibling=_,z=_);return Ne&&Ur(I,v),L}for(_=r(I,_);v<N.length;v++)x=S(_,I,v,N[v],V),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?v:x.key),w=i(x,w,v),z===null?L=x:z.sibling=x,z=x);return t&&_.forEach(function(b){return e(I,b)}),Ne&&Ur(I,v),L}function j(I,w,N,V){var L=ji(N);if(typeof L!="function")throw Error(H(150));if(N=L.call(N),N==null)throw Error(H(151));for(var z=L=null,_=w,v=w=0,x=null,E=N.next();_!==null&&!E.done;v++,E=N.next()){_.index>v?(x=_,_=null):x=_.sibling;var b=y(I,_,E.value,V);if(b===null){_===null&&(_=x);break}t&&_&&b.alternate===null&&e(I,_),w=i(b,w,v),z===null?L=b:z.sibling=b,z=b,_=x}if(E.done)return n(I,_),Ne&&Ur(I,v),L;if(_===null){for(;!E.done;v++,E=N.next())E=m(I,E.value,V),E!==null&&(w=i(E,w,v),z===null?L=E:z.sibling=E,z=E);return Ne&&Ur(I,v),L}for(_=r(I,_);!E.done;v++,E=N.next())E=S(_,I,v,E.value,V),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?v:E.key),w=i(E,w,v),z===null?L=E:z.sibling=E,z=E);return t&&_.forEach(function(A){return e(I,A)}),Ne&&Ur(I,v),L}function U(I,w,N,V){if(typeof N=="object"&&N!==null&&N.type===Is&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case _a:e:{for(var L=N.key,z=w;z!==null;){if(z.key===L){if(L=N.type,L===Is){if(z.tag===7){n(I,z.sibling),w=s(z,N.props.children),w.return=I,I=w;break e}}else if(z.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Jn&&Im(L)===z.type){n(I,z.sibling),w=s(z,N.props),w.ref=Oi(I,z,N),w.return=I,I=w;break e}n(I,z);break}else e(I,z);z=z.sibling}N.type===Is?(w=Kr(N.props.children,I.mode,V,N.key),w.return=I,I=w):(V=Xa(N.type,N.key,N.props,null,I.mode,V),V.ref=Oi(I,w,N),V.return=I,I=V)}return o(I);case Ts:e:{for(z=N.key;w!==null;){if(w.key===z)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(I,w.sibling),w=s(w,N.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=Ec(N,I.mode,V),w.return=I,I=w}return o(I);case Jn:return z=N._init,U(I,w,z(N._payload),V)}if($i(N))return C(I,w,N,V);if(ji(N))return j(I,w,N,V);Ca(I,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,N),w.return=I,I=w):(n(I,w),w=wc(N,I.mode,V),w.return=I,I=w),o(I)):n(I,w)}return U}var Ys=kv(!0),Cv=kv(!1),wl=Ar(null),El=null,Ps=null,Sh=null;function Ah(){Sh=Ps=El=null}function kh(t){var e=wl.current;Te(wl),t._currentValue=e}function md(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){El=t,Sh=Ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(Sh!==t)if(t={context:t,memoizedValue:e,next:null},Ps===null){if(El===null)throw Error(H(308));Ps=t,El.dependencies={lanes:0,firstContext:t}}else Ps=Ps.next=t;return e}var Hr=null;function Ch(t){Hr===null?Hr=[t]:Hr.push(t)}function Rv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ch(e)):(n.next=s.next,s.next=n),e.interleaved=n,Pn(t,r)}function Pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function Rh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Pn(t,n)}return s=r.interleaved,s===null?(e.next=e,Ch(r)):(e.next=s.next,s.next=e),r.interleaved=e,Pn(t,n)}function Wa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gh(t,n)}}function bm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tl(t,e,n,r){var s=t.updateQueue;Zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,u=i;do{var y=u.lane,S=u.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=t,j=u;switch(y=e,S=n,j.tag){case 1:if(C=j.payload,typeof C=="function"){m=C.call(S,m,y);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=j.payload,y=typeof C=="function"?C.call(S,m,y):C,y==null)break e;m=ke({},m,y);break e;case 2:Zn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[u]:y.push(u))}else S={eventTime:S,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=S,c=m):p=p.next=S,o|=y;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;y=u,u=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(1);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zr|=o,t.lanes=o,t.memoizedState=m}}function Nm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Bo={},an=Ar(Bo),To=Ar(Bo),Io=Ar(Bo);function Wr(t){if(t===Bo)throw Error(H(174));return t}function Ph(t,e){switch(_e(Io,e),_e(To,t),_e(an,Bo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qc(e,t)}Te(an),_e(an,e)}function Xs(){Te(an),Te(To),Te(Io)}function jv(t){Wr(Io.current);var e=Wr(an.current),n=Qc(e,t.type);e!==n&&(_e(To,t),_e(an,n))}function jh(t){To.current===t&&(Te(an),Te(To))}var Se=Ar(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mc=[];function Dh(){for(var t=0;t<mc.length;t++)mc[t]._workInProgressVersionPrimary=null;mc.length=0}var qa=Un.ReactCurrentDispatcher,gc=Un.ReactCurrentBatchConfig,Jr=0,Ae=null,Ue=null,He=null,bl=!1,to=!1,bo=0,fE=0;function nt(){throw Error(H(321))}function Vh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function Mh(t,e,n,r,s,i){if(Jr=i,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qa.current=t===null||t.memoizedState===null?vE:yE,t=n(r,s),to){i=0;do{if(to=!1,bo=0,25<=i)throw Error(H(301));i+=1,He=Ue=null,e.updateQueue=null,qa.current=_E,t=n(r,s)}while(to)}if(qa.current=Nl,e=Ue!==null&&Ue.next!==null,Jr=0,He=Ue=Ae=null,bl=!1,e)throw Error(H(300));return t}function Lh(){var t=bo!==0;return bo=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ae.memoizedState=He=t:He=He.next=t,He}function Ot(){if(Ue===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=He===null?Ae.memoizedState:He.next;if(e!==null)He=e,Ue=t;else{if(t===null)throw Error(H(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},He===null?Ae.memoizedState=He=t:He=He.next=t}return He}function No(t,e){return typeof e=="function"?e(t):e}function vc(t){var e=Ot(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var p=h.lane;if((Jr&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,Ae.lanes|=p,Zr|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,Kt(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ae.lanes|=i,Zr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yc(t){var e=Ot(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Kt(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Dv(){}function Vv(t,e){var n=Ae,r=Ot(),s=e(),i=!Kt(r.memoizedState,s);if(i&&(r.memoizedState=s,gt=!0),r=r.queue,Oh(Ov.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,So(9,Lv.bind(null,n,r,s,e),void 0,null),We===null)throw Error(H(349));Jr&30||Mv(n,e,s)}return s}function Mv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lv(t,e,n,r){e.value=n,e.getSnapshot=r,Fv(e)&&Uv(t)}function Ov(t,e,n){return n(function(){Fv(e)&&Uv(t)})}function Fv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function Uv(t){var e=Pn(t,1);e!==null&&qt(e,t,1,-1)}function Sm(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=gE.bind(null,Ae,t),[e.memoizedState,t]}function So(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zv(){return Ot().memoizedState}function Ga(t,e,n,r){var s=nn();Ae.flags|=t,s.memoizedState=So(1|e,n,void 0,r===void 0?null:r)}function lu(t,e,n,r){var s=Ot();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Vh(r,o.deps)){s.memoizedState=So(e,n,i,r);return}}Ae.flags|=t,s.memoizedState=So(1|e,n,i,r)}function Am(t,e){return Ga(8390656,8,t,e)}function Oh(t,e){return lu(2048,8,t,e)}function Bv(t,e){return lu(4,2,t,e)}function $v(t,e){return lu(4,4,t,e)}function Hv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wv(t,e,n){return n=n!=null?n.concat([t]):null,lu(4,4,Hv.bind(null,e,t),n)}function Fh(){}function qv(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gv(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kv(t,e,n){return Jr&21?(Kt(n,e)||(n=Z0(),Ae.lanes|=n,Zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function pE(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=gc.transition;gc.transition={};try{t(!1),e()}finally{me=n,gc.transition=r}}function Qv(){return Ot().memoizedState}function mE(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yv(t))Xv(e,n);else if(n=Rv(t,e,n,r),n!==null){var s=ht();qt(n,t,r,s),Jv(n,e,r)}}function gE(t,e,n){var r=mr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yv(t))Xv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Kt(u,o)){var c=e.interleaved;c===null?(s.next=s,Ch(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Rv(t,e,s,r),n!==null&&(s=ht(),qt(n,t,r,s),Jv(n,e,r))}}function Yv(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Xv(t,e){to=bl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gh(t,n)}}var Nl={readContext:Lt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},vE={readContext:Lt,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:Am,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ga(4194308,4,Hv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ga(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ga(4,2,t,e)},useMemo:function(t,e){var n=nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mE.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:Sm,useDebugValue:Fh,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=Sm(!1),e=t[0];return t=pE.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,s=nn();if(Ne){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),We===null)throw Error(H(349));Jr&30||Mv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Am(Ov.bind(null,r,i,t),[t]),r.flags|=2048,So(9,Lv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=nn(),e=We.identifierPrefix;if(Ne){var n=Tn,r=En;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yE={readContext:Lt,useCallback:qv,useContext:Lt,useEffect:Oh,useImperativeHandle:Wv,useInsertionEffect:Bv,useLayoutEffect:$v,useMemo:Gv,useReducer:vc,useRef:zv,useState:function(){return vc(No)},useDebugValue:Fh,useDeferredValue:function(t){var e=Ot();return Kv(e,Ue.memoizedState,t)},useTransition:function(){var t=vc(No)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:Dv,useSyncExternalStore:Vv,useId:Qv,unstable_isNewReconciler:!1},_E={readContext:Lt,useCallback:qv,useContext:Lt,useEffect:Oh,useImperativeHandle:Wv,useInsertionEffect:Bv,useLayoutEffect:$v,useMemo:Gv,useReducer:yc,useRef:zv,useState:function(){return yc(No)},useDebugValue:Fh,useDeferredValue:function(t){var e=Ot();return Ue===null?e.memoizedState=t:Kv(e,Ue.memoizedState,t)},useTransition:function(){var t=yc(No)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:Dv,useSyncExternalStore:Vv,useId:Qv,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uu={isMounted:function(t){return(t=t._reactInternals)?ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ht(),s=mr(t),i=Sn(r,s);i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(qt(e,t,s,r),Wa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ht(),s=mr(t),i=Sn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(qt(e,t,s,r),Wa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ht(),r=mr(t),s=Sn(n,r);s.tag=2,e!=null&&(s.callback=e),e=fr(t,s,r),e!==null&&(qt(e,t,r,n),Wa(e,t,r))}};function km(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_o(n,r)||!_o(s,i):!0}function Zv(t,e,n){var r=!1,s=Tr,i=e.contextType;return typeof i=="object"&&i!==null?i=Lt(i):(s=yt(e)?Yr:lt.current,r=e.contextTypes,i=(r=r!=null)?Ks(t,s):Tr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uu.enqueueReplaceState(e,e.state,null)}function vd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Rh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Lt(i):(i=yt(e)?Yr:lt.current,s.context=Ks(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uu.enqueueReplaceState(s,s.state,null),Tl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=G1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function _c(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xE=typeof WeakMap=="function"?WeakMap:Map;function ey(t,e,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Al||(Al=!0,Ad=r),yd(t,e)},n}function ty(t,e,n){n=Sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yd(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DE.bind(null,t,e,n),e.then(t,t))}function Pm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var wE=Un.ReactCurrentOwner,gt=!1;function dt(t,e,n,r){e.child=t===null?Cv(e,null,n,r):Ys(e,t.child,n,r)}function Dm(t,e,n,r,s){n=n.render;var i=e.ref;return Us(e,s),r=Mh(t,e,n,r,i,s),n=Lh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(Ne&&n&&Ih(e),e.flags|=1,dt(t,e,r,s),e.child)}function Vm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Gh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ny(t,e,i,r,s)):(t=Xa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_o,n(o,r)&&t.ref===e.ref)return jn(t,e,s)}return e.flags|=1,t=gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function ny(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_o(i,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,jn(t,e,s)}return _d(t,e,n,r,s)}function ry(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Ds,bt),bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(Ds,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(Ds,bt),bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(Ds,bt),bt|=r;return dt(t,e,s,n),e.child}function sy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _d(t,e,n,r,s){var i=yt(n)?Yr:lt.current;return i=Ks(e,i),Us(e,s),n=Mh(t,e,n,r,i,s),r=Lh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(Ne&&r&&Ih(e),e.flags|=1,dt(t,e,n,s),e.child)}function Mm(t,e,n,r,s){if(yt(n)){var i=!0;yl(e)}else i=!1;if(Us(e,s),e.stateNode===null)Ka(t,e),Zv(e,n,r),vd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Lt(h):(h=yt(n)?Yr:lt.current,h=Ks(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Cm(e,o,r,h),Zn=!1;var y=e.memoizedState;o.state=y,Tl(e,r,o,s),c=e.memoizedState,u!==r||y!==c||vt.current||Zn?(typeof p=="function"&&(gd(e,n,p,r),c=e.memoizedState),(u=Zn||km(e,n,u,r,y,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Pv(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:zt(e.type,u),o.props=h,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Lt(c):(c=yt(n)?Yr:lt.current,c=Ks(e,c));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||y!==c)&&Cm(e,o,r,c),Zn=!1,y=e.memoizedState,o.state=y,Tl(e,r,o,s);var C=e.memoizedState;u!==m||y!==C||vt.current||Zn?(typeof S=="function"&&(gd(e,n,S,r),C=e.memoizedState),(h=Zn||km(e,n,h,r,y,C,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return xd(t,e,n,r,i,s)}function xd(t,e,n,r,s,i){sy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wm(e,n,!1),jn(t,e,i);r=e.stateNode,wE.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,u,i)):dt(t,e,u,i),e.memoizedState=r.state,s&&wm(e,n,!0),e.child}function iy(t){var e=t.stateNode;e.pendingContext?xm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xm(t,e.context,!1),Ph(t,e.containerInfo)}function Lm(t,e,n,r,s){return Qs(),Nh(s),e.flags|=256,dt(t,e,n,r),e.child}var wd={dehydrated:null,treeContext:null,retryLane:0};function Ed(t){return{baseLanes:t,cachePool:null,transitions:null}}function oy(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Se,s&1),t===null)return pd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hu(o,r,0,null),t=Kr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ed(n),e.memoizedState=wd,t):Uh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return EE(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=gr(u,i):(i=Kr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ed(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wd,r}return i=t.child,t=i.sibling,r=gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uh(t,e){return e=hu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ra(t,e,n,r){return r!==null&&Nh(r),Ys(e,t.child,null,n),t=Uh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=_c(Error(H(422))),Ra(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=hu({mode:"visible",children:r.children},s,0,null),i=Kr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=Ed(o),e.memoizedState=wd,i);if(!(e.mode&1))return Ra(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(H(419)),r=_c(i,r,void 0),Ra(t,e,o,r)}if(u=(o&t.childLanes)!==0,gt||u){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Pn(t,s),qt(r,t,s,-1))}return qh(),r=_c(Error(H(421))),Ra(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=VE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=hr(s.nextSibling),St=e,Ne=!0,$t=null,t!==null&&(Pt[jt++]=En,Pt[jt++]=Tn,Pt[jt++]=Xr,En=t.id,Tn=t.overflow,Xr=e),e=Uh(e,r.children),e.flags|=4096,e)}function Om(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),md(t.return,e,n)}function xc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ay(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Om(t,n,e);else if(t.tag===19)Om(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),xc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}xc(e,!0,n,null,i);break;case"together":xc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ka(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TE(t,e,n){switch(e.tag){case 3:iy(e),Qs();break;case 5:jv(e);break;case 1:yt(e.type)&&yl(e);break;case 4:Ph(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?oy(t,e,n):(_e(Se,Se.current&1),t=jn(t,e,n),t!==null?t.sibling:null);_e(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ay(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,ry(t,e,n)}return jn(t,e,n)}var ly,Td,uy,cy;ly=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Td=function(){};uy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wr(an.current);var i=null;switch(n){case"input":s=Wc(t,s),r=Wc(t,r),i=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),i=[];break;case"textarea":s=Kc(t,s),r=Kc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gl)}Yc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ho.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ho.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&we("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};cy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fi(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IE(t,e,n){var r=e.pendingProps;switch(bh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return yt(e.type)&&vl(),rt(e),null;case 3:return r=e.stateNode,Xs(),Te(vt),Te(lt),Dh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ka(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$t!==null&&(Rd($t),$t=null))),Td(t,e),rt(e),null;case 5:jh(e);var s=Wr(Io.current);if(n=e.type,t!==null&&e.stateNode!=null)uy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return rt(e),null}if(t=Wr(an.current),ka(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[rn]=e,r[Eo]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<Wi.length;s++)we(Wi[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Gp(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":Qp(r,i),we("invalid",r)}Yc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Aa(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Aa(r.textContent,u,t),s=["children",""+u]):ho.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":xa(r),Kp(r,i,!0);break;case"textarea":xa(r),Yp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rn]=e,t[Eo]=r,ly(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xc(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<Wi.length;s++)we(Wi[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":Gp(t,r),s=Wc(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),we("invalid",t);break;case"textarea":Qp(t,r),s=Kc(t,r),we("invalid",t);break;default:s=r}Yc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?z0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&fo(t,c):typeof c=="number"&&fo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ho.hasOwnProperty(i)?c!=null&&i==="onScroll"&&we("scroll",t):c!=null&&ch(t,i,c,o))}switch(n){case"input":xa(t),Kp(t,r,!1);break;case"textarea":xa(t),Yp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Er(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ms(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)cy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Wr(Io.current),Wr(an.current),ka(e)){if(r=e.stateNode,n=e.memoizedProps,r[rn]=e,(i=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:Aa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Aa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rn]=e,e.stateNode=r}return rt(e),null;case 13:if(Te(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Nt!==null&&e.mode&1&&!(e.flags&128))Av(),Qs(),e.flags|=98560,i=!1;else if(i=ka(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[rn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else $t!==null&&(Rd($t),$t=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?ze===0&&(ze=3):qh())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Xs(),Td(t,e),t===null&&xo(e.stateNode.containerInfo),rt(e),null;case 10:return kh(e.type._context),rt(e),null;case 17:return yt(e.type)&&vl(),rt(e),null;case 19:if(Te(Se),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fi(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,Fi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Zs&&(e.flags|=128,r=!0,Fi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return rt(e),null}else 2*Ve()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,Fi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Se.current,_e(Se,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function bE(t,e){switch(bh(e),e.tag){case 1:return yt(e.type)&&vl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),Te(vt),Te(lt),Dh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jh(e),null;case 13:if(Te(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Se),null;case 4:return Xs(),null;case 10:return kh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var Pa=!1,ot=!1,NE=typeof WeakSet=="function"?WeakSet:Set,K=null;function js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Id(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Fm=!1;function SE(t,e){if(ad=fl,t=mv(),Th(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)y=m,m=S;for(;;){if(m===t)break t;if(y===n&&++h===s&&(u=o),y===i&&++p===r&&(c=o),(S=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=S}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ld={focusedElem:t,selectionRange:n},fl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var j=C.memoizedProps,U=C.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?j:zt(e.type,j),U);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(V){Pe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return C=Fm,Fm=!1,C}function no(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Id(e,n,i)}s=s.next}while(s!==r)}}function cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dy(t){var e=t.alternate;e!==null&&(t.alternate=null,dy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rn],delete e[Eo],delete e[dd],delete e[uE],delete e[cE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hy(t){return t.tag===5||t.tag===3||t.tag===4}function Um(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gl));else if(r!==4&&(t=t.child,t!==null))for(Nd(t,e,n),t=t.sibling;t!==null;)Nd(t,e,n),t=t.sibling}function Sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sd(t,e,n),t=t.sibling;t!==null;)Sd(t,e,n),t=t.sibling}var Ge=null,Bt=!1;function Yn(t,e,n){for(n=n.child;n!==null;)fy(t,e,n),n=n.sibling}function fy(t,e,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(nu,n)}catch{}switch(n.tag){case 5:ot||js(n,e);case 6:var r=Ge,s=Bt;Ge=null,Yn(t,e,n),Ge=r,Bt=s,Ge!==null&&(Bt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Bt?(t=Ge,n=n.stateNode,t.nodeType===8?fc(t.parentNode,n):t.nodeType===1&&fc(t,n),vo(t)):fc(Ge,n.stateNode));break;case 4:r=Ge,s=Bt,Ge=n.stateNode.containerInfo,Bt=!0,Yn(t,e,n),Ge=r,Bt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Id(n,e,o),s=s.next}while(s!==r)}Yn(t,e,n);break;case 1:if(!ot&&(js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Pe(n,e,u)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Yn(t,e,n),ot=r):Yn(t,e,n);break;default:Yn(t,e,n)}}function zm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NE),e.forEach(function(r){var s=ME.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Ge=u.stateNode,Bt=!1;break e;case 3:Ge=u.stateNode.containerInfo,Bt=!0;break e;case 4:Ge=u.stateNode.containerInfo,Bt=!0;break e}u=u.return}if(Ge===null)throw Error(H(160));fy(i,o,s),Ge=null,Bt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Pe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)py(e,t),e=e.sibling}function py(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),tn(t),r&4){try{no(3,t,t.return),cu(3,t)}catch(j){Pe(t,t.return,j)}try{no(5,t,t.return)}catch(j){Pe(t,t.return,j)}}break;case 1:Ut(e,t),tn(t),r&512&&n!==null&&js(n,n.return);break;case 5:if(Ut(e,t),tn(t),r&512&&n!==null&&js(n,n.return),t.flags&32){var s=t.stateNode;try{fo(s,"")}catch(j){Pe(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&M0(s,i),Xc(u,o);var h=Xc(u,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?z0(s,m):p==="dangerouslySetInnerHTML"?F0(s,m):p==="children"?fo(s,m):ch(s,p,m,h)}switch(u){case"input":qc(s,i);break;case"textarea":L0(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Ms(s,!!i.multiple,S,!1):y!==!!i.multiple&&(i.defaultValue!=null?Ms(s,!!i.multiple,i.defaultValue,!0):Ms(s,!!i.multiple,i.multiple?[]:"",!1))}s[Eo]=i}catch(j){Pe(t,t.return,j)}}break;case 6:if(Ut(e,t),tn(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Pe(t,t.return,j)}}break;case 3:if(Ut(e,t),tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(e.containerInfo)}catch(j){Pe(t,t.return,j)}break;case 4:Ut(e,t),tn(t);break;case 13:Ut(e,t),tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($h=Ve())),r&4&&zm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(h=ot)||p,Ut(e,t),ot=h):Ut(e,t),tn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(K=t,p=t.child;p!==null;){for(m=K=p;K!==null;){switch(y=K,S=y.child,y.tag){case 0:case 11:case 14:case 15:no(4,y,y.return);break;case 1:js(y,y.return);var C=y.stateNode;if(typeof C.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(j){Pe(r,n,j)}}break;case 5:js(y,y.return);break;case 22:if(y.memoizedState!==null){$m(m);continue}}S!==null?(S.return=y,K=S):$m(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=U0("display",o))}catch(j){Pe(t,t.return,j)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(j){Pe(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ut(e,t),tn(t),r&4&&zm(t);break;case 21:break;default:Ut(e,t),tn(t)}}function tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hy(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fo(s,""),r.flags&=-33);var i=Um(t);Sd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Um(t);Nd(t,u,o);break;default:throw Error(H(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AE(t,e,n){K=t,my(t)}function my(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Pa;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||ot;u=Pa;var h=ot;if(Pa=o,(ot=c)&&!h)for(K=s;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?Hm(s):c!==null?(c.return=o,K=c):Hm(s);for(;i!==null;)K=i,my(i),i=i.sibling;K=s,Pa=u,ot=h}Bm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Bm(t)}}function Bm(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Nm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Nm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&vo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ot||e.flags&512&&bd(e)}catch(y){Pe(e,e.return,y)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function $m(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Hm(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cu(4,e)}catch(c){Pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Pe(e,s,c)}}var i=e.return;try{bd(e)}catch(c){Pe(e,i,c)}break;case 5:var o=e.return;try{bd(e)}catch(c){Pe(e,o,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){K=null;break}var u=e.sibling;if(u!==null){u.return=e.return,K=u;break}K=e.return}}var kE=Math.ceil,Sl=Un.ReactCurrentDispatcher,zh=Un.ReactCurrentOwner,Mt=Un.ReactCurrentBatchConfig,he=0,We=null,Le=null,Ye=0,bt=0,Ds=Ar(0),ze=0,Ao=null,Zr=0,du=0,Bh=0,ro=null,mt=null,$h=0,Zs=1/0,xn=null,Al=!1,Ad=null,pr=null,ja=!1,ar=null,kl=0,so=0,kd=null,Qa=-1,Ya=0;function ht(){return he&6?Ve():Qa!==-1?Qa:Qa=Ve()}function mr(t){return t.mode&1?he&2&&Ye!==0?Ye&-Ye:hE.transition!==null?(Ya===0&&(Ya=Z0()),Ya):(t=me,t!==0||(t=window.event,t=t===void 0?16:ov(t.type)),t):1}function qt(t,e,n,r){if(50<so)throw so=0,kd=null,Error(H(185));Fo(t,n,r),(!(he&2)||t!==We)&&(t===We&&(!(he&2)&&(du|=n),ze===4&&tr(t,Ye)),_t(t,r),n===1&&he===0&&!(e.mode&1)&&(Zs=Ve()+500,au&&kr()))}function _t(t,e){var n=t.callbackNode;hw(t,e);var r=hl(t,t===We?Ye:0);if(r===0)n!==null&&Zp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zp(n),e===1)t.tag===0?dE(Wm.bind(null,t)):bv(Wm.bind(null,t)),aE(function(){!(he&6)&&kr()}),n=null;else{switch(ev(r)){case 1:n=mh;break;case 4:n=X0;break;case 16:n=dl;break;case 536870912:n=J0;break;default:n=dl}n=Ty(n,gy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gy(t,e){if(Qa=-1,Ya=0,he&6)throw Error(H(327));var n=t.callbackNode;if(zs()&&t.callbackNode!==n)return null;var r=hl(t,t===We?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cl(t,r);else{e=r;var s=he;he|=2;var i=yy();(We!==t||Ye!==e)&&(xn=null,Zs=Ve()+500,Gr(t,e));do try{PE();break}catch(u){vy(t,u)}while(1);Ah(),Sl.current=i,he=s,Le!==null?e=0:(We=null,Ye=0,e=ze)}if(e!==0){if(e===2&&(s=nd(t),s!==0&&(r=s,e=Cd(t,s))),e===1)throw n=Ao,Gr(t,0),tr(t,r),_t(t,Ve()),n;if(e===6)tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!CE(s)&&(e=Cl(t,r),e===2&&(i=nd(t),i!==0&&(r=i,e=Cd(t,i))),e===1))throw n=Ao,Gr(t,0),tr(t,r),_t(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:zr(t,mt,xn);break;case 3:if(tr(t,r),(r&130023424)===r&&(e=$h+500-Ve(),10<e)){if(hl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ht(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cd(zr.bind(null,t,mt,xn),e);break}zr(t,mt,xn);break;case 4:if(tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Wt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kE(r/1960))-r,10<r){t.timeoutHandle=cd(zr.bind(null,t,mt,xn),r);break}zr(t,mt,xn);break;case 5:zr(t,mt,xn);break;default:throw Error(H(329))}}}return _t(t,Ve()),t.callbackNode===n?gy.bind(null,t):null}function Cd(t,e){var n=ro;return t.current.memoizedState.isDehydrated&&(Gr(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=mt,mt=n,e!==null&&Rd(e)),t}function Rd(t){mt===null?mt=t:mt.push.apply(mt,t)}function CE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Kt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~Bh,e&=~du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function Wm(t){if(he&6)throw Error(H(327));zs();var e=hl(t,0);if(!(e&1))return _t(t,Ve()),null;var n=Cl(t,e);if(t.tag!==0&&n===2){var r=nd(t);r!==0&&(e=r,n=Cd(t,r))}if(n===1)throw n=Ao,Gr(t,0),tr(t,e),_t(t,Ve()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,mt,xn),_t(t,Ve()),null}function Hh(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Zs=Ve()+500,au&&kr())}}function es(t){ar!==null&&ar.tag===0&&!(he&6)&&zs();var e=he;he|=1;var n=Mt.transition,r=me;try{if(Mt.transition=null,me=1,t)return t()}finally{me=r,Mt.transition=n,he=e,!(he&6)&&kr()}}function Wh(){bt=Ds.current,Te(Ds)}function Gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oE(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(bh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vl();break;case 3:Xs(),Te(vt),Te(lt),Dh();break;case 5:jh(r);break;case 4:Xs();break;case 13:Te(Se);break;case 19:Te(Se);break;case 10:kh(r.type._context);break;case 22:case 23:Wh()}n=n.return}if(We=t,Le=t=gr(t.current,null),Ye=bt=e,ze=0,Ao=null,Bh=du=Zr=0,mt=ro=null,Hr!==null){for(e=0;e<Hr.length;e++)if(n=Hr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Hr=null}return t}function vy(t,e){do{var n=Le;try{if(Ah(),qa.current=Nl,bl){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bl=!1}if(Jr=0,He=Ue=Ae=null,to=!1,bo=0,zh.current=null,n===null||n.return===null){ze=1,Ao=e,Le=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=Ye,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Pm(o);if(S!==null){S.flags&=-257,jm(S,o,u,i,e),S.mode&1&&Rm(i,h,e),e=S,c=h;var C=e.updateQueue;if(C===null){var j=new Set;j.add(c),e.updateQueue=j}else C.add(c);break e}else{if(!(e&1)){Rm(i,h,e),qh();break e}c=Error(H(426))}}else if(Ne&&u.mode&1){var U=Pm(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),jm(U,o,u,i,e),Nh(Js(c,u));break e}}i=c=Js(c,u),ze!==4&&(ze=2),ro===null?ro=[i]:ro.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=ey(i,c,e);bm(i,I);break e;case 1:u=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(pr===null||!pr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=ty(i,u,e);bm(i,V);break e}}i=i.return}while(i!==null)}xy(n)}catch(L){e=L,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(1)}function yy(){var t=Sl.current;return Sl.current=Nl,t===null?Nl:t}function qh(){(ze===0||ze===3||ze===2)&&(ze=4),We===null||!(Zr&268435455)&&!(du&268435455)||tr(We,Ye)}function Cl(t,e){var n=he;he|=2;var r=yy();(We!==t||Ye!==e)&&(xn=null,Gr(t,e));do try{RE();break}catch(s){vy(t,s)}while(1);if(Ah(),he=n,Sl.current=r,Le!==null)throw Error(H(261));return We=null,Ye=0,ze}function RE(){for(;Le!==null;)_y(Le)}function PE(){for(;Le!==null&&!rw();)_y(Le)}function _y(t){var e=Ey(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?xy(t):Le=e,zh.current=null}function xy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bE(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Le=null;return}}else if(n=IE(n,e,bt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);ze===0&&(ze=5)}function zr(t,e,n){var r=me,s=Mt.transition;try{Mt.transition=null,me=1,jE(t,e,n,r)}finally{Mt.transition=s,me=r}return null}function jE(t,e,n,r){do zs();while(ar!==null);if(he&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fw(t,i),t===We&&(Le=We=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ja||(ja=!0,Ty(dl,function(){return zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Mt.transition,Mt.transition=null;var o=me;me=1;var u=he;he|=4,zh.current=null,SE(t,n),py(n,t),Zw(ld),fl=!!ad,ld=ad=null,t.current=n,AE(n),sw(),he=u,me=o,Mt.transition=i}else t.current=n;if(ja&&(ja=!1,ar=t,kl=s),i=t.pendingLanes,i===0&&(pr=null),aw(n.stateNode),_t(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Al)throw Al=!1,t=Ad,Ad=null,t;return kl&1&&t.tag!==0&&zs(),i=t.pendingLanes,i&1?t===kd?so++:(so=0,kd=t):so=0,kr(),null}function zs(){if(ar!==null){var t=ev(kl),e=Mt.transition,n=me;try{if(Mt.transition=null,me=16>t?16:t,ar===null)var r=!1;else{if(t=ar,ar=null,kl=0,he&6)throw Error(H(331));var s=he;for(he|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(K=h;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:no(8,p,i)}var m=p.child;if(m!==null)m.return=p,K=m;else for(;K!==null;){p=K;var y=p.sibling,S=p.return;if(dy(p),p===h){K=null;break}if(y!==null){y.return=S,K=y;break}K=S}}}var C=i.alternate;if(C!==null){var j=C.child;if(j!==null){C.child=null;do{var U=j.sibling;j.sibling=null,j=U}while(j!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:no(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,K=I;break e}K=i.return}}var w=t.current;for(K=w;K!==null;){o=K;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,K=N;else e:for(o=w;K!==null;){if(u=K,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:cu(9,u)}}catch(L){Pe(u,u.return,L)}if(u===o){K=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,K=V;break e}K=u.return}}if(he=s,kr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(nu,t)}catch{}r=!0}return r}finally{me=n,Mt.transition=e}}return!1}function qm(t,e,n){e=Js(n,e),e=ey(t,e,1),t=fr(t,e,1),e=ht(),t!==null&&(Fo(t,1,e),_t(t,e))}function Pe(t,e,n){if(t.tag===3)qm(t,t,n);else for(;e!==null;){if(e.tag===3){qm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=Js(n,t),t=ty(e,t,1),e=fr(e,t,1),t=ht(),e!==null&&(Fo(e,1,t),_t(e,t));break}}e=e.return}}function DE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Ye&n)===n&&(ze===4||ze===3&&(Ye&130023424)===Ye&&500>Ve()-$h?Gr(t,0):Bh|=n),_t(t,e)}function wy(t,e){e===0&&(t.mode&1?(e=Ta,Ta<<=1,!(Ta&130023424)&&(Ta=4194304)):e=1);var n=ht();t=Pn(t,e),t!==null&&(Fo(t,e,n),_t(t,n))}function VE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wy(t,n)}function ME(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),wy(t,n)}var Ey;Ey=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,TE(t,e,n);gt=!!(t.flags&131072)}else gt=!1,Ne&&e.flags&1048576&&Nv(e,xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ka(t,e),t=e.pendingProps;var s=Ks(e,lt.current);Us(e,n),s=Mh(null,e,r,t,s,n);var i=Lh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yt(r)?(i=!0,yl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rh(e),s.updater=uu,e.stateNode=s,s._reactInternals=e,vd(e,r,t,n),e=xd(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&Ih(e),dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ka(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=OE(r),t=zt(r,t),s){case 0:e=_d(null,e,r,t,n);break e;case 1:e=Mm(null,e,r,t,n);break e;case 11:e=Dm(null,e,r,t,n);break e;case 14:e=Vm(null,e,r,zt(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),_d(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),Mm(t,e,r,s,n);case 3:e:{if(iy(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Pv(t,e),Tl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error(H(423)),e),e=Lm(t,e,r,n,s);break e}else if(r!==s){s=Js(Error(H(424)),e),e=Lm(t,e,r,n,s);break e}else for(Nt=hr(e.stateNode.containerInfo.firstChild),St=e,Ne=!0,$t=null,n=Cv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){e=jn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return jv(e),t===null&&pd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ud(r,s)?o=null:i!==null&&ud(r,i)&&(e.flags|=32),sy(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&pd(e),null;case 13:return oy(t,e,n);case 4:return Ph(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),Dm(t,e,r,s,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(wl,r._currentValue),r._currentValue=o,i!==null)if(Kt(i.value,o)){if(i.children===s.children&&!vt.current){e=jn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Sn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),md(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),md(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Us(e,n),s=Lt(s),r=r(s),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,s=zt(r,e.pendingProps),s=zt(r.type,s),Vm(t,e,r,s,n);case 15:return ny(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),Ka(t,e),e.tag=1,yt(r)?(t=!0,yl(e)):t=!1,Us(e,n),Zv(e,r,s),vd(e,r,s,n),xd(null,e,r,!0,t,n);case 19:return ay(t,e,n);case 22:return ry(t,e,n)}throw Error(H(156,e.tag))};function Ty(t,e){return Y0(t,e)}function LE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new LE(t,e,n,r)}function Gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OE(t){if(typeof t=="function")return Gh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hh)return 11;if(t===fh)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xa(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Gh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Is:return Kr(n.children,s,i,e);case dh:o=8,s|=8;break;case zc:return t=Vt(12,n,e,s|2),t.elementType=zc,t.lanes=i,t;case Bc:return t=Vt(13,n,e,s),t.elementType=Bc,t.lanes=i,t;case $c:return t=Vt(19,n,e,s),t.elementType=$c,t.lanes=i,t;case j0:return hu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R0:o=10;break e;case P0:o=9;break e;case hh:o=11;break e;case fh:o=14;break e;case Jn:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Vt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Kr(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function hu(t,e,n,r){return t=Vt(22,t,r,e),t.elementType=j0,t.lanes=n,t.stateNode={isHidden:!1},t}function wc(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function Ec(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nc(0),this.expirationTimes=nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kh(t,e,n,r,s,i,o,u,c){return t=new FE(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(i),t}function UE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Iy(t){if(!t)return Tr;t=t._reactInternals;e:{if(ls(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(yt(n))return Iv(t,n,e)}return e}function by(t,e,n,r,s,i,o,u,c){return t=Kh(n,r,!0,t,s,i,o,u,c),t.context=Iy(null),n=t.current,r=ht(),s=mr(n),i=Sn(r,s),i.callback=e??null,fr(n,i,s),t.current.lanes=s,Fo(t,s,r),_t(t,r),t}function fu(t,e,n,r){var s=e.current,i=ht(),o=mr(s);return n=Iy(n),e.context===null?e.context=n:e.pendingContext=n,e=Sn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(s,e,o),t!==null&&(qt(t,s,o,i),Wa(t,s,o)),o}function Rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qh(t,e){Gm(t,e),(t=t.alternate)&&Gm(t,e)}function zE(){return null}var Ny=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yh(t){this._internalRoot=t}pu.prototype.render=Yh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));fu(t,e,null,null)};pu.prototype.unmount=Yh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;es(function(){fu(null,t,null,null)}),e[Rn]=null}};function pu(t){this._internalRoot=t}pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=rv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&iv(t)}};function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Km(){}function BE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Rl(o);i.call(h)}}var o=by(e,r,t,0,null,!1,!1,"",Km);return t._reactRootContainer=o,t[Rn]=o.current,xo(t.nodeType===8?t.parentNode:t),es(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=Rl(c);u.call(h)}}var c=Kh(t,0,!1,null,null,!1,!1,"",Km);return t._reactRootContainer=c,t[Rn]=c.current,xo(t.nodeType===8?t.parentNode:t),es(function(){fu(e,c,n,r)}),c}function gu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Rl(o);u.call(c)}}fu(e,o,t,s)}else o=BE(n,e,t,s,r);return Rl(o)}tv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hi(e.pendingLanes);n!==0&&(gh(e,n|1),_t(e,Ve()),!(he&6)&&(Zs=Ve()+500,kr()))}break;case 13:es(function(){var r=Pn(t,1);if(r!==null){var s=ht();qt(r,t,1,s)}}),Qh(t,1)}};vh=function(t){if(t.tag===13){var e=Pn(t,134217728);if(e!==null){var n=ht();qt(e,t,134217728,n)}Qh(t,134217728)}};nv=function(t){if(t.tag===13){var e=mr(t),n=Pn(t,e);if(n!==null){var r=ht();qt(n,t,e,r)}Qh(t,e)}};rv=function(){return me};sv=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Zc=function(t,e,n){switch(e){case"input":if(qc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ou(r);if(!s)throw Error(H(90));V0(r),qc(r,s)}}}break;case"textarea":L0(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};H0=Hh;W0=es;var $E={usingClientEntryPoint:!1,Events:[zo,As,ou,B0,$0,Hh]},Ui={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:Ui.bundleType,version:Ui.version,rendererPackageName:Ui.rendererPackageName,rendererConfig:Ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ui.findFiberByHostInstance||zE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{nu=Da.inject(HE),on=Da}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$E;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(e))throw Error(H(200));return UE(t,e,null,n)};kt.createRoot=function(t,e){if(!Xh(t))throw Error(H(299));var n=!1,r="",s=Ny;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kh(t,1,!1,null,null,n,!1,r,s),t[Rn]=e.current,xo(t.nodeType===8?t.parentNode:t),new Yh(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=K0(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return es(t)};kt.hydrate=function(t,e,n){if(!mu(e))throw Error(H(200));return gu(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!Xh(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ny;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=by(e,null,t,1,n??null,s,!1,i,o),t[Rn]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pu(e)};kt.render=function(t,e,n){if(!mu(e))throw Error(H(200));return gu(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!mu(t))throw Error(H(40));return t._reactRootContainer?(es(function(){gu(null,null,t,!1,function(){t._reactRootContainer=null,t[Rn]=null})}),!0):!1};kt.unstable_batchedUpdates=Hh;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mu(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return gu(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function Sy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sy)}catch(t){console.error(t)}}Sy(),S0.exports=kt;var WE=S0.exports,Qm=WE;Fc.createRoot=Qm.createRoot,Fc.hydrateRoot=Qm.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|u>>4;let y=(u&15)<<2|h>>6,S=h&63;c||(S=64,o||(y=64)),r.push(n[p],n[m],n[y],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ay(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||m==null)throw new GE;const y=i<<2|u>>4;if(r.push(y),h!==64){const S=u<<4&240|h>>2;if(r.push(S),m!==64){const C=h<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KE=function(t){const e=Ay(t);return ky.encodeByteArray(e,!0)},Pl=function(t){return KE(t).replace(/\./g,"")},Cy=function(t){try{return ky.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=()=>QE().__FIREBASE_DEFAULTS__,XE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cy(t[1]);return e&&JSON.parse(e)},vu=()=>{try{return YE()||XE()||JE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ry=t=>{var e,n;return(n=(e=vu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZE=t=>{const e=Ry(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Py=()=>{var t;return(t=vu())===null||t===void 0?void 0:t.config},jy=t=>{var e;return(e=vu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Pl(JSON.stringify(n)),Pl(JSON.stringify(o)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function rT(){var t;const e=(t=vu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aT(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lT(){return!rT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uT(){try{return typeof indexedDB=="object"}catch{return!1}}function cT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="FirebaseError";class zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dT,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hT(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new zn(s,u,r)}}function hT(t,e){return t.replace(fT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fT=/\{\$([^}]+)}/g;function pT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ym(i)&&Ym(o)){if(!jl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ym(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mT(t,e){const n=new gT(t,e);return n.subscribe.bind(n)}class gT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Tc),s.error===void 0&&(s.error=Tc),s.complete===void 0&&(s.complete=Tc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xT(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_T(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _T(t){return t===Br?void 0:t}function xT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const ET={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},TT=ue.INFO,IT={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},bT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=IT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jh{constructor(e){this.name=e,this._logLevel=TT,this._logHandler=bT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ET[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const NT=(t,e)=>e.some(n=>t instanceof n);let Xm,Jm;function ST(){return Xm||(Xm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AT(){return Jm||(Jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dy=new WeakMap,Pd=new WeakMap,Vy=new WeakMap,Ic=new WeakMap,Zh=new WeakMap;function kT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dy.set(n,t)}).catch(()=>{}),Zh.set(e,t),e}function CT(t){if(Pd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Pd.set(t,e)}let jd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RT(t){jd=t(jd)}function PT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bc(this),e,...n);return Vy.set(r,e.sort?e.sort():[e]),vr(r)}:AT().includes(t)?function(...e){return t.apply(bc(this),e),vr(Dy.get(this))}:function(...e){return vr(t.apply(bc(this),e))}}function jT(t){return typeof t=="function"?PT(t):(t instanceof IDBTransaction&&CT(t),NT(t,ST())?new Proxy(t,jd):t)}function vr(t){if(t instanceof IDBRequest)return kT(t);if(Ic.has(t))return Ic.get(t);const e=jT(t);return e!==t&&(Ic.set(t,e),Zh.set(e,t)),e}const bc=t=>Zh.get(t);function DT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=vr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(vr(o.result),c.oldVersion,c.newVersion,vr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const VT=["get","getKey","getAll","getAllKeys","count"],MT=["put","add","delete","clear"],Nc=new Map;function Zm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nc.get(e))return Nc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VT.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return Nc.set(e,i),i}RT(t=>({...t,get:(e,n,r)=>Zm(e,n)||t.get(e,n,r),has:(e,n)=>!!Zm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dd="@firebase/app",eg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new Jh("@firebase/app"),FT="@firebase/app-compat",UT="@firebase/analytics-compat",zT="@firebase/analytics",BT="@firebase/app-check-compat",$T="@firebase/app-check",HT="@firebase/auth",WT="@firebase/auth-compat",qT="@firebase/database",GT="@firebase/data-connect",KT="@firebase/database-compat",QT="@firebase/functions",YT="@firebase/functions-compat",XT="@firebase/installations",JT="@firebase/installations-compat",ZT="@firebase/messaging",eI="@firebase/messaging-compat",tI="@firebase/performance",nI="@firebase/performance-compat",rI="@firebase/remote-config",sI="@firebase/remote-config-compat",iI="@firebase/storage",oI="@firebase/storage-compat",aI="@firebase/firestore",lI="@firebase/vertexai-preview",uI="@firebase/firestore-compat",cI="firebase",dI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="[DEFAULT]",hI={[Dd]:"fire-core",[FT]:"fire-core-compat",[zT]:"fire-analytics",[UT]:"fire-analytics-compat",[$T]:"fire-app-check",[BT]:"fire-app-check-compat",[HT]:"fire-auth",[WT]:"fire-auth-compat",[qT]:"fire-rtdb",[GT]:"fire-data-connect",[KT]:"fire-rtdb-compat",[QT]:"fire-fn",[YT]:"fire-fn-compat",[XT]:"fire-iid",[JT]:"fire-iid-compat",[ZT]:"fire-fcm",[eI]:"fire-fcm-compat",[tI]:"fire-perf",[nI]:"fire-perf-compat",[rI]:"fire-rc",[sI]:"fire-rc-compat",[iI]:"fire-gcs",[oI]:"fire-gcs-compat",[aI]:"fire-fst",[uI]:"fire-fst-compat",[lI]:"fire-vertex","fire-js":"fire-js",[cI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Map,fI=new Map,Md=new Map;function tg(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Md.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;Md.set(e,t);for(const n of Dl.values())tg(n,t);for(const n of fI.values())tg(n,t);return!0}function ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new $o("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=dI;function My(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=Py()),!n)throw yr.create("no-options");const i=Dl.get(s);if(i){if(jl(n,i.options)&&jl(r,i.config))return i;throw yr.create("duplicate-app",{appName:s})}const o=new wT(s);for(const c of Md.values())o.addComponent(c);const u=new mI(n,r,o);return Dl.set(s,u),u}function Ly(t=Vd){const e=Dl.get(t);if(!e&&t===Vd&&Py())return My();if(!e)throw yr.create("no-app",{appName:t});return e}function _r(t,e,n){var r;let s=(r=hI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(u.join(" "));return}ei(new ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebase-heartbeat-database",vI=1,ko="firebase-heartbeat-store";let Sc=null;function Oy(){return Sc||(Sc=DT(gI,vI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),Sc}async function yI(t){try{const n=(await Oy()).transaction(ko),r=await n.objectStore(ko).get(Fy(t));return await n.done,r}catch(e){if(e instanceof zn)Dn.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dn.warn(n.message)}}}async function ng(t,e){try{const r=(await Oy()).transaction(ko,"readwrite");await r.objectStore(ko).put(e,Fy(t)),await r.done}catch(n){if(n instanceof zn)Dn.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dn.warn(r.message)}}}function Fy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=1024,xI=30*24*60*60*1e3;class wI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=xI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rg(),{heartbeatsToSend:r,unsentEntries:s}=EI(this._heartbeatsCache.heartbeats),i=Pl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Dn.warn(n),""}}}function rg(){return new Date().toISOString().substring(0,10)}function EI(t,e=_I){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),sg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uT()?cT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sg(t){return Pl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){ei(new ts("platform-logger",e=>new LT(e),"PRIVATE")),ei(new ts("heartbeat",e=>new wI(e),"PRIVATE")),_r(Dd,eg,t),_r(Dd,eg,"esm2017"),_r("fire-js","")}II("");var bI="firebase",NI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(bI,NI,"app");var ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,Uy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,v){function x(){}x.prototype=v.prototype,_.D=v.prototype,_.prototype=new x,_.prototype.constructor=_,_.C=function(E,b,A){for(var T=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)T[Fe-2]=arguments[Fe];return v.prototype[b].apply(E,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,v,x){x||(x=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(b=0;16>b;++b)E[b]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=_.g[0],x=_.g[1],b=_.g[2];var A=_.g[3],T=v+(A^x&(b^A))+E[0]+3614090360&4294967295;v=x+(T<<7&4294967295|T>>>25),T=A+(b^v&(x^b))+E[1]+3905402710&4294967295,A=v+(T<<12&4294967295|T>>>20),T=b+(x^A&(v^x))+E[2]+606105819&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(v^b&(A^v))+E[3]+3250441966&4294967295,x=b+(T<<22&4294967295|T>>>10),T=v+(A^x&(b^A))+E[4]+4118548399&4294967295,v=x+(T<<7&4294967295|T>>>25),T=A+(b^v&(x^b))+E[5]+1200080426&4294967295,A=v+(T<<12&4294967295|T>>>20),T=b+(x^A&(v^x))+E[6]+2821735955&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(v^b&(A^v))+E[7]+4249261313&4294967295,x=b+(T<<22&4294967295|T>>>10),T=v+(A^x&(b^A))+E[8]+1770035416&4294967295,v=x+(T<<7&4294967295|T>>>25),T=A+(b^v&(x^b))+E[9]+2336552879&4294967295,A=v+(T<<12&4294967295|T>>>20),T=b+(x^A&(v^x))+E[10]+4294925233&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(v^b&(A^v))+E[11]+2304563134&4294967295,x=b+(T<<22&4294967295|T>>>10),T=v+(A^x&(b^A))+E[12]+1804603682&4294967295,v=x+(T<<7&4294967295|T>>>25),T=A+(b^v&(x^b))+E[13]+4254626195&4294967295,A=v+(T<<12&4294967295|T>>>20),T=b+(x^A&(v^x))+E[14]+2792965006&4294967295,b=A+(T<<17&4294967295|T>>>15),T=x+(v^b&(A^v))+E[15]+1236535329&4294967295,x=b+(T<<22&4294967295|T>>>10),T=v+(b^A&(x^b))+E[1]+4129170786&4294967295,v=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(v^x))+E[6]+3225465664&4294967295,A=v+(T<<9&4294967295|T>>>23),T=b+(v^x&(A^v))+E[11]+643717713&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^v&(b^A))+E[0]+3921069994&4294967295,x=b+(T<<20&4294967295|T>>>12),T=v+(b^A&(x^b))+E[5]+3593408605&4294967295,v=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(v^x))+E[10]+38016083&4294967295,A=v+(T<<9&4294967295|T>>>23),T=b+(v^x&(A^v))+E[15]+3634488961&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^v&(b^A))+E[4]+3889429448&4294967295,x=b+(T<<20&4294967295|T>>>12),T=v+(b^A&(x^b))+E[9]+568446438&4294967295,v=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(v^x))+E[14]+3275163606&4294967295,A=v+(T<<9&4294967295|T>>>23),T=b+(v^x&(A^v))+E[3]+4107603335&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^v&(b^A))+E[8]+1163531501&4294967295,x=b+(T<<20&4294967295|T>>>12),T=v+(b^A&(x^b))+E[13]+2850285829&4294967295,v=x+(T<<5&4294967295|T>>>27),T=A+(x^b&(v^x))+E[2]+4243563512&4294967295,A=v+(T<<9&4294967295|T>>>23),T=b+(v^x&(A^v))+E[7]+1735328473&4294967295,b=A+(T<<14&4294967295|T>>>18),T=x+(A^v&(b^A))+E[12]+2368359562&4294967295,x=b+(T<<20&4294967295|T>>>12),T=v+(x^b^A)+E[5]+4294588738&4294967295,v=x+(T<<4&4294967295|T>>>28),T=A+(v^x^b)+E[8]+2272392833&4294967295,A=v+(T<<11&4294967295|T>>>21),T=b+(A^v^x)+E[11]+1839030562&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^v)+E[14]+4259657740&4294967295,x=b+(T<<23&4294967295|T>>>9),T=v+(x^b^A)+E[1]+2763975236&4294967295,v=x+(T<<4&4294967295|T>>>28),T=A+(v^x^b)+E[4]+1272893353&4294967295,A=v+(T<<11&4294967295|T>>>21),T=b+(A^v^x)+E[7]+4139469664&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^v)+E[10]+3200236656&4294967295,x=b+(T<<23&4294967295|T>>>9),T=v+(x^b^A)+E[13]+681279174&4294967295,v=x+(T<<4&4294967295|T>>>28),T=A+(v^x^b)+E[0]+3936430074&4294967295,A=v+(T<<11&4294967295|T>>>21),T=b+(A^v^x)+E[3]+3572445317&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^v)+E[6]+76029189&4294967295,x=b+(T<<23&4294967295|T>>>9),T=v+(x^b^A)+E[9]+3654602809&4294967295,v=x+(T<<4&4294967295|T>>>28),T=A+(v^x^b)+E[12]+3873151461&4294967295,A=v+(T<<11&4294967295|T>>>21),T=b+(A^v^x)+E[15]+530742520&4294967295,b=A+(T<<16&4294967295|T>>>16),T=x+(b^A^v)+E[2]+3299628645&4294967295,x=b+(T<<23&4294967295|T>>>9),T=v+(b^(x|~A))+E[0]+4096336452&4294967295,v=x+(T<<6&4294967295|T>>>26),T=A+(x^(v|~b))+E[7]+1126891415&4294967295,A=v+(T<<10&4294967295|T>>>22),T=b+(v^(A|~x))+E[14]+2878612391&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~v))+E[5]+4237533241&4294967295,x=b+(T<<21&4294967295|T>>>11),T=v+(b^(x|~A))+E[12]+1700485571&4294967295,v=x+(T<<6&4294967295|T>>>26),T=A+(x^(v|~b))+E[3]+2399980690&4294967295,A=v+(T<<10&4294967295|T>>>22),T=b+(v^(A|~x))+E[10]+4293915773&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~v))+E[1]+2240044497&4294967295,x=b+(T<<21&4294967295|T>>>11),T=v+(b^(x|~A))+E[8]+1873313359&4294967295,v=x+(T<<6&4294967295|T>>>26),T=A+(x^(v|~b))+E[15]+4264355552&4294967295,A=v+(T<<10&4294967295|T>>>22),T=b+(v^(A|~x))+E[6]+2734768916&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~v))+E[13]+1309151649&4294967295,x=b+(T<<21&4294967295|T>>>11),T=v+(b^(x|~A))+E[4]+4149444226&4294967295,v=x+(T<<6&4294967295|T>>>26),T=A+(x^(v|~b))+E[11]+3174756917&4294967295,A=v+(T<<10&4294967295|T>>>22),T=b+(v^(A|~x))+E[2]+718787259&4294967295,b=A+(T<<15&4294967295|T>>>17),T=x+(A^(b|~v))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+v&4294967295,_.g[1]=_.g[1]+(b+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+b&4294967295,_.g[3]=_.g[3]+A&4294967295}r.prototype.u=function(_,v){v===void 0&&(v=_.length);for(var x=v-this.blockSize,E=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=x;)s(this,_,A),A+=this.blockSize;if(typeof _=="string"){for(;A<v;)if(E[b++]=_.charCodeAt(A++),b==this.blockSize){s(this,E),b=0;break}}else for(;A<v;)if(E[b++]=_[A++],b==this.blockSize){s(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var v=1;v<_.length-8;++v)_[v]=0;var x=8*this.o;for(v=_.length-8;v<_.length;++v)_[v]=x&255,x/=256;for(this.u(_),_=Array(16),v=x=0;4>v;++v)for(var E=0;32>E;E+=8)_[x++]=this.g[v]>>>E&255;return _};function i(_,v){var x=u;return Object.prototype.hasOwnProperty.call(x,_)?x[_]:x[_]=v(_)}function o(_,v){this.h=v;for(var x=[],E=!0,b=_.length-1;0<=b;b--){var A=_[b]|0;E&&A==v||(x[b]=A,E=!1)}this.g=x}var u={};function c(_){return-128<=_&&128>_?i(_,function(v){return new o([v|0],0>v?-1:0)}):new o([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return U(h(-_));for(var v=[],x=1,E=0;_>=x;E++)v[E]=_/x|0,x*=4294967296;return new o(v,0)}function p(_,v){if(_.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(_.charAt(0)=="-")return U(p(_.substring(1),v));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(v,8)),E=m,b=0;b<_.length;b+=8){var A=Math.min(8,_.length-b),T=parseInt(_.substring(b,b+A),v);8>A?(A=h(Math.pow(v,A)),E=E.j(A).add(h(T))):(E=E.j(x),E=E.add(h(T)))}return E}var m=c(0),y=c(1),S=c(16777216);t=o.prototype,t.m=function(){if(j(this))return-U(this).m();for(var _=0,v=1,x=0;x<this.g.length;x++){var E=this.i(x);_+=(0<=E?E:4294967296+E)*v,v*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C(this))return"0";if(j(this))return"-"+U(this).toString(_);for(var v=h(Math.pow(_,6)),x=this,E="";;){var b=V(x,v).g;x=I(x,b.j(v));var A=((0<x.g.length?x.g[0]:x.h)>>>0).toString(_);if(x=b,C(x))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function C(_){if(_.h!=0)return!1;for(var v=0;v<_.g.length;v++)if(_.g[v]!=0)return!1;return!0}function j(_){return _.h==-1}t.l=function(_){return _=I(this,_),j(_)?-1:C(_)?0:1};function U(_){for(var v=_.g.length,x=[],E=0;E<v;E++)x[E]=~_.g[E];return new o(x,~_.h).add(y)}t.abs=function(){return j(this)?U(this):this},t.add=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0,b=0;b<=v;b++){var A=E+(this.i(b)&65535)+(_.i(b)&65535),T=(A>>>16)+(this.i(b)>>>16)+(_.i(b)>>>16);E=T>>>16,A&=65535,T&=65535,x[b]=T<<16|A}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(_,v){return _.add(U(v))}t.j=function(_){if(C(this)||C(_))return m;if(j(this))return j(_)?U(this).j(U(_)):U(U(this).j(_));if(j(_))return U(this.j(U(_)));if(0>this.l(S)&&0>_.l(S))return h(this.m()*_.m());for(var v=this.g.length+_.g.length,x=[],E=0;E<2*v;E++)x[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<_.g.length;b++){var A=this.i(E)>>>16,T=this.i(E)&65535,Fe=_.i(b)>>>16,Et=_.i(b)&65535;x[2*E+2*b]+=T*Et,w(x,2*E+2*b),x[2*E+2*b+1]+=A*Et,w(x,2*E+2*b+1),x[2*E+2*b+1]+=T*Fe,w(x,2*E+2*b+1),x[2*E+2*b+2]+=A*Fe,w(x,2*E+2*b+2)}for(E=0;E<v;E++)x[E]=x[2*E+1]<<16|x[2*E];for(E=v;E<2*v;E++)x[E]=0;return new o(x,0)};function w(_,v){for(;(_[v]&65535)!=_[v];)_[v+1]+=_[v]>>>16,_[v]&=65535,v++}function N(_,v){this.g=_,this.h=v}function V(_,v){if(C(v))throw Error("division by zero");if(C(_))return new N(m,m);if(j(_))return v=V(U(_),v),new N(U(v.g),U(v.h));if(j(v))return v=V(_,U(v)),new N(U(v.g),v.h);if(30<_.g.length){if(j(_)||j(v))throw Error("slowDivide_ only works with positive integers.");for(var x=y,E=v;0>=E.l(_);)x=L(x),E=L(E);var b=z(x,1),A=z(E,1);for(E=z(E,2),x=z(x,2);!C(E);){var T=A.add(E);0>=T.l(_)&&(b=b.add(x),A=T),E=z(E,1),x=z(x,1)}return v=I(_,b.j(v)),new N(b,v)}for(b=m;0<=_.l(v);){for(x=Math.max(1,Math.floor(_.m()/v.m())),E=Math.ceil(Math.log(x)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=h(x),T=A.j(v);j(T)||0<T.l(_);)x-=E,A=h(x),T=A.j(v);C(A)&&(A=y),b=b.add(A),_=I(_,T)}return new N(b,_)}t.A=function(_){return V(this,_).h},t.and=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0;E<v;E++)x[E]=this.i(E)&_.i(E);return new o(x,this.h&_.h)},t.or=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0;E<v;E++)x[E]=this.i(E)|_.i(E);return new o(x,this.h|_.h)},t.xor=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0;E<v;E++)x[E]=this.i(E)^_.i(E);return new o(x,this.h^_.h)};function L(_){for(var v=_.g.length+1,x=[],E=0;E<v;E++)x[E]=_.i(E)<<1|_.i(E-1)>>>31;return new o(x,_.h)}function z(_,v){var x=v>>5;v%=32;for(var E=_.g.length-x,b=[],A=0;A<E;A++)b[A]=0<v?_.i(A+x)>>>v|_.i(A+x+1)<<32-v:_.i(A+x);return new o(b,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Uy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Qr=o}).apply(typeof ig<"u"?ig:typeof self<"u"?self:typeof window<"u"?window:{});var Va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zy,qi,By,Ja,Ld,$y,Hy,Wy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Va=="object"&&Va];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in f))break e;f=f[k]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,g=!1,k={next:function(){if(!g&&f<a.length){var D=f++;return{value:d(D,a[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),a.apply(d,k)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function S(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function C(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,k,D){for(var q=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)q[ve-2]=arguments[ve];return d.prototype[k].apply(g,q)}}function j(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function U(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const k=a.length||0,D=g.length||0;a.length=k+D;for(let q=0;q<D;q++)a[k+q]=g[q]}else a.push(g)}}class I{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function N(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var L=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function z(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function _(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(f in g)a[f]=g[f];for(let D=0;D<x.length;D++)f=x[D],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function b(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function A(a){u.setTimeout(()=>{throw a},0)}function T(){var a=M;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Fe{constructor(){this.h=this.g=null}add(d,f){const g=Et.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Et=new I(()=>new B,a=>a.reset());class B{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let O,R=!1,M=new Fe,G=()=>{const a=u.Promise.resolve(void 0);O=()=>{a.then(W)}};var W=()=>{for(var a;a=T();){try{a.h.call(a.g)}catch(f){A(f)}var d=Et;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}R=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function te(a,d){if(P.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{V(d.nodeName);var k=!0;break e}catch{}k=!1}k||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ce[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&te.aa.h.call(this)}}C(te,P);var ce={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function Bn(a,d,f,g,k){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=k,this.key=++Tt,this.da=this.fa=!1}function pn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function mn(a){this.src=a,this.g={},this.h=0}mn.prototype.add=function(a,d,f,g,k){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var q=Rr(a,d,g,k);return-1<q?(d=a[q],f||(d.fa=!1)):(d=new Bn(d,this.src,D,!!g,k),d.fa=f,a.push(d)),d};function $n(a,d){var f=d.type;if(f in a.g){var g=a.g[f],k=Array.prototype.indexOf.call(g,d,void 0),D;(D=0<=k)&&Array.prototype.splice.call(g,k,1),D&&(pn(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Rr(a,d,f,g){for(var k=0;k<a.length;++k){var D=a[k];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==g)return k}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),gn={};function Hn(a,d,f,g,k){if(g&&g.once)return Yt(a,d,f,g,k);if(Array.isArray(d)){for(var D=0;D<d.length;D++)Hn(a,d[D],f,g,k);return null}return f=Rt(f),a&&a[Ie]?a.K(d,f,h(g)?!!g.capture:!!g,k):Wn(a,d,f,!1,g,k)}function Wn(a,d,f,g,k,D){if(!d)throw Error("Invalid event type");var q=h(k)?!!k.capture:!!k,ve=Xt(a);if(ve||(a[ye]=ve=new mn(a)),f=ve.add(d,f,g,q,D),f.proxy)return f;if(g=vn(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)ee||(k=q),k===void 0&&(k=!1),a.addEventListener(d.toString(),g,k);else if(a.attachEvent)a.attachEvent(hs(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function vn(){function a(f){return d.call(a.src,a.listener,f)}const d=jr;return a}function Yt(a,d,f,g,k){if(Array.isArray(d)){for(var D=0;D<d.length;D++)Yt(a,d[D],f,g,k);return null}return f=Rt(f),a&&a[Ie]?a.L(d,f,h(g)?!!g.capture:!!g,k):Wn(a,d,f,!0,g,k)}function ds(a,d,f,g,k){if(Array.isArray(d))for(var D=0;D<d.length;D++)ds(a,d[D],f,g,k);else g=h(g)?!!g.capture:!!g,f=Rt(f),a&&a[Ie]?(a=a.i,d=String(d).toString(),d in a.g&&(D=a.g[d],f=Rr(D,f,g,k),-1<f&&(pn(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[d],a.h--)))):a&&(a=Xt(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Rr(d,f,g,k)),(f=-1<a?d[a]:null)&&Pr(f))}function Pr(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ie])$n(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(hs(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Xt(d))?($n(f,a),f.h==0&&(f.src=null,d[ye]=null)):pn(a)}}}function hs(a){return a in gn?gn[a]:gn[a]="on"+a}function jr(a,d){if(a.da)a=!0;else{d=new te(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Pr(a),a=f.call(g,d)}return a}function Xt(a){return a=a[ye],a instanceof mn?a:null}var Jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(a){return typeof a=="function"?a:(a[Jt]||(a[Jt]=function(d){return a.handleEvent(d)}),a[Jt])}function be(){Z.call(this),this.i=new mn(this),this.M=this,this.F=null}C(be,Z),be.prototype[Ie]=!0,be.prototype.removeEventListener=function(a,d,f,g){ds(this,a,d,f,g)};function je(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new P(d,a);else if(d instanceof P)d.target=d.target||a;else{var k=d;d=new P(g,a),E(d,k)}if(k=!0,f)for(var D=f.length-1;0<=D;D--){var q=d.g=f[D];k=Zt(q,g,!0,d)&&k}if(q=d.g=a,k=Zt(q,g,!0,d)&&k,k=Zt(q,g,!1,d)&&k,f)for(D=0;D<f.length;D++)q=d.g=f[D],k=Zt(q,g,!1,d)&&k}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)pn(f[g]);delete a.g[d],a.h--}}this.F=null},be.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},be.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Zt(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var k=!0,D=0;D<d.length;++D){var q=d[D];if(q&&!q.da&&q.capture==f){var ve=q.listener,qe=q.ha||q.src;q.fa&&$n(a.i,q),k=ve.call(qe,g)!==!1&&k}}return k&&!g.defaultPrevented}function qn(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function Dr(a){a.g=qn(()=>{a.g=null,a.i&&(a.i=!1,Dr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class fs extends Z{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(a){Z.call(this),this.h=a,this.g={}}C(en,Z);var _i=[];function xi(a){z(a.g,function(d,f){this.g.hasOwnProperty(f)&&Pr(d)},a),a.g={}}en.prototype.N=function(){en.aa.N.call(this),xi(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ps=u.JSON.stringify,Vu=u.JSON.parse,Vr=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Mu(){}Mu.prototype.h=null;function Yf(a){return a.h||(a.h=a.i())}function Xf(){}var wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lu(){P.call(this,"d")}C(Lu,P);function Ou(){P.call(this,"c")}C(Ou,P);var Mr={},Jf=null;function ra(){return Jf=Jf||new be}Mr.La="serverreachability";function Zf(a){P.call(this,Mr.La,a)}C(Zf,P);function Ei(a){const d=ra();je(d,new Zf(d))}Mr.STAT_EVENT="statevent";function ep(a,d){P.call(this,Mr.STAT_EVENT,a),this.stat=d}C(ep,P);function ct(a){const d=ra();je(d,new ep(d,a))}Mr.Ma="timingevent";function tp(a,d){P.call(this,Mr.Ma,a),this.size=d}C(tp,P);function Ti(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function Qx(a,d,f,g,k,D){a.info(function(){if(a.g)if(D)for(var q="",ve=D.split("&"),qe=0;qe<ve.length;qe++){var fe=ve[qe].split("=");if(1<fe.length){var et=fe[0];fe=fe[1];var tt=et.split("_");q=2<=tt.length&&tt[1]=="type"?q+(et+"="+fe+"&"):q+(et+"=redacted&")}}else q=null;else q=D;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+d+`
`+f+`
`+q})}function Yx(a,d,f,g,k,D,q){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+d+`
`+f+`
`+D+" "+q})}function ms(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Jx(a,f)+(g?" "+g:"")})}function Xx(a,d){a.info(function(){return"TIMEOUT: "+d})}Ii.prototype.info=function(){};function Jx(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var D=k[0];if(D!="noop"&&D!="stop"&&D!="close")for(var q=1;q<k.length;q++)k[q]=""}}}}return ps(f)}catch{return d}}var sa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},np={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fu;function ia(){}C(ia,Mu),ia.prototype.g=function(){return new XMLHttpRequest},ia.prototype.i=function(){return{}},Fu=new ia;function Gn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new en(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rp}function rp(){this.i=null,this.g="",this.h=!1}var sp={},Uu={};function zu(a,d,f){a.L=1,a.v=ua(yn(d)),a.m=f,a.P=!0,ip(a,null)}function ip(a,d){a.F=Date.now(),oa(a),a.A=yn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),_p(f.i,"t",g),a.C=0,f=a.j.J,a.h=new rp,a.g=Lp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new fs(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var k="readystatechange";Array.isArray(k)||(k&&(_i[0]=k.toString()),k=_i);for(var D=0;D<k.length;D++){var q=Hn(f,k[D],g||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ei(),Qx(a.i,a.u,a.A,a.l,a.R,a.m)}Gn.prototype.ca=function(a){a=a.target;const d=this.M;d&&_n(a)==3?d.j():this.Y(a)},Gn.prototype.Y=function(a){try{if(a==this.g)e:{const tt=_n(this.g);var d=this.g.Ba();const ys=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Np(this.g)))){this.J||tt!=4||d==7||(d==8||0>=ys?Ei(3):Ei(2)),Bu(this);var f=this.g.Z();this.X=f;t:if(op(this)){var g=Np(this.g);a="";var k=g.length,D=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),bi(this);var q="";break t}this.h.i=new u.TextDecoder}for(d=0;d<k;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(D&&d==k-1)});g.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,Yx(this.i,this.u,this.A,this.l,this.R,tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,qe=this.g;if((ve=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ve)){var fe=ve;break t}}fe=null}if(f=fe)ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$u(this,f);else{this.o=!1,this.s=3,ct(12),Lr(this),bi(this);break e}}if(this.P){f=!0;let Ft;for(;!this.J&&this.C<q.length;)if(Ft=Zx(this,q),Ft==Uu){tt==4&&(this.s=4,ct(14),f=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==sp){this.s=4,ct(15),ms(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else ms(this.i,this.l,Ft,null),$u(this,Ft);if(op(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||q.length!=0||this.h.h||(this.s=1,ct(16),f=!1),this.o=this.o&&f,!f)ms(this.i,this.l,q,"[Invalid Chunked Response]"),Lr(this),bi(this);else if(0<q.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Qu(et),et.M=!0,ct(11))}}else ms(this.i,this.l,q,null),$u(this,q);tt==4&&Lr(this),this.o&&!this.J&&(tt==4?jp(this.j,this):(this.o=!1,oa(this)))}else g1(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Lr(this),bi(this)}}}catch{}finally{}};function op(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Zx(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Uu:(f=Number(d.substring(f,g)),isNaN(f)?sp:(g+=1,g+f>d.length?Uu:(d=d.slice(g,g+f),a.C=g+f,d)))}Gn.prototype.cancel=function(){this.J=!0,Lr(this)};function oa(a){a.S=Date.now()+a.I,ap(a,a.I)}function ap(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ti(y(a.ba,a),d)}function Bu(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Gn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Xx(this.i,this.A),this.L!=2&&(Ei(),ct(17)),Lr(this),this.s=2,bi(this)):ap(this,this.S-a)};function bi(a){a.j.G==0||a.J||jp(a.j,a)}function Lr(a){Bu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,xi(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function $u(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Hu(f.h,a))){if(!a.K&&Hu(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ma(f),fa(f);else break e;Ku(f),ct(18)}}else f.za=k[1],0<f.za-f.T&&37500>k[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ti(y(f.Za,f),6e3));if(1>=cp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Fr(f,11)}else if((a.K||f.g==a)&&ma(f),!w(d))for(k=f.Da.g.parse(d),d=0;d<k.length;d++){let fe=k[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];const et=fe[3];et!=null&&(f.la=et,f.j.info("VER="+f.la));const tt=fe[4];tt!=null&&(f.Aa=tt,f.j.info("SVER="+f.Aa));const ys=fe[5];ys!=null&&typeof ys=="number"&&0<ys&&(g=1.5*ys,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Ft=a.g;if(Ft){const va=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var D=g.h;D.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Wu(D,D.h),D.h=null))}if(g.D){const Yu=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Yu&&(g.ya=Yu,xe(g.I,g.D,Yu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var q=a;if(g.qa=Mp(g,g.J?g.ia:null,g.W),q.K){dp(g.h,q);var ve=q,qe=g.L;qe&&(ve.I=qe),ve.B&&(Bu(ve),oa(ve)),g.g=q}else Rp(g);0<f.i.length&&pa(f)}else fe[0]!="stop"&&fe[0]!="close"||Fr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Fr(f,7):Gu(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Ei(4)}catch{}}var e1=class{constructor(a,d){this.g=a,this.map=d}};function lp(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function up(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function cp(a){return a.h?1:a.g?a.g.size:0}function Hu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Wu(a,d){a.g?a.g.add(d):a.h=d}function dp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}lp.prototype.cancel=function(){if(this.i=hp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return j(a.i)}function t1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function n1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function fp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=n1(a),g=t1(a),k=g.length,D=0;D<k;D++)d.call(void 0,g[D],f&&f[D],a)}var pp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),k=null;if(0<=g){var D=a[f].substring(0,g);k=a[f].substring(g+1)}else D=a[f];d(D,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Or(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Or){this.h=a.h,aa(this,a.j),this.o=a.o,this.g=a.g,la(this,a.s),this.l=a.l;var d=a.i,f=new Ai;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),mp(this,f),this.m=a.m}else a&&(d=String(a).match(pp))?(this.h=!1,aa(this,d[1]||"",!0),this.o=Ni(d[2]||""),this.g=Ni(d[3]||"",!0),la(this,d[4]),this.l=Ni(d[5]||"",!0),mp(this,d[6]||"",!0),this.m=Ni(d[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}Or.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Si(d,gp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Si(d,gp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Si(f,f.charAt(0)=="/"?o1:i1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Si(f,l1)),a.join("")};function yn(a){return new Or(a)}function aa(a,d,f){a.j=f?Ni(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function la(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function mp(a,d,f){d instanceof Ai?(a.i=d,u1(a.i,a.h)):(f||(d=Si(d,a1)),a.i=new Ai(d,a.h))}function xe(a,d,f){a.i.set(d,f)}function ua(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ni(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Si(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,s1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function s1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var gp=/[#\/\?@]/g,i1=/[#\?:]/g,o1=/[#\?]/g,a1=/[#\?@]/g,l1=/#/g;function Ai(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Kn(a){a.g||(a.g=new Map,a.h=0,a.i&&r1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ai.prototype,t.add=function(a,d){Kn(this),this.i=null,a=gs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function vp(a,d){Kn(a),d=gs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function yp(a,d){return Kn(a),d=gs(a,d),a.g.has(d)}t.forEach=function(a,d){Kn(this),this.g.forEach(function(f,g){f.forEach(function(k){a.call(d,k,g,this)},this)},this)},t.na=function(){Kn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const k=a[g];for(let D=0;D<k.length;D++)f.push(d[g])}return f},t.V=function(a){Kn(this);let d=[];if(typeof a=="string")yp(this,a)&&(d=d.concat(this.g.get(gs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Kn(this),this.i=null,a=gs(this,a),yp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function _p(a,d,f){vp(a,d),0<f.length&&(a.i=null,a.g.set(gs(a,d),j(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const D=encodeURIComponent(String(g)),q=this.V(g);for(g=0;g<q.length;g++){var k=D;q[g]!==""&&(k+="="+encodeURIComponent(String(q[g]))),a.push(k)}}return this.i=a.join("&")};function gs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function u1(a,d){d&&!a.j&&(Kn(a),a.i=null,a.g.forEach(function(f,g){var k=g.toLowerCase();g!=k&&(vp(this,g),_p(this,k,f))},a)),a.j=d}function c1(a,d){const f=new Ii;if(u.Image){const g=new Image;g.onload=S(Qn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=S(Qn,f,"TestLoadImage: error",!1,d,g),g.onabort=S(Qn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=S(Qn,f,"TestLoadImage: timeout",!1,d,g),u.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function d1(a,d){const f=new Ii,g=new AbortController,k=setTimeout(()=>{g.abort(),Qn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(k),D.ok?Qn(f,"TestPingServer: ok",!0,d):Qn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(k),Qn(f,"TestPingServer: error",!1,d)})}function Qn(a,d,f,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(f)}catch{}}function h1(){this.g=new Vr}function f1(a,d,f){const g=f||"";try{fp(a,function(k,D){let q=k;h(k)&&(q=ps(k)),d.push(g+D+"="+encodeURIComponent(q))})}catch(k){throw d.push(g+"type="+encodeURIComponent("_badmap")),k}}function ca(a){this.l=a.Ub||null,this.j=a.eb||!1}C(ca,Mu),ca.prototype.g=function(){return new da(this.l,this.j)},ca.prototype.i=function(a){return function(){return a}}({});function da(a,d){be.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(da,be),t=da.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function xp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ki(this):Ci(this),this.readyState==3&&xp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ki(this))},t.Qa=function(a){this.g&&(this.response=a,ki(this))},t.ga=function(){this.g&&ki(this)};function ki(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ci(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wp(a){let d="";return z(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function qu(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=wp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):xe(a,d,f))}function Re(a){be.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Re,be);var p1=/^https?$/i,m1=["POST","PUT"];t=Re.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fu.g(),this.v=this.o?Yf(this.o):Yf(Fu),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Ep(this,D);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)f.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())f.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),k=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(m1,d,void 0))||g||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,q]of f)this.g.setRequestHeader(D,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bp(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Ep(this,D)}};function Ep(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Tp(a),ha(a)}function Tp(a){a.A||(a.A=!0,je(a,"complete"),je(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,je(this,"complete"),je(this,"abort"),ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ha(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ip(this):this.bb())},t.bb=function(){Ip(this)};function Ip(a){if(a.h&&typeof o<"u"&&(!a.v[1]||_n(a)!=4||a.Z()!=2)){if(a.u&&_n(a)==4)qn(a.Ea,0,a);else if(je(a,"readystatechange"),_n(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=q===0){var k=String(a.D).match(pp)[1]||null;!k&&u.self&&u.self.location&&(k=u.self.location.protocol.slice(0,-1)),g=!p1.test(k?k.toLowerCase():"")}f=g}if(f)je(a,"complete"),je(a,"success");else{a.m=6;try{var D=2<_n(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Tp(a)}}finally{ha(a)}}}}function ha(a,d){if(a.g){bp(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||je(a,"ready");try{f.onreadystatechange=g}catch{}}}function bp(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function _n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Vu(d)}};function Np(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function g1(a){const d={};a=(a.g&&2<=_n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var f=b(a[g]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[k]||[];d[k]=D,D.push(f)}_(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Sp(a){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ri("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ri("baseRetryDelayMs",5e3,a),this.cb=Ri("retryDelaySeedMs",1e4,a),this.Wa=Ri("forwardChannelMaxRetries",2,a),this.wa=Ri("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new lp(a&&a.concurrentRequestLimit),this.Da=new h1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){ct(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Mp(this,null,this.W),pa(this)};function Gu(a){if(Ap(a),a.G==3){var d=a.U++,f=yn(a.I);if(xe(f,"SID",a.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),Pi(a,f),d=new Gn(a,a.j,d),d.L=2,d.v=ua(yn(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=Lp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),oa(d)}Vp(a)}function fa(a){a.g&&(Qu(a),a.g.cancel(),a.g=null)}function Ap(a){fa(a),a.u&&(u.clearTimeout(a.u),a.u=null),ma(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function pa(a){if(!up(a.h)&&!a.s){a.s=!0;var d=a.Ga;O||G(),R||(O(),R=!0),M.add(d,a),a.B=0}}function v1(a,d){return cp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ti(y(a.Ga,a,d),Dp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const k=new Gn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=v(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(k.H=D,D=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Cp(this,k,d),f=yn(this.I),xe(f,"RID",a),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),Pi(this,f),D&&(this.O?d="headers="+encodeURIComponent(String(wp(D)))+"&"+d:this.m&&qu(f,this.m,D)),Wu(this.h,k),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),k.T=!0,zu(k,f,null)):zu(k,f,d),this.G=2}}else this.G==3&&(a?kp(this,a):this.i.length==0||up(this.h)||kp(this))};function kp(a,d){var f;d?f=d.l:f=a.U++;const g=yn(a.I);xe(g,"SID",a.K),xe(g,"RID",f),xe(g,"AID",a.T),Pi(a,g),a.m&&a.o&&qu(g,a.m,a.o),f=new Gn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Cp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Wu(a.h,f),zu(f,g,d)}function Pi(a,d){a.H&&z(a.H,function(f,g){xe(d,g,f)}),a.l&&fp({},function(f,g){xe(d,g,f)})}function Cp(a,d,f){f=Math.min(a.i.length,f);var g=a.l?y(a.l.Na,a.l,a):null;e:{var k=a.i;let D=-1;for(;;){const q=["count="+f];D==-1?0<f?(D=k[0].g,q.push("ofs="+D)):D=0:q.push("ofs="+D);let ve=!0;for(let qe=0;qe<f;qe++){let fe=k[qe].g;const et=k[qe].map;if(fe-=D,0>fe)D=Math.max(0,k[qe].g-100),ve=!1;else try{f1(et,q,"req"+fe+"_")}catch{g&&g(et)}}if(ve){g=q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function Rp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;O||G(),R||(O(),R=!0),M.add(d,a),a.v=0}}function Ku(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ti(y(a.Fa,a),Dp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Pp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ti(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),fa(this),Pp(this))};function Qu(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Pp(a){a.g=new Gn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=yn(a.qa);xe(d,"RID","rpc"),xe(d,"SID",a.K),xe(d,"AID",a.T),xe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(d,"TO",a.ja),xe(d,"TYPE","xmlhttp"),Pi(a,d),a.m&&a.o&&qu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ua(yn(d)),f.m=null,f.P=!0,ip(f,a)}t.Za=function(){this.C!=null&&(this.C=null,fa(this),Ku(this),ct(19))};function ma(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function jp(a,d){var f=null;if(a.g==d){ma(a),Qu(a),a.g=null;var g=2}else if(Hu(a.h,d))f=d.D,dp(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var k=a.B;g=ra(),je(g,new tp(g,f)),pa(a)}else Rp(a);else if(k=d.s,k==3||k==0&&0<d.X||!(g==1&&v1(a,d)||g==2&&Ku(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),k){case 1:Fr(a,5);break;case 4:Fr(a,10);break;case 3:Fr(a,6);break;default:Fr(a,2)}}}function Dp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Fr(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),g=a.Xa;const k=!g;g=new Or(g||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||aa(g,"https"),ua(g),k?c1(g.toString(),f):d1(g.toString(),f)}else ct(2);a.G=0,a.l&&a.l.sa(d),Vp(a),Ap(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Vp(a){if(a.G=0,a.ka=[],a.l){const d=hp(a.h);(d.length!=0||a.i.length!=0)&&(U(a.ka,d),U(a.ka,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.ra()}}function Mp(a,d,f){var g=f instanceof Or?yn(f):new Or(f);if(g.g!="")d&&(g.g=d+"."+g.g),la(g,g.s);else{var k=u.location;g=k.protocol,d=d?d+"."+k.hostname:k.hostname,k=+k.port;var D=new Or(null);g&&aa(D,g),d&&(D.g=d),k&&la(D,k),f&&(D.l=f),g=D}return f=a.D,d=a.ya,f&&d&&xe(g,f,d),xe(g,"VER",a.la),Pi(a,g),g}function Lp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Re(new ca({eb:f})):new Re(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Op(){}t=Op.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ga(){}ga.prototype.g=function(a,d){return new It(a,d)};function It(a,d){be.call(this),this.g=new Sp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new vs(this)}C(It,be),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Gu(this.g)},It.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ps(a),a=f);d.i.push(new e1(d.Ya++,a)),d.G==3&&pa(d)},It.prototype.N=function(){this.g.l=null,delete this.j,Gu(this.g),delete this.g,It.aa.N.call(this)};function Fp(a){Lu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(Fp,Lu);function Up(){Ou.call(this),this.status=1}C(Up,Ou);function vs(a){this.g=a}C(vs,Op),vs.prototype.ua=function(){je(this.g,"a")},vs.prototype.ta=function(a){je(this.g,new Fp(a))},vs.prototype.sa=function(a){je(this.g,new Up)},vs.prototype.ra=function(){je(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,Wy=function(){return new ga},Hy=function(){return ra()},$y=Mr,Ld={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,Ja=sa,np.COMPLETE="complete",By=np,Xf.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",be.prototype.listen=be.prototype.K,qi=Xf,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,zy=Re}).apply(typeof Va<"u"?Va:typeof self<"u"?self:typeof window<"u"?window:{});const og="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Jh("@firebase/firestore");function zi(){return ns.logLevel}function Y(t,...e){if(ns.logLevel<=ue.DEBUG){const n=e.map(tf);ns.debug(`Firestore (${fi}): ${t}`,...n)}}function Vn(t,...e){if(ns.logLevel<=ue.ERROR){const n=e.map(tf);ns.error(`Firestore (${fi}): ${t}`,...n)}}function ti(t,...e){if(ns.logLevel<=ue.WARN){const n=e.map(tf);ns.warn(`Firestore (${fi}): ${t}`,...n)}}function tf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${fi}) INTERNAL ASSERTION FAILED: `+t;throw Vn(e),new Error(e)}function ge(t,e){t||re()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class AI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kI{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string"),new qy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new it(e)}}class CI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new CI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ge(this.o===void 0);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.R=n.token,new PI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=DI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new Be(0,0))}static max(){return new se(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends Co{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const VI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Co{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return VI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ee.fromString(e))}static fromName(e){return new J(Ee.fromString(e).popFirst(5))}static empty(){return new J(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ee(e.slice()))}}function MI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Ir(s,J.empty(),e)}function LI(t){return new Ir(t.readTime,t.key,-1)}class Ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ir(se.min(),J.empty(),-1)}static max(){return new Ir(se.max(),J.empty(),-1)}}function OI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==FI)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++u,u===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function zI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nf.oe=-1;function yu(t){return t==null}function Vl(t){return t===0&&1/t==-1/0}function BI(t){return typeof t=="number"&&Number.isInteger(t)&&!Vl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ky(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ma(this.root,e,this.comparator,!0)}}class Ma{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lg(this.data.getIterator())}getIteratorFrom(e){return new lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new Xe(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Qy("Invalid base64 string: "+i):i}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const $I=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(ge(!!t),typeof t=="string"){let e=0;const n=$I.exec(t);if(ge(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sf(t){const e=t.mapValue.fields.__previous_value__;return rf(e)?sf(e):e}function Ro(t){const e=br(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,s,i,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class Po{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rf(t)?4:qI(t)?9007199254740991:WI(t)?10:11:re()}function fn(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ro(t).isEqual(Ro(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=br(s.timestampValue),u=br(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return rs(s.bytesValue).isEqual(rs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=De(s.doubleValue),u=De(i.doubleValue);return o===u?Vl(o)===Vl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ni(t.arrayValue.values||[],e.arrayValue.values||[],fn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(ag(o)!==ag(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!fn(o[c],u[c])))return!1;return!0}(t,e);default:return re()}}function jo(t,e){return(t.values||[]).find(n=>fn(n,e))!==void 0}function ri(t,e){if(t===e)return 0;const n=ss(t),r=ss(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=De(i.integerValue||i.doubleValue),c=De(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return ug(t.timestampValue,e.timestampValue);case 4:return ug(Ro(t),Ro(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(i,o){const u=rs(i),c=rs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=pe(u[h],c[h]);if(p!==0)return p}return pe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=pe(De(i.latitude),De(o.latitude));return u!==0?u:pe(De(i.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,h,p;const m=i.fields||{},y=o.fields||{},S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,C=(c=y.value)===null||c===void 0?void 0:c.arrayValue,j=pe(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return j!==0?j:cg(S,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===La.mapValue&&o===La.mapValue)return 0;if(i===La.mapValue)return 1;if(o===La.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=pe(c[m],p[m]);if(y!==0)return y;const S=ri(u[c[m]],h[p[m]]);if(S!==0)return S}return pe(c.length,p.length)}(t.mapValue,e.mapValue);default:throw re()}}function ug(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=br(t),r=br(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function cg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ri(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function si(t){return Od(t)}function Od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Od(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Od(n.fields[o])}`;return s+"}"}(t.mapValue):re()}function dg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fd(t){return!!t&&"integerValue"in t}function of(t){return!!t&&"arrayValue"in t}function hg(t){return!!t&&"nullValue"in t}function fg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Za(t){return!!t&&"mapValue"in t}function WI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Za(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=io(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=io(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Za(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Za(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(io(this.value))}}function Yy(t){const e=[];return pi(t.fields,(n,r)=>{const s=new Qe([n]);if(Za(r)){const i=Yy(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new at(e,0,se.min(),se.min(),se.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,se.min(),se.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,se.min(),se.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.position=e,this.inclusive=n}}function pg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n="asc"){this.field=e,this.dir=n}}function GI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xy=class{};class Oe extends Xy{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new QI(e,n,r):n==="array-contains"?new JI(e,r):n==="in"?new ZI(e,r):n==="not-in"?new e2(e,r):n==="array-contains-any"?new t2(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YI(e,r):new XI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ri(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends Xy{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qt(e,n)}matches(e){return Jy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jy(t){return t.op==="and"}function Zy(t){return KI(t)&&Jy(t)}function KI(t){for(const e of t.filters)if(e instanceof Qt)return!1;return!0}function Ud(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+si(t.value);if(Zy(t))return t.filters.map(e=>Ud(e)).join(",");{const e=t.filters.map(n=>Ud(n)).join(",");return`${t.op}(${e})`}}function e_(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&fn(r.value,s.value)}(t,e):t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&e_(o,s.filters[u]),!0):!1}(t,e):void re()}function t_(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${si(n.value)}`}(t):t instanceof Qt?function(n){return n.op.toString()+" {"+n.getFilters().map(t_).join(" ,")+"}"}(t):"Filter"}class QI extends Oe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class YI extends Oe{constructor(e,n){super(e,"in",n),this.keys=n_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XI extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=n_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function n_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class JI extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return of(n)&&jo(n.arrayValue,this.value)}}class ZI extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jo(this.value.arrayValue,n)}}class e2 extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!jo(this.value.arrayValue,n)}}class t2 extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function gg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new n2(t,e,n,r,s,i,o)}function af(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ud(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),yu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>si(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>si(r)).join(",")),e.ue=n}return e.ue}function lf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!e_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mg(t.startAt,e.startAt)&&mg(t.endAt,e.endAt)}function zd(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function r2(t,e,n,r,s,i,o,u){return new mi(t,e,n,r,s,i,o,u)}function uf(t){return new mi(t)}function vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function r_(t){return t.collectionGroup!==null}function oo(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Xe(Qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Do(i,r))}),n.has(Qe.keyField().canonicalString())||e.ce.push(new Do(Qe.keyField(),r))}return e.ce}function ln(t){const e=ie(t);return e.le||(e.le=s2(e,oo(t))),e.le}function s2(t,e){if(t.limitType==="F")return gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Do(s.field,i)});const n=t.endAt?new Ml(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ml(t.startAt.position,t.startAt.inclusive):null;return gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bd(t,e){const n=t.filters.concat([e]);return new mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $d(t,e,n){return new mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _u(t,e){return lf(ln(t),ln(e))&&t.limitType===e.limitType}function s_(t){return`${af(ln(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>t_(s)).join(", ")}]`),yu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>si(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>si(s)).join(",")),`Target(${r})`}(ln(t))}; limitType=${t.limitType})`}function xu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=pg(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,oo(r),s)||r.endAt&&!function(o,u,c){const h=pg(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,oo(r),s))}(t,e)}function i2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function i_(t){return(e,n)=>{let r=!1;for(const s of oo(t)){const i=o2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function o2(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?ri(c,h):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ky(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Ce(J.comparator);function Mn(){return a2}const o_=new Ce(J.comparator);function Gi(...t){let e=o_;for(const n of t)e=e.insert(n.key,n);return e}function a_(t){let e=o_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qr(){return ao()}function l_(){return ao()}function ao(){return new gi(t=>t.toString(),(t,e)=>t.isEqual(e))}const l2=new Ce(J.comparator),u2=new Xe(J.comparator);function le(...t){let e=u2;for(const n of t)e=e.add(n);return e}const c2=new Xe(pe);function d2(){return c2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vl(e)?"-0":e}}function u_(t){return{integerValue:""+t}}function h2(t,e){return BI(e)?u_(e):cf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this._=void 0}}function f2(t,e,n){return t instanceof Ll?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rf(i)&&(i=sf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Vo?d_(t,e):t instanceof Mo?h_(t,e):function(s,i){const o=c_(s,i),u=yg(o)+yg(s.Pe);return Fd(o)&&Fd(s.Pe)?u_(u):cf(s.serializer,u)}(t,e)}function p2(t,e,n){return t instanceof Vo?d_(t,e):t instanceof Mo?h_(t,e):n}function c_(t,e){return t instanceof Ol?function(r){return Fd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ll extends wu{}class Vo extends wu{constructor(e){super(),this.elements=e}}function d_(t,e){const n=f_(e);for(const r of t.elements)n.some(s=>fn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Mo extends wu{constructor(e){super(),this.elements=e}}function h_(t,e){let n=f_(e);for(const r of t.elements)n=n.filter(s=>!fn(s,r));return{arrayValue:{values:n}}}class Ol extends wu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function yg(t){return De(t.integerValue||t.doubleValue)}function f_(t){return of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function m2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vo&&s instanceof Vo||r instanceof Mo&&s instanceof Mo?ni(r.elements,s.elements,fn):r instanceof Ol&&s instanceof Ol?fn(r.Pe,s.Pe):r instanceof Ll&&s instanceof Ll}(t.transform,e.transform)}class g2{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function el(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eu{}function p_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new df(t.key,Gt.none()):new Go(t.key,t.data,Gt.none());{const n=t.data,r=Dt.empty();let s=new Xe(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new us(t.key,r,new Ht(s.toArray()),Gt.none())}}function v2(t,e,n){t instanceof Go?function(s,i,o){const u=s.value.clone(),c=xg(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof us?function(s,i,o){if(!el(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=xg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(m_(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lo(t,e,n,r){return t instanceof Go?function(i,o,u,c){if(!el(i.precondition,o))return u;const h=i.value.clone(),p=wg(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(i,o,u,c){if(!el(i.precondition,o))return u;const h=wg(i.fieldTransforms,c,o),p=o.data;return p.setAll(m_(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return el(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function y2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=c_(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function _g(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ni(r,s,(i,o)=>m2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Go extends Eu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends Eu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function m_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xg(t,e,n){const r=new Map;ge(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,p2(o,u,n[s]))}return r}function wg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,f2(i,o,e))}return r}class df extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _2 extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&v2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=l_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=p_(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ni(this.mutations,e.mutations,(n,r)=>_g(n,r))&&ni(this.baseMutations,e.baseMutations,(n,r)=>_g(n,r))}}class hf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ge(e.mutations.length===r.length);let s=function(){return l2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,de;function T2(t){switch(t){default:return re();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function g_(t){if(t===void 0)return Vn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Me.OK:return F.OK;case Me.CANCELLED:return F.CANCELLED;case Me.UNKNOWN:return F.UNKNOWN;case Me.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Me.INTERNAL:return F.INTERNAL;case Me.UNAVAILABLE:return F.UNAVAILABLE;case Me.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Me.NOT_FOUND:return F.NOT_FOUND;case Me.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Me.ABORTED:return F.ABORTED;case Me.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Me.DATA_LOSS:return F.DATA_LOSS;default:return re()}}(de=Me||(Me={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Qr([4294967295,4294967295],0);function Eg(t){const e=I2().encode(t),n=new Uy;return n.update(e),new Uint8Array(n.digest())}function Tg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([s,i],0)]}class ff{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ki(`Invalid padding: ${n}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Qr.fromNumber(r)));return s.compare(b2)===1&&(s=new Qr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Eg(e),[r,s]=Tg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ff(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=Eg(e),[r,s]=Tg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ko.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tu(se.min(),s,new Ce(pe),Mn(),le())}}class Ko{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ko(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class v_{constructor(e,n){this.targetId=e,this.me=n}}class y_{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ig{constructor(){this.fe=0,this.ge=Ng(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new Ko(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ng()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mn(),this.qe=bg(),this.Qe=new Ce(pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(zd(i))if(r===0){const o=new J(i.path);this.Ue(n,o,at.newNoDocument(o,se.min()))}else ge(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=rs(r).toUint8Array()}catch(c){if(c instanceof Qy)return ti("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new ff(o,s,i)}catch(c){return ti(c instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&zd(u.target)){const c=new J(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,at.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=le();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Tu(e,n,this.Qe,this.ke,r);return this.ke=Mn(),this.qe=bg(),this.Qe=new Ce(pe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ig,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ig),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function bg(){return new Ce(J.comparator)}function Ng(){return new Ce(J.comparator)}const S2=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),A2=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),k2=(()=>({and:"AND",or:"OR"}))();class C2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hd(t,e){return t.useProto3Json||yu(e)?e:{value:e}}function Fl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R2(t,e){return Fl(t,e.toTimestamp())}function un(t){return ge(!!t),se.fromTimestamp(function(n){const r=br(n);return new Be(r.seconds,r.nanos)}(t))}function pf(t,e){return Wd(t,e).canonicalString()}function Wd(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function x_(t){const e=Ee.fromString(t);return ge(b_(e)),e}function qd(t,e){return pf(t.databaseId,e.path)}function Ac(t,e){const n=x_(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(E_(n))}function w_(t,e){return pf(t.databaseId,e)}function P2(t){const e=x_(t);return e.length===4?Ee.emptyPath():E_(e)}function Gd(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function E_(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sg(t,e,n){return{name:qd(t,e),fields:n.value.mapValue.fields}}function j2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ge(p===void 0||typeof p=="string"),Ze.fromBase64String(p||"")):(ge(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ze.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const p=h.code===void 0?F.UNKNOWN:g_(h.code);return new Q(p,h.message||"")}(o);n=new y_(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ac(t,r.document.name),i=un(r.document.updateTime),o=r.document.createTime?un(r.document.createTime):se.min(),u=new Dt({mapValue:{fields:r.document.fields}}),c=at.newFoundDocument(s,i,o,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new tl(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ac(t,r.document),i=r.readTime?un(r.readTime):se.min(),o=at.newNoDocument(s,i),u=r.removedTargetIds||[];n=new tl([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ac(t,r.document),i=r.removedTargetIds||[];n=new tl([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new E2(s,i),u=r.targetId;n=new v_(u,o)}}return n}function D2(t,e){let n;if(e instanceof Go)n={update:Sg(t,e.key,e.value)};else if(e instanceof df)n={delete:qd(t,e.key)};else if(e instanceof us)n={update:Sg(t,e.key,e.data),updateMask:$2(e.fieldMask)};else{if(!(e instanceof _2))return re();n={verify:qd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Mo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ol)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:R2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function V2(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?un(s.updateTime):un(i);return o.isEqual(se.min())&&(o=un(i)),new g2(o,s.transformResults||[])}(n,e))):[]}function M2(t,e){return{documents:[w_(t,e.path)]}}function L2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=w_(t,s);const i=function(h){if(h.length!==0)return I_(Qt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:ws(y.field),direction:U2(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Hd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function O2(t){let e=P2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ge(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const y=T_(m);return y instanceof Qt&&Zy(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(C){return new Do(Es(C.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(n.orderBy));let u=null;n.limit&&(u=function(m){let y;return y=typeof m=="object"?m.value:m,yu(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,S=m.values||[];return new Ml(S,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,S=m.values||[];return new Ml(S,y)}(n.endAt)),r2(e,s,o,i,u,"F",c,h)}function F2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function T_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Es(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Es(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Es(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Es(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(Es(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qt.create(n.compositeFilter.filters.map(r=>T_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function U2(t){return S2[t]}function z2(t){return A2[t]}function B2(t){return k2[t]}function ws(t){return{fieldPath:t.canonicalString()}}function Es(t){return Qe.fromServerFormat(t.fieldPath)}function I_(t){return t instanceof Oe?function(n){if(n.op==="=="){if(fg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(hg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(hg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:z2(n.op),value:n.value}}}(t):t instanceof Qt?function(n){const r=n.getFilters().map(s=>I_(s));return r.length===1?r[0]:{compositeFilter:{op:B2(n.op),filters:r}}}(t):re()}function $2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function b_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,s,i=se.min(),o=se.min(),u=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.ct=e}}function W2(t){const e=O2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.un=new G2}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Ir.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class G2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ii(0)}static kn(){return new ii(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.changes=new gi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lo(r.mutation,s,Ht.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Gi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Mn();const o=ao(),u=function(){return ao()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof us)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),lo(p.mutation,h,p.mutation.getFieldMask(),Be.now())):o.set(h.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return u.set(h,new Q2(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=ao();let s=new Ce((o,u)=>o-u),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||Ht.empty();p=u.applyToLocalView(h,p),r.set(c,p);const m=(s.get(u.batchId)||le()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,m=l_();p.forEach(y=>{if(!i.has(y)){const S=p_(n.get(y),r.get(y));S!==null&&m.set(y,S),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):r_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(qr());let u=-1,c=i;return o.next(h=>$.forEach(h,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(p)?$.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,le())).next(p=>({batchId:u,changes:a_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Gi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Gi();return this.indexManager.getCollectionParents(e,i).next(u=>$.forEach(u,c=>{const h=function(m,y){return new mi(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,at.newInvalidDocument(p)))});let u=Gi();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&lo(p.mutation,h,Ht.empty(),Be.now()),xu(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:un(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:W2(s.bundledQuery),readTime:un(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.overlays=new Ce(J.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qr();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=qr(),i=n.length+1,o=new J(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ce((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=qr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=qr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=s)););return $.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new w2(n,r));let i=this.Ir.get(n);i===void 0&&(i=le(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this.Tr=new Xe($e.Er),this.dr=new Xe($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new Ee([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Ee([])),r=new $e(n,e),s=new $e(n,e+1);let i=le();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe($e.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new x2(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new $e(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(pe);return n.forEach(s=>{const i=new $e(s,0),o=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new $e(new J(i),0);let u=new Xe(pe);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.wr)),!0)},o),$.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.Mr=e,this.docs=function(){return new Ce(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Mn();const o=n.path,u=new J(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||OI(LI(p),r)<=0||(s.has(p.key)||xu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nb(this)}getSize(e){return $.resolve(this.size)}}class nb extends K2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.persistence=e,this.Nr=new gi(n=>af(n),lf),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mf,this.targetCount=0,this.kr=ii.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ii(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nf(0),this.Kr=!1,this.Kr=!0,this.$r=new Z2,this.referenceDelegate=e(this),this.Ur=new rb(this),this.indexManager=new q2,this.remoteDocumentCache=function(s){return new tb(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new H2(n),this.Gr=new X2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new J2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new eb(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new ib(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ib extends UI{constructor(e){super(),this.currentSequenceNumber=e}}class gf{constructor(e){this.persistence=e,this.Jr=new mf,this.Yr=null}static Zr(e){return new gf(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lT()?8:zI(ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ob;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(zi()<=ue.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(zi()<=ue.DEBUG&&Y("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(zi()<=ue.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(n))):$.resolve())}Yi(e,n){if(vg(n))return $.resolve(null);let r=ln(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=$d(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=le(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,$d(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return vg(n)||s.isEqual(se.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?$.resolve(null):(zi()<=ue.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xs(n)),this.rs(e,o,n,MI(s,-1)).next(u=>u))})}ts(e,n){let r=new Xe(i_(e));return n.forEach((s,i)=>{xu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return zi()<=ue.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ir.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ce(pe),this._s=new gi(i=>af(i),lf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ub(t,e,n,r){return new lb(t,e,n,r)}async function N_(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=le();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function cb(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const m=h.batch,y=m.keys();let S=$.resolve();return y.forEach(C=>{S=S.next(()=>p.getEntry(c,C)).next(j=>{const U=h.docVersions.get(C);ge(U!==null),j.version.compareTo(U)<0&&(m.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=le();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function S_(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function db(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const y=s.get(m);if(!y)return;u.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let S=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(Ze.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(m,S),function(j,U,I){return j.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,S,p)&&u.push(n.Ur.updateTargetData(i,S))});let c=Mn(),h=le();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),u.push(hb(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(se.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(p)}return $.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function hb(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Mn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):Y("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function fb(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pb(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Kd(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!qo(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ag(t,e,n){const r=ie(t);let s=se.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=ie(c),y=m._s.get(p);return y!==void 0?$.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)}(r,o,ln(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:le())).next(u=>(mb(r,i2(e),u),{documents:u,Ts:i})))}function mb(t,e,n){let r=t.us.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class kg{constructor(){this.activeTargetIds=d2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gb{constructor(){this.so=new kg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa=null;function kc(){return Oa===null?Oa=function(){return 268435456+Math.round(2147483648*Math.random())}():Oa++,"0x"+Oa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class xb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=kc(),c=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(Y("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw ti("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=yb[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=kc();return new Promise((o,u)=>{const c=new zy;c.setWithCredentials(!0),c.listenOnce(By.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ja.NO_ERROR:const p=c.getResponseJson();Y(st,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Ja.TIMEOUT:Y(st,`RPC '${e}' ${i} timed out`),u(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ja.HTTP_ERROR:const m=c.getStatus();if(Y(st,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y==null?void 0:y.error;if(S&&S.status&&S.message){const C=function(U){const I=U.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(I)>=0?I:F.UNKNOWN}(S.status);u(new Q(C,S.message))}else u(new Q(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Q(F.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{Y(st,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Y(st,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=kc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wy(),u=Hy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Y(st,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let y=!1,S=!1;const C=new _b({Io:U=>{S?Y(st,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(y||(Y(st,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),Y(st,`RPC '${e}' stream ${s} sending:`,U),m.send(U))},To:()=>m.close()}),j=(U,I,w)=>{U.listen(I,N=>{try{w(N)}catch(V){setTimeout(()=>{throw V},0)}})};return j(m,qi.EventType.OPEN,()=>{S||(Y(st,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),j(m,qi.EventType.CLOSE,()=>{S||(S=!0,Y(st,`RPC '${e}' stream ${s} transport closed`),C.So())}),j(m,qi.EventType.ERROR,U=>{S||(S=!0,ti(st,`RPC '${e}' stream ${s} transport errored:`,U),C.So(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),j(m,qi.EventType.MESSAGE,U=>{var I;if(!S){const w=U.data[0];ge(!!w);const N=w,V=N.error||((I=N[0])===null||I===void 0?void 0:I.error);if(V){Y(st,`RPC '${e}' stream ${s} received error:`,V);const L=V.status;let z=function(x){const E=Me[x];if(E!==void 0)return g_(E)}(L),_=V.message;z===void 0&&(z=F.INTERNAL,_="Unknown error status: "+L+" with message "+V.message),S=!0,C.So(new Q(z,_)),m.close()}else Y(st,`RPC '${e}' stream ${s} received:`,w),C.bo(w)}}),j(u,$y.STAT_EVENT,U=>{U.stat===Ld.PROXY?Y(st,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Ld.NOPROXY&&Y(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Cc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return new C2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new A_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wb extends k_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=j2(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?un(o.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Gd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=zd(c)?{documents:M2(i,c)}:{query:L2(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=__(i,o.resumeToken);const h=Hd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(se.min())>0){u.readTime=Fl(i,o.snapshotVersion.toTimestamp());const h=Hd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=F2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Gd(this.serializer),n.removeTarget=e,this.a_(n)}}class Eb extends k_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ge(!!e.streamToken),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=V2(e.writeResults,e.commitTime),r=un(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Gd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>D2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Wd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Wd(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ib{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vn(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{cs(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ie(c);h.L_.add(4),await Qo(h),h.q_.set("Unknown"),h.L_.delete(4),await bu(h)}(this))})}),this.q_=new Ib(r,s)}}async function bu(t){if(cs(t))for(const e of t.B_)await e(!0)}async function Qo(t){for(const e of t.B_)await e(!1)}function C_(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wf(n)?xf(n):vi(n).r_()&&_f(n,e))}function yf(t,e){const n=ie(t),r=vi(n);n.N_.delete(e),r.r_()&&R_(n,e),n.N_.size===0&&(r.r_()?r.o_():cs(n)&&n.q_.set("Unknown"))}function _f(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vi(t).A_(e)}function R_(t,e){t.Q_.xe(e),vi(t).R_(e)}function xf(t){t.Q_=new N2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vi(t).start(),t.q_.v_()}function wf(t){return cs(t)&&!vi(t).n_()&&t.N_.size>0}function cs(t){return ie(t).L_.size===0}function P_(t){t.Q_=void 0}async function Nb(t){t.q_.set("Online")}async function Sb(t){t.N_.forEach((e,n)=>{_f(t,e)})}async function Ab(t,e){P_(t),wf(t)?(t.q_.M_(e),xf(t)):t.q_.set("Unknown")}async function kb(t,e,n){if(t.q_.set("Online"),e instanceof y_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ul(t,r)}else if(e instanceof tl?t.Q_.Ke(e):e instanceof v_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const r=await S_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(Ze.EMPTY_BYTE_STRING,p.snapshotVersion)),R_(i,c);const m=new lr(p.target,c,h,p.sequenceNumber);_f(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await Ul(t,r)}}async function Ul(t,e,n){if(!qo(e))throw e;t.L_.add(1),await Qo(t),t.q_.set("Offline"),n||(n=()=>S_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await bu(t)})}function j_(t,e){return e().catch(n=>Ul(t,n,e))}async function Nu(t){const e=ie(t),n=Nr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Cb(e);)try{const s=await fb(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Rb(e,s)}catch(s){await Ul(e,s)}D_(e)&&V_(e)}function Cb(t){return cs(t)&&t.O_.length<10}function Rb(t,e){t.O_.push(e);const n=Nr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function D_(t){return cs(t)&&!Nr(t).n_()&&t.O_.length>0}function V_(t){Nr(t).start()}async function Pb(t){Nr(t).p_()}async function jb(t){const e=Nr(t);for(const n of t.O_)e.m_(n.mutations)}async function Db(t,e,n){const r=t.O_.shift(),s=hf.from(r,e,n);await j_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Nu(t)}async function Vb(t,e){e&&Nr(t).V_&&await async function(r,s){if(function(o){return T2(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Nr(r).s_(),await j_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Nu(r)}}(t,e),D_(t)&&V_(t)}async function Rg(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=cs(n);n.L_.add(3),await Qo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await bu(n)}async function Mb(t,e){const n=ie(t);e?(n.L_.delete(2),await bu(n)):e||(n.L_.add(2),await Qo(n),n.q_.set("Unknown"))}function vi(t){return t.K_||(t.K_=function(n,r,s){const i=ie(n);return i.w_(),new wb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Nb.bind(null,t),Ro:Sb.bind(null,t),mo:Ab.bind(null,t),d_:kb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wf(t)?xf(t):t.q_.set("Unknown")):(await t.K_.stop(),P_(t))})),t.K_}function Nr(t){return t.U_||(t.U_=function(n,r,s){const i=ie(n);return i.w_(),new Eb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Pb.bind(null,t),mo:Vb.bind(null,t),f_:jb.bind(null,t),g_:Db.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Nu(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Ef(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tf(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),qo(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Gi(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new Bs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.W_=new Ce(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oi{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new oi(e,n,Bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ob{constructor(){this.queries=jg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=jg(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function jg(){return new gi(t=>s_(t),_u)}async function M_(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Lb,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Tf(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&If(n)}async function L_(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Fb(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&If(n)}function Ub(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function If(t){t.Y_.forEach(e=>{e.next()})}var Qd,Dg;(Dg=Qd||(Qd={})).ea="default",Dg.Cache="cache";class O_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this.key=e}}class U_{constructor(e){this.key=e}}class zb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=i_(e),this.Ra=new Bs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Pg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const y=s.get(p),S=xu(this.query,m)?m:null,C=!!y&&this.mutatedKeys.has(y.key),j=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let U=!1;y&&S?y.data.isEqual(S.data)?C!==j&&(r.track({type:3,doc:S}),U=!0):this.ga(y,S)||(r.track({type:2,doc:S}),U=!0,(c&&this.Aa(S,c)>0||h&&this.Aa(S,h)<0)&&(u=!0)):!y&&S?(r.track({type:0,doc:S}),U=!0):y&&!S&&(r.track({type:1,doc:y}),U=!0,(c||h)&&(u=!0)),U&&(S?(o=o.add(S),i=j?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(S,C){const j=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return j(S)-j(C)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new oi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new U_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new F_(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Bb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $b{constructor(e){this.key=e,this.va=!1}}class Hb{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new gi(u=>s_(u),_u),this.Ma=new Map,this.xa=new Set,this.Oa=new Ce(J.comparator),this.Na=new Map,this.La=new mf,this.Ba={},this.ka=new Map,this.qa=ii.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Wb(t,e,n=!0){const r=q_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await z_(r,e,n,!0),s}async function qb(t,e){const n=q_(t);await z_(n,e,!0,!1)}async function z_(t,e,n,r){const s=await pb(t.localStore,ln(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await Gb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&C_(t.remoteStore,s),u}async function Gb(t,e,n,r,s){t.Ka=(m,y,S)=>async function(j,U,I,w){let N=U.view.ma(I);N.ns&&(N=await Ag(j.localStore,U.query,!1).then(({documents:_})=>U.view.ma(_,N)));const V=w&&w.targetChanges.get(U.targetId),L=w&&w.targetMismatches.get(U.targetId)!=null,z=U.view.applyChanges(N,j.isPrimaryClient,V,L);return Mg(j,U.targetId,z.wa),z.snapshot}(t,m,y,S);const i=await Ag(t.localStore,e,!0),o=new zb(e,i.Ts),u=o.ma(i.documents),c=Ko.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);Mg(t,n,h.wa);const p=new Bb(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function Kb(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!_u(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yf(r.remoteStore,s.targetId),Yd(r,s.targetId)}).catch(Wo)):(Yd(r,s.targetId),await Kd(r.localStore,s.targetId,!0))}async function Qb(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yf(n.remoteStore,r.targetId))}async function Yb(t,e,n){const r=rN(t);try{const s=await function(o,u){const c=ie(o),h=Be.now(),p=u.reduce((S,C)=>S.add(C.key),le());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=Mn(),j=le();return c.cs.getEntries(S,p).next(U=>{C=U,C.forEach((I,w)=>{w.isValidDocument()||(j=j.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,C)).next(U=>{m=U;const I=[];for(const w of u){const N=y2(w,m.get(w.key).overlayedDocument);N!=null&&I.push(new us(w.key,N,Yy(N.value.mapValue),Gt.exists(!0)))}return c.mutationQueue.addMutationBatch(S,h,I,u)}).next(U=>{y=U;const I=U.applyToLocalDocumentSet(m,j);return c.documentOverlayCache.saveOverlays(S,U.batchId,I)})}).then(()=>({batchId:y.batchId,changes:a_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ce(pe)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Yo(r,s.changes),await Nu(r.remoteStore)}catch(s){const i=Tf(s,"Failed to persist write");n.reject(i)}}async function B_(t,e){const n=ie(t);try{const r=await db(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ge(o.va):s.removedDocuments.size>0&&(ge(o.va),o.va=!1))}),await Yo(n,r,e)}catch(r){await Wo(r)}}function Vg(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ie(o);c.onlineState=u;let h=!1;c.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(u)&&(h=!0)}),h&&If(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Xb(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ce(J.comparator);o=o.insert(i,at.newNoDocument(i,se.min()));const u=le().add(i),c=new Tu(se.min(),new Map,new Ce(pe),o,u);await B_(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),bf(r)}else await Kd(r.localStore,e,!1).then(()=>Yd(r,e,n)).catch(Wo)}async function Jb(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await cb(n.localStore,e);H_(n,r,null),$_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yo(n,s)}catch(s){await Wo(s)}}async function Zb(t,e,n){const r=ie(t);try{const s=await function(o,u){const c=ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(ge(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);H_(r,e,n),$_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yo(r,s)}catch(s){await Wo(s)}}function $_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function H_(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Yd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||W_(t,r)})}function W_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bf(t))}function Mg(t,e,n){for(const r of n)r instanceof F_?(t.La.addReference(r.key,e),eN(t,r)):r instanceof U_?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||W_(t,r.key)):re()}function eN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),bf(t))}function bf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new $b(n)),t.Oa=t.Oa.insert(n,r),C_(t.remoteStore,new lr(ln(uf(n.path)),r,"TargetPurposeLimboResolution",nf.oe))}}async function Yo(t,e,n){const r=ie(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=vf.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=ie(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(h,y=>$.forEach(y.$i,S=>p.persistence.referenceDelegate.addReference(m,y.targetId,S)).next(()=>$.forEach(y.Ui,S=>p.persistence.referenceDelegate.removeReference(m,y.targetId,S)))))}catch(m){if(!qo(m))throw m;Y("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const S=p.os.get(y),C=S.snapshotVersion,j=S.withLastLimboFreeSnapshotVersion(C);p.os=p.os.insert(y,j)}}}(r.localStore,i))}async function tN(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await N_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yo(n,r.hs)}}function nN(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let s=le();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function q_(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xb.bind(null,e),e.Ca.d_=Fb.bind(null,e.eventManager),e.Ca.$a=Ub.bind(null,e.eventManager),e}function rN(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zb.bind(null,e),e}class zl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Iu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ub(this.persistence,new ab,e.initialUser,this.serializer)}Ga(e){return new sb(gf.Zr,this.serializer)}Wa(e){return new gb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zl.provider={build:()=>new zl};class Xd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tN.bind(null,this.syncEngine),await Mb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ob}()}createDatastore(e){const n=Iu(e.databaseInfo.databaseId),r=function(i){return new xb(i)}(e.databaseInfo);return function(i,o,u,c){return new Tb(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new bb(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Vg(this.syncEngine,n,0),function(){return Cg.D()?new Cg:new vb}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,p){const m=new Hb(s,i,o,u,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);Y("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Qo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=Gy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rc(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await N_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iN(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Rg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Rg(e.remoteStore,s)),t._onlineComponents=e}async function iN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ti("Error using user provided cache. Falling back to memory cache: "+n),await Rc(t,new zl)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Rc(t,new zl);return t._offlineComponents}async function K_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await Lg(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await Lg(t,new Xd))),t._onlineComponents}function oN(t){return K_(t).then(e=>e.syncEngine)}async function Jd(t){const e=await K_(t),n=e.eventManager;return n.onListen=Wb.bind(null,e.syncEngine),n.onUnlisten=Kb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Qb.bind(null,e.syncEngine),n}function aN(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const p=new G_({next:y=>{p.Za(),o.enqueueAndForget(()=>L_(i,m)),y.fromCache&&c.source==="server"?h.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new O_(u,p,{includeMetadataChanges:!0,_a:!0});return M_(i,m)}(await Jd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lN(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fg(t){if(!J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ug(t){if(J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Su(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Su(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Au{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SI;switch(r.type){case"firstParty":return new RI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Og.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Og.delete(n),r.terminate())}(this),Promise.resolve()}}function uN(t,e,n,r={}){var s;const i=(t=cn(t,Au))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=it.MOCK_USER;else{u=tT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new it(h)}t._authCredentials=new AI(new qy(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cr(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class wr extends Cr{constructor(e,n,r){super(e,n,uf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new J(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function cN(t,e,...n){if(t=wt(t),Y_("collection","path",e),t instanceof Au){const r=Ee.fromString(e,...n);return Ug(r),new wr(t,null,r)}{if(!(t instanceof xt||t instanceof wr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Ug(r),new wr(t.firestore,null,r)}}function Nf(t,e,...n){if(t=wt(t),arguments.length===1&&(e=Gy.newId()),Y_("doc","path",e),t instanceof Au){const r=Ee.fromString(e,...n);return Fg(r),new xt(t,null,new J(r))}{if(!(t instanceof xt||t instanceof wr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Fg(r),new xt(t.firestore,t instanceof wr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new A_(this,"async_queue_retry"),this.Vu=()=>{const r=Cc();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Cc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qo(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw Vn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ef.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $g(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class is extends Au{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Bg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bg(e),this._firestoreClient=void 0,await e}}}function dN(t,e){const n=typeof t=="object"?t:Ly(),r=typeof t=="string"?t:e||"(default)",s=ef(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ZE("firestore");i&&uN(s,...i)}return s}function Sf(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hN(t),t._firestoreClient}function hN(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,h,p){return new HI(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Q_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new sN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(Ze.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ai(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=/^__.*__$/;class pN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Go(e,this.data,n,this.fieldTransforms)}}function J_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Rf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(J_(this.Cu)&&fN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Iu(e)}Qu(e,n,r,s=!1){return new Rf({Cu:e,methodName:n,qu:r,path:Qe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pf(t){const e=t._freezeSettings(),n=Iu(t._databaseId);return new mN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Z_(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);nx("Data must be an object, but it was:",o,r);const u=ex(r,o);let c,h;if(i.merge)c=new Ht(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=vN(e,m,n);if(!o.contains(y))throw new Q(F.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);_N(p,y)||p.push(y)}c=new Ht(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new pN(new Dt(u),c,h)}function gN(t,e,n,r=!1){return jf(n,t.Qu(r?4:3,e))}function jf(t,e){if(tx(t=wt(t)))return nx("Unsupported field value:",e,t),ex(t,e);if(t instanceof X_)return function(r,s){if(!J_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=jf(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Fl(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fl(s.serializer,i)}}if(r instanceof kf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:__(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cf)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return cf(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Su(r)}`)}(t,e)}function ex(t,e){const n={};return Ky(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,s)=>{const i=jf(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function tx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof kf||t instanceof ai||t instanceof xt||t instanceof X_||t instanceof Cf)}function nx(t,e,n){if(!tx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Su(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function vN(t,e,n){if((e=wt(e))instanceof Af)return e._internalPath;if(typeof e=="string")return rx(t,e);throw Bl("Field path arguments must be of type string or ",t,!1,void 0,n)}const yN=new RegExp("[~\\*/\\[\\]]");function rx(t,e,n){if(e.search(yN)>=0)throw Bl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Af(...e.split("."))._internalPath}catch{throw Bl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(F.INVALID_ARGUMENT,u+t+c)}function _N(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ku("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xN extends sx{data(){return super.data()}}function ku(t,e){return typeof e=="string"?rx(t,e):e instanceof Af?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Df{}class ox extends Df{}function Cu(t,e,...n){let r=[];e instanceof Df&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Vf).length,u=i.filter(c=>c instanceof Ru).length;if(o>1||o>0&&u>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ru extends ox{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ru(e,n,r)}_apply(e){const n=this._parse(e);return lx(e._query,n),new Cr(e.firestore,e.converter,Bd(e._query,n))}_parse(e){const n=Pf(e.firestore);return function(i,o,u,c,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Wg(m,p);const S=[];for(const C of m)S.push(Hg(c,i,C));y={arrayValue:{values:S}}}else y=Hg(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Wg(m,p),y=gN(u,o,m,p==="in"||p==="not-in");return Oe.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wN(t,e,n){const r=e,s=ku("where",t);return Ru._create(s,r,n)}class Vf extends Df{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)lx(o,c),o=Bd(o,c)}(e._query,n),new Cr(e.firestore,e.converter,Bd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mf extends ox{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Do(i,o)}(e._query,this._field,this._direction);return new Cr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new mi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ax(t,e="asc"){const n=e,r=ku("orderBy",t);return Mf._create(r,n)}function Hg(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r_(e)&&n.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!J.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dg(t,new J(r))}if(n instanceof xt)return dg(t,n._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Su(n)}.`)}function Wg(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lx(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EN{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>De(o.doubleValue));return new Cf(i)}convertGeoPoint(e){return new kf(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ro(e));default:return null}}convertTimestamp(e){const n=br(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);ge(b_(r));const s=new Po(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Vn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cx extends sx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ku("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nl extends cx{data(e={}){return super.data(e)}}class dx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nl(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new nl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Qi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new nl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Qi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:TN(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}class Lf extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function hx(t){t=cn(t,Cr);const e=cn(t.firestore,is),n=Sf(e),r=new Lf(e);return ix(t._query),aN(n,t._query).then(s=>new dx(e,r,t,s))}function IN(t,e,n){t=cn(t,xt);const r=cn(t.firestore,is),s=ux(t.converter,e,n);return Ff(r,[Z_(Pf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gt.none())])}function bN(t){return Ff(cn(t.firestore,is),[new df(t._key,Gt.none())])}function $l(t,e){const n=cn(t.firestore,is),r=Nf(t),s=ux(t.converter,e);return Ff(n,[Z_(Pf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function Of(t,...e){var n,r,s;t=wt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$g(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if($g(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof xt)h=cn(t.firestore,is),p=uf(t._key.path),c={next:m=>{e[o]&&e[o](NN(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=cn(t,Cr);h=cn(m.firestore,is),p=m._query;const y=new Lf(h);c={next:S=>{e[o]&&e[o](new dx(h,y,m,S))},error:e[o+1],complete:e[o+2]},ix(t._query)}return function(y,S,C,j){const U=new G_(j),I=new O_(S,U,C);return y.asyncQueue.enqueueAndForget(async()=>M_(await Jd(y),I)),()=>{U.Za(),y.asyncQueue.enqueueAndForget(async()=>L_(await Jd(y),I))}}(Sf(h),p,u,c)}function Ff(t,e){return function(r,s){const i=new xr;return r.asyncQueue.enqueueAndForget(async()=>Yb(await oN(r),s,i)),i.promise}(Sf(t),e)}function NN(t,e,n){const r=n.docs.get(e._key),s=new Lf(t);return new cx(t,s,e._key,r,new Qi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){fi=s})(hi),ei(new ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new is(new kI(r.getProvider("auth-internal")),new jI(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),_r(og,"4.7.3",e),_r(og,"4.7.3","esm2017")})();function Uf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SN=fx,px=new $o("auth","Firebase",fx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Jh("@firebase/auth");function AN(t,...e){Hl.logLevel<=ue.WARN&&Hl.warn(`Auth (${hi}): ${t}`,...e)}function rl(t,...e){Hl.logLevel<=ue.ERROR&&Hl.error(`Auth (${hi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw zf(t,...e)}function dn(t,...e){return zf(t,...e)}function mx(t,e,n){const r=Object.assign(Object.assign({},SN()),{[e]:n});return new $o("auth","Firebase",r).create(e,{appName:t.name})}function An(t){return mx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return px.create(t,...e)}function ne(t,e,...n){if(!t)throw zf(e,...n)}function In(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rl(e),new Error(e)}function On(t,e){t||In(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kN(){return qg()==="http:"||qg()==="https:"}function qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kN()||iT()||"connection"in navigator)?navigator.onLine:!0}function RN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.shortDelay=e,this.longDelay=n,On(n>e,"Short delay should be less than long delay!"),this.isMobile=nT()||oT()}get(){return CN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t,e){On(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;In("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;In("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;In("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new Xo(3e4,6e4);function Jo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yi(t,e,n,r,s={}){return vx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Ho(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return sT()||(h.referrerPolicy="no-referrer"),gx.fetch()(yx(t,t.config.apiHost,n,u),h)})}async function vx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PN),e);try{const s=new DN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Fa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Fa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Fa(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mx(t,p,h);Ln(t,p)}}catch(s){if(s instanceof zn)throw s;Ln(t,"network-request-failed",{message:String(s)})}}async function $f(t,e,n,r,s={}){const i=await yi(t,e,n,r,s);return"mfaPendingCredential"in i&&Ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}function yx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Bf(t.config,s):`${t.config.apiScheme}://${s}`}class DN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),jN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=dn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){return yi(t,"POST","/v1/accounts:delete",e)}async function _x(t,e){return yi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MN(t,e=!1){const n=wt(t),r=await n.getIdToken(e),s=Hf(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:uo(Pc(s.auth_time)),issuedAtTime:uo(Pc(s.iat)),expirationTime:uo(Pc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Pc(t){return Number(t)*1e3}function Hf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Cy(n);return s?JSON.parse(s):(rl("Failed to decode base64 JWT payload"),null)}catch(s){return rl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Gg(t){const e=Hf(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zn&&LN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uo(this.lastLoginAt),this.creationTime=uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Lo(t,_x(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?xx(i.providerUserInfo):[],u=UN(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new eh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function FN(t){const e=wt(t);await Wl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xx(t){return t.map(e=>{var{providerId:n}=e,r=Uf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){const n=await vx(t,{},async()=>{const r=Ho({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=yx(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",gx.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BN(t,e){return yi(t,"POST","/v2/accounts:revokeToken",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Gg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $s;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return In("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Uf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ON(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new eh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Lo(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MN(this,e)}reload(){return FN(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(An(this.auth));const e=await this.getIdToken();return await Lo(this,VN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,S=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(u=n.tenantId)!==null&&u!==void 0?u:void 0,U=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:N,emailVerified:V,isAnonymous:L,providerData:z,stsTokenManager:_}=n;ne(N&&_,e,"internal-error");const v=$s.fromJSON(this.name,_);ne(typeof N=="string",e,"internal-error"),Xn(m,e.name),Xn(y,e.name),ne(typeof V=="boolean",e,"internal-error"),ne(typeof L=="boolean",e,"internal-error"),Xn(S,e.name),Xn(C,e.name),Xn(j,e.name),Xn(U,e.name),Xn(I,e.name),Xn(w,e.name);const x=new bn({uid:N,auth:e,email:y,emailVerified:V,displayName:m,isAnonymous:L,photoURL:C,phoneNumber:S,tenantId:j,stsTokenManager:v,createdAt:I,lastLoginAt:w});return z&&Array.isArray(z)&&(x.providerData=z.map(E=>Object.assign({},E))),U&&(x._redirectEventId=U),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new $s;s.updateFromServerResponse(n);const i=new bn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new $s;u.updateFromIdToken(r);const c=new bn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new eh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=new Map;function Nn(t){On(t instanceof Function,"Expected a class definition");let e=Kg.get(t);return e?(On(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wx.type="NONE";const Qg=wx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=sl(this.userKey,s.apiKey,i),this.fullPersistenceKey=sl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hs(Nn(Qg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Nn(Qg);const o=sl(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(o);if(p){const m=bn._fromJSON(e,p);h!==i&&(u=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Hs(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Hs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ex(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sx(e))return"Blackberry";if(Ax(e))return"Webos";if(Tx(e))return"Safari";if((e.includes("chrome/")||Ix(e))&&!e.includes("edge/"))return"Chrome";if(Nx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ex(t=ut()){return/firefox\//i.test(t)}function Tx(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ix(t=ut()){return/crios\//i.test(t)}function bx(t=ut()){return/iemobile/i.test(t)}function Nx(t=ut()){return/android/i.test(t)}function Sx(t=ut()){return/blackberry/i.test(t)}function Ax(t=ut()){return/webos/i.test(t)}function Wf(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $N(t=ut()){var e;return Wf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HN(){return aT()&&document.documentMode===10}function kx(t=ut()){return Wf(t)||Nx(t)||Ax(t)||Sx(t)||/windows phone/i.test(t)||bx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e=[]){let n;switch(t){case"Browser":n=Yg(ut());break;case"Worker":n=`${Yg(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e={}){return yi(t,"GET","/v2/passwordPolicy",Jo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=6;class KN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:GN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xg(this),this.idTokenSubscription=new Xg(this),this.beforeStateQueue=new WN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=px,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _x(this,{idToken:e}),r=await bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(An(this));const n=e?wt(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(An(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(An(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qN(this),n=new KN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[Nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zo(t){return wt(t)}class Xg{constructor(e){this.auth=e,this.observer=null,this.addObserver=mT(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YN(t){qf=t}function XN(t){return qf.loadJS(t)}function JN(){return qf.gapiScript}function ZN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t,e){const n=ef(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(jl(i,e??{}))return s;Ln(s,"already-initialized")}return n.initialize({options:e})}function tS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nS(t,e,n){const r=Zo(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Rx(e),{host:o,port:u}=rS(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||sS()}function Rx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rS(t){const e=Rx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Jg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Jg(o)}}}function Jg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return In("not implemented")}_getIdTokenResponse(e){return In("not implemented")}_linkToIdToken(e,n){return In("not implemented")}_getReauthenticationResolver(e){return In("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e){return $f(t,"POST","/v1/accounts:signInWithIdp",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="http://localhost";class os extends Px{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Uf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ws(e,n)}buildRequest(){const e={requestUri:iS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ho(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends jx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ea{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ea{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ea{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ea{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(t,e){return $f(t,"POST","/v1/accounts:signUp",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await bn._fromIdTokenResponse(e,r,s),o=Zg(r);return new Fn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Zg(r);return new Fn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Zg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(t){var e;if(sn(t.app))return Promise.reject(An(t));const n=Zo(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Fn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await oS(n,{returnSecureToken:!0}),s=await Fn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ql.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ql(e,n,r,s)}}function Dx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ql._fromErrorAndOperation(t,i,e,r):i})}async function lS(t,e,n=!1){const r=await Lo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fn._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(t,e,n=!1){const{auth:r}=t;if(sn(r.app))return Promise.reject(An(r));const s="reauthenticate";try{const i=await Lo(t,Dx(r,s,e,t),n);ne(i.idToken,r,"internal-error");const o=Hf(i.idToken);ne(o,r,"internal-error");const{sub:u}=o;return ne(t.uid===u,r,"user-mismatch"),Fn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ln(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(t,e,n=!1){if(sn(t.app))return Promise.reject(An(t));const r="signIn",s=await Dx(t,r,e),i=await Fn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(t,e){return $f(t,"POST","/v1/accounts:signInWithCustomToken",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e){if(sn(t.app))return Promise.reject(An(t));const n=Zo(t),r=await dS(n,{token:e,returnSecureToken:!0}),s=await Fn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}function fS(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function pS(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function mS(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}const Gl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=1e3,vS=10;class Mx extends Vx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);HN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mx.type="LOCAL";const yS=Mx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends Vx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lx.type="SESSION";const Ox=Lx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Pu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async h=>h(n.origin,i)),c=await _S(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const h=Gf("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(y.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return window}function wS(t){hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(){return typeof hn().WorkerGlobalScope<"u"&&typeof hn().importScripts=="function"}async function ES(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IS(){return Fx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebaseLocalStorageDb",bS=1,Kl="firebaseLocalStorage",zx="fbase_key";class ta{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ju(t,e){return t.transaction([Kl],e?"readwrite":"readonly").objectStore(Kl)}function NS(){const t=indexedDB.deleteDatabase(Ux);return new ta(t).toPromise()}function th(){const t=indexedDB.open(Ux,bS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kl,{keyPath:zx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kl)?e(r):(r.close(),await NS(),e(await th()))})})}async function e0(t,e,n){const r=ju(t,!0).put({[zx]:e,value:n});return new ta(r).toPromise()}async function SS(t,e){const n=ju(t,!1).get(e),r=await new ta(n).toPromise();return r===void 0?null:r.value}function t0(t,e){const n=ju(t,!0).delete(e);return new ta(n).toPromise()}const AS=800,kS=3;class Bx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await th(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pu._getInstance(IS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ES(),!this.activeServiceWorker)return;this.sender=new xS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await th();return await e0(e,Gl,"1"),await t0(e,Gl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>e0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>SS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>t0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ju(s,!1).getAll();return new ta(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bx.type="LOCAL";const CS=Bx;new Xo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t,e){return e?Nn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends Px{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PS(t){return cS(t.auth,new Kf(t),t.bypassAuthState)}function jS(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),uS(n,new Kf(t),t.bypassAuthState)}async function DS(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),lS(n,new Kf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PS;case"linkViaPopup":case"linkViaRedirect":return DS;case"reauthViaPopup":case"reauthViaRedirect":return jS;default:Ln(this.auth,"internal-error")}}resolve(e){On(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){On(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new Xo(2e3,1e4);class Vs extends $x{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){On(this.filter.length===1,"Popup operations only handle one event");const e=Gf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VS.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="pendingRedirect",il=new Map;class LS extends $x{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=il.get(this.auth._key());if(!e){try{const r=await OS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}il.set(this.auth._key(),e)}return this.bypassAuthState||il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OS(t,e){const n=zS(e),r=US(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function FS(t,e){il.set(t._key(),e)}function US(t){return Nn(t._redirectPersistence)}function zS(t){return sl(MS,t.config.apiKey,t.name)}async function BS(t,e,n=!1){if(sn(t.app))return Promise.reject(An(t));const r=Zo(t),s=RS(r,e),o=await new LS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=10*60*1e3;class HS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Hx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$S&&this.cachedEventUids.clear(),this.cachedEventUids.has(n0(e))}saveEventToCache(e){this.cachedEventUids.add(n0(e)),this.lastProcessedEventTime=Date.now()}}function n0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Hx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,e={}){return yi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KS=/^https?/;async function QS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qS(t);for(const n of e)try{if(YS(n))return}catch{}Ln(t,"unauthorized-domain")}function YS(t){const e=Zd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KS.test(n))return!1;if(GS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new Xo(3e4,6e4);function r0(){const t=hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JS(t){return new Promise((e,n)=>{var r,s,i;function o(){r0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r0(),n(dn(t,"network-request-failed"))},timeout:XS.get()})}if(!((s=(r=hn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=hn().gapi)===null||i===void 0)&&i.load)o();else{const u=ZN("iframefcb");return hn()[u]=()=>{gapi.load?o():n(dn(t,"network-request-failed"))},XN(`${JN()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw ol=null,e})}let ol=null;function ZS(t){return ol=ol||JS(t),ol}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new Xo(5e3,15e3),tA="__/auth/iframe",nA="emulator/auth/iframe",rA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iA(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bf(e,nA):`https://${t.config.authDomain}/${tA}`,r={apiKey:e.apiKey,appName:t.name,v:hi},s=sA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ho(r).slice(1)}`}async function oA(t){const e=await ZS(t),n=hn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:iA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=dn(t,"network-request-failed"),u=hn().setTimeout(()=>{i(o)},eA.get());function c(){hn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lA=500,uA=600,cA="_blank",dA="http://localhost";class s0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hA(t,e,n,r=lA,s=uA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},aA),{width:r.toString(),height:s.toString(),top:i,left:o}),h=ut().toLowerCase();n&&(u=Ix(h)?cA:n),Ex(h)&&(e=e||dA,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[S,C])=>`${y}${S}=${C},`,"");if($N(h)&&u!=="_self")return fA(e||"",u),new s0(null);const m=window.open(e||"",u,p);ne(m,t,"popup-blocked");try{m.focus()}catch{}return new s0(m)}function fA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="__/auth/handler",mA="emulator/auth/handler",gA=encodeURIComponent("fac");async function i0(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hi,eventId:s};if(e instanceof jx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(i||{}))o[p]=m}if(e instanceof ea){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),h=c?`#${gA}=${encodeURIComponent(c)}`:"";return`${vA(t)}?${Ho(u).slice(1)}${h}`}function vA({config:t}){return t.emulator?Bf(t,mA):`https://${t.authDomain}/${pA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="webStorageSupport";class yA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ox,this._completeRedirectFn=BS,this._overrideRedirectResult=FS}async _openPopup(e,n,r,s){var i;On((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await i0(e,n,r,Zd(),s);return hA(e,o,Gf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await i0(e,n,r,Zd(),s);return wS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(On(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oA(e),r=new HS(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jc,{type:jc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[jc];o!==void 0&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kx()||Tx()||Wf()}}const _A=yA;var o0="@firebase/auth",a0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EA(t){ei(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cx(t)},h=new QN(r,s,i,c);return tS(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new ts("auth-internal",e=>{const n=Zo(e.getProvider("auth").getImmediate());return(r=>new xA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(o0,a0,wA(t)),_r(o0,a0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=5*60,IA=jy("authIdTokenMaxAge")||TA;let l0=null;const bA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>IA)return;const s=n==null?void 0:n.token;l0!==s&&(l0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NA(t=Ly()){const e=ef(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eS(t,{popupRedirectResolver:_A,persistence:[CS,yS,Ox]}),r=jy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bA(i.toString());pS(n,o,()=>o(n.currentUser)),fS(n,u=>o(u))}}const s=Ry("auth");return s&&nS(n,`http://${s}`),n}function SA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}YN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",SA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EA("Browser");const AA={apiKey:"AIzaSyCUSBzbKBE2JRiiHZAwtkvJzy72RgrRoEU",authDomain:"smen-italcar.firebaseapp.com",projectId:"smen-italcar",storageBucket:"smen-italcar.firebasestorage.app",messagingSenderId:"188301662792",appId:"1:188301662792:web:1eca55e7e122582a8ed67d"},Wx=My(AA),Qf=dN(Wx),Dc=NA(Wx);var kA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RA=(t,e)=>{const n=X.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:u,...c},h)=>X.createElement("svg",{ref:h,...kA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${CA(t)}`,...c},[...e.map(([p,m])=>X.createElement(p,m)),...(Array.isArray(u)?u:[u])||[]]));return n.displayName=`${t}`,n};var oe=RA;const Vc=oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),li=oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Du=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ql=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),nh=oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Yl=oe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),co=oe("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),PA=oe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),rh=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),u0=oe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),jA=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c0=oe("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),DA=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),VA=oe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),d0=oe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),MA=oe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),LA=oe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),OA=oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),h0=oe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),f0=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),FA=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Xl=oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),UA=oe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),zA=oe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),BA=oe("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),p0=oe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),qx=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Jl=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$A=oe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Mc=oe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),Lc=oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),HA=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Gx=oe("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),WA=oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),qA=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),m0=oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),al=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),GA=oe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),KA=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),QA=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Zl=oe("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),Oc=oe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),qs=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eu=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),YA="https://italcar.tn/wp-content/uploads/2020/12/logo-italcar.png",kn=t=>cN(Qf,t),na=({size:t="h-10"})=>l.jsx("img",{src:YA,alt:"ITALCAR Logo",className:`${t} object-contain`,onError:e=>{e.target.onerror=null,e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),XA=()=>l.jsx("div",{className:"hidden items-center justify-center bg-blue-900 text-white font-black p-2 rounded text-xs",children:"ITALCAR"}),Kx=({darkText:t=!1})=>{const[e,n]=X.useState(new Date),[r,s]=X.useState({temp:"--",code:0});X.useEffect(()=>{const u=setInterval(()=>n(new Date),1e3),c=async()=>{try{const m=await(await fetch("https://api.open-meteo.com/v1/forecast?latitude=36.8065&longitude=10.1815&current_weather=true")).json();m.current_weather&&s({temp:m.current_weather.temperature,code:m.current_weather.weathercode})}catch{console.log("Weather fetch failed")}};c();const h=setInterval(c,6e5);return()=>{clearInterval(u),clearInterval(h)}},[]);const i=t?"text-slate-800":"text-white",o=t?"text-slate-500":"text-white/80";return l.jsxs("div",{className:`flex items-center gap-8 ${i}`,children:[l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsxs("div",{className:"text-3xl font-black leading-none flex items-center gap-2",children:[r.temp," ",l.jsx(Gx,{size:20,className:"text-orange-500"})]}),l.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${o}`,children:"Tunis"})]}),l.jsx("div",{className:`h-10 w-px ${t?"bg-slate-300":"bg-white/30"}`}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("div",{className:"text-3xl font-black leading-none",children:e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),l.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${o}`,children:e.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"short"})})]})]})},JA=({onLogin:t})=>{const[e,n]=X.useState(""),[r,s]=X.useState(""),[i,o]=X.useState(""),[u,c]=X.useState(!1),h=async p=>{if(p.preventDefault(),c(!0),o(""),e==="RMI"&&r==="RMI2026$"){setTimeout(()=>{t({username:"RMI",role:"ADMIN"}),c(!1)},800);return}try{const m=Cu(kn("users"),wN("username","==",e)),y=await hx(m);if(y.empty){if(e==="admin"&&r==="0000"){t({username:"Admin Test",role:"ADMIN"});return}o("Utilisateur inconnu"),c(!1);return}let S=null;y.forEach(C=>{const j=C.data();j.password===r&&(S={...j,id:C.id})}),S?t(S):o("Mot de passe incorrect")}catch(m){console.error(m),o("Erreur de connexion base de donnes")}c(!1)};return l.jsxs("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 z-0",children:l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-slate-200 skew-x-12 opacity-50"})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-10 w-full max-w-md z-10 border-t-4 border-blue-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsxs("div",{className:"flex justify-center mb-4",children:[l.jsx(na,{size:"h-16"}),l.jsx(XA,{})]}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Portail nergie"}),l.jsx("p",{className:"text-slate-400 text-sm mt-1 font-medium",children:"Systme de Management de l'nergie"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Identifiant"}),l.jsxs("div",{className:"relative",children:[l.jsx(KA,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"Nom d'utilisateur",value:e,onChange:p=>n(p.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx(LA,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"",value:r,onChange:p=>s(p.target.value)})]})]}),i&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center font-bold flex items-center justify-center border border-red-100",children:[l.jsx(li,{size:16,className:"mr-2"}),i]}),l.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-900 hover:bg-blue-800 text-white font-bold py-3.5 rounded-lg shadow-lg shadow-blue-900/20 transition-all uppercase tracking-wide text-sm",children:u?"Connexion...":"Se Connecter"})]}),l.jsx("div",{className:"mt-8 text-center text-[10px] text-slate-400 font-mono",children:"v8.2.0  ITALCAR SA"})]})]})},ZA=({onBack:t,userRole:e})=>{const[n,r]=X.useState(1),[s,i]=X.useState([]),[o,u]=X.useState(!1),[c,h]=X.useState(!1),[p,m]=X.useState(null),[y,S]=X.useState(!1);X.useEffect(()=>{const P=Cu(kn("steg_logs"),ax("id","desc")),ee=Of(P,te=>{i(te.docs.map(ce=>({...ce.data(),docId:ce.id})))});return()=>ee()},[]);const C=[{id:1,name:"MT 1 - Mgrine",code:"MEG-001",type:"MT",icon:c0},{id:2,name:"MT 2 - El Khadhra",code:"ELK-002",type:"MT",icon:nh},{id:3,name:"MT 3 - Naassen",code:"NAS-003",type:"MT",icon:nh},{id:4,name:"BT 1 - Showroom Lac",code:"SHR-001",type:"BT_PV",icon:Mc},{id:5,name:"BT 2 - Azur City",code:"AZU-002",type:"BT",icon:Mc},{id:6,name:"BT 3 - Rue de Carthage",code:"CAR-003",type:"BT",icon:Mc}],[j,U]=X.useState({unitPriceKwh:.291,powerUnitPrice:5,unitPriceKwhBT:.391,fixedFeesBT:115.5,servicesBT:0,fteGazBT:0,vatRate:19,rtt:3.5,municipalTaxRate:.01,taxCLRate:.005,taxFTERate:.005,powerOverrunPenalty:25}),[I,w]=X.useState({1:{subscribedPower:250,emptyLosses:1300},2:{subscribedPower:70,emptyLosses:670},3:{subscribedPower:30,emptyLosses:160},4:{subscribedPower:30,emptyLosses:0},5:{subscribedPower:20,emptyLosses:0},6:{subscribedPower:15,emptyLosses:0}}),[N,V]=X.useState(!1),[L,z]=X.useState({date:new Date().toISOString().slice(0,7),lastIndex:"",newIndex:"",lastIndexPv:"",newIndexPv:"",previousBalance:"",cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:""}),_=P=>P==null?void 0:P.toLocaleString("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:3}),v=P=>P==null?void 0:P.toLocaleString("fr-TN",{maximumFractionDigits:2}),x=P=>P===""||P===void 0||P===null?"":P.toString().replace(/[^0-9.-]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g," "),E=P=>P.replace(/\s/g,"");X.useEffect(()=>{const P=s.filter(ee=>ee.siteId===n).sort((ee,te)=>te.id-ee.id);if(P.length>0){const ee=P[0],te=C.find(ce=>ce.id===n).type;z(ce=>({...ce,lastIndex:ee.newIndex,...te==="BT_PV"?{lastIndexPv:ee.newIndexPv,previousBalance:ee.newCarryOver}:{},manualLastIndex:!1}))}else z(ee=>({...ee,lastIndex:"",lastIndexPv:"",previousBalance:""}))},[n,s]);const b=(P,ee)=>{const te=["lastIndex","newIndex","lastIndexPv","newIndexPv","previousBalance","maxPower","reactiveCons"].includes(P)?E(ee):ee;z(ce=>({...ce,[P]:te}))},A=(P,ee)=>U(te=>({...te,[P]:ee})),T=(P,ee)=>w(te=>({...te,[n]:{...te[n],[P]:ee}})),Fe=()=>{const P=C.find(ye=>ye.id===n),ee=I[n],te=j,ce=parseFloat(L.newIndex)||0,Ie=parseFloat(L.lastIndex)||0,Tt=Math.max(0,ce-Ie),Bn=parseFloat(L.lateFees)||0,pn=parseFloat(L.relanceFees)||0,mn=parseFloat(L.adjustment)||0,$n=parseFloat(te.rtt)||0,Rr=(parseFloat(te.vatRate)||0)/100;if(P.type.startsWith("BT")){let ye=Tt,gn=0,Hn=0,Wn=0,vn=0,Yt=0;if(P.type==="BT_PV"){const fs=parseFloat(L.newIndexPv)||0,en=parseFloat(L.lastIndexPv)||0;Wn=parseFloat(L.previousBalance)||0,Hn=Math.max(0,fs-en),vn=Tt-Hn,Yt=vn+Wn,Yt>0?(ye=Yt,gn=0):(ye=0,gn=Yt)}const ds=parseFloat(te.unitPriceKwhBT)||.391,Pr=parseFloat(te.fixedFeesBT)||115.5,hs=parseFloat(te.servicesBT)||0,jr=ye*ds,Xt=Pr+hs,Jt=jr+Xt,Rt=Jt*(1+Rr),be=ye*(parseFloat(te.taxCLRate)||.005),je=ye*(parseFloat(te.taxFTERate)||.005),Zt=parseFloat(te.fteGazBT)||0,qn=Rt+be+$n+je+Zt,Dr=qn+mn+Bn+pn;return{type:P.type,consumptionGrid:Tt,productionPv:Hn,currentMonthBalance:vn,prevBalance:Wn,totalBalance:Yt,billedKwh:ye,newCarryOver:gn,consoAmountHT:jr,fixedAmountHT:Xt,totalTTC:Rt,contributionCL:be,fteElec:je,fteGaz:Zt,netToPay:Dr,totalFinalTTC:qn,totalHT:Jt}}else{const ye=parseFloat(L.cosPhi)||1,gn=parseFloat(L.maxPower)||0,Hn=parseFloat(L.reactiveCons)||0,Wn=parseFloat(te.unitPriceKwh)||.291,vn=parseFloat(ee.subscribedPower)||0,Yt=parseFloat(te.powerUnitPrice)||5,ds=parseFloat(te.municipalTaxRate)||.01,Pr=parseFloat(ee.emptyLosses)||0,hs=parseFloat(te.powerOverrunPenalty)||25,jr=Tt*.02,Xt=Tt+Pr+jr,Jt=Xt*Wn;let Rt=0,be="none";if(ye>=.91&&ye<=1)Rt=-(Math.round((ye-.9)*100)*.005),be="bonus";else if(ye>=.8&&ye<=.9)Rt=0,be="neutral";else{be="penalty";let Vr=0;ye<.8&&(Vr+=Math.round((.8-Math.max(ye,.75))*100)*.005),ye<.75&&(Vr+=Math.round((.75-Math.max(ye,.7))*100)*.01),ye<.7&&(Vr+=Math.round((.7-Math.max(ye,.6))*100)*.015),ye<.6&&(Vr+=Math.round((.6-ye)*100)*.02),Rt=Vr}const je=Jt*Rt,Zt=Math.max(0,gn-vn),qn=Zt*hs,Dr=Jt+je,fs=Dr*(1+Rr),en=vn*Yt,_i=en+Bn+pn+qn,xi=_i*(1+Rr),ps=Xt*ds,Vu=fs+xi+$n+ps+mn;return{type:"MT",energyRecorded:Tt,loadLosses:jr,billedKwh:Xt,baseEnergyAmountHT:Jt,adjustmentRate:Rt,adjustmentType:be,cosPhiAdjustmentAmount:je,total1_TTC:fs,total1_HT:Dr,powerPremium:en,total2_HT:_i,total2_TTC:xi,municipalTax:ps,netToPay:Vu,powerOverrun:Zt,powerOverrunAmount:qn,reactiveCons:Hn,subPower:vn}}},Et=async P=>{P.preventDefault();const ee=C.find(Ie=>Ie.id===n),te=Fe(),ce={id:Date.now(),recordDate:L.date,timestamp:new Date().toLocaleTimeString("fr-FR"),siteId:n,siteName:ee.name,siteType:ee.type,...L,...te};try{await $l(kn("steg_logs"),ce),m({msg:"Relev enregistr dans le Cloud",type:"success"}),z(Ie=>({...Ie,lastIndex:L.newIndex,newIndex:"",...ee.type==="BT_PV"?{lastIndexPv:L.newIndexPv,newIndexPv:"",previousBalance:te.newCarryOver}:{},cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:"",manualLastIndex:!1}))}catch{m({msg:"Erreur sauvegarde",type:"error"})}setTimeout(()=>m(null),3e3)},B=Fe(),O=s.filter(P=>P.siteId===n),R=C.find(P=>P.id===n),M=R.type.startsWith("BT"),G=R.type==="MT",W=B,Z=R.icon;return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-2 md:mb-0",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:l.jsx(Du,{size:20})}),l.jsx("div",{className:`p-2 rounded-lg ${M?"bg-red-50 text-red-600":"bg-blue-50 text-blue-900"}`,children:l.jsx(Z,{size:24})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-black text-slate-800 tracking-tight leading-none uppercase",children:["Facturation ",R.name]}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-500 mt-1",children:[l.jsx("span",{className:`px-2 py-0.5 rounded font-bold uppercase tracking-wider text-[9px] ${M?"bg-red-600 text-white":"bg-blue-900 text-white"}`,children:M?"BASSE TENSION":"MOYENNE TENSION"}),l.jsxs("span",{className:"flex items-center",children:[l.jsx(Xl,{size:10,className:"mr-1"})," ",R.code]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(Kx,{darkText:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[l.jsx(Ql,{size:16,className:"mr-2"})," Guide"]}),G&&l.jsxs("button",{onClick:()=>u(!0),className:"flex items-center bg-blue-50 hover:bg-blue-100 px-3 py-2 rounded-lg text-xs font-bold text-blue-600 transition-colors border border-blue-100",children:[l.jsx(d0,{size:16,className:"mr-2"})," Cos "]})]})]})]})}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-4xl w-full shadow-2xl relative overflow-hidden h-[80vh] flex flex-col",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[l.jsx(Ql,{className:"mr-3 text-blue-900",size:28})," Guide de Collecte"]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Procdures physiques pour les relevs d'index"})]}),l.jsx("button",{onClick:()=>h(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:l.jsx(qs,{size:20,className:"text-slate-600"})})]}),l.jsxs("div",{className:"overflow-y-auto flex-1 space-y-8 pr-2",children:[l.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200",children:[l.jsxs("h4",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[l.jsx(c0,{className:"mr-2"})," Compteurs Moyenne Tension (MT)"]}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Mgrine, El Khadhra, Naassen."}),l.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-900",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Procdure de Relev"}),l.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed text-justify",children:["Pour la lecture des donnes du compteur, Appuyer brivement sur le bouton poussoir suprieur (Disp.) pour faire apparatre le contrle display puis Appuyer brivement une seconde fois, l'indication ST-DATA s'affiche.",l.jsx("br",{}),l.jsx("br",{}),"Ensuite, Appuyer et maintenir la pression, jusqu' l'apparition du premier affichage (ncompteur).",l.jsx("br",{}),l.jsx("br",{}),"Puis, une brve impulsion sur ce mme bouton fait avancer d'un pas le dfilement des index. A la fin de la liste, END s'affiche."]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Codes OBIS  Relever"}),l.jsxs("ul",{className:"text-xs text-slate-500 space-y-1 font-mono",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"1.8.0"})," : Cumul nergie Active (kWh) [Puissance]"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Ractif"})," : (Index Energie Ractive)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Cos Phi"})," : Relever le facteur de puissance affich"]}),l.jsx("li",{className:"text-slate-400 italic",children:"(Pas de relev Soir/Nuit ni Pointe requis)"})]})]})]})]}),l.jsxs("div",{className:"bg-orange-50 p-6 rounded-xl border border-orange-200",children:[l.jsxs("h4",{className:"text-lg font-bold text-orange-800 mb-4 flex items-center",children:[l.jsx(Lc,{className:"mr-2"})," Photovoltaque & BT"]}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Showroom Lac (BT+PV)."}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-100",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-1",children:"Compteur STEG Bidirectionnel"}),l.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Ce compteur affiche deux sens de flux :"}),l.jsxs("ul",{className:"text-xs text-slate-500 list-disc pl-5",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Code 1.8.0"})," : Consommation prise du rseau (Import)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Code 2.8.0"})," : Surplus inject dans le rseau (Export)."]})]})]})})]})]})]})}),o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>u(!1),children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-3xl w-full shadow-2xl relative overflow-hidden",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-start mb-8",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[l.jsx(d0,{className:"mr-3 text-blue-600",size:28})," Comprendre le Cos "]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Impact sur la facturation et l'efficacit nergtique"})]}),l.jsx("button",{onClick:()=>u(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:l.jsx(qs,{size:20,className:"text-slate-600"})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider px-1",children:[l.jsx("span",{className:"text-red-600",children:"Pnalit"}),l.jsx("span",{className:"text-slate-500",children:"Neutre"}),l.jsx("span",{className:"text-emerald-600",children:"Bonus"})]}),l.jsxs("div",{className:"h-12 w-full rounded-xl flex overflow-hidden shadow-inner border border-slate-200 relative",children:[l.jsx("div",{className:"w-[40%] bg-red-100 flex items-center justify-center text-red-700 font-bold text-xs border-r border-white",title:"< 0.8",children:"< 0.80"}),l.jsx("div",{className:"w-[30%] bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-xs border-r border-white",title:"0.8 - 0.9",children:"0.8 - 0.90"}),l.jsx("div",{className:"w-[30%] bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-xs",title:"> 0.9",children:"> 0.90"})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1 font-mono",children:[l.jsx("span",{children:"0.50"}),l.jsx("span",{children:"0.80"}),l.jsx("span",{children:"0.90"}),l.jsx("span",{children:"1.00"})]})]}),l.jsx("div",{className:"text-sm text-slate-600 bg-blue-50 p-4 rounded-xl border border-blue-100",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Note :"})," Le Cosinus Phi mesure l'efficacit de votre installation. Un mauvais Cos  (infrieur  0.8) entrane une facturation de l'nergie ractive par la STEG. Assurez-vous que vos batteries de condensateurs fonctionnent correctement."]})})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[l.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(P=>l.jsxs("button",{onClick:()=>r(P.id),className:`p-3 rounded-xl border text-xs font-bold transition-all flex flex-col items-center justify-center text-center h-20 group relative overflow-hidden
                            ${n===P.id?P.type.startsWith("BT")?"bg-red-600 text-white shadow-lg border-red-600":"bg-blue-900 text-white shadow-lg border-blue-900":"bg-white text-slate-500 border-slate-200 hover:border-blue-200 hover:bg-slate-50"}`,children:[l.jsx(P.icon,{size:20,className:`mb-1 transition-transform ${n===P.id?"opacity-100":"opacity-60 group-hover:scale-110"}`}),l.jsx("span",{children:P.name})]},P.id))}),l.jsxs("form",{onSubmit:Et,className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 space-y-6 relative overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center",children:[l.jsx(Yl,{className:"mr-2 text-slate-400",size:20})," Priode de Facturation"]}),l.jsx("input",{type:"month",value:L.date,onChange:P=>z({...L,date:P.target.value}),className:"bg-slate-50 border border-slate-200 rounded px-3 py-1.5 font-bold text-slate-700 cursor-pointer focus:ring-2 focus:ring-blue-900 outline-none"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[l.jsx(eu,{size:12,className:"mr-1"})," Index Actif"]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3 relative",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"flex justify-between text-xs font-bold text-slate-500 mb-1",children:["Ancien Index",e==="ADMIN"&&l.jsx(UA,{size:12,className:"cursor-pointer text-slate-400 hover:text-blue-900",onClick:()=>S(!y)})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:x(L.lastIndex),onChange:P=>b("lastIndex",P.target.value),readOnly:e!=="ADMIN"&&!y,className:`w-full border rounded p-2 text-sm font-mono ${e!=="ADMIN"&&!y?"bg-slate-200 text-slate-500":"bg-white border-orange-300"}`}),e!=="ADMIN"&&!y&&l.jsx(f0,{size:12,className:"absolute right-3 top-3 text-slate-400"})]}),y&&l.jsxs("p",{className:"text-[10px] text-orange-600 mt-1 flex items-center",children:[l.jsx(li,{size:10,className:"mr-1"})," Modification manuelle active"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-blue-900 mb-1 block",children:"Nouvel Index *"}),l.jsx("input",{type:"text",required:!0,value:x(L.newIndex),onChange:P=>b("newIndex",P.target.value),className:"w-full text-lg border-2 border-blue-200 rounded p-2 font-mono focus:border-blue-900 outline-none"})]}),l.jsxs("div",{className:"text-right text-xs font-bold text-blue-600",children:["Conso: ",v(B.consumptionGrid||B.energyRecorded)," kWh"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[M?l.jsx(Lc,{size:12,className:"mr-1"}):l.jsx(Jl,{size:12,className:"mr-1"}),M?"Photovoltaque & Solde":"Paramtres Techniques"]}),R.type==="BT_PV"?l.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Ancien PV"}),l.jsx("input",{type:"text",value:x(L.lastIndexPv),onChange:P=>b("lastIndexPv",P.target.value),className:"w-full text-xs p-1 border rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Nouveau PV"}),l.jsx("input",{type:"text",value:x(L.newIndexPv),onChange:P=>b("newIndexPv",P.target.value),className:"w-full text-xs p-1 border rounded font-mono"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-600",children:"Solde N-1"}),l.jsx("input",{type:"text",value:x(L.previousBalance),onChange:P=>b("previousBalance",P.target.value),className:"w-full text-sm p-2 border rounded"})]})]}):R.type==="MT"?l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Cos  *"}),l.jsx("input",{type:"number",step:"0.01",required:!0,value:L.cosPhi,onChange:P=>b("cosPhi",P.target.value),className:"w-full border p-2 rounded text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"P. Max (kVA) *"}),l.jsx("input",{type:"number",required:!0,value:L.maxPower,onChange:P=>b("maxPower",P.target.value),className:"w-full border p-2 rounded text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Ractif (kVarh)"}),l.jsx("input",{type:"number",value:L.reactiveCons,onChange:P=>b("reactiveCons",P.target.value),className:"w-full border p-2 rounded text-sm"})]})]}):l.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 text-xs text-slate-500 text-center italic",children:"Site BT Standard - Paramtres fixes appliqus."})]})]}),l.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[l.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Frais & Ajustements"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Retard",value:L.lateFees,onChange:P=>b("lateFees",P.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Relance",value:L.relanceFees,onChange:P=>b("relanceFees",P.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Ajustement",value:L.adjustment,onChange:P=>b("adjustment",P.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]})]})]}),l.jsxs("button",{type:"submit",className:`w-full text-white font-bold py-3 rounded-xl shadow-lg transition-transform active:scale-95 flex items-center justify-center ${M?"bg-red-600 hover:bg-red-700":"bg-blue-900 hover:bg-blue-800"}`,children:[l.jsx(qx,{size:18,className:"mr-2"})," Valider & Sauvegarder"]})]}),l.jsxs("div",{className:"bg-slate-100 rounded-xl border border-slate-200 overflow-hidden",children:[l.jsxs("button",{onClick:()=>V(!N),className:"w-full px-6 py-3 flex justify-between items-center text-xs font-bold text-slate-500 uppercase hover:bg-slate-200",children:[l.jsxs("span",{children:[l.jsx(Jl,{size:14,className:"inline mr-2"})," Configuration Avance (",M?"BT":"MT",")"]}),N?l.jsx(GA,{size:14,className:"text-red-500"}):l.jsx(f0,{size:14})]}),N&&l.jsx("div",{className:"p-4 bg-white border-t border-slate-200 animate-in slide-in-from-top-2",children:M?l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-xs",children:[l.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-red-800 uppercase tracking-widest border-b pb-1",children:"Paramtres Basse Tension"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix kWh BT"}),l.jsx("input",{type:"number",value:j.unitPriceKwhBT,onChange:P=>A("unitPriceKwhBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Redevance Fixe"}),l.jsx("input",{type:"number",value:j.fixedFeesBT,onChange:P=>A("fixedFeesBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Services"}),l.jsx("input",{type:"number",value:j.servicesBT,onChange:P=>A("servicesBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Taxe CL (Taux)"}),l.jsx("input",{type:"number",value:j.taxCLRate,onChange:P=>A("taxCLRate",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Elec (Taux)"}),l.jsx("input",{type:"number",value:j.taxFTERate,onChange:P=>A("taxFTERate",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Gaz (Montant)"}),l.jsx("input",{type:"number",value:j.fteGazBT,onChange:P=>A("fteGazBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]})]}):l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[l.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-blue-900 uppercase tracking-widest border-b pb-1",children:"Paramtres Moyenne Tension"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"P. Souscrite (kVA)"}),l.jsx("input",{type:"number",value:I[n].subscribedPower,onChange:P=>T("subscribedPower",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix nergie (DT/kWh)"}),l.jsx("input",{type:"number",value:j.unitPriceKwh,onChange:P=>A("unitPriceKwh",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix Puissance (DT/kVA)"}),l.jsx("input",{type:"number",value:j.powerUnitPrice,onChange:P=>A("powerUnitPrice",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"TVA (%)"}),l.jsx("input",{type:"number",value:j.vatRate,onChange:P=>A("vatRate",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Pnalit Dpassement"}),l.jsx("input",{type:"number",value:j.powerOverrunPenalty,onChange:P=>A("powerOverrunPenalty",P.target.value),className:"border p-1 w-full rounded font-mono bg-red-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Pertes  Vide (kWh)"}),l.jsx("input",{type:"number",value:I[n].emptyLosses,onChange:P=>T("emptyLosses",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"RTT (DT)"}),l.jsx("input",{type:"number",value:j.rtt,onChange:P=>A("rtt",P.target.value),className:"border p-1 w-full rounded font-mono"})]})]})})]})]}),l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-lg border transition-all duration-300 relative overflow-hidden ${M?"border-red-200 ring-2 ring-red-50":"border-blue-200 ring-2 ring-blue-50"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:M?l.jsx(Lc,{size:100}):l.jsx(eu,{size:100})}),l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-100 pb-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-bold uppercase ${M?"text-red-600":"text-blue-900"}`,children:M?"FACTURE BT":"FACTURE MT"}),l.jsx("p",{className:"text-xs text-slate-400",children:R.name})]}),l.jsx("div",{className:"text-right",children:l.jsx("p",{className:"text-xs text-slate-400 font-mono",children:L.date})})]}),l.jsxs("div",{className:"space-y-3 text-sm",children:[R.type==="BT_PV"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-slate-600",children:[l.jsx("span",{children:"Conso Rseau"}),l.jsxs("span",{className:"font-mono",children:[v(W.consumptionGrid)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-orange-600",children:[l.jsx("span",{children:"Prod Photovoltaque"}),l.jsxs("span",{className:"font-mono",children:["-",v(W.productionPv)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-slate-500 text-xs bg-slate-50 p-1 rounded",children:[l.jsx("span",{children:"Solde N-1"}),l.jsxs("span",{className:"font-mono",children:[v(W.prevBalance)," kWh"]})]}),l.jsxs("div",{className:`flex justify-between font-bold p-2 rounded ${W.totalBalance>0?"bg-red-50 text-red-700":"bg-emerald-50 text-emerald-700"}`,children:[l.jsx("span",{children:"Solde Final"}),l.jsxs("span",{children:[v(W.totalBalance)," kWh"]})]}),W.totalBalance<=0?l.jsx("div",{className:"text-xs text-center text-emerald-600 italic",children:"Crdit report au mois prochain"}):l.jsxs("div",{className:"flex justify-between text-slate-800 font-bold border-t pt-2",children:[l.jsxs("span",{children:["Factur (",v(W.billedKwh)," kWh)"]}),l.jsx("span",{children:_(W.consoAmountHT)})]})]}),l.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Redevances Fixes"}),l.jsx("span",{children:_(W.fixedAmountHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (TVA, CL, FTE)"}),l.jsx("span",{children:_(W.totalFinalTTC-(W.consoAmountHT+W.fixedAmountHT))})]})]})]}):M?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:l.jsxs("div",{className:"flex justify-between font-bold text-slate-700",children:[l.jsxs("span",{children:["Conso (",v(W.consumptionGrid)," kWh)"]}),l.jsx("span",{children:_(W.consoAmountHT)})]})}),l.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Redevances (Fixe + Serv)"}),l.jsx("span",{children:_(W.fixedAmountHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (TVA,CL,FTE)"}),l.jsx("span",{children:_(W.totalFinalTTC-W.totalHT)})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:[l.jsxs("div",{className:"flex justify-between text-slate-600",children:[l.jsx("span",{children:"nergie Enregistre"}),l.jsxs("span",{className:"font-mono",children:[v(W.energyRecorded)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-slate-500 text-xs pl-2",children:[l.jsx("span",{children:"+ Pertes"}),l.jsx("span",{className:"font-mono",children:v(W.billedKwh-W.energyRecorded)})]}),l.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mt-1 bg-slate-50 px-2 py-1 rounded",children:[l.jsx("span",{children:"Factur"}),l.jsx("span",{children:_(W.baseEnergyAmountHT)})]})]}),l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-1 pt-2",children:[l.jsxs("div",{className:`flex justify-between text-xs ${W.cosPhiAdjustmentAmount>0?"text-red-600":"text-emerald-600"}`,children:[l.jsx("span",{children:"Ajustement Cos "}),l.jsx("span",{children:_(W.cosPhiAdjustmentAmount)})]}),l.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[l.jsxs("span",{children:["Prime Fixe (",W.subPower,"kVA x ",v(j.powerUnitPrice),")"]}),l.jsx("span",{children:_(W.powerPremium)})]}),W.powerOverrunAmount>0&&l.jsxs("div",{className:"flex justify-between text-xs text-red-600 font-bold bg-red-50 p-1 rounded",children:[l.jsxs("span",{children:["Pnalit Puissance (",v(W.powerOverrun)," kVA x ",j.powerOverrunPenalty,")"]}),l.jsx("span",{children:_(W.powerOverrunAmount)})]})]}),l.jsxs("div",{className:"text-xs text-slate-500 pt-2 space-y-1 border-t mt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total nergie TTC"}),l.jsx("span",{children:_(W.total1_TTC)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Fixe TTC"}),l.jsx("span",{children:_(W.total2_TTC)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (RTT+Muni)"}),l.jsx("span",{children:_(j.rtt+W.municipalTax)})]})]})]}),(parseFloat(L.lateFees)>0||parseFloat(L.relanceFees)>0||parseFloat(L.adjustment)!==0)&&l.jsxs("div",{className:"pt-2 text-xs text-orange-600 border-t mt-2 flex justify-between font-bold",children:[l.jsx("span",{children:"Frais & Ajustements"}),l.jsx("span",{children:_((parseFloat(L.lateFees)||0)+(parseFloat(L.relanceFees)||0)+(parseFloat(L.adjustment)||0))})]})]}),l.jsx("div",{className:"mt-6 border-t-2 border-slate-800 pt-4",children:l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("span",{className:"text-lg font-black text-slate-900 uppercase",children:"Net  Payer"}),l.jsx("span",{className:`text-3xl font-black font-mono tracking-tight ${M?"text-red-700":"text-blue-900"}`,children:_(W.netToPay)})]})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 h-[400px] flex flex-col",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center",children:[l.jsx(rh,{size:12,className:"mr-1"})," Historique Cloud"]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:O.map(P=>l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 text-xs hover:bg-blue-50 transition-colors",children:[l.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mb-1",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(Yl,{size:12,className:"mr-1"})," ",P.recordDate]}),l.jsx("span",{className:"text-blue-600",children:_(P.netToPay)})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[10px] text-slate-500 mt-2 border-t pt-2 border-slate-200",children:[l.jsxs("div",{children:["Conso: ",l.jsx("span",{className:"font-mono text-slate-700",children:v(P.type==="MT"?P.energyRecorded:P.consumptionGrid)})," kWh"]}),l.jsx("div",{children:P.type==="MT"?`P.Max: ${P.maxPower} kVA`:P.type==="BT_PV"?`PV: ${v(P.productionPv)}`:"Standard"}),P.type==="MT"&&l.jsxs("div",{children:["Cos : ",l.jsx("span",{className:P.cosPhi<.8?"text-red-500 font-bold":"text-emerald-600",children:P.cosPhi})]}),P.type==="MT"&&P.reactiveCons>0&&l.jsxs("div",{children:["Ractif: ",P.reactiveCons]})]})]},P.docId))})]})]})]}),p&&l.jsx("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl",children:p.msg})]})},ek=({onBack:t,userRole:e})=>{const[n,r]=X.useState(1),[s,i]=X.useState([]),[o,u]=X.useState(null),[c,h]=X.useState(!1),[p,m]=X.useState(null),[y,S]=X.useState(w(new Date)),[C,j]=X.useState(!1),[U,I]=X.useState({elecPrice:.291,offLoadFactor:.3});function w(B){B=new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate())),B.setUTCDate(B.getUTCDate()+4-(B.getUTCDay()||7));var O=new Date(Date.UTC(B.getUTCFullYear(),0,1)),R=Math.ceil(((B-O)/864e5+1)/7);return`${B.getUTCFullYear()}-W${R}`}X.useEffect(()=>{const B=Cu(kn("air_logs"),ax("id","desc")),O=Of(B,R=>{i(R.docs.map(M=>({...M.data(),docId:M.id})))});return()=>O()},[]);const N=[{id:1,name:"Compresseur 1",serial:"CAI 827281",model:"Ceccato CSB 30",power:22},{id:2,name:"Compresseur 2",serial:"CAI 808264",model:"Ceccato CSB 30",power:22}],V={oilFilter:2e3,airFilter:2e3,separator:2e3,oil:2e3,general:500},L={oilFilter:"Filtre  Huile",airFilter:"Filtre  Air",separator:"Sparateur",oil:"Huile",general:"Inspection"},z={oilFilter:DA,airFilter:Zl,separator:u0,oil:u0,general:jA},[_,v]=X.useState({1:{lastRun:19960,newRun:"",lastLoad:10500,newLoad:"",description:"",lastMaint:{oilFilter:19960,airFilter:19960,separator:19960,oil:19960,general:19960}},2:{lastRun:18500,newRun:"",lastLoad:9200,newLoad:"",description:"",lastMaint:{oilFilter:18500,airFilter:18500,separator:18500,oil:18500,general:18500}}});X.useEffect(()=>{const B=s.filter(O=>O.compName===N.find(R=>R.id===n).name);if(B.length>0){const O=B.find(W=>W.type==="WEEKLY_REPORT"),R=O?O.newRun:_[n].lastRun,M=O?O.newLoad:_[n].lastLoad,G={..._[n].lastMaint};Object.keys(V).forEach(W=>{const Z=B.find(P=>P.type==="MAINTENANCE"&&P.maintType===L[W]);Z&&(G[W]=Z.indexDone)}),v(W=>({...W,[n]:{...W[n],lastRun:R,lastLoad:M,lastMaint:G}}))}},[n,s]);const x=(B,O)=>v(R=>({...R,[n]:{...R[n],[B]:O}})),E=()=>{const B=_[n],O=N.find(te=>te.id===n),R=Math.max(0,(parseFloat(B.newRun)||0)-(parseFloat(B.lastRun)||0)),M=Math.max(0,(parseFloat(B.newLoad)||0)-(parseFloat(B.lastLoad)||0)),G=R>0?M/R*100:0,W=R/47.5*100,Z=M*O.power+(R-M)*O.power*U.offLoadFactor,P=parseFloat(B.newRun)||parseFloat(B.lastRun)||0,ee={};return Object.keys(V).forEach(te=>{const Ie=(B.lastMaint[te]||0)+V[te]-P;ee[te]={remaining:Ie}}),{runDelta:R,loadDelta:M,loadRate:G,utilRate:W,energyKwh:Z,costHT:Z*U.elecPrice,maintStatus:ee}},b=async()=>{const B=E(),O=_[n];if(!O.newRun){m("Index manquant");return}const R={id:Date.now(),type:"WEEKLY_REPORT",week:y,compName:N.find(M=>M.id===n).name,...O,...B};await $l(kn("air_logs"),R),v(M=>({...M,[n]:{...M[n],lastRun:O.newRun,newRun:"",lastLoad:O.newLoad,newLoad:"",description:""}})),m("Enregistr"),setTimeout(()=>m(null),3e3)},A=(B,O)=>{const R=parseFloat(_[n].newRun)||parseFloat(_[n].lastRun),M={..._[n].lastMaint,[B]:R};v(W=>({...W,[n]:{...W[n],lastMaint:M}}));const G={id:Date.now(),type:"MAINTENANCE",date:new Date().toLocaleDateString(),compName:N.find(W=>W.id===n).name,maintType:L[B],indexDone:R,details:O};$l(kn("air_logs"),G),u(null),m("Maintenance valide")},T=E(),Fe=(B,O)=>B<=0?"text-red-600 font-bold":B<O*.2?"text-amber-500 font-bold":"text-emerald-600",Et=(B,O)=>B<=0?"bg-red-600":B<O*.2?"bg-amber-500":"bg-emerald-500";return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-2 md:mb-0",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:l.jsx(Du,{size:20})}),l.jsx(na,{size:"h-8"}),l.jsx("div",{className:"w-px h-8 bg-slate-200"}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-black text-blue-900 flex items-center",children:[l.jsx(Zl,{className:"mr-2",size:20})," Air Comprim"]}),l.jsxs("div",{className:"flex items-center text-xs text-slate-500 mt-1",children:[l.jsx(Xl,{size:10,className:"mr-1"})," Site Mgrine",l.jsx("span",{className:"mx-2",children:""}),l.jsx(Yl,{size:10,className:"mr-1"})," Semaine ",y.split("-W")[1]," ",y.split("-W")[0]]})]})]}),l.jsx("div",{className:"flex gap-4",children:l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[l.jsx(Ql,{size:16,className:"mr-2"})," Guide & Consignes"]})})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 shadow-2xl relative",onClick:B=>B.stopPropagation(),children:[l.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:""}),l.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center text-lg",children:[l.jsx(Ql,{className:"mr-2 text-blue-900"})," Instructions ES3000"]}),l.jsxs("div",{className:"space-y-6 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[l.jsxs("h4",{className:"font-bold text-blue-900 mb-3 flex items-center",children:[l.jsx(Vc,{size:16,className:"mr-2"})," Navigation Contrleur"]}),l.jsxs("ol",{className:"text-sm text-slate-600 space-y-3 list-decimal pl-5",children:[l.jsxs("li",{children:["L'cran affiche par dfaut la ",l.jsx("strong",{children:"Pression de sortie"}),"."]}),l.jsxs("li",{children:["Appuyez sur la flche ",l.jsx("strong",{children:"DROITE"})," (Tab) pour faire dfiler le menu principal."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Heures Totales :"})," Cherchez le symbole  (Horloge pleine). Notez la valeur."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Heures en Charge :"})," Continuez de dfiler jusqu'au symbole  (Piston/clair). C'est le temps de travail effectif."]}),l.jsxs("li",{children:["Pour revenir, appuyez sur ",l.jsx("strong",{children:"C (Cancel)"})," ou attendez 30s."]})]})]}),l.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[l.jsxs("h4",{className:"font-bold text-orange-900 mb-3 flex items-center",children:[l.jsx(li,{size:16,className:"mr-2"})," Bonnes Pratiques & Scurit"]}),l.jsxs("ul",{className:"text-sm text-slate-700 space-y-2 list-disc pl-5",children:[l.jsx("li",{children:"Vrifier le niveau d'huile visuel avant chaque dmarrage ou relev (hublot latral)."}),l.jsx("li",{children:"couter s'il y a des bruits anormaux ou des fuites d'air audibles lors de la mise en charge."}),l.jsx("li",{children:"Purger le rservoir d'air quotidiennement si la purge auto est dfaillante."}),l.jsx("li",{children:"Ne jamais ouvrir le capot machine en marche."})]})]})]})]})}),l.jsxs("main",{className:"p-8 max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[l.jsx("div",{className:"flex gap-2",children:N.map(B=>l.jsxs("button",{onClick:()=>r(B.id),className:`flex-1 p-4 rounded-xl border text-left transition-all ${n===B.id?"bg-white border-blue-900 shadow-md ring-1 ring-blue-900":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[l.jsx("div",{className:"font-bold text-slate-700",children:B.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[B.model," - ",B.serial]})]},B.id))}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("h2",{className:"font-bold flex items-center text-slate-800",children:[l.jsx(WA,{className:"mr-2 text-blue-900"})," Saisie Relev"]}),l.jsxs("div",{className:"flex items-center text-sm bg-slate-100 px-3 py-1 rounded-lg",children:[l.jsx("span",{className:"font-bold text-slate-500 mr-2",children:"Semaine :"}),l.jsx("input",{type:"week",value:y,onChange:B=>S(B.target.value),className:"bg-transparent font-bold text-slate-800 outline-none cursor-pointer"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Heures Marche"}),e==="ADMIN"&&l.jsx("button",{onClick:()=>j(!C),className:"text-[10px] text-blue-900 hover:underline",children:"Modifier Prcdent"})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),l.jsx("input",{type:"number",readOnly:!C,className:`w-full text-xs bg-transparent font-mono ${C?"border rounded bg-white p-1":""}`,value:_[n].lastRun||"",onChange:B=>x("lastRun",B.target.value)})]}),l.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:_[n].newRun||"",onChange:B=>x("newRun",B.target.value)})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block uppercase",children:"Heures Charge"}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),l.jsx("input",{type:"number",readOnly:!C,className:`w-full text-xs bg-transparent font-mono ${C?"border rounded bg-white p-1":""}`,value:_[n].lastLoad||"",onChange:B=>x("lastLoad",B.target.value)})]}),l.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:_[n].newLoad||"",onChange:B=>x("newLoad",B.target.value)})]})]}),l.jsx("textarea",{className:"w-full border p-3 rounded-lg text-sm mb-2 focus:border-blue-900 outline-none",rows:"3",placeholder:"Note / Observation sur l'tat du compresseur...",value:_[n].description,onChange:B=>x("description",B.target.value)})]})]}),l.jsx("div",{className:"lg:col-span-5 space-y-6",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden",children:[l.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center border-b pb-2",children:[l.jsx(Vc,{className:"mr-2 text-blue-900"})," Analyse Performance"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-emerald-50 p-3 rounded-xl border border-emerald-100",children:[l.jsx("div",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-1",children:"Taux Charge"}),l.jsxs("div",{className:"font-black text-2xl text-emerald-800",children:[T.loadRate.toFixed(1),"%"]}),l.jsx("div",{className:"w-full bg-emerald-200 h-1.5 rounded-full mt-2 overflow-hidden",children:l.jsx("div",{className:"bg-emerald-600 h-full rounded-full transition-all duration-500",style:{width:`${T.loadRate}%`}})})]}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100",children:[l.jsx("div",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-wider mb-1",children:"Taux Utilisation"}),l.jsxs("div",{className:"font-black text-2xl text-blue-800",children:[T.utilRate.toFixed(1),"%"]}),l.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"Base hebdo 47.5h"})]})]}),l.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg border border-slate-200 mb-6",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Cot lec. Estim"}),l.jsxs("span",{className:"font-mono font-black text-slate-800 text-lg",children:[T.costHT.toFixed(0)," ",l.jsx("span",{className:"text-xs",children:"DT"})]})]}),l.jsxs("button",{onClick:b,className:"w-full bg-blue-900 text-white py-3 rounded-xl font-bold hover:bg-blue-800 shadow-lg transition-all flex items-center justify-center",children:[l.jsx(co,{size:18,className:"mr-2"})," Valider Relev"]})]})}),l.jsx("div",{className:"lg:col-span-12",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center",children:[l.jsx(Oc,{className:"mr-2 text-red-600"})," Tableau de Maintenance"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4",children:Object.keys(V).map(B=>{const O=z[B],R=T.maintStatus[B].remaining,M=V[B],G=R<M*.2;return l.jsxs("div",{className:`flex flex-col p-4 border rounded-xl hover:shadow-lg transition-all relative overflow-hidden group ${G?"bg-red-50 border-red-200":"bg-slate-50"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:l.jsx(O,{size:40})}),l.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:L[B]}),l.jsxs("div",{className:`text-xl font-black mb-2 ${Fe(R,M)}`,children:[R," h"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mb-2 overflow-hidden",children:l.jsx("div",{className:`h-full ${Et(R,M)}`,style:{width:`${Math.min(100,R/M*100)}%`}})}),G&&l.jsxs("div",{className:"text-[10px] text-red-600 font-bold mb-2 flex items-center",children:[l.jsx(li,{size:10,className:"mr-1"})," Planifier"]}),l.jsx("button",{onClick:()=>u(B),className:"mt-auto w-full py-2 bg-white border border-slate-200 rounded text-xs font-bold hover:bg-slate-800 hover:text-white transition-colors",children:"Faire Maint."})]},B)})})]})}),l.jsx("div",{className:"lg:col-span-12",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center tracking-wider",children:[l.jsx(MA,{size:16,className:"mr-2"})," Historique Dtaill"]}),l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold uppercase text-xs",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 rounded-l-lg",children:"Date / Semaine"}),l.jsx("th",{className:"p-3",children:"Type"}),l.jsx("th",{className:"p-3",children:"Dtails / Index"}),l.jsx("th",{className:"p-3",children:"Technicien"}),l.jsx("th",{className:"p-3 text-right rounded-r-lg",children:"Cot / Statut"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:s.filter(B=>B.compName===N.find(O=>O.id===n).name).sort((B,O)=>O.id-B.id).map(B=>{var O,R,M;return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsx("td",{className:"p-3 font-medium text-slate-700",children:B.type==="MAINTENANCE"?B.date:`Semaine ${((O=B.week)==null?void 0:O.split("-W")[1])||"?"}`}),l.jsx("td",{className:"p-3",children:B.type==="MAINTENANCE"?l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-amber-100 text-amber-700 text-xs font-bold",children:[l.jsx(Oc,{size:10,className:"mr-1"})," ",B.maintType]}):l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-700 text-xs font-bold",children:[l.jsx(Vc,{size:10,className:"mr-1"})," Relev"]})}),l.jsx("td",{className:"p-3 text-slate-600 text-xs",children:B.type==="MAINTENANCE"?`Effectu  ${B.indexDone} h`:`Marche: ${B.newRun}h | Charge: ${B.newLoad}h`}),l.jsx("td",{className:"p-3 text-slate-500 text-xs font-mono",children:B.type==="MAINTENANCE"?(R=B.details)==null?void 0:R.tech:"-"}),l.jsx("td",{className:"p-3 text-right font-bold",children:B.type==="MAINTENANCE"?l.jsx("span",{className:"text-emerald-600",children:"OK"}):l.jsxs("span",{className:"text-slate-700",children:[(M=B.costHT)==null?void 0:M.toFixed(0)," DT"]})})]},B.docId)})})]}),s.length===0&&l.jsx("div",{className:"text-center p-8 text-slate-400 italic",children:"Aucun historique disponible"})]})]})})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm shadow-2xl transform transition-all scale-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-100 pb-3",children:[l.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[l.jsx(Oc,{className:"mr-2 text-red-600",size:20})," Validation Maint."]}),l.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600",children:l.jsx(qs,{size:20})})]}),l.jsxs("div",{className:"mb-4 text-sm text-slate-600 bg-amber-50 p-3 rounded-lg border border-amber-100",children:["Vous validez la maintenance : ",l.jsx("strong",{children:L[o]})]}),l.jsxs("form",{onSubmit:B=>{B.preventDefault();const O=new FormData(B.target);A(o,{date:O.get("date"),tech:O.get("tech"),ref:O.get("ref"),notes:O.get("notes")})},children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Date Intervention *"}),l.jsx("input",{name:"date",type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Intervenant / Technicien *"}),l.jsx("input",{name:"tech",placeholder:"Nom du technicien",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rf. Fiche Intervention *"}),l.jsx("input",{name:"ref",placeholder:"ex: FI-2024-001",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Notes / Observations"}),l.jsx("textarea",{name:"notes",placeholder:"Dtails supplmentaires...",className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none",rows:"2"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[l.jsx("button",{type:"button",onClick:()=>u(null),className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-50 rounded-lg transition-colors",children:"Annuler"}),l.jsxs("button",{type:"submit",className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold shadow-lg transition-all flex items-center",children:[l.jsx(PA,{size:18,className:"mr-2"})," Valider"]})]})]})]})}),p&&l.jsxs("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center",children:[l.jsx(co,{className:"mr-2"})," ",p]})]})},tk=({onBack:t})=>{const[e,n]=X.useState([]),[r,s]=X.useState({username:"",password:"",role:"EQUIPE_ENERGIE"}),[i,o]=X.useState(!1),[u,c]=X.useState(null);X.useEffect(()=>{const m=Cu(kn("users")),y=Of(m,S=>{n(S.docs.map(C=>({...C.data(),id:C.id})))});return()=>y()},[]);const h=async m=>{m.preventDefault(),!(!r.username||!r.password)&&(o(!0),await $l(kn("users"),r),s({username:"",password:"",role:"EQUIPE_ENERGIE"}),o(!1))},p=async m=>{if(u===m)try{await bN(Nf(Qf,"artifacts",appId,"public","data","users",m)),c(null)}catch(y){console.error("Erreur suppression:",y)}else c(m),setTimeout(()=>c(null),3e3)};return l.jsxs("div",{className:"min-h-screen bg-slate-100 p-8",children:[l.jsx("header",{className:"max-w-4xl mx-auto mb-8 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:t,className:"mr-4 p-2 bg-white rounded-full shadow hover:bg-slate-50",children:l.jsx(Du,{size:20})}),l.jsx(na,{size:"h-8"}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 ml-4",children:"Administration"})]})}),l.jsxs("main",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 h-fit",children:[l.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-blue-900",children:[l.jsx(BA,{className:"mr-2"})," Ajouter Utilisateur"]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Nom d'utilisateur"}),l.jsx("input",{type:"text",value:r.username,onChange:m=>s({...r,username:m.target.value}),className:"w-full border p-2 rounded",placeholder:"ex: Maintenance"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Mot de passe"}),l.jsx("input",{type:"text",value:r.password,onChange:m=>s({...r,password:m.target.value}),className:"w-full border p-2 rounded",placeholder:"******"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rle"}),l.jsxs("select",{value:r.role,onChange:m=>s({...r,role:m.target.value}),className:"w-full border p-2 rounded bg-white font-bold text-slate-700",children:[l.jsx("option",{value:"ADMIN",children:"Administrateur (Accs Total)"}),l.jsx("option",{value:"EQUIPE_ENERGIE",children:"quipe nergie (Saisie)"}),l.jsx("option",{value:"DIRECTION",children:"Direction (Visuel Uniquement)"})]})]}),l.jsx("button",{disabled:i,className:"w-full bg-blue-900 text-white py-2 rounded font-bold hover:bg-blue-800",children:i?"...":"Ajouter"})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-slate-700",children:[l.jsx(QA,{className:"mr-2"})," Liste Utilisateurs (",e.length,")"]}),l.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:e.map(m=>l.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg hover:bg-slate-50 group",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold",children:m.username}),l.jsx("div",{className:`text-[10px] px-2 py-0.5 rounded w-fit uppercase font-bold 
                                        ${m.role==="ADMIN"?"bg-red-100 text-red-700":m.role==="DIRECTION"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:m.role==="ADMIN"?"Admin":m.role==="DIRECTION"?"Direction":"quipe"})]}),l.jsx("button",{onClick:()=>p(m.id),className:`p-2 rounded transition-all flex items-center ${u===m.id?"bg-red-600 text-white w-24 justify-center text-xs font-bold":"text-slate-300 hover:text-red-600"}`,children:u===m.id?"Confirmer ?":l.jsx(qA,{size:16})})]},m.id))})]})]})]})},nk=({onBack:t,userRole:e})=>{const[n,r]=X.useState("MEGRINE"),[s,i]=X.useState({}),[o,u]=X.useState(!1),[c,h]=X.useState(!1),[p,m]=X.useState(!1),y=new Date;y.setMonth(y.getMonth()-1);const[S,C]=X.useState(y.toISOString().slice(0,7)),[j,U]=X.useState(null),[I,w]=X.useState({MEGRINE:{name:"Mgrine",area:32500,covered:30100,open:2400,glazed:365,coveredBreakdown:[{label:"Zone A (Atelier FIAT)",value:10100},{label:"ITALCAR Gros (Magasin)",value:1e4},{label:"Zone B (Atelier IVECO)",value:9e3},{label:"Showroom & Rception",value:1e3}],energyMix:[{name:"lectricit",value:97,color:"bg-blue-900"},{name:"Gaz",value:3,color:"bg-orange-500"}],elecUsage:[{name:"Clim/Chauffage",value:40,ratio:"35 kWh/m",significant:!0},{name:"clairage",value:27,ratio:"12 kWh/m",significant:!0},{name:"Air Comprim",value:17,ratio:"0.12 kWh/Nm",significant:!0},{name:"Informatique",value:8,ratio:"-",significant:!1},{name:"Services",value:5,ratio:"-",significant:!1},{name:"Gaz (Primaire)",value:3,ratio:"-",significant:!1}]},ELKHADHRA:{name:"El Khadhra",area:9500,covered:7e3,open:2500,glazed:40,coveredBreakdown:[{label:"Atelier FIAT",value:3e3},{label:"ITALCAR Gros",value:3e3},{label:"Rception",value:1e3}],energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Clim/Chauffage",value:60,ratio:"45 kWh/m",significant:!0},{name:"clairage",value:25,ratio:"15 kWh/m",significant:!0},{name:"Air Comprim",value:5,ratio:"-",significant:!1},{name:"Divers",value:10,ratio:"-",significant:!1}]},LAC:{name:"Lac",area:2050,covered:850,open:1200,glazed:116,coveredBreakdown:[{label:"Showroom",value:850}],energyMix:[],elecUsage:[{name:"clairage",value:45,ratio:"22 kWh/m",significant:!0},{name:"Climatisation",value:45,ratio:"25 kWh/m",significant:!0},{name:"Informatique",value:10,ratio:"-",significant:!1}]},NAASSEN:{name:"Naassen",area:32500,covered:1850,open:30680,glazed:0,coveredBreakdown:[{label:"Rception",value:920},{label:"Atelier FIAT",value:900}],energyMix:[{name:"lec",value:100,color:"bg-blue-900"}],elecUsage:[]},CARTHAGE:{name:"Rue de Carthage",area:320,covered:320,open:0,glazed:70,coveredBreakdown:[{label:"Showroom",value:320}],energyMix:[{name:"lec",value:100,color:"bg-blue-900"}],elecUsage:[]},AZUR:{name:"Azur City",area:130,covered:130,open:0,glazed:0,coveredBreakdown:[{label:"Showroom",value:130}],energyMix:[{name:"lec",value:100,color:"bg-blue-900"}],elecUsage:[]}}),N=(O,R,M)=>{w(G=>{const W={...G},Z=W[n],P=[...Z.elecUsage];return P[O]={...P[O],[R]:M},Z.elecUsage=P,W})},V=["REF",2018,2019,2020,2021,2022,2023,2024,2025];X.useEffect(()=>{hx(kn("site_history")).then(O=>{const R={};O.forEach(M=>{const[G,W]=M.id.split("_");R[G]||(R[G]={}),R[G][W]=M.data()}),i(M=>({...M,...R}))})},[]);const L=O=>{if(!s[O]){const R={};V.forEach(M=>{O==="LAC"?R[M]={grid:Array(12).fill(""),pvProd:Array(12).fill(""),pvExport:Array(12).fill("")}:R[M]={months:Array(12).fill("")}}),i(M=>({...M,[O]:R}))}},z=(O,R,M="months")=>{var W;const G=(W=s[O])==null?void 0:W[R];return G&&G[M]||Array(12).fill("")},_=(O,R,M,G="months")=>{i(W=>{const Z=W[n]||{},P=Z[O]||{},ee=P[G]?[...P[G]]:Array(12).fill("");return ee[R]=M,{...W,[n]:{...Z,[O]:{...P,[G]:ee}}}})},v=async()=>{const O=n;if(s[O]){try{for(const R of Object.keys(s[O]))await IN(Nf(Qf,"artifacts",appId,"public","data","site_history",`${O}_${R}`),s[O][R]);U("Historique sauvegard"),u(!1)}catch(R){console.error(R),U("Erreur")}setTimeout(()=>U(null),3e3)}},x=I[n],E=new Date().getFullYear(),b=new Date().getMonth()-1,A=()=>{const O=z(n,"REF",n==="LAC"?"grid":"months"),R=z(n,E,n==="LAC"?"grid":"months");let M=parseFloat(O[b])||0,G=parseFloat(R[b])||0;if(n==="LAC"){const ce=z(n,"REF","pvProd")[b]||0,Ie=z(n,"REF","pvExport")[b]||0,Tt=z(n,E,"pvProd")[b]||0,Bn=z(n,E,"pvExport")[b]||0;M+=Math.max(0,ce-Ie),G+=Math.max(0,Tt-Bn)}const W=M>0?(G-M)/M*100:0;let Z=0,P=0;for(let ce=0;ce<=b;ce++){let Ie=parseFloat(O[ce])||0,Tt=parseFloat(R[ce])||0;if(n==="LAC"){const Bn=parseFloat(z(n,"REF","pvProd")[ce])||0,pn=parseFloat(z(n,"REF","pvExport")[ce])||0,mn=parseFloat(z(n,E,"pvProd")[ce])||0,$n=parseFloat(z(n,E,"pvExport")[ce])||0;Ie+=Math.max(0,Bn-pn),Tt+=Math.max(0,mn-$n)}Z+=Ie,P+=Tt}const ee=Z>0?(P-Z)/Z*100:0,te=new Date(E,b).toLocaleString("fr-FR",{month:"long"});return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-blue-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Performance Mensuelle"}),l.jsxs("div",{className:"text-xl font-black text-slate-800 capitalize mb-4",children:[te," ",E," ",l.jsx("span",{className:"text-sm font-normal text-slate-400",children:"vs Rf."})]}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black text-blue-900",children:[G.toLocaleString()," ",l.jsx("span",{className:"text-sm text-slate-400 font-bold",children:"kWh"})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Rf: ",M.toLocaleString()," kWh"]})]}),l.jsxs("div",{className:`px-4 py-2 rounded-xl font-bold text-lg flex items-center ${W<=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[W>0?l.jsx(al,{size:20,className:"mr-2"}):l.jsx(m0,{size:20,className:"mr-2"}),W>0?"+":"",W.toFixed(1),"%"]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-indigo-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Performance Cumule (YTD)"}),l.jsxs("div",{className:"text-xl font-black text-slate-800 capitalize mb-4",children:["Jan - ",te," ",l.jsx("span",{className:"text-sm font-normal text-slate-400",children:"vs Rf."})]}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black text-indigo-900",children:[P.toLocaleString()," ",l.jsx("span",{className:"text-sm text-slate-400 font-bold",children:"kWh"})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Rf: ",Z.toLocaleString()," kWh"]})]}),l.jsxs("div",{className:`px-4 py-2 rounded-xl font-bold text-lg flex items-center ${ee<=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[ee>0?l.jsx(al,{size:20,className:"mr-2"}):l.jsx(m0,{size:20,className:"mr-2"}),ee>0?"+":"",ee.toFixed(1),"%"]})]})]})]})]})},T=()=>{const O=n==="LAC"?35:0,R=100-O;return l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm h-full flex flex-col justify-between overflow-hidden relative",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[l.jsx(h0,{size:20,className:"text-emerald-500"}),l.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider",children:"Origine nergie"})]}),l.jsx("div",{className:"flex items-center justify-center relative z-10 py-2",children:l.jsxs("div",{className:"relative w-32 h-32",children:[l.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[l.jsx("path",{className:"text-slate-100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.8"}),l.jsx("path",{className:"text-emerald-500",strokeDasharray:`${O}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.8",strokeLinecap:"round"})]}),l.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center",children:[l.jsxs("div",{className:"text-2xl font-black text-slate-800",children:[O,"%"]}),l.jsx("div",{className:"text-[8px] uppercase font-bold text-emerald-600",children:"Renouvelable"})]})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center relative z-10",children:[l.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[l.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Rseau"}),l.jsxs("div",{className:"font-bold text-slate-700",children:[R,"%"]})]}),l.jsxs("div",{className:"bg-emerald-50 p-2 rounded-lg",children:[l.jsx("div",{className:"text-[10px] text-emerald-600 uppercase font-bold",children:"Solaire"}),l.jsxs("div",{className:"font-bold text-emerald-800",children:[O,"%"]})]})]})]})},Fe=()=>l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm h-full relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:l.jsx(nh,{size:120})}),l.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-50 pb-2 relative z-10",children:[l.jsx(Xl,{size:20,className:"text-red-600"}),l.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider",children:"Fiche Technique"})]}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"flex items-baseline mb-4",children:[l.jsx("span",{className:"text-4xl font-black text-slate-800",children:x.area.toLocaleString()}),l.jsx("span",{className:"ml-2 text-sm font-bold text-slate-400",children:"m Totaux"})]}),l.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-200",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Espace Couvert"}),l.jsxs("span",{className:"font-black text-slate-800",children:[x.covered.toLocaleString()," m"]})]}),l.jsx("div",{className:"space-y-1 pl-2",children:x.coveredBreakdown.map((O,R)=>l.jsxs("div",{className:"flex justify-between text-[11px]",children:[l.jsxs("span",{className:"text-slate-500",children:[" ",O.label]}),l.jsxs("span",{className:"font-bold text-slate-600",children:[O.value.toLocaleString()," m"]})]},R))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[l.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-[9px] font-bold text-blue-400 uppercase",children:"Ouvert"}),l.jsxs("div",{className:"font-bold text-blue-900",children:[x.open.toLocaleString()," m"]})]}),l.jsxs("div",{className:"text-center p-2 bg-cyan-50 rounded-lg",children:[l.jsx("div",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Vitre"}),l.jsxs("div",{className:"font-bold text-cyan-900",children:[x.glazed.toLocaleString()," m"]})]})]})]})]}),Et=()=>l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm h-full flex flex-col relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Gx,{size:20,className:"text-amber-500"}),l.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider",children:"Saisonnalit & Impact"})]}),l.jsx("div",{className:"flex-1 flex items-end justify-between gap-1 pb-2 border-b border-slate-100",children:[40,35,30,20,15,25,60,80,70,40,30,45].map((O,R)=>l.jsx("div",{className:"w-full bg-slate-100 rounded-t-sm relative group",children:l.jsx("div",{className:`absolute bottom-0 w-full rounded-t-sm transition-all duration-500 ${O>50?"bg-orange-400":"bg-blue-400"}`,style:{height:`${O}%`}})},R))}),l.jsxs("div",{className:"flex justify-between text-[8px] text-slate-400 font-mono mt-1 uppercase",children:[l.jsx("span",{children:"Jan"}),l.jsx("span",{children:"Juin"}),l.jsx("span",{children:"Dc"})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg",children:[l.jsx(VA,{size:14,className:"text-orange-500"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[9px] font-bold text-slate-500",children:"t (Clim)"}),l.jsx("div",{className:"text-xs font-black text-slate-800",children:"Haute"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg",children:[l.jsx(Zl,{size:14,className:"text-blue-500"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[9px] font-bold text-slate-500",children:"Hiver (Chauff)"}),l.jsx("div",{className:"text-xs font-black text-slate-800",children:"Moyenne"})]})]})]})]}),B=()=>l.jsxs("div",{className:"bg-gradient-to-r from-emerald-900 to-emerald-800 p-6 rounded-2xl shadow-lg mt-8 text-white relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 opacity-10 transform translate-x-10 -translate-y-10",children:l.jsx(h0,{size:200})}),l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center relative z-10",children:[l.jsxs("div",{className:"mb-6 md:mb-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(HA,{className:"text-emerald-400",size:24}),l.jsx("h3",{className:"font-black text-xl uppercase tracking-tight",children:"Empreinte Carbone & Vision"})]}),l.jsx("p",{className:"text-emerald-200 text-sm max-w-md",children:"Objectif de rduction des missions de gaz  effet de serre (GES) align sur la stratgie RSE 2030."}),l.jsxs("div",{className:"mt-6 flex gap-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black",children:["245 ",l.jsx("span",{className:"text-sm font-normal text-emerald-400",children:"tCO2e"})]}),l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-300",children:"missions 2024"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black",children:["170 ",l.jsx("span",{className:"text-sm font-normal text-emerald-400",children:"tCO2e"})]}),l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-300",children:"Cible 2030"})]})]})]}),l.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20 w-full md:w-auto min-w-[200px]",children:[l.jsx("div",{className:"text-xs font-bold uppercase text-emerald-300 mb-2",children:"Progression Global"}),l.jsx("div",{className:"w-full bg-black/20 h-3 rounded-full overflow-hidden mb-2",children:l.jsx("div",{className:"bg-emerald-400 h-full rounded-full",style:{width:"35%"}})}),l.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[l.jsx("span",{children:"Baseline"}),l.jsx("span",{children:"35% Ralis"})]})]})]})]});return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-20 relative font-sans text-slate-600",children:[l.jsx("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-40 border-b border-slate-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:t,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors text-slate-600",children:l.jsx(Du,{size:20})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-xl text-slate-800 tracking-tight",children:"DASHBOARD NERGIE"}),l.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Vision Globale & Performance"})]})]}),l.jsx("div",{className:"flex bg-white rounded-full shadow-sm border border-slate-200 p-1.5 gap-1 mt-4 md:mt-0 overflow-x-auto max-w-full",children:Object.keys(I).map(O=>l.jsxs("button",{onClick:()=>r(O),className:`px-4 py-2 rounded-full text-xs font-bold transition-all flex items-center whitespace-nowrap ${n===O?"bg-blue-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[n===O&&l.jsx(co,{size:12,className:"mr-2"})," ",I[O].name]},O))})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto p-6 animate-in fade-in duration-500",children:[l.jsx(A,{}),l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 mb-8 relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider flex items-center",children:[l.jsx(zA,{className:"mr-2"})," Rpartition des Usages (UES)"]}),e==="ADMIN"&&l.jsx("button",{onClick:()=>h(!0),className:"p-2 bg-slate-50 hover:bg-slate-100 rounded-full text-slate-400 hover:text-blue-900 transition-colors",children:l.jsx(Jl,{size:16})})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.elecUsage.length>0?x.elecUsage.map((O,R)=>l.jsxs("div",{className:"border border-slate-100 rounded-xl p-4 bg-slate-50",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("span",{className:`text-sm ${O.significant?"font-bold text-blue-900":"text-slate-500 font-medium"}`,children:O.name}),l.jsxs("span",{className:"bg-white border px-2 py-0.5 rounded text-xs font-black shadow-sm",children:[O.value,"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full overflow-hidden mb-3",children:l.jsx("div",{className:`h-full ${O.significant?"bg-blue-900":"bg-slate-400"}`,style:{width:`${O.value}%`}})}),l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500",children:[l.jsxs("span",{children:["Ratio: ",l.jsx("b",{children:O.ratio})]}),O.significant&&l.jsxs("span",{className:"text-orange-600 font-bold flex items-center",children:[l.jsx(li,{size:10,className:"mr-1"})," Significatif"]})]})]},R)):l.jsx("div",{className:"col-span-3 text-center py-8 text-slate-400 italic bg-slate-50 rounded-xl border border-dashed",children:"Donnes de rpartition non disponibles pour ce site."})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(Fe,{}),l.jsx(T,{}),l.jsx(Et,{})]}),l.jsx(B,{})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl p-6 shadow-2xl relative",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center",children:[l.jsx(Jl,{className:"mr-2 text-blue-900"})," Configuration Rpartition - ",x.name]}),l.jsx("button",{onClick:()=>h(!1),children:l.jsx(qs,{size:20,className:"text-slate-400 hover:text-slate-600"})})]}),l.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:x.elecUsage.map((O,R)=>l.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center bg-slate-50 p-3 rounded-lg border border-slate-100",children:[l.jsx("div",{className:"col-span-4 font-bold text-sm text-slate-700",children:O.name}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block",children:"Part (%)"}),l.jsx("input",{type:"number",value:O.value,onChange:M=>N(R,"value",parseInt(M.target.value)),className:"w-full p-1 border rounded text-sm font-bold"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block",children:"Ratio"}),l.jsx("input",{type:"text",value:O.ratio,onChange:M=>N(R,"ratio",M.target.value),className:"w-full p-1 border rounded text-xs"})]}),l.jsx("div",{className:"col-span-2 flex justify-center",children:l.jsx("button",{onClick:()=>N(R,"significant",!O.significant),className:`p-2 rounded-full ${O.significant?"bg-orange-100 text-orange-600":"bg-slate-200 text-slate-400"}`,children:l.jsx(li,{size:16})})})]},R))}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:()=>h(!1),className:"bg-blue-900 text-white px-6 py-2 rounded-lg font-bold",children:"Terminer"})})]})}),o&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/40 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-7xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center",children:[l.jsx(rh,{className:"mr-2 text-blue-900"})," Saisie Historique - ",x.name]}),l.jsx("button",{onClick:()=>u(!1),children:l.jsx(qs,{size:20})})]}),l.jsx("div",{className:"overflow-y-auto flex-1 p-6 space-y-8 bg-slate-50/50",children:V.map(O=>l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("span",{className:`font-bold text-sm px-3 py-1 rounded-full ${O==="REF"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:O==="REF"?"BASELINE (Rf)":O}),l.jsx("div",{className:"h-px bg-slate-100 flex-1"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("div",{className:"min-w-max",children:[l.jsx("div",{className:"flex gap-2 mb-2 pl-32",children:["JAN","FV","MAR","AVR","MAI","JUN","JUL","AO","SEP","OCT","NOV","DC"].map(R=>l.jsx("div",{className:"w-20 text-center text-[10px] font-bold text-slate-400",children:R},R))}),n==="LAC"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"w-32 text-xs font-bold text-blue-900 uppercase",children:"Rseau STEG"}),z("LAC",O,"grid").map((R,M)=>l.jsx("input",{type:"number",className:"w-20 p-2 text-center text-xs border rounded focus:border-blue-900 outline-none",placeholder:"-",value:R,onChange:G=>_(O,M,G.target.value,"grid")},M))]}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"w-32 text-xs font-bold text-orange-600 uppercase",children:"Prod. PV"}),z("LAC",O,"pvProd").map((R,M)=>l.jsx("input",{type:"number",className:"w-20 p-2 text-center text-xs border border-orange-200 rounded focus:border-orange-600 outline-none bg-orange-50",placeholder:"-",value:R,onChange:G=>_(O,M,G.target.value,"pvProd")},M))]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-32 text-xs font-bold text-green-600 uppercase",children:"Export STEG"}),z("LAC",O,"pvExport").map((R,M)=>l.jsx("input",{type:"number",className:"w-20 p-2 text-center text-xs border border-green-200 rounded focus:border-green-600 outline-none bg-green-50",placeholder:"-",value:R,onChange:G=>_(O,M,G.target.value,"pvExport")},M))]})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-32 text-xs font-bold text-slate-600 uppercase",children:"Consommation"}),z(n,O).map((R,M)=>l.jsx("input",{type:"number",className:"w-20 p-2 text-center text-xs border rounded focus:border-blue-900 outline-none",placeholder:"-",value:R,onChange:G=>_(O,M,G.target.value)},M))]})]})})]},O))}),l.jsx("div",{className:"p-4 border-t bg-white flex justify-end gap-2",children:l.jsxs("button",{onClick:v,className:"bg-blue-900 text-white px-6 py-2 rounded-lg font-bold shadow-lg flex items-center",children:[l.jsx(qx,{size:18,className:"mr-2"})," Enregistrer"]})})]})}),p&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/90 z-[70] overflow-auto flex justify-center items-center p-4",children:l.jsxs("div",{className:"bg-white shadow-2xl relative print:fixed print:inset-0 print:m-0 print:w-full print:h-full overflow-hidden flex flex-col",style:{width:"29.7cm",height:"21cm"},children:[l.jsxs("div",{className:"absolute top-6 right-6 no-print flex gap-3 z-50 bg-white/90 p-2 rounded-xl shadow-lg border border-slate-200 backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg px-3 border border-slate-200",children:[l.jsx(Yl,{size:16,className:"text-slate-500 mr-2"}),l.jsx("input",{type:"month",value:S,onChange:O=>C(O.target.value),className:"bg-transparent border-none text-sm font-bold p-2 outline-none text-slate-700"})]}),l.jsx("div",{className:"h-10 w-px bg-slate-200 mx-1"}),l.jsxs("button",{onClick:()=>window.print(),className:"bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-800 font-bold flex items-center shadow-md transition-all active:scale-95",children:[l.jsx(p0,{size:18,className:"mr-2"})," Imprimer"]}),l.jsx("button",{onClick:()=>m(!1),className:"bg-red-50 text-red-600 px-3 py-2 rounded-lg hover:bg-red-100 transition-colors border border-red-100",children:l.jsx(qs,{size:20})})]}),l.jsxs("div",{className:"h-full p-12 flex flex-col bg-white",children:[l.jsxs("div",{className:"flex justify-between items-start border-b-4 border-blue-900 pb-6 mb-8",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(na,{size:"h-16"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black text-slate-900 uppercase tracking-tight leading-none mb-1",children:"Rapport Mensuel"}),l.jsx("div",{className:"text-blue-900 font-bold uppercase tracking-widest text-sm",children:"Performance nergtique & ISO 50001"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Priode du Rapport"}),l.jsx("div",{className:"text-3xl font-black text-slate-800 capitalize border-2 border-slate-100 px-4 py-1 rounded-lg bg-slate-50",children:new Date(S).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),l.jsxs("div",{className:"text-xs font-bold text-slate-400 mt-2 flex items-center justify-end",children:[l.jsx(Xl,{size:10,className:"mr-1"})," Site : ",x.name]})]})]}),l.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-8",children:[l.jsxs("div",{className:"col-span-4 space-y-6",children:[l.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100",children:[l.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase mb-6 flex items-center tracking-widest",children:[l.jsx(al,{size:14,className:"mr-2"})," Indicateurs Cls"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Consommation Totale"}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsx("span",{className:"text-5xl font-black text-slate-900",children:"45,230"}),l.jsx("span",{className:"text-lg font-bold text-slate-400",children:"kWh"})]})]}),l.jsx("div",{className:"h-px bg-slate-200 w-full"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Ratio Performance"}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsx("span",{className:"text-4xl font-black text-blue-900",children:"12.4"}),l.jsx("span",{className:"text-sm font-bold text-slate-400",children:"kWh / m"})]})]}),l.jsx("div",{className:"h-px bg-slate-200 w-full"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"volution vs Rf (N-1)"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-3xl font-black text-emerald-600",children:"-4.5%"}),l.jsx("div",{className:"text-xs font-medium text-emerald-700 bg-emerald-100 px-2 py-1 rounded-full",children:"Objectif atteint"})]})]})]})]}),l.jsxs("div",{className:"bg-blue-900 p-6 rounded-2xl text-white relative overflow-hidden",children:[l.jsxs("div",{className:"relative z-10",children:[l.jsx("h3",{className:"text-xs font-black text-blue-300 uppercase mb-2",children:"Cot nergtique"}),l.jsxs("div",{className:"text-4xl font-black mb-1",children:["12 450 ",l.jsx("span",{className:"text-lg",children:"DT"})]}),l.jsx("div",{className:"text-[10px] text-blue-200",children:"Hors TVA et Redevances"})]}),l.jsx("div",{className:"absolute right-0 bottom-0 opacity-10",children:l.jsx(eu,{size:100})})]})]}),l.jsxs("div",{className:"col-span-8 flex flex-col gap-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-6 h-64",children:[l.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex flex-col",children:[l.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-4",children:"Rpartition des Usages"}),l.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[l.jsx("div",{className:"relative w-32 h-32",children:l.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[l.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#e2e8f0",strokeWidth:"4"}),l.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#1e3a8a",strokeWidth:"4",strokeDasharray:"40, 100"}),l.jsx("circle",{cx:"18",cy:"18",r:"15.9155",fill:"none",stroke:"#3b82f6",strokeWidth:"4",strokeDasharray:"25, 100",strokeDashoffset:"-40"})]})}),l.jsxs("div",{className:"text-xs space-y-1",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-900 rounded-full mr-2"}),"Climatisation"]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"clairage"]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-2 h-2 bg-slate-200 rounded-full mr-2"}),"Autre"]})]})]})]}),l.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex flex-col",children:[l.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-4",children:"Comparatif Hebdomadaire"}),l.jsxs("div",{className:"flex-1 flex items-end justify-between px-2 gap-2",children:[l.jsx("div",{className:"w-full bg-slate-100 rounded-t h-[60%] relative group",children:l.jsx("div",{className:"absolute bottom-0 w-full bg-blue-900 h-full opacity-20"})}),l.jsx("div",{className:"w-full bg-blue-900 rounded-t h-[80%]"}),l.jsx("div",{className:"w-full bg-blue-900 rounded-t h-[65%]"}),l.jsx("div",{className:"w-full bg-blue-900 rounded-t h-[75%]"})]}),l.jsxs("div",{className:"flex justify-between text-[9px] text-slate-400 mt-2 uppercase font-mono",children:[l.jsx("span",{children:"Sem 1"}),l.jsx("span",{children:"Sem 2"}),l.jsx("span",{children:"Sem 3"}),l.jsx("span",{children:"Sem 4"})]})]})]}),l.jsxs("div",{className:"flex-1 bg-slate-50 rounded-xl border border-slate-200 p-6",children:[l.jsxs("h4",{className:"text-xs font-black text-slate-700 uppercase mb-4 flex items-center",children:[l.jsx(co,{size:14,className:"mr-2 text-emerald-600"})," Plan d'Action & Observations"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[l.jsxs("div",{children:[l.jsx("h5",{className:"text-[10px] font-bold text-blue-900 uppercase mb-2",children:"Actions Correctives"}),l.jsxs("ul",{className:"text-xs text-slate-600 space-y-2 list-disc pl-4",children:[l.jsx("li",{children:"Optimisation des horaires d'clairage Showroom (-1h)."}),l.jsx("li",{children:"Rparation fuite d'air comprim Zone Atelier B."}),l.jsx("li",{children:"Nettoyage filtres CTA Toiture."})]})]}),l.jsxs("div",{children:[l.jsx("h5",{className:"text-[10px] font-bold text-blue-900 uppercase mb-2",children:"Points de Vigilance"}),l.jsxs("ul",{className:"text-xs text-slate-600 space-y-2 list-disc pl-4",children:[l.jsx("li",{children:"Surconsommation dtecte le Week-end (Talon)."}),l.jsx("li",{children:"Cos Phi limite (0.82)  surveiller."})]})]})]})]})]})]}),l.jsxs("div",{className:"mt-auto pt-8 border-t-2 border-slate-100 flex justify-between items-end",children:[l.jsxs("div",{className:"text-[10px] text-slate-400 uppercase tracking-widest space-y-1",children:[l.jsx("div",{children:"ITALCAR SA  Sige Social"}),l.jsx("div",{children:"Systme de Management de l'nergie ISO 50001"})]}),l.jsxs("div",{className:"flex gap-16 pr-12",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"h-16 w-32 border-b border-slate-300 mb-2"}),l.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Resp. Technique"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"h-16 w-32 border-b border-slate-300 mb-2"}),l.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Direction Gnrale"})]})]})]})]})]})}),l.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col gap-3 z-50 no-print",children:[e==="ADMIN"&&l.jsx("button",{onClick:()=>{L(n),u(!0)},className:"bg-slate-800 hover:bg-slate-700 text-white p-4 rounded-full shadow-lg transition-transform hover:scale-110 group relative",children:l.jsx(rh,{size:20})}),l.jsx("button",{onClick:()=>m(!0),className:"bg-blue-900 hover:bg-blue-800 text-white p-4 rounded-full shadow-xl transition-transform hover:scale-110 group relative",children:l.jsx(p0,{size:24})})]}),j&&l.jsxs("div",{className:"fixed bottom-6 left-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center animate-in slide-in-from-bottom-4",children:[l.jsx(co,{className:"mr-2"})," ",j]})]})},rk=({user:t,onNavigate:e,onLogout:n})=>{const r=i=>t.role==="ADMIN"?!0:t.role==="EQUIPE_ENERGIE"?["steg","air","sites"].includes(i):t.role==="DIRECTION"?i==="sites":!1,s=()=>{const i=new Date().getHours();return i<12?"Bonjour":i<18?"Bonne aprs-midi":"Bonsoir"};return l.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[l.jsxs("div",{className:"z-10 w-full max-w-6xl flex justify-between items-center mb-12 bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(na,{size:"h-12"}),l.jsx("div",{className:"h-10 w-px bg-slate-200"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black mb-0 tracking-tight text-blue-900",children:"PORTAIL NERGIE"}),l.jsxs("p",{className:"text-slate-400 text-sm",children:[s(),", ",l.jsx("span",{className:"text-slate-800 font-bold",children:t.username})]})]})]}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx(Kx,{darkText:!0}),l.jsxs("div",{className:"bg-emerald-50 text-emerald-800 text-[10px] px-3 py-1 rounded-full font-bold border border-emerald-100 flex items-center",children:[l.jsx(al,{size:12,className:"mr-2"})," Performance Globale en hausse"]})]})]}),l.jsxs("div",{className:"z-10 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl w-full",children:[l.jsxs("button",{disabled:!r("steg"),onClick:()=>e("steg"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("steg")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("steg")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(eu,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"nergie & Facturation"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Suivi des consommations STEG, Factures MT/BT, Analyse Cos  et dpassements de puissance."})]}),l.jsxs("button",{disabled:!r("air"),onClick:()=>e("air"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("air")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("air")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(Zl,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Air Comprim"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Relevs hebdomadaires des compresseurs, suivi des heures de charge et planning de maintenance."})]}),l.jsxs("button",{disabled:!r("sites"),onClick:()=>e("sites"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("sites")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("sites")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(OA,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Tableau de Bord Sites"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Vision globale des sites ITALCAR : Surfaces, Mix nergtique et Trajectoire Carbone 2030."})]})]}),t.role==="ADMIN"&&l.jsx("div",{className:"z-10 mt-8 w-full max-w-6xl flex justify-end",children:l.jsxs("button",{onClick:()=>e("admin"),className:"text-slate-400 hover:text-blue-900 text-xs font-bold flex items-center transition-colors",children:[l.jsx($A,{size:14,className:"mr-1"})," Administration"]})}),l.jsx("div",{className:"mt-12 text-center text-slate-400 text-xs font-medium uppercase tracking-widest",children:" 2025 ITALCAR SA  Energy Management System"}),l.jsx("div",{className:"absolute top-6 right-6",children:l.jsx("button",{onClick:n,className:"bg-white hover:bg-red-50 text-slate-400 hover:text-red-600 p-2 rounded-full shadow-sm transition-colors border border-slate-100",children:l.jsx(FA,{size:18})})})]})},sk=()=>{const[t,e]=X.useState(null),[n,r]=X.useState("dashboard"),[s,i]=X.useState(!1);X.useEffect(()=>{(async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await hS(Dc,__initial_auth_token):await aS(Dc)}catch(p){console.error("Auth failed",p)}finally{i(!0)}})();const h=mS(Dc,p=>{});return()=>h()},[]);const o=c=>{e(c),r("dashboard")},u=()=>{e(null),r("dashboard")};return s?t?l.jsxs(l.Fragment,{children:[n==="dashboard"&&l.jsx(rk,{user:t,onNavigate:r,onLogout:u}),n==="admin"&&l.jsx(tk,{onBack:()=>r("dashboard")}),n==="steg"&&l.jsx(ZA,{onBack:()=>r("dashboard"),userRole:t.role}),n==="air"&&l.jsx(ek,{onBack:()=>r("dashboard"),userRole:t.role}),n==="sites"&&l.jsx(nk,{onBack:()=>r("dashboard"),userRole:t.role})]}):l.jsx(JA,{onLogin:o}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white font-bold uppercase tracking-widest",children:"Connexion au Cloud..."})};Fc.createRoot(document.getElementById("root")).render(l.jsx(D1.StrictMode,{children:l.jsx(sk,{})}));
