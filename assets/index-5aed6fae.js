(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Z_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _g={exports:{}},Tl={},xg={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),ex=Symbol.for("react.portal"),tx=Symbol.for("react.fragment"),nx=Symbol.for("react.strict_mode"),rx=Symbol.for("react.profiler"),sx=Symbol.for("react.provider"),ix=Symbol.for("react.context"),ox=Symbol.for("react.forward_ref"),ax=Symbol.for("react.suspense"),lx=Symbol.for("react.memo"),ux=Symbol.for("react.lazy"),Xf=Symbol.iterator;function cx(t){return t===null||typeof t!="object"?null:(t=Xf&&t[Xf]||t["@@iterator"],typeof t=="function"?t:null)}var wg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eg=Object.assign,Tg={};function Hs(t,e,n){this.props=t,this.context=e,this.refs=Tg,this.updater=n||wg}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ig(){}Ig.prototype=Hs.prototype;function wd(t,e,n){this.props=t,this.context=e,this.refs=Tg,this.updater=n||wg}var Ed=wd.prototype=new Ig;Ed.constructor=wd;Eg(Ed,Hs.prototype);Ed.isPureReactComponent=!0;var Jf=Array.isArray,Ng=Object.prototype.hasOwnProperty,Td={current:null},Ag={key:!0,ref:!0,__self:!0,__source:!0};function Sg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Ng.call(e,r)&&!Ag.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:_o,type:t,key:i,ref:a,props:s,_owner:Td.current}}function dx(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Id(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function hx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zf=/\/+/g;function yu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hx(""+t.key):e.toString(36)}function _a(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case _o:case ex:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+yu(a,0):r,Jf(s)?(n="",t!=null&&(n=t.replace(Zf,"$&/")+"/"),_a(s,e,n,"",function(h){return h})):s!=null&&(Id(s)&&(s=dx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Zf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Jf(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+yu(i,l);a+=_a(i,e,n,c,s)}else if(c=cx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+yu(i,l++),a+=_a(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Yo(t,e,n){if(t==null)return t;var r=[],s=0;return _a(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},xa={transition:null},px={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:xa,ReactCurrentOwner:Td};function bg(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Yo,forEach:function(t,e,n){Yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yo(t,function(){e++}),e},toArray:function(t){return Yo(t,function(e){return e})||[]},only:function(t){if(!Id(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Hs;oe.Fragment=tx;oe.Profiler=rx;oe.PureComponent=wd;oe.StrictMode=nx;oe.Suspense=ax;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=px;oe.act=bg;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Eg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Td.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Ng.call(e,c)&&!Ag.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:_o,type:t.type,key:s,ref:i,props:r,_owner:a}};oe.createContext=function(t){return t={$$typeof:ix,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sx,_context:t},t.Consumer=t};oe.createElement=Sg;oe.createFactory=function(t){var e=Sg.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:ox,render:t}};oe.isValidElement=Id;oe.lazy=function(t){return{$$typeof:ux,_payload:{_status:-1,_result:t},_init:fx}};oe.memo=function(t,e){return{$$typeof:lx,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=xa.transition;xa.transition={};try{t()}finally{xa.transition=e}};oe.unstable_act=bg;oe.useCallback=function(t,e){return ht.current.useCallback(t,e)};oe.useContext=function(t){return ht.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};oe.useEffect=function(t,e){return ht.current.useEffect(t,e)};oe.useId=function(){return ht.current.useId()};oe.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return ht.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};oe.useRef=function(t){return ht.current.useRef(t)};oe.useState=function(t){return ht.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return ht.current.useTransition()};oe.version="18.3.1";xg.exports=oe;var Y=xg.exports;const mx=Z_(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx=Y,yx=Symbol.for("react.element"),vx=Symbol.for("react.fragment"),_x=Object.prototype.hasOwnProperty,xx=gx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wx={key:!0,ref:!0,__self:!0,__source:!0};function kg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)_x.call(e,r)&&!wx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yx,type:t,key:i,ref:a,props:s,_owner:xx.current}}Tl.Fragment=vx;Tl.jsx=kg;Tl.jsxs=kg;_g.exports=Tl;var u=_g.exports,rc={},Cg={exports:{}},At={},Rg={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,U){var J=D.length;D.push(U);e:for(;0<J;){var W=J-1>>>1,le=D[W];if(0<s(le,U))D[W]=U,D[J]=le,J=W;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var U=D[0],J=D.pop();if(J!==U){D[0]=J;e:for(var W=0,le=D.length,j=le>>>1;W<j;){var ie=2*(W+1)-1,ee=D[ie],Se=ie+1,Ue=D[Se];if(0>s(ee,J))Se<le&&0>s(Ue,ee)?(D[W]=Ue,D[Se]=J,W=Se):(D[W]=ee,D[ie]=J,W=ie);else if(Se<le&&0>s(Ue,J))D[W]=Ue,D[Se]=J,W=Se;else break e}}return U}function s(D,U){var J=D.sortIndex-U.sortIndex;return J!==0?J:D.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],p=1,g=null,v=3,b=!1,C=!1,R=!1,F=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(D){for(var U=n(h);U!==null;){if(U.callback===null)r(h);else if(U.startTime<=D)r(h),U.sortIndex=U.expirationTime,e(c,U);else break;U=n(h)}}function V(D){if(R=!1,A(D),!C)if(n(c)!==null)C=!0,L(M);else{var U=n(h);U!==null&&H(V,U.startTime-D)}}function M(D,U){C=!1,R&&(R=!1,S(y),y=-1),b=!0;var J=v;try{for(A(U),g=n(c);g!==null&&(!(g.expirationTime>U)||D&&!w());){var W=g.callback;if(typeof W=="function"){g.callback=null,v=g.priorityLevel;var le=W(g.expirationTime<=U);U=t.unstable_now(),typeof le=="function"?g.callback=le:g===n(c)&&r(c),A(U)}else r(c);g=n(c)}if(g!==null)var j=!0;else{var ie=n(h);ie!==null&&H(V,ie.startTime-U),j=!1}return j}finally{g=null,v=J,b=!1}}var $=!1,_=null,y=-1,E=5,I=-1;function w(){return!(t.unstable_now()-I<E)}function N(){if(_!==null){var D=t.unstable_now();I=D;var U=!0;try{U=_(!0,D)}finally{U?x():($=!1,_=null)}}else $=!1}var x;if(typeof T=="function")x=function(){T(N)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,pe=se.port2;se.port1.onmessage=N,x=function(){pe.postMessage(null)}}else x=function(){F(N,0)};function L(D){_=D,$||($=!0,x())}function H(D,U){y=F(function(){D(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){C||b||(C=!0,L(M))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var J=v;v=U;try{return D()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,U){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var J=v;v=D;try{return U()}finally{v=J}},t.unstable_scheduleCallback=function(D,U,J){var W=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,D){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=J+le,D={id:p++,callback:U,priorityLevel:D,startTime:J,expirationTime:le,sortIndex:-1},J>W?(D.sortIndex=J,e(h,D),n(c)===null&&D===n(h)&&(R?(S(y),y=-1):R=!0,H(V,J-W))):(D.sortIndex=le,e(c,D),C||b||(C=!0,L(M))),D},t.unstable_shouldYield=w,t.unstable_wrapCallback=function(D){var U=v;return function(){var J=v;v=U;try{return D.apply(this,arguments)}finally{v=J}}}})(Pg);Rg.exports=Pg;var Ex=Rg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx=Y,Nt=Ex;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jg=new Set,Hi={};function qr(t,e){ks(t,e),ks(t+"Capture",e)}function ks(t,e){for(Hi[t]=e,t=0;t<e.length;t++)jg.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=Object.prototype.hasOwnProperty,Ix=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ep={},tp={};function Nx(t){return sc.call(tp,t)?!0:sc.call(ep,t)?!1:Ix.test(t)?tp[t]=!0:(ep[t]=!0,!1)}function Ax(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sx(t,e,n,r){if(e===null||typeof e>"u"||Ax(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ft(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nd=/[\-:]([a-z])/g;function Ad(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nd,Ad);Ze[e]=new ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nd,Ad);Ze[e]=new ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nd,Ad);Ze[e]=new ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new ft(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sd(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sx(e,n,s,r)&&(n=null),r||s===null?Nx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bn=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xo=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),bd=Symbol.for("react.strict_mode"),ic=Symbol.for("react.profiler"),Vg=Symbol.for("react.provider"),Dg=Symbol.for("react.context"),kd=Symbol.for("react.forward_ref"),oc=Symbol.for("react.suspense"),ac=Symbol.for("react.suspense_list"),Cd=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),Mg=Symbol.for("react.offscreen"),np=Symbol.iterator;function fi(t){return t===null||typeof t!="object"?null:(t=np&&t[np]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,vu;function Ei(t){if(vu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vu=e&&e[1]||""}return`
`+vu+t}var _u=!1;function xu(t,e){if(!t||_u)return"";_u=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{_u=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ei(t):""}function bx(t){switch(t.tag){case 5:return Ei(t.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 2:case 15:return t=xu(t.type,!1),t;case 11:return t=xu(t.type.render,!1),t;case 1:return t=xu(t.type,!0),t;default:return""}}function lc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ls:return"Fragment";case as:return"Portal";case ic:return"Profiler";case bd:return"StrictMode";case oc:return"Suspense";case ac:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dg:return(t.displayName||"Context")+".Consumer";case Vg:return(t._context.displayName||"Context")+".Provider";case kd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cd:return e=t.displayName||null,e!==null?e:lc(t.type)||"Memo";case On:e=t._payload,t=t._init;try{return lc(t(e))}catch{}}return null}function kx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lc(e);case 8:return e===bd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cx(t){var e=Lg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jo(t){t._valueTracker||(t._valueTracker=Cx(t))}function Og(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Lg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uc(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fg(t,e){e=e.checked,e!=null&&Sd(t,"checked",e,!1)}function cc(t,e){Fg(t,e);var n=rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dc(t,e.type,n):e.hasOwnProperty("defaultValue")&&dc(t,e.type,rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dc(t,e,n){(e!=="number"||Oa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ti=Array.isArray;function _s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ip(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ti(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rr(n)}}function Ug(t,e){var n=rr(e.value),r=rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function op(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zo,Bg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rx=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(t){Rx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ci[e]=Ci[t]})});function $g(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ci.hasOwnProperty(t)&&Ci[t]?(""+e).trim():e+"px"}function qg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$g(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Px=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pc(t,e){if(e){if(Px[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function mc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gc=null;function Rd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yc=null,xs=null,ws=null;function ap(t){if(t=Eo(t)){if(typeof yc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=bl(e),yc(t.stateNode,t.type,e))}}function Hg(t){xs?ws?ws.push(t):ws=[t]:xs=t}function Wg(){if(xs){var t=xs,e=ws;if(ws=xs=null,ap(t),e)for(t=0;t<e.length;t++)ap(e[t])}}function Gg(t,e){return t(e)}function Kg(){}var wu=!1;function Qg(t,e,n){if(wu)return t(e,n);wu=!0;try{return Gg(t,e,n)}finally{wu=!1,(xs!==null||ws!==null)&&(Kg(),Wg())}}function Gi(t,e){var n=t.stateNode;if(n===null)return null;var r=bl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var vc=!1;if(wn)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){vc=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{vc=!1}function jx(t,e,n,r,s,i,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Ri=!1,Fa=null,Ua=!1,_c=null,Vx={onError:function(t){Ri=!0,Fa=t}};function Dx(t,e,n,r,s,i,a,l,c){Ri=!1,Fa=null,jx.apply(Vx,arguments)}function Mx(t,e,n,r,s,i,a,l,c){if(Dx.apply(this,arguments),Ri){if(Ri){var h=Fa;Ri=!1,Fa=null}else throw Error(B(198));Ua||(Ua=!0,_c=h)}}function Hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lp(t){if(Hr(t)!==t)throw Error(B(188))}function Lx(t){var e=t.alternate;if(!e){if(e=Hr(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lp(s),t;if(i===r)return lp(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Xg(t){return t=Lx(t),t!==null?Jg(t):null}function Jg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jg(t);if(e!==null)return e;t=t.sibling}return null}var Zg=Nt.unstable_scheduleCallback,up=Nt.unstable_cancelCallback,Ox=Nt.unstable_shouldYield,Fx=Nt.unstable_requestPaint,Me=Nt.unstable_now,Ux=Nt.unstable_getCurrentPriorityLevel,Pd=Nt.unstable_ImmediatePriority,e0=Nt.unstable_UserBlockingPriority,za=Nt.unstable_NormalPriority,zx=Nt.unstable_LowPriority,t0=Nt.unstable_IdlePriority,Il=null,rn=null;function Bx(t){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Il,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Hx,$x=Math.log,qx=Math.LN2;function Hx(t){return t>>>=0,t===0?32:31-($x(t)/qx|0)|0}var ea=64,ta=4194304;function Ii(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ba(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ii(l):(i&=a,i!==0&&(r=Ii(i)))}else a=n&~s,a!==0?r=Ii(a):i!==0&&(r=Ii(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bt(e),s=1<<n,r|=t[n],e&=~s;return r}function Wx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Bt(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Wx(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function xc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n0(){var t=ea;return ea<<=1,!(ea&4194240)&&(ea=64),t}function Eu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bt(e),t[e]=n}function Kx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function r0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s0,Vd,i0,o0,a0,wc=!1,na=[],Hn=null,Wn=null,Gn=null,Ki=new Map,Qi=new Map,Un=[],Qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cp(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Ki.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(e.pointerId)}}function mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Eo(e),e!==null&&Vd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Yx(t,e,n,r,s){switch(e){case"focusin":return Hn=mi(Hn,t,e,n,r,s),!0;case"dragenter":return Wn=mi(Wn,t,e,n,r,s),!0;case"mouseover":return Gn=mi(Gn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ki.set(i,mi(Ki.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qi.set(i,mi(Qi.get(i)||null,t,e,n,r,s)),!0}return!1}function l0(t){var e=Ar(t.target);if(e!==null){var n=Hr(e);if(n!==null){if(e=n.tag,e===13){if(e=Yg(n),e!==null){t.blockedOn=e,a0(t.priority,function(){i0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ec(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gc=r,n.target.dispatchEvent(r),gc=null}else return e=Eo(n),e!==null&&Vd(e),t.blockedOn=n,!1;e.shift()}return!0}function dp(t,e,n){wa(t)&&n.delete(e)}function Xx(){wc=!1,Hn!==null&&wa(Hn)&&(Hn=null),Wn!==null&&wa(Wn)&&(Wn=null),Gn!==null&&wa(Gn)&&(Gn=null),Ki.forEach(dp),Qi.forEach(dp)}function gi(t,e){t.blockedOn===e&&(t.blockedOn=null,wc||(wc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Xx)))}function Yi(t){function e(s){return gi(s,t)}if(0<na.length){gi(na[0],t);for(var n=1;n<na.length;n++){var r=na[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&gi(Hn,t),Wn!==null&&gi(Wn,t),Gn!==null&&gi(Gn,t),Ki.forEach(e),Qi.forEach(e),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)l0(n),n.blockedOn===null&&Un.shift()}var Es=bn.ReactCurrentBatchConfig,$a=!0;function Jx(t,e,n,r){var s=ge,i=Es.transition;Es.transition=null;try{ge=1,Dd(t,e,n,r)}finally{ge=s,Es.transition=i}}function Zx(t,e,n,r){var s=ge,i=Es.transition;Es.transition=null;try{ge=4,Dd(t,e,n,r)}finally{ge=s,Es.transition=i}}function Dd(t,e,n,r){if($a){var s=Ec(t,e,n,r);if(s===null)Pu(t,e,r,qa,n),cp(t,r);else if(Yx(s,t,e,n,r))r.stopPropagation();else if(cp(t,r),e&4&&-1<Qx.indexOf(t)){for(;s!==null;){var i=Eo(s);if(i!==null&&s0(i),i=Ec(t,e,n,r),i===null&&Pu(t,e,r,qa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Pu(t,e,r,null,n)}}var qa=null;function Ec(t,e,n,r){if(qa=null,t=Rd(r),t=Ar(t),t!==null)if(e=Hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qa=t,null}function u0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ux()){case Pd:return 1;case e0:return 4;case za:case zx:return 16;case t0:return 536870912;default:return 16}default:return 16}}var Bn=null,Md=null,Ea=null;function c0(){if(Ea)return Ea;var t,e=Md,n=e.length,r,s="value"in Bn?Bn.value:Bn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Ea=s.slice(t,1<r?1-r:void 0)}function Ta(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ra(){return!0}function hp(){return!1}function St(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ra:hp,this.isPropagationStopped=hp,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),e}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ld=St(Ws),wo=Ce({},Ws,{view:0,detail:0}),e1=St(wo),Tu,Iu,yi,Nl=Ce({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Od,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yi&&(yi&&t.type==="mousemove"?(Tu=t.screenX-yi.screenX,Iu=t.screenY-yi.screenY):Iu=Tu=0,yi=t),Tu)},movementY:function(t){return"movementY"in t?t.movementY:Iu}}),fp=St(Nl),t1=Ce({},Nl,{dataTransfer:0}),n1=St(t1),r1=Ce({},wo,{relatedTarget:0}),Nu=St(r1),s1=Ce({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),i1=St(s1),o1=Ce({},Ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a1=St(o1),l1=Ce({},Ws,{data:0}),pp=St(l1),u1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d1[t])?!!e[t]:!1}function Od(){return h1}var f1=Ce({},wo,{key:function(t){if(t.key){var e=u1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?c1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Od,charCode:function(t){return t.type==="keypress"?Ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p1=St(f1),m1=Ce({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=St(m1),g1=Ce({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Od}),y1=St(g1),v1=Ce({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),_1=St(v1),x1=Ce({},Nl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w1=St(x1),E1=[9,13,27,32],Fd=wn&&"CompositionEvent"in window,Pi=null;wn&&"documentMode"in document&&(Pi=document.documentMode);var T1=wn&&"TextEvent"in window&&!Pi,d0=wn&&(!Fd||Pi&&8<Pi&&11>=Pi),gp=String.fromCharCode(32),yp=!1;function h0(t,e){switch(t){case"keyup":return E1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function I1(t,e){switch(t){case"compositionend":return f0(e);case"keypress":return e.which!==32?null:(yp=!0,gp);case"textInput":return t=e.data,t===gp&&yp?null:t;default:return null}}function N1(t,e){if(us)return t==="compositionend"||!Fd&&h0(t,e)?(t=c0(),Ea=Md=Bn=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d0&&e.locale!=="ko"?null:e.data;default:return null}}var A1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!A1[t.type]:e==="textarea"}function p0(t,e,n,r){Hg(r),e=Ha(e,"onChange"),0<e.length&&(n=new Ld("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ji=null,Xi=null;function S1(t){N0(t,0)}function Al(t){var e=hs(t);if(Og(e))return t}function b1(t,e){if(t==="change")return e}var m0=!1;if(wn){var Au;if(wn){var Su="oninput"in document;if(!Su){var _p=document.createElement("div");_p.setAttribute("oninput","return;"),Su=typeof _p.oninput=="function"}Au=Su}else Au=!1;m0=Au&&(!document.documentMode||9<document.documentMode)}function xp(){ji&&(ji.detachEvent("onpropertychange",g0),Xi=ji=null)}function g0(t){if(t.propertyName==="value"&&Al(Xi)){var e=[];p0(e,Xi,t,Rd(t)),Qg(S1,e)}}function k1(t,e,n){t==="focusin"?(xp(),ji=e,Xi=n,ji.attachEvent("onpropertychange",g0)):t==="focusout"&&xp()}function C1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(Xi)}function R1(t,e){if(t==="click")return Al(e)}function P1(t,e){if(t==="input"||t==="change")return Al(e)}function j1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:j1;function Ji(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sc.call(e,s)||!Ht(t[s],e[s]))return!1}return!0}function wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ep(t,e){var n=wp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wp(n)}}function y0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function v0(){for(var t=window,e=Oa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oa(t.document)}return e}function Ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function V1(t){var e=v0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y0(n.ownerDocument.documentElement,n)){if(r!==null&&Ud(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ep(n,i);var a=Ep(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var D1=wn&&"documentMode"in document&&11>=document.documentMode,cs=null,Tc=null,Vi=null,Ic=!1;function Tp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ic||cs==null||cs!==Oa(r)||(r=cs,"selectionStart"in r&&Ud(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vi&&Ji(Vi,r)||(Vi=r,r=Ha(Tc,"onSelect"),0<r.length&&(e=new Ld("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=cs)))}function sa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ds={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},bu={},_0={};wn&&(_0=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Sl(t){if(bu[t])return bu[t];if(!ds[t])return t;var e=ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _0)return bu[t]=e[n];return t}var x0=Sl("animationend"),w0=Sl("animationiteration"),E0=Sl("animationstart"),T0=Sl("transitionend"),I0=new Map,Ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(t,e){I0.set(t,e),qr(e,[t])}for(var ku=0;ku<Ip.length;ku++){var Cu=Ip[ku],M1=Cu.toLowerCase(),L1=Cu[0].toUpperCase()+Cu.slice(1);lr(M1,"on"+L1)}lr(x0,"onAnimationEnd");lr(w0,"onAnimationIteration");lr(E0,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(T0,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ni));function Np(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Mx(r,e,void 0,t),t.currentTarget=null}function N0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Np(s,l,h),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Np(s,l,h),i=c}}}if(Ua)throw t=_c,Ua=!1,_c=null,t}function Ee(t,e){var n=e[kc];n===void 0&&(n=e[kc]=new Set);var r=t+"__bubble";n.has(r)||(A0(e,t,2,!1),n.add(r))}function Ru(t,e,n){var r=0;e&&(r|=4),A0(n,t,r,e)}var ia="_reactListening"+Math.random().toString(36).slice(2);function Zi(t){if(!t[ia]){t[ia]=!0,jg.forEach(function(n){n!=="selectionchange"&&(O1.has(n)||Ru(n,!1,t),Ru(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ia]||(e[ia]=!0,Ru("selectionchange",!1,e))}}function A0(t,e,n,r){switch(u0(e)){case 1:var s=Jx;break;case 4:s=Zx;break;default:s=Dd}n=s.bind(null,e,n,t),s=void 0,!vc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ar(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Qg(function(){var h=i,p=Rd(n),g=[];e:{var v=I0.get(t);if(v!==void 0){var b=Ld,C=t;switch(t){case"keypress":if(Ta(n)===0)break e;case"keydown":case"keyup":b=p1;break;case"focusin":C="focus",b=Nu;break;case"focusout":C="blur",b=Nu;break;case"beforeblur":case"afterblur":b=Nu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=n1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=y1;break;case x0:case w0:case E0:b=i1;break;case T0:b=_1;break;case"scroll":b=e1;break;case"wheel":b=w1;break;case"copy":case"cut":case"paste":b=a1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=mp}var R=(e&4)!==0,F=!R&&t==="scroll",S=R?v!==null?v+"Capture":null:v;R=[];for(var T=h,A;T!==null;){A=T;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,S!==null&&(V=Gi(T,S),V!=null&&R.push(eo(T,V,A)))),F)break;T=T.return}0<R.length&&(v=new b(v,C,null,n,p),g.push({event:v,listeners:R}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",v&&n!==gc&&(C=n.relatedTarget||n.fromElement)&&(Ar(C)||C[En]))break e;if((b||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,b?(C=n.relatedTarget||n.toElement,b=h,C=C?Ar(C):null,C!==null&&(F=Hr(C),C!==F||C.tag!==5&&C.tag!==6)&&(C=null)):(b=null,C=h),b!==C)){if(R=fp,V="onMouseLeave",S="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(R=mp,V="onPointerLeave",S="onPointerEnter",T="pointer"),F=b==null?v:hs(b),A=C==null?v:hs(C),v=new R(V,T+"leave",b,n,p),v.target=F,v.relatedTarget=A,V=null,Ar(p)===h&&(R=new R(S,T+"enter",C,n,p),R.target=A,R.relatedTarget=F,V=R),F=V,b&&C)t:{for(R=b,S=C,T=0,A=R;A;A=rs(A))T++;for(A=0,V=S;V;V=rs(V))A++;for(;0<T-A;)R=rs(R),T--;for(;0<A-T;)S=rs(S),A--;for(;T--;){if(R===S||S!==null&&R===S.alternate)break t;R=rs(R),S=rs(S)}R=null}else R=null;b!==null&&Ap(g,v,b,R,!1),C!==null&&F!==null&&Ap(g,F,C,R,!0)}}e:{if(v=h?hs(h):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var M=b1;else if(vp(v))if(m0)M=P1;else{M=C1;var $=k1}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=R1);if(M&&(M=M(t,h))){p0(g,M,n,p);break e}$&&$(t,v,h),t==="focusout"&&($=v._wrapperState)&&$.controlled&&v.type==="number"&&dc(v,"number",v.value)}switch($=h?hs(h):window,t){case"focusin":(vp($)||$.contentEditable==="true")&&(cs=$,Tc=h,Vi=null);break;case"focusout":Vi=Tc=cs=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Tp(g,n,p);break;case"selectionchange":if(D1)break;case"keydown":case"keyup":Tp(g,n,p)}var _;if(Fd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else us?h0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(d0&&n.locale!=="ko"&&(us||y!=="onCompositionStart"?y==="onCompositionEnd"&&us&&(_=c0()):(Bn=p,Md="value"in Bn?Bn.value:Bn.textContent,us=!0)),$=Ha(h,y),0<$.length&&(y=new pp(y,t,null,n,p),g.push({event:y,listeners:$}),_?y.data=_:(_=f0(n),_!==null&&(y.data=_)))),(_=T1?I1(t,n):N1(t,n))&&(h=Ha(h,"onBeforeInput"),0<h.length&&(p=new pp("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=_))}N0(g,e)})}function eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ha(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gi(t,n),i!=null&&r.unshift(eo(t,i,s)),i=Gi(t,e),i!=null&&r.push(eo(t,i,s))),t=t.return}return r}function rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ap(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=Gi(n,i),c!=null&&a.unshift(eo(n,c,l))):s||(c=Gi(n,i),c!=null&&a.push(eo(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var F1=/\r\n?/g,U1=/\u0000|\uFFFD/g;function Sp(t){return(typeof t=="string"?t:""+t).replace(F1,`
`).replace(U1,"")}function oa(t,e,n){if(e=Sp(e),Sp(t)!==e&&n)throw Error(B(425))}function Wa(){}var Nc=null,Ac=null;function Sc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,z1=typeof clearTimeout=="function"?clearTimeout:void 0,bp=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof bp<"u"?function(t){return bp.resolve(null).then(t).catch($1)}:bc;function $1(t){setTimeout(function(){throw t})}function ju(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Yi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Yi(e)}function Kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),nn="__reactFiber$"+Gs,to="__reactProps$"+Gs,En="__reactContainer$"+Gs,kc="__reactEvents$"+Gs,q1="__reactListeners$"+Gs,H1="__reactHandles$"+Gs;function Ar(t){var e=t[nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kp(t);t!==null;){if(n=t[nn])return n;t=kp(t)}return e}t=n,n=t.parentNode}return null}function Eo(t){return t=t[nn]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function bl(t){return t[to]||null}var Cc=[],fs=-1;function ur(t){return{current:t}}function Ie(t){0>fs||(t.current=Cc[fs],Cc[fs]=null,fs--)}function xe(t,e){fs++,Cc[fs]=t.current,t.current=e}var sr={},lt=ur(sr),yt=ur(!1),Dr=sr;function Cs(t,e){var n=t.type.contextTypes;if(!n)return sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vt(t){return t=t.childContextTypes,t!=null}function Ga(){Ie(yt),Ie(lt)}function Cp(t,e,n){if(lt.current!==sr)throw Error(B(168));xe(lt,e),xe(yt,n)}function S0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,kx(t)||"Unknown",s));return Ce({},n,r)}function Ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Dr=lt.current,xe(lt,t),xe(yt,yt.current),!0}function Rp(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=S0(t,e,Dr),r.__reactInternalMemoizedMergedChildContext=t,Ie(yt),Ie(lt),xe(lt,t)):Ie(yt),xe(yt,n)}var mn=null,kl=!1,Vu=!1;function b0(t){mn===null?mn=[t]:mn.push(t)}function W1(t){kl=!0,b0(t)}function cr(){if(!Vu&&mn!==null){Vu=!0;var t=0,e=ge;try{var n=mn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mn=null,kl=!1}catch(s){throw mn!==null&&(mn=mn.slice(t+1)),Zg(Pd,cr),s}finally{ge=e,Vu=!1}}return null}var ps=[],ms=0,Qa=null,Ya=0,kt=[],Ct=0,Mr=null,gn=1,yn="";function Ir(t,e){ps[ms++]=Ya,ps[ms++]=Qa,Qa=t,Ya=e}function k0(t,e,n){kt[Ct++]=gn,kt[Ct++]=yn,kt[Ct++]=Mr,Mr=t;var r=gn;t=yn;var s=32-Bt(r)-1;r&=~(1<<s),n+=1;var i=32-Bt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,gn=1<<32-Bt(e)+s|n<<s|r,yn=i+t}else gn=1<<i|n<<s|r,yn=t}function zd(t){t.return!==null&&(Ir(t,1),k0(t,1,0))}function Bd(t){for(;t===Qa;)Qa=ps[--ms],ps[ms]=null,Ya=ps[--ms],ps[ms]=null;for(;t===Mr;)Mr=kt[--Ct],kt[Ct]=null,yn=kt[--Ct],kt[Ct]=null,gn=kt[--Ct],kt[Ct]=null}var It=null,Tt=null,Ae=!1,Ut=null;function C0(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Tt=Kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mr!==null?{id:gn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Tt=null,!0):!1;default:return!1}}function Rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pc(t){if(Ae){var e=Tt;if(e){var n=e;if(!Pp(t,e)){if(Rc(t))throw Error(B(418));e=Kn(n.nextSibling);var r=It;e&&Pp(t,e)?C0(r,n):(t.flags=t.flags&-4097|2,Ae=!1,It=t)}}else{if(Rc(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ae=!1,It=t}}}function jp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function aa(t){if(t!==It)return!1;if(!Ae)return jp(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sc(t.type,t.memoizedProps)),e&&(e=Tt)){if(Rc(t))throw R0(),Error(B(418));for(;e;)C0(t,e),e=Kn(e.nextSibling)}if(jp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tt=Kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=It?Kn(t.stateNode.nextSibling):null;return!0}function R0(){for(var t=Tt;t;)t=Kn(t.nextSibling)}function Rs(){Tt=It=null,Ae=!1}function $d(t){Ut===null?Ut=[t]:Ut.push(t)}var G1=bn.ReactCurrentBatchConfig;function vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function la(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vp(t){var e=t._init;return e(t._payload)}function P0(t){function e(S,T){if(t){var A=S.deletions;A===null?(S.deletions=[T],S.flags|=16):A.push(T)}}function n(S,T){if(!t)return null;for(;T!==null;)e(S,T),T=T.sibling;return null}function r(S,T){for(S=new Map;T!==null;)T.key!==null?S.set(T.key,T):S.set(T.index,T),T=T.sibling;return S}function s(S,T){return S=Jn(S,T),S.index=0,S.sibling=null,S}function i(S,T,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<T?(S.flags|=2,T):A):(S.flags|=2,T)):(S.flags|=1048576,T)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,T,A,V){return T===null||T.tag!==6?(T=zu(A,S.mode,V),T.return=S,T):(T=s(T,A),T.return=S,T)}function c(S,T,A,V){var M=A.type;return M===ls?p(S,T,A.props.children,V,A.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===On&&Vp(M)===T.type)?(V=s(T,A.props),V.ref=vi(S,T,A),V.return=S,V):(V=Ca(A.type,A.key,A.props,null,S.mode,V),V.ref=vi(S,T,A),V.return=S,V)}function h(S,T,A,V){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=Bu(A,S.mode,V),T.return=S,T):(T=s(T,A.children||[]),T.return=S,T)}function p(S,T,A,V,M){return T===null||T.tag!==7?(T=jr(A,S.mode,V,M),T.return=S,T):(T=s(T,A),T.return=S,T)}function g(S,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return T=zu(""+T,S.mode,A),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Xo:return A=Ca(T.type,T.key,T.props,null,S.mode,A),A.ref=vi(S,null,T),A.return=S,A;case as:return T=Bu(T,S.mode,A),T.return=S,T;case On:var V=T._init;return g(S,V(T._payload),A)}if(Ti(T)||fi(T))return T=jr(T,S.mode,A,null),T.return=S,T;la(S,T)}return null}function v(S,T,A,V){var M=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:l(S,T,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Xo:return A.key===M?c(S,T,A,V):null;case as:return A.key===M?h(S,T,A,V):null;case On:return M=A._init,v(S,T,M(A._payload),V)}if(Ti(A)||fi(A))return M!==null?null:p(S,T,A,V,null);la(S,A)}return null}function b(S,T,A,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return S=S.get(A)||null,l(T,S,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Xo:return S=S.get(V.key===null?A:V.key)||null,c(T,S,V,M);case as:return S=S.get(V.key===null?A:V.key)||null,h(T,S,V,M);case On:var $=V._init;return b(S,T,A,$(V._payload),M)}if(Ti(V)||fi(V))return S=S.get(A)||null,p(T,S,V,M,null);la(T,V)}return null}function C(S,T,A,V){for(var M=null,$=null,_=T,y=T=0,E=null;_!==null&&y<A.length;y++){_.index>y?(E=_,_=null):E=_.sibling;var I=v(S,_,A[y],V);if(I===null){_===null&&(_=E);break}t&&_&&I.alternate===null&&e(S,_),T=i(I,T,y),$===null?M=I:$.sibling=I,$=I,_=E}if(y===A.length)return n(S,_),Ae&&Ir(S,y),M;if(_===null){for(;y<A.length;y++)_=g(S,A[y],V),_!==null&&(T=i(_,T,y),$===null?M=_:$.sibling=_,$=_);return Ae&&Ir(S,y),M}for(_=r(S,_);y<A.length;y++)E=b(_,S,y,A[y],V),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?y:E.key),T=i(E,T,y),$===null?M=E:$.sibling=E,$=E);return t&&_.forEach(function(w){return e(S,w)}),Ae&&Ir(S,y),M}function R(S,T,A,V){var M=fi(A);if(typeof M!="function")throw Error(B(150));if(A=M.call(A),A==null)throw Error(B(151));for(var $=M=null,_=T,y=T=0,E=null,I=A.next();_!==null&&!I.done;y++,I=A.next()){_.index>y?(E=_,_=null):E=_.sibling;var w=v(S,_,I.value,V);if(w===null){_===null&&(_=E);break}t&&_&&w.alternate===null&&e(S,_),T=i(w,T,y),$===null?M=w:$.sibling=w,$=w,_=E}if(I.done)return n(S,_),Ae&&Ir(S,y),M;if(_===null){for(;!I.done;y++,I=A.next())I=g(S,I.value,V),I!==null&&(T=i(I,T,y),$===null?M=I:$.sibling=I,$=I);return Ae&&Ir(S,y),M}for(_=r(S,_);!I.done;y++,I=A.next())I=b(_,S,y,I.value,V),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?y:I.key),T=i(I,T,y),$===null?M=I:$.sibling=I,$=I);return t&&_.forEach(function(N){return e(S,N)}),Ae&&Ir(S,y),M}function F(S,T,A,V){if(typeof A=="object"&&A!==null&&A.type===ls&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Xo:e:{for(var M=A.key,$=T;$!==null;){if($.key===M){if(M=A.type,M===ls){if($.tag===7){n(S,$.sibling),T=s($,A.props.children),T.return=S,S=T;break e}}else if($.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===On&&Vp(M)===$.type){n(S,$.sibling),T=s($,A.props),T.ref=vi(S,$,A),T.return=S,S=T;break e}n(S,$);break}else e(S,$);$=$.sibling}A.type===ls?(T=jr(A.props.children,S.mode,V,A.key),T.return=S,S=T):(V=Ca(A.type,A.key,A.props,null,S.mode,V),V.ref=vi(S,T,A),V.return=S,S=V)}return a(S);case as:e:{for($=A.key;T!==null;){if(T.key===$)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){n(S,T.sibling),T=s(T,A.children||[]),T.return=S,S=T;break e}else{n(S,T);break}else e(S,T);T=T.sibling}T=Bu(A,S.mode,V),T.return=S,S=T}return a(S);case On:return $=A._init,F(S,T,$(A._payload),V)}if(Ti(A))return C(S,T,A,V);if(fi(A))return R(S,T,A,V);la(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,T!==null&&T.tag===6?(n(S,T.sibling),T=s(T,A),T.return=S,S=T):(n(S,T),T=zu(A,S.mode,V),T.return=S,S=T),a(S)):n(S,T)}return F}var Ps=P0(!0),j0=P0(!1),Xa=ur(null),Ja=null,gs=null,qd=null;function Hd(){qd=gs=Ja=null}function Wd(t){var e=Xa.current;Ie(Xa),t._currentValue=e}function jc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ts(t,e){Ja=t,qd=gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function Vt(t){var e=t._currentValue;if(qd!==t)if(t={context:t,memoizedValue:e,next:null},gs===null){if(Ja===null)throw Error(B(308));gs=t,Ja.dependencies={lanes:0,firstContext:t}}else gs=gs.next=t;return e}var Sr=null;function Gd(t){Sr===null?Sr=[t]:Sr.push(t)}function V0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tn(t,r)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function Kd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tn(t,n)}return s=r.interleaved,s===null?(e.next=e,Gd(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tn(t,n)}function Ia(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jd(t,n)}}function Dp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Za(t,e,n,r){var s=t.updateQueue;Fn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?i=h:a.next=h,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;a=0,p=h=c=null,l=i;do{var v=l.lane,b=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,R=l;switch(v=e,b=n,R.tag){case 1:if(C=R.payload,typeof C=="function"){g=C.call(b,g,v);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,v=typeof C=="function"?C.call(b,g,v):C,v==null)break e;g=Ce({},g,v);break e;case 2:Fn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else b={eventTime:b,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=b,c=g):p=p.next=b,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(1);if(p===null&&(c=g),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Or|=a,t.lanes=a,t.memoizedState=g}}function Mp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var To={},sn=ur(To),no=ur(To),ro=ur(To);function br(t){if(t===To)throw Error(B(174));return t}function Qd(t,e){switch(xe(ro,e),xe(no,t),xe(sn,To),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fc(e,t)}Ie(sn),xe(sn,e)}function js(){Ie(sn),Ie(no),Ie(ro)}function M0(t){br(ro.current);var e=br(sn.current),n=fc(e,t.type);e!==n&&(xe(no,t),xe(sn,n))}function Yd(t){no.current===t&&(Ie(sn),Ie(no))}var be=ur(0);function el(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Du=[];function Xd(){for(var t=0;t<Du.length;t++)Du[t]._workInProgressVersionPrimary=null;Du.length=0}var Na=bn.ReactCurrentDispatcher,Mu=bn.ReactCurrentBatchConfig,Lr=0,ke=null,ze=null,He=null,tl=!1,Di=!1,so=0,K1=0;function rt(){throw Error(B(321))}function Jd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Zd(t,e,n,r,s,i){if(Lr=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Na.current=t===null||t.memoizedState===null?J1:Z1,t=n(r,s),Di){i=0;do{if(Di=!1,so=0,25<=i)throw Error(B(301));i+=1,He=ze=null,e.updateQueue=null,Na.current=ew,t=n(r,s)}while(Di)}if(Na.current=nl,e=ze!==null&&ze.next!==null,Lr=0,He=ze=ke=null,tl=!1,e)throw Error(B(300));return t}function eh(){var t=so!==0;return so=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?ke.memoizedState=He=t:He=He.next=t,He}function Dt(){if(ze===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=He===null?ke.memoizedState:He.next;if(e!==null)He=e,ze=t;else{if(t===null)throw Error(B(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?ke.memoizedState=He=t:He=He.next=t}return He}function io(t,e){return typeof e=="function"?e(t):e}function Lu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,h=i;do{var p=h.lane;if((Lr&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=g,a=r):c=c.next=g,ke.lanes|=p,Or|=p}h=h.next}while(h!==null&&h!==i);c===null?a=r:c.next=l,Ht(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,Or|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ou(t){var e=Dt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ht(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function L0(){}function O0(t,e){var n=ke,r=Dt(),s=e(),i=!Ht(r.memoizedState,s);if(i&&(r.memoizedState=s,gt=!0),r=r.queue,th(z0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,oo(9,U0.bind(null,n,r,s,e),void 0,null),We===null)throw Error(B(349));Lr&30||F0(n,e,s)}return s}function F0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function U0(t,e,n,r){e.value=n,e.getSnapshot=r,B0(e)&&$0(t)}function z0(t,e,n){return n(function(){B0(e)&&$0(t)})}function B0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function $0(t){var e=Tn(t,1);e!==null&&$t(e,t,1,-1)}function Lp(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},e.queue=t,t=t.dispatch=X1.bind(null,ke,t),[e.memoizedState,t]}function oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function q0(){return Dt().memoizedState}function Aa(t,e,n,r){var s=tn();ke.flags|=t,s.memoizedState=oo(1|e,n,void 0,r===void 0?null:r)}function Cl(t,e,n,r){var s=Dt();r=r===void 0?null:r;var i=void 0;if(ze!==null){var a=ze.memoizedState;if(i=a.destroy,r!==null&&Jd(r,a.deps)){s.memoizedState=oo(e,n,i,r);return}}ke.flags|=t,s.memoizedState=oo(1|e,n,i,r)}function Op(t,e){return Aa(8390656,8,t,e)}function th(t,e){return Cl(2048,8,t,e)}function H0(t,e){return Cl(4,2,t,e)}function W0(t,e){return Cl(4,4,t,e)}function G0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K0(t,e,n){return n=n!=null?n.concat([t]):null,Cl(4,4,G0.bind(null,e,t),n)}function nh(){}function Q0(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Y0(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function X0(t,e,n){return Lr&21?(Ht(n,e)||(n=n0(),ke.lanes|=n,Or|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function Q1(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Mu.transition;Mu.transition={};try{t(!1),e()}finally{ge=n,Mu.transition=r}}function J0(){return Dt().memoizedState}function Y1(t,e,n){var r=Xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z0(t))ey(e,n);else if(n=V0(t,e,n,r),n!==null){var s=dt();$t(n,t,r,s),ty(n,e,r)}}function X1(t,e,n){var r=Xn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z0(t))ey(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,a)){var c=e.interleaved;c===null?(s.next=s,Gd(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=V0(t,e,s,r),n!==null&&(s=dt(),$t(n,t,r,s),ty(n,e,r))}}function Z0(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function ey(t,e){Di=tl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ty(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jd(t,n)}}var nl={readContext:Vt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},J1={readContext:Vt,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:Vt,useEffect:Op,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Aa(4194308,4,G0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Aa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Aa(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Y1.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:Lp,useDebugValue:nh,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=Lp(!1),e=t[0];return t=Q1.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=tn();if(Ae){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),We===null)throw Error(B(349));Lr&30||F0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Op(z0.bind(null,r,i,t),[t]),r.flags|=2048,oo(9,U0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=tn(),e=We.identifierPrefix;if(Ae){var n=yn,r=gn;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=K1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Z1={readContext:Vt,useCallback:Q0,useContext:Vt,useEffect:th,useImperativeHandle:K0,useInsertionEffect:H0,useLayoutEffect:W0,useMemo:Y0,useReducer:Lu,useRef:q0,useState:function(){return Lu(io)},useDebugValue:nh,useDeferredValue:function(t){var e=Dt();return X0(e,ze.memoizedState,t)},useTransition:function(){var t=Lu(io)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:L0,useSyncExternalStore:O0,useId:J0,unstable_isNewReconciler:!1},ew={readContext:Vt,useCallback:Q0,useContext:Vt,useEffect:th,useImperativeHandle:K0,useInsertionEffect:H0,useLayoutEffect:W0,useMemo:Y0,useReducer:Ou,useRef:q0,useState:function(){return Ou(io)},useDebugValue:nh,useDeferredValue:function(t){var e=Dt();return ze===null?e.memoizedState=t:X0(e,ze.memoizedState,t)},useTransition:function(){var t=Ou(io)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:L0,useSyncExternalStore:O0,useId:J0,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rl={isMounted:function(t){return(t=t._reactInternals)?Hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Xn(t),i=_n(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&($t(e,t,s,r),Ia(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dt(),s=Xn(t),i=_n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&($t(e,t,s,r),Ia(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),r=Xn(t),s=_n(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,r),e!==null&&($t(e,t,r,n),Ia(e,t,r))}};function Fp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ji(n,r)||!Ji(s,i):!0}function ny(t,e,n){var r=!1,s=sr,i=e.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(s=vt(e)?Dr:lt.current,r=e.contextTypes,i=(r=r!=null)?Cs(t,s):sr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Up(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rl.enqueueReplaceState(e,e.state,null)}function Dc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Kd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vt(i):(i=vt(e)?Dr:lt.current,s.context=Cs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Vc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Rl.enqueueReplaceState(s,s.state,null),Za(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e){try{var n="",r=e;do n+=bx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Fu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tw=typeof WeakMap=="function"?WeakMap:Map;function ry(t,e,n){n=_n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sl||(sl=!0,Wc=r),Mc(t,e)},n}function sy(t,e,n){n=_n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mc(t,e),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function zp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mw.bind(null,t,e,n),e.then(t,t))}function Bp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $p(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_n(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var nw=bn.ReactCurrentOwner,gt=!1;function ct(t,e,n,r){e.child=t===null?j0(e,null,n,r):Ps(e,t.child,n,r)}function qp(t,e,n,r,s){n=n.render;var i=e.ref;return Ts(e,s),r=Zd(t,e,n,r,i,s),n=eh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(Ae&&n&&zd(e),e.flags|=1,ct(t,e,r,s),e.child)}function Hp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ch(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iy(t,e,i,r,s)):(t=Ca(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ji,n(a,r)&&t.ref===e.ref)return In(t,e,s)}return e.flags|=1,t=Jn(i,r),t.ref=e.ref,t.return=e,e.child=t}function iy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ji(i,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,In(t,e,s)}return Lc(t,e,n,r,s)}function oy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(vs,Et),Et|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(vs,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xe(vs,Et),Et|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xe(vs,Et),Et|=r;return ct(t,e,s,n),e.child}function ay(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lc(t,e,n,r,s){var i=vt(n)?Dr:lt.current;return i=Cs(e,i),Ts(e,s),n=Zd(t,e,n,r,i,s),r=eh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(Ae&&r&&zd(e),e.flags|=1,ct(t,e,n,s),e.child)}function Wp(t,e,n,r,s){if(vt(n)){var i=!0;Ka(e)}else i=!1;if(Ts(e,s),e.stateNode===null)Sa(t,e),ny(e,n,r),Dc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Vt(h):(h=vt(n)?Dr:lt.current,h=Cs(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Up(e,a,r,h),Fn=!1;var v=e.memoizedState;a.state=v,Za(e,r,a,s),c=e.memoizedState,l!==r||v!==c||yt.current||Fn?(typeof p=="function"&&(Vc(e,n,p,r),c=e.memoizedState),(l=Fn||Fp(e,n,l,r,v,c,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,D0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ot(e.type,l),a.props=h,g=e.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vt(c):(c=vt(n)?Dr:lt.current,c=Cs(e,c));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||v!==c)&&Up(e,a,r,c),Fn=!1,v=e.memoizedState,a.state=v,Za(e,r,a,s);var C=e.memoizedState;l!==g||v!==C||yt.current||Fn?(typeof b=="function"&&(Vc(e,n,b,r),C=e.memoizedState),(h=Fn||Fp(e,n,h,r,v,C,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Oc(t,e,n,r,i,s)}function Oc(t,e,n,r,s,i){ay(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Rp(e,n,!1),In(t,e,i);r=e.stateNode,nw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ps(e,t.child,null,i),e.child=Ps(e,null,l,i)):ct(t,e,l,i),e.memoizedState=r.state,s&&Rp(e,n,!0),e.child}function ly(t){var e=t.stateNode;e.pendingContext?Cp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cp(t,e.context,!1),Qd(t,e.containerInfo)}function Gp(t,e,n,r,s){return Rs(),$d(s),e.flags|=256,ct(t,e,n,r),e.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function Uc(t){return{baseLanes:t,cachePool:null,transitions:null}}function uy(t,e,n){var r=e.pendingProps,s=be.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(be,s&1),t===null)return Pc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Vl(a,r,0,null),t=jr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Uc(n),e.memoizedState=Fc,t):rh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rw(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Jn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jn(l,i):(i=jr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Uc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Fc,r}return i=t.child,t=i.sibling,r=Jn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rh(t,e){return e=Vl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ua(t,e,n,r){return r!==null&&$d(r),Ps(e,t.child,null,n),t=rh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rw(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Fu(Error(B(422))),ua(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vl({mode:"visible",children:r.children},s,0,null),i=jr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ps(e,t.child,null,a),e.child.memoizedState=Uc(a),e.memoizedState=Fc,i);if(!(e.mode&1))return ua(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=Fu(i,r,void 0),ua(t,e,a,r)}if(l=(a&t.childLanes)!==0,gt||l){if(r=We,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(t,s),$t(r,t,s,-1))}return uh(),r=Fu(Error(B(421))),ua(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tt=Kn(s.nextSibling),It=e,Ae=!0,Ut=null,t!==null&&(kt[Ct++]=gn,kt[Ct++]=yn,kt[Ct++]=Mr,gn=t.id,yn=t.overflow,Mr=e),e=rh(e,r.children),e.flags|=4096,e)}function Kp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jc(t.return,e,n)}function Uu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ct(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kp(t,n,e);else if(t.tag===19)Kp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&el(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Uu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&el(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Uu(e,!0,n,null,i);break;case"together":Uu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function In(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Or|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sw(t,e,n){switch(e.tag){case 3:ly(e),Rs();break;case 5:M0(e);break;case 1:vt(e.type)&&Ka(e);break;case 4:Qd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;xe(Xa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?uy(t,e,n):(xe(be,be.current&1),t=In(t,e,n),t!==null?t.sibling:null);xe(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,oy(t,e,n)}return In(t,e,n)}var dy,zc,hy,fy;dy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zc=function(){};hy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,br(sn.current);var i=null;switch(n){case"input":s=uc(t,s),r=uc(t,r),i=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),i=[];break;case"textarea":s=hc(t,s),r=hc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wa)}pc(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hi.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ee("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};fy=function(t,e,n,r){n!==r&&(e.flags|=4)};function _i(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iw(t,e,n){var r=e.pendingProps;switch(Bd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return vt(e.type)&&Ga(),st(e),null;case 3:return r=e.stateNode,js(),Ie(yt),Ie(lt),Xd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ut!==null&&(Qc(Ut),Ut=null))),zc(t,e),st(e),null;case 5:Yd(e);var s=br(ro.current);if(n=e.type,t!==null&&e.stateNode!=null)hy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return st(e),null}if(t=br(sn.current),aa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[nn]=e,r[to]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Ni.length;s++)Ee(Ni[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":rp(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":ip(r,i),Ee("invalid",r)}pc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&oa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&oa(r.textContent,l,t),s=["children",""+l]):Hi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Jo(r),sp(r,i,!0);break;case"textarea":Jo(r),op(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[nn]=e,t[to]=r,dy(t,e,!1,!1),e.stateNode=t;e:{switch(a=mc(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ni.length;s++)Ee(Ni[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":rp(t,r),s=uc(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":ip(t,r),s=hc(t,r),Ee("invalid",t);break;default:s=r}pc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?qg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bg(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wi(t,c):typeof c=="number"&&Wi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",t):c!=null&&Sd(t,i,c,a))}switch(n){case"input":Jo(t),sp(t,r,!1);break;case"textarea":Jo(t),op(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_s(t,!!r.multiple,i,!1):r.defaultValue!=null&&_s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)fy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=br(ro.current),br(sn.current),aa(e)){if(r=e.stateNode,n=e.memoizedProps,r[nn]=e,(i=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=e,e.stateNode=r}return st(e),null;case 13:if(Ie(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Tt!==null&&e.mode&1&&!(e.flags&128))R0(),Rs(),e.flags|=98560,i=!1;else if(i=aa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[nn]=e}else Rs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),i=!1}else Ut!==null&&(Qc(Ut),Ut=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Be===0&&(Be=3):uh())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return js(),zc(t,e),t===null&&Zi(e.stateNode.containerInfo),st(e),null;case 10:return Wd(e.type._context),st(e),null;case 17:return vt(e.type)&&Ga(),st(e),null;case 19:if(Ie(be),i=e.memoizedState,i===null)return st(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)_i(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=el(t),a!==null){for(e.flags|=128,_i(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Ds&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304)}else{if(!r)if(t=el(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ae)return st(e),null}else 2*Me()-i.renderingStartTime>Ds&&n!==1073741824&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=be.current,xe(be,r?n&1|2:n&1),e):(st(e),null);case 22:case 23:return lh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Et&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function ow(t,e){switch(Bd(e),e.tag){case 1:return vt(e.type)&&Ga(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return js(),Ie(yt),Ie(lt),Xd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yd(e),null;case 13:if(Ie(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Rs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(be),null;case 4:return js(),null;case 10:return Wd(e.type._context),null;case 22:case 23:return lh(),null;case 24:return null;default:return null}}var ca=!1,ot=!1,aw=typeof WeakSet=="function"?WeakSet:Set,G=null;function ys(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Bc(t,e,n){try{n()}catch(r){je(t,e,r)}}var Qp=!1;function lw(t,e){if(Nc=$a,t=v0(),Ud(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,p=0,g=t,v=null;t:for(;;){for(var b;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==i||r!==0&&g.nodeType!==3||(c=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(b=g.firstChild)!==null;)v=g,g=b;for(;;){if(g===t)break t;if(v===n&&++h===s&&(l=a),v===i&&++p===r&&(c=a),(b=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=b}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ac={focusedElem:t,selectionRange:n},$a=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,F=C.memoizedState,S=e.stateNode,T=S.getSnapshotBeforeUpdate(e.elementType===e.type?R:Ot(e.type,R),F);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(V){je(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return C=Qp,Qp=!1,C}function Mi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bc(e,n,i)}s=s.next}while(s!==r)}}function Pl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $c(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function py(t){var e=t.alternate;e!==null&&(t.alternate=null,py(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nn],delete e[to],delete e[kc],delete e[q1],delete e[H1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function my(t){return t.tag===5||t.tag===3||t.tag===4}function Yp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||my(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wa));else if(r!==4&&(t=t.child,t!==null))for(qc(t,e,n),t=t.sibling;t!==null;)qc(t,e,n),t=t.sibling}function Hc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hc(t,e,n),t=t.sibling;t!==null;)Hc(t,e,n),t=t.sibling}var Ke=null,Ft=!1;function Mn(t,e,n){for(n=n.child;n!==null;)gy(t,e,n),n=n.sibling}function gy(t,e,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Il,n)}catch{}switch(n.tag){case 5:ot||ys(n,e);case 6:var r=Ke,s=Ft;Ke=null,Mn(t,e,n),Ke=r,Ft=s,Ke!==null&&(Ft?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Ft?(t=Ke,n=n.stateNode,t.nodeType===8?ju(t.parentNode,n):t.nodeType===1&&ju(t,n),Yi(t)):ju(Ke,n.stateNode));break;case 4:r=Ke,s=Ft,Ke=n.stateNode.containerInfo,Ft=!0,Mn(t,e,n),Ke=r,Ft=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Bc(n,e,a),s=s.next}while(s!==r)}Mn(t,e,n);break;case 1:if(!ot&&(ys(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){je(n,e,l)}Mn(t,e,n);break;case 21:Mn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Mn(t,e,n),ot=r):Mn(t,e,n);break;default:Mn(t,e,n)}}function Xp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aw),e.forEach(function(r){var s=yw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,Ft=!1;break e;case 3:Ke=l.stateNode.containerInfo,Ft=!0;break e;case 4:Ke=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if(Ke===null)throw Error(B(160));gy(i,a,s),Ke=null,Ft=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){je(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yy(e,t),e=e.sibling}function yy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),en(t),r&4){try{Mi(3,t,t.return),Pl(3,t)}catch(R){je(t,t.return,R)}try{Mi(5,t,t.return)}catch(R){je(t,t.return,R)}}break;case 1:Lt(e,t),en(t),r&512&&n!==null&&ys(n,n.return);break;case 5:if(Lt(e,t),en(t),r&512&&n!==null&&ys(n,n.return),t.flags&32){var s=t.stateNode;try{Wi(s,"")}catch(R){je(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Fg(s,i),mc(l,a);var h=mc(l,i);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?qg(s,g):p==="dangerouslySetInnerHTML"?Bg(s,g):p==="children"?Wi(s,g):Sd(s,p,g,h)}switch(l){case"input":cc(s,i);break;case"textarea":Ug(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?_s(s,!!i.multiple,b,!1):v!==!!i.multiple&&(i.defaultValue!=null?_s(s,!!i.multiple,i.defaultValue,!0):_s(s,!!i.multiple,i.multiple?[]:"",!1))}s[to]=i}catch(R){je(t,t.return,R)}}break;case 6:if(Lt(e,t),en(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){je(t,t.return,R)}}break;case 3:if(Lt(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yi(e.containerInfo)}catch(R){je(t,t.return,R)}break;case 4:Lt(e,t),en(t);break;case 13:Lt(e,t),en(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(oh=Me())),r&4&&Xp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(h=ot)||p,Lt(e,t),ot=h):Lt(e,t),en(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(G=t,p=t.child;p!==null;){for(g=G=p;G!==null;){switch(v=G,b=v.child,v.tag){case 0:case 11:case 14:case 15:Mi(4,v,v.return);break;case 1:ys(v,v.return);var C=v.stateNode;if(typeof C.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(R){je(r,n,R)}}break;case 5:ys(v,v.return);break;case 22:if(v.memoizedState!==null){Zp(g);continue}}b!==null?(b.return=v,G=b):Zp(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$g("display",a))}catch(R){je(t,t.return,R)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(R){je(t,t.return,R)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Lt(e,t),en(t),r&4&&Xp(t);break;case 21:break;default:Lt(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(my(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wi(s,""),r.flags&=-33);var i=Yp(t);Hc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Yp(t);qc(t,l,a);break;default:throw Error(B(161))}}catch(c){je(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uw(t,e,n){G=t,vy(t)}function vy(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ca;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ot;l=ca;var h=ot;if(ca=a,(ot=c)&&!h)for(G=s;G!==null;)a=G,c=a.child,a.tag===22&&a.memoizedState!==null?em(s):c!==null?(c.return=a,G=c):em(s);for(;i!==null;)G=i,vy(i),i=i.sibling;G=s,ca=l,ot=h}Jp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Jp(t)}}function Jp(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||Pl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Yi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ot||e.flags&512&&$c(e)}catch(v){je(e,e.return,v)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Zp(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function em(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pl(4,e)}catch(c){je(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){je(e,s,c)}}var i=e.return;try{$c(e)}catch(c){je(e,i,c)}break;case 5:var a=e.return;try{$c(e)}catch(c){je(e,a,c)}}}catch(c){je(e,e.return,c)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var cw=Math.ceil,rl=bn.ReactCurrentDispatcher,sh=bn.ReactCurrentOwner,jt=bn.ReactCurrentBatchConfig,de=0,We=null,Oe=null,Xe=0,Et=0,vs=ur(0),Be=0,ao=null,Or=0,jl=0,ih=0,Li=null,mt=null,oh=0,Ds=1/0,pn=null,sl=!1,Wc=null,Yn=null,da=!1,$n=null,il=0,Oi=0,Gc=null,ba=-1,ka=0;function dt(){return de&6?Me():ba!==-1?ba:ba=Me()}function Xn(t){return t.mode&1?de&2&&Xe!==0?Xe&-Xe:G1.transition!==null?(ka===0&&(ka=n0()),ka):(t=ge,t!==0||(t=window.event,t=t===void 0?16:u0(t.type)),t):1}function $t(t,e,n,r){if(50<Oi)throw Oi=0,Gc=null,Error(B(185));xo(t,n,r),(!(de&2)||t!==We)&&(t===We&&(!(de&2)&&(jl|=n),Be===4&&zn(t,Xe)),_t(t,r),n===1&&de===0&&!(e.mode&1)&&(Ds=Me()+500,kl&&cr()))}function _t(t,e){var n=t.callbackNode;Gx(t,e);var r=Ba(t,t===We?Xe:0);if(r===0)n!==null&&up(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&up(n),e===1)t.tag===0?W1(tm.bind(null,t)):b0(tm.bind(null,t)),B1(function(){!(de&6)&&cr()}),n=null;else{switch(r0(r)){case 1:n=Pd;break;case 4:n=e0;break;case 16:n=za;break;case 536870912:n=t0;break;default:n=za}n=Ay(n,_y.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _y(t,e){if(ba=-1,ka=0,de&6)throw Error(B(327));var n=t.callbackNode;if(Is()&&t.callbackNode!==n)return null;var r=Ba(t,t===We?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ol(t,r);else{e=r;var s=de;de|=2;var i=wy();(We!==t||Xe!==e)&&(pn=null,Ds=Me()+500,Pr(t,e));do try{fw();break}catch(l){xy(t,l)}while(1);Hd(),rl.current=i,de=s,Oe!==null?e=0:(We=null,Xe=0,e=Be)}if(e!==0){if(e===2&&(s=xc(t),s!==0&&(r=s,e=Kc(t,s))),e===1)throw n=ao,Pr(t,0),zn(t,r),_t(t,Me()),n;if(e===6)zn(t,r);else{if(s=t.current.alternate,!(r&30)&&!dw(s)&&(e=ol(t,r),e===2&&(i=xc(t),i!==0&&(r=i,e=Kc(t,i))),e===1))throw n=ao,Pr(t,0),zn(t,r),_t(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Nr(t,mt,pn);break;case 3:if(zn(t,r),(r&130023424)===r&&(e=oh+500-Me(),10<e)){if(Ba(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bc(Nr.bind(null,t,mt,pn),e);break}Nr(t,mt,pn);break;case 4:if(zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Bt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cw(r/1960))-r,10<r){t.timeoutHandle=bc(Nr.bind(null,t,mt,pn),r);break}Nr(t,mt,pn);break;case 5:Nr(t,mt,pn);break;default:throw Error(B(329))}}}return _t(t,Me()),t.callbackNode===n?_y.bind(null,t):null}function Kc(t,e){var n=Li;return t.current.memoizedState.isDehydrated&&(Pr(t,e).flags|=256),t=ol(t,e),t!==2&&(e=mt,mt=n,e!==null&&Qc(e)),t}function Qc(t){mt===null?mt=t:mt.push.apply(mt,t)}function dw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ht(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zn(t,e){for(e&=~ih,e&=~jl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bt(e),r=1<<n;t[n]=-1,e&=~r}}function tm(t){if(de&6)throw Error(B(327));Is();var e=Ba(t,0);if(!(e&1))return _t(t,Me()),null;var n=ol(t,e);if(t.tag!==0&&n===2){var r=xc(t);r!==0&&(e=r,n=Kc(t,r))}if(n===1)throw n=ao,Pr(t,0),zn(t,e),_t(t,Me()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,mt,pn),_t(t,Me()),null}function ah(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Ds=Me()+500,kl&&cr())}}function Fr(t){$n!==null&&$n.tag===0&&!(de&6)&&Is();var e=de;de|=1;var n=jt.transition,r=ge;try{if(jt.transition=null,ge=1,t)return t()}finally{ge=r,jt.transition=n,de=e,!(de&6)&&cr()}}function lh(){Et=vs.current,Ie(vs)}function Pr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,z1(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Bd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ga();break;case 3:js(),Ie(yt),Ie(lt),Xd();break;case 5:Yd(r);break;case 4:js();break;case 13:Ie(be);break;case 19:Ie(be);break;case 10:Wd(r.type._context);break;case 22:case 23:lh()}n=n.return}if(We=t,Oe=t=Jn(t.current,null),Xe=Et=e,Be=0,ao=null,ih=jl=Or=0,mt=Li=null,Sr!==null){for(e=0;e<Sr.length;e++)if(n=Sr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Sr=null}return t}function xy(t,e){do{var n=Oe;try{if(Hd(),Na.current=nl,tl){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}tl=!1}if(Lr=0,He=ze=ke=null,Di=!1,so=0,sh.current=null,n===null||n.return===null){Be=1,ao=e,Oe=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Xe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=Bp(a);if(b!==null){b.flags&=-257,$p(b,a,l,i,e),b.mode&1&&zp(i,h,e),e=b,c=h;var C=e.updateQueue;if(C===null){var R=new Set;R.add(c),e.updateQueue=R}else C.add(c);break e}else{if(!(e&1)){zp(i,h,e),uh();break e}c=Error(B(426))}}else if(Ae&&l.mode&1){var F=Bp(a);if(F!==null){!(F.flags&65536)&&(F.flags|=256),$p(F,a,l,i,e),$d(Vs(c,l));break e}}i=c=Vs(c,l),Be!==4&&(Be=2),Li===null?Li=[i]:Li.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=ry(i,c,e);Dp(i,S);break e;case 1:l=c;var T=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Yn===null||!Yn.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=sy(i,l,e);Dp(i,V);break e}}i=i.return}while(i!==null)}Ty(n)}catch(M){e=M,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(1)}function wy(){var t=rl.current;return rl.current=nl,t===null?nl:t}function uh(){(Be===0||Be===3||Be===2)&&(Be=4),We===null||!(Or&268435455)&&!(jl&268435455)||zn(We,Xe)}function ol(t,e){var n=de;de|=2;var r=wy();(We!==t||Xe!==e)&&(pn=null,Pr(t,e));do try{hw();break}catch(s){xy(t,s)}while(1);if(Hd(),de=n,rl.current=r,Oe!==null)throw Error(B(261));return We=null,Xe=0,Be}function hw(){for(;Oe!==null;)Ey(Oe)}function fw(){for(;Oe!==null&&!Ox();)Ey(Oe)}function Ey(t){var e=Ny(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?Ty(t):Oe=e,sh.current=null}function Ty(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ow(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Oe=null;return}}else if(n=iw(n,e,Et),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Be===0&&(Be=5)}function Nr(t,e,n){var r=ge,s=jt.transition;try{jt.transition=null,ge=1,pw(t,e,n,r)}finally{jt.transition=s,ge=r}return null}function pw(t,e,n,r){do Is();while($n!==null);if(de&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Kx(t,i),t===We&&(Oe=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||da||(da=!0,Ay(za,function(){return Is(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var a=ge;ge=1;var l=de;de|=4,sh.current=null,lw(t,n),yy(n,t),V1(Ac),$a=!!Nc,Ac=Nc=null,t.current=n,uw(n),Fx(),de=l,ge=a,jt.transition=i}else t.current=n;if(da&&(da=!1,$n=t,il=s),i=t.pendingLanes,i===0&&(Yn=null),Bx(n.stateNode),_t(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sl)throw sl=!1,t=Wc,Wc=null,t;return il&1&&t.tag!==0&&Is(),i=t.pendingLanes,i&1?t===Gc?Oi++:(Oi=0,Gc=t):Oi=0,cr(),null}function Is(){if($n!==null){var t=r0(il),e=jt.transition,n=ge;try{if(jt.transition=null,ge=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,il=0,de&6)throw Error(B(331));var s=de;for(de|=4,G=t.current;G!==null;){var i=G,a=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(G=h;G!==null;){var p=G;switch(p.tag){case 0:case 11:case 15:Mi(8,p,i)}var g=p.child;if(g!==null)g.return=p,G=g;else for(;G!==null;){p=G;var v=p.sibling,b=p.return;if(py(p),p===h){G=null;break}if(v!==null){v.return=b,G=v;break}G=b}}}var C=i.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var F=R.sibling;R.sibling=null,R=F}while(R!==null)}}G=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,G=a;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mi(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,G=S;break e}G=i.return}}var T=t.current;for(G=T;G!==null;){a=G;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,G=A;else e:for(a=T;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pl(9,l)}}catch(M){je(l,l.return,M)}if(l===a){G=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,G=V;break e}G=l.return}}if(de=s,cr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Il,t)}catch{}r=!0}return r}finally{ge=n,jt.transition=e}}return!1}function nm(t,e,n){e=Vs(n,e),e=ry(t,e,1),t=Qn(t,e,1),e=dt(),t!==null&&(xo(t,1,e),_t(t,e))}function je(t,e,n){if(t.tag===3)nm(t,t,n);else for(;e!==null;){if(e.tag===3){nm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){t=Vs(n,t),t=sy(e,t,1),e=Qn(e,t,1),t=dt(),e!==null&&(xo(e,1,t),_t(e,t));break}}e=e.return}}function mw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Xe&n)===n&&(Be===4||Be===3&&(Xe&130023424)===Xe&&500>Me()-oh?Pr(t,0):ih|=n),_t(t,e)}function Iy(t,e){e===0&&(t.mode&1?(e=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):e=1);var n=dt();t=Tn(t,e),t!==null&&(xo(t,e,n),_t(t,n))}function gw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Iy(t,n)}function yw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Iy(t,n)}var Ny;Ny=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,sw(t,e,n);gt=!!(t.flags&131072)}else gt=!1,Ae&&e.flags&1048576&&k0(e,Ya,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sa(t,e),t=e.pendingProps;var s=Cs(e,lt.current);Ts(e,n),s=Zd(null,e,r,t,s,n);var i=eh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vt(r)?(i=!0,Ka(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kd(e),s.updater=Rl,e.stateNode=s,s._reactInternals=e,Dc(e,r,t,n),e=Oc(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&zd(e),ct(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_w(r),t=Ot(r,t),s){case 0:e=Lc(null,e,r,t,n);break e;case 1:e=Wp(null,e,r,t,n);break e;case 11:e=qp(null,e,r,t,n);break e;case 14:e=Hp(null,e,r,Ot(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Lc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Wp(t,e,r,s,n);case 3:e:{if(ly(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,D0(t,e),Za(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vs(Error(B(423)),e),e=Gp(t,e,r,n,s);break e}else if(r!==s){s=Vs(Error(B(424)),e),e=Gp(t,e,r,n,s);break e}else for(Tt=Kn(e.stateNode.containerInfo.firstChild),It=e,Ae=!0,Ut=null,n=j0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),r===s){e=In(t,e,n);break e}ct(t,e,r,n)}e=e.child}return e;case 5:return M0(e),t===null&&Pc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Sc(r,s)?a=null:i!==null&&Sc(r,i)&&(e.flags|=32),ay(t,e),ct(t,e,a,n),e.child;case 6:return t===null&&Pc(e),null;case 13:return uy(t,e,n);case 4:return Qd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ps(e,null,r,n):ct(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),qp(t,e,r,s,n);case 7:return ct(t,e,e.pendingProps,n),e.child;case 8:return ct(t,e,e.pendingProps.children,n),e.child;case 12:return ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,xe(Xa,r._currentValue),r._currentValue=a,i!==null)if(Ht(i.value,a)){if(i.children===s.children&&!yt.current){e=In(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=_n(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),jc(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(B(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),jc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ct(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ts(e,n),s=Vt(s),r=r(s),e.flags|=1,ct(t,e,r,n),e.child;case 14:return r=e.type,s=Ot(r,e.pendingProps),s=Ot(r.type,s),Hp(t,e,r,s,n);case 15:return iy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Sa(t,e),e.tag=1,vt(r)?(t=!0,Ka(e)):t=!1,Ts(e,n),ny(e,r,s),Dc(e,r,s,n),Oc(null,e,r,!0,t,n);case 19:return cy(t,e,n);case 22:return oy(t,e,n)}throw Error(B(156,e.tag))};function Ay(t,e){return Zg(t,e)}function vw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new vw(t,e,n,r)}function ch(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _w(t){if(typeof t=="function")return ch(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kd)return 11;if(t===Cd)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ca(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")ch(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ls:return jr(n.children,s,i,e);case bd:a=8,s|=8;break;case ic:return t=Pt(12,n,e,s|2),t.elementType=ic,t.lanes=i,t;case oc:return t=Pt(13,n,e,s),t.elementType=oc,t.lanes=i,t;case ac:return t=Pt(19,n,e,s),t.elementType=ac,t.lanes=i,t;case Mg:return Vl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vg:a=10;break e;case Dg:a=9;break e;case kd:a=11;break e;case Cd:a=14;break e;case On:a=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Pt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function jr(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function Vl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=Mg,t.lanes=n,t.stateNode={isHidden:!1},t}function zu(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function Bu(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eu(0),this.expirationTimes=Eu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dh(t,e,n,r,s,i,a,l,c){return t=new xw(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kd(i),t}function ww(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sy(t){if(!t)return sr;t=t._reactInternals;e:{if(Hr(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(vt(n))return S0(t,n,e)}return e}function by(t,e,n,r,s,i,a,l,c){return t=dh(n,r,!0,t,s,i,a,l,c),t.context=Sy(null),n=t.current,r=dt(),s=Xn(n),i=_n(r,s),i.callback=e??null,Qn(n,i,s),t.current.lanes=s,xo(t,s,r),_t(t,r),t}function Dl(t,e,n,r){var s=e.current,i=dt(),a=Xn(s);return n=Sy(n),e.context===null?e.context=n:e.pendingContext=n,e=_n(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(s,e,a),t!==null&&($t(t,s,a,i),Ia(t,s,a)),a}function al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hh(t,e){rm(t,e),(t=t.alternate)&&rm(t,e)}function Ew(){return null}var ky=typeof reportError=="function"?reportError:function(t){console.error(t)};function fh(t){this._internalRoot=t}Ml.prototype.render=fh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Dl(t,e,null,null)};Ml.prototype.unmount=fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fr(function(){Dl(null,t,null,null)}),e[En]=null}};function Ml(t){this._internalRoot=t}Ml.prototype.unstable_scheduleHydration=function(t){if(t){var e=o0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&l0(t)}};function ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sm(){}function Tw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=al(a);i.call(h)}}var a=by(e,r,t,0,null,!1,!1,"",sm);return t._reactRootContainer=a,t[En]=a.current,Zi(t.nodeType===8?t.parentNode:t),Fr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=al(c);l.call(h)}}var c=dh(t,0,!1,null,null,!1,!1,"",sm);return t._reactRootContainer=c,t[En]=c.current,Zi(t.nodeType===8?t.parentNode:t),Fr(function(){Dl(e,c,n,r)}),c}function Ol(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=al(a);l.call(c)}}Dl(e,a,t,s)}else a=Tw(n,e,t,s,r);return al(a)}s0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ii(e.pendingLanes);n!==0&&(jd(e,n|1),_t(e,Me()),!(de&6)&&(Ds=Me()+500,cr()))}break;case 13:Fr(function(){var r=Tn(t,1);if(r!==null){var s=dt();$t(r,t,1,s)}}),hh(t,1)}};Vd=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=dt();$t(e,t,134217728,n)}hh(t,134217728)}};i0=function(t){if(t.tag===13){var e=Xn(t),n=Tn(t,e);if(n!==null){var r=dt();$t(n,t,e,r)}hh(t,e)}};o0=function(){return ge};a0=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};yc=function(t,e,n){switch(e){case"input":if(cc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bl(r);if(!s)throw Error(B(90));Og(r),cc(r,s)}}}break;case"textarea":Ug(t,n);break;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}};Gg=ah;Kg=Fr;var Iw={usingClientEntryPoint:!1,Events:[Eo,hs,bl,Hg,Wg,ah]},xi={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nw={bundleType:xi.bundleType,version:xi.version,rendererPackageName:xi.rendererPackageName,rendererConfig:xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xg(t),t===null?null:t.stateNode},findFiberByHostInstance:xi.findFiberByHostInstance||Ew,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ha.isDisabled&&ha.supportsFiber)try{Il=ha.inject(Nw),rn=ha}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iw;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ph(e))throw Error(B(200));return ww(t,e,null,n)};At.createRoot=function(t,e){if(!ph(t))throw Error(B(299));var n=!1,r="",s=ky;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dh(t,1,!1,null,null,n,!1,r,s),t[En]=e.current,Zi(t.nodeType===8?t.parentNode:t),new fh(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Xg(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Fr(t)};At.hydrate=function(t,e,n){if(!Ll(e))throw Error(B(200));return Ol(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!ph(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=ky;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=by(e,null,t,1,n??null,s,!1,i,a),t[En]=e.current,Zi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ml(e)};At.render=function(t,e,n){if(!Ll(e))throw Error(B(200));return Ol(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!Ll(t))throw Error(B(40));return t._reactRootContainer?(Fr(function(){Ol(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};At.unstable_batchedUpdates=ah;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ll(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Ol(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function Cy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cy)}catch(t){console.error(t)}}Cy(),Cg.exports=At;var Aw=Cg.exports,im=Aw;rc.createRoot=im.createRoot,rc.hydrateRoot=im.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Sw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Py={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,g=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,b=h&63;c||(b=64,a||(v=64)),r.push(n[p],n[g],n[v],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ry(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new bw;const v=i<<2|l>>4;if(r.push(v),h!==64){const b=l<<4&240|h>>2;if(r.push(b),g!==64){const C=h<<6&192|g;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kw=function(t){const e=Ry(t);return Py.encodeByteArray(e,!0)},jy=function(t){return kw(t).replace(/\./g,"")},Vy=function(t){try{return Py.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=()=>Cw().__FIREBASE_DEFAULTS__,Pw=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vy(t[1]);return e&&JSON.parse(e)},Dy=()=>{try{return Rw()||Pw()||jw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vw=t=>{var e;return(e=Dy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function Mw(){var t;const e=(t=Dy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ow(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Fw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uw(){return!Mw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zw(){try{return typeof indexedDB=="object"}catch{return!1}}function Bw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$w,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Io.prototype.create)}}class Io{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?qw(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new dr(s,l,r)}}function qw(t,e){return t.replace(Hw,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Hw=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ww(t,e){const n=new Gw(t,e);return n.subscribe.bind(n)}class Gw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Kw(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=$u),s.error===void 0&&(s.error=$u),s.complete===void 0&&(s.complete=$u);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $u(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class Ms{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const Qw={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},Yw=ue.INFO,Xw={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},Jw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Xw[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=Yw,this._logHandler=Jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const Zw=(t,e)=>e.some(n=>t instanceof n);let om,am;function eE(){return om||(om=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tE(){return am||(am=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ly=new WeakMap,Yc=new WeakMap,Oy=new WeakMap,qu=new WeakMap,gh=new WeakMap;function nE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Zn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Ly.set(n,t)}).catch(()=>{}),gh.set(e,t),e}function rE(t){if(Yc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Yc.set(t,e)}let Xc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sE(t){Xc=t(Xc)}function iE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hu(this),e,...n);return Oy.set(r,e.sort?e.sort():[e]),Zn(r)}:tE().includes(t)?function(...e){return t.apply(Hu(this),e),Zn(Ly.get(this))}:function(...e){return Zn(t.apply(Hu(this),e))}}function oE(t){return typeof t=="function"?iE(t):(t instanceof IDBTransaction&&rE(t),Zw(t,eE())?new Proxy(t,Xc):t)}function Zn(t){if(t instanceof IDBRequest)return nE(t);if(qu.has(t))return qu.get(t);const e=oE(t);return e!==t&&(qu.set(t,e),gh.set(e,t)),e}const Hu=t=>gh.get(t);function aE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Zn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Zn(a.result),c.oldVersion,c.newVersion,Zn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const lE=["get","getKey","getAll","getAllKeys","count"],uE=["put","add","delete","clear"],Wu=new Map;function lm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wu.get(e))return Wu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=uE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lE.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return Wu.set(e,i),i}sE(t=>({...t,get:(e,n,r)=>lm(e,n)||t.get(e,n,r),has:(e,n)=>!!lm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jc="@firebase/app",um="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new mh("@firebase/app"),hE="@firebase/app-compat",fE="@firebase/analytics-compat",pE="@firebase/analytics",mE="@firebase/app-check-compat",gE="@firebase/app-check",yE="@firebase/auth",vE="@firebase/auth-compat",_E="@firebase/database",xE="@firebase/data-connect",wE="@firebase/database-compat",EE="@firebase/functions",TE="@firebase/functions-compat",IE="@firebase/installations",NE="@firebase/installations-compat",AE="@firebase/messaging",SE="@firebase/messaging-compat",bE="@firebase/performance",kE="@firebase/performance-compat",CE="@firebase/remote-config",RE="@firebase/remote-config-compat",PE="@firebase/storage",jE="@firebase/storage-compat",VE="@firebase/firestore",DE="@firebase/vertexai-preview",ME="@firebase/firestore-compat",LE="firebase",OE="10.14.1",FE={[Jc]:"fire-core",[hE]:"fire-core-compat",[pE]:"fire-analytics",[fE]:"fire-analytics-compat",[gE]:"fire-app-check",[mE]:"fire-app-check-compat",[yE]:"fire-auth",[vE]:"fire-auth-compat",[_E]:"fire-rtdb",[xE]:"fire-data-connect",[wE]:"fire-rtdb-compat",[EE]:"fire-fn",[TE]:"fire-fn-compat",[IE]:"fire-iid",[NE]:"fire-iid-compat",[AE]:"fire-fcm",[SE]:"fire-fcm-compat",[bE]:"fire-perf",[kE]:"fire-perf-compat",[CE]:"fire-rc",[RE]:"fire-rc-compat",[PE]:"fire-gcs",[jE]:"fire-gcs-compat",[VE]:"fire-fst",[ME]:"fire-fst-compat",[DE]:"fire-vertex","fire-js":"fire-js",[LE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Map,zE=new Map,cm=new Map;function dm(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){const e=t.name;if(cm.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,t);for(const n of UE.values())dm(n,t);for(const n of zE.values())dm(n,t);return!0}function kr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yh=new Io("app","Firebase",BE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=OE;function er(t,e,n){var r;let s=(r=FE[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(l.join(" "));return}Ls(new Ms(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebase-heartbeat-database",qE=1,lo="firebase-heartbeat-store";let Gu=null;function Fy(){return Gu||(Gu=aE($E,qE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw yh.create("idb-open",{originalErrorMessage:t.message})})),Gu}async function HE(t){try{const n=(await Fy()).transaction(lo),r=await n.objectStore(lo).get(Uy(t));return await n.done,r}catch(e){if(e instanceof dr)Nn.warn(e.message);else{const n=yh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function hm(t,e){try{const r=(await Fy()).transaction(lo,"readwrite");await r.objectStore(lo).put(e,Uy(t)),await r.done}catch(n){if(n instanceof dr)Nn.warn(n.message);else{const r=yh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function Uy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=1024,GE=30*24*60*60*1e3;class KE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=GE}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fm(),{heartbeatsToSend:r,unsentEntries:s}=QE(this._heartbeatsCache.heartbeats),i=jy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Nn.warn(n),""}}}function fm(){return new Date().toISOString().substring(0,10)}function QE(t,e=WE){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),pm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zw()?Bw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function pm(t){return jy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t){Ls(new Ms("platform-logger",e=>new cE(e),"PRIVATE")),Ls(new Ms("heartbeat",e=>new KE(e),"PRIVATE")),er(Jc,um,t),er(Jc,um,"esm2017"),er("fire-js","")}XE("");var JE="firebase",ZE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(JE,ZE,"app");function zy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function By(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eT=By,$y=new Io("auth","Firebase",By());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new mh("@firebase/auth");function tT(t,...e){ll.logLevel<=ue.WARN&&ll.warn(`Auth (${Fl}): ${t}`,...e)}function Ra(t,...e){ll.logLevel<=ue.ERROR&&ll.error(`Auth (${Fl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t,...e){throw vh(t,...e)}function qy(t,...e){return vh(t,...e)}function Hy(t,e,n){const r=Object.assign(Object.assign({},eT()),{[e]:n});return new Io("auth","Firebase",r).create(e,{appName:t.name})}function Ns(t){return Hy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $y.create(t,...e)}function me(t,e,...n){if(!t)throw vh(e,...n)}function Fi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ra(e),new Error(e)}function ul(t,e){t||Fi(e)}function nT(){return mm()==="http:"||mm()==="https:"}function mm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nT()||Ow()||"connection"in navigator)?navigator.onLine:!0}function sT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this.shortDelay=e,this.longDelay=n,ul(n>e,"Short delay should be less than long delay!"),this.isMobile=Dw()||Fw()}get(){return rT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t,e){ul(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new No(3e4,6e4);function Ul(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ao(t,e,n,r,s={}){return Gy(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=My(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return Lw()||(h.referrerPolicy="no-referrer"),Wy.fetch()(Qy(t,t.config.apiHost,n,l),h)})}async function Gy(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},oT),e);try{const s=new lT(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw fa(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fa(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw fa(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw fa(t,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Hy(t,p,h);Zc(t,p)}}catch(s){if(s instanceof dr)throw s;Zc(t,"network-request-failed",{message:String(s)})}}async function Ky(t,e,n,r,s={}){const i=await Ao(t,e,n,r,s);return"mfaPendingCredential"in i&&Zc(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Qy(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?iT(t.config,s):`${t.config.apiScheme}://${s}`}class lT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qy(this.auth,"network-request-failed")),aT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qy(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(t,e){return Ao(t,"POST","/v1/accounts:delete",e)}async function Yy(t,e){return Ao(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cT(t,e=!1){const n=Gt(t),r=await n.getIdToken(e),s=Xy(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ui(Ku(s.auth_time)),issuedAtTime:Ui(Ku(s.iat)),expirationTime:Ui(Ku(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ku(t){return Number(t)*1e3}function Xy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ra("JWT malformed, contained fewer than 3 sections"),null;try{const s=Vy(n);return s?JSON.parse(s):(Ra("Failed to decode base64 JWT payload"),null)}catch(s){return Ra("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function gm(t){const e=Xy(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ed(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&dT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ui(this.lastLoginAt),this.creationTime=Ui(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ed(t,Yy(n,{idToken:r}));me(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Jy(i.providerUserInfo):[],l=pT(t.providerData,a),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new td(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function fT(t){const e=Gt(t);await cl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Jy(t){return t.map(e=>{var{providerId:n}=e,r=zy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT(t,e){const n=await Gy(t,{},async()=>{const r=My({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=Qy(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Wy.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gT(t,e){return Ao(t,"POST","/v2/accounts:revokeToken",Ul(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=gm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await mT(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new As;return r&&(me(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new As,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=zy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new td(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ed(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cT(this,e)}reload(){return fT(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(Ns(this.auth));const e=await this.getIdToken();return await ed(this,uT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,l,c,h,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,b=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,F=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(h=n.createdAt)!==null&&h!==void 0?h:void 0,T=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:A,emailVerified:V,isAnonymous:M,providerData:$,stsTokenManager:_}=n;me(A&&_,e,"internal-error");const y=As.fromJSON(this.name,_);me(typeof A=="string",e,"internal-error"),Ln(g,e.name),Ln(v,e.name),me(typeof V=="boolean",e,"internal-error"),me(typeof M=="boolean",e,"internal-error"),Ln(b,e.name),Ln(C,e.name),Ln(R,e.name),Ln(F,e.name),Ln(S,e.name),Ln(T,e.name);const E=new vn({uid:A,auth:e,email:v,emailVerified:V,displayName:g,isAnonymous:M,photoURL:C,phoneNumber:b,tenantId:R,stsTokenManager:y,createdAt:S,lastLoginAt:T});return $&&Array.isArray($)&&(E.providerData=$.map(I=>Object.assign({},I))),F&&(E._redirectEventId=F),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new As;s.updateFromServerResponse(n);const i=new vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Jy(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new As;l.updateFromIdToken(r);const c=new vn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new td(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Map;function Cr(t){ul(t instanceof Function,"Expected a class definition");let e=ym.get(t);return e?(ul(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ym.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zy.type="NONE";const vm=Zy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ss{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Qu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Qu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ss(Cr(vm),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Cr(vm);const a=Qu(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(a);if(p){const g=vn._fromJSON(e,p);h!==i&&(l=g),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ss(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new Ss(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ET(e))return"Blackberry";if(TT(e))return"Webos";if(vT(e))return"Safari";if((e.includes("chrome/")||_T(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yT(t=Wt()){return/firefox\//i.test(t)}function vT(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _T(t=Wt()){return/crios\//i.test(t)}function xT(t=Wt()){return/iemobile/i.test(t)}function wT(t=Wt()){return/android/i.test(t)}function ET(t=Wt()){return/blackberry/i.test(t)}function TT(t=Wt()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e=[]){let n;switch(t){case"Browser":n=_m(Wt());break;case"Worker":n=`${_m(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(t,e={}){return Ao(t,"GET","/v2/passwordPolicy",Ul(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=6;class ST{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:AT,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xm(this),this.idTokenSubscription=new xm(this),this.beforeStateQueue=new IT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$y,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ss.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yy(this,{idToken:e}),r=await vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(Ns(this));const n=e?Gt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(Ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(Ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NT(this),n=new ST(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Io("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ss.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ev(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _h(t){return Gt(t)}class xm{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ww(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function kT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(t,e){return Ky(t,"POST","/v1/accounts:signUp",Ul(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vn._fromIdTokenResponse(e,r,s),a=wm(r);return new Os({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=wm(r);return new Os({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function wm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(t){var e;if(kr(t.app))return Promise.reject(Ns(t));const n=_h(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Os({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await CT(n,{returnSecureToken:!0}),s=await Os._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(t,e){return Ky(t,"POST","/v1/accounts:signInWithCustomToken",Ul(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(t,e){if(kr(t.app))return Promise.reject(Ns(t));const n=_h(t),r=await PT(n,{token:e,returnSecureToken:!0}),s=await Os._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}new No(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new No(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new No(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new No(5e3,15e3);var Em="@firebase/auth",Tm="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MT(t){Ls(new Ms("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;me(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ev(t)},h=new bT(r,s,i,c);return kT(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ls(new Ms("auth-internal",e=>{const n=_h(e.getProvider("auth").getImmediate());return(r=>new VT(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(Em,Tm,DT(t)),er(Em,Tm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=5*60;Vw("authIdTokenMaxAge");MT("Browser");var Im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vr,tv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function E(){}E.prototype=y.prototype,_.D=y.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(I,w,N){for(var x=Array(arguments.length-2),se=2;se<arguments.length;se++)x[se-2]=arguments[se];return y.prototype[w].apply(I,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,E){E||(E=0);var I=Array(16);if(typeof y=="string")for(var w=0;16>w;++w)I[w]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(w=0;16>w;++w)I[w]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=_.g[0],E=_.g[1],w=_.g[2];var N=_.g[3],x=y+(N^E&(w^N))+I[0]+3614090360&4294967295;y=E+(x<<7&4294967295|x>>>25),x=N+(w^y&(E^w))+I[1]+3905402710&4294967295,N=y+(x<<12&4294967295|x>>>20),x=w+(E^N&(y^E))+I[2]+606105819&4294967295,w=N+(x<<17&4294967295|x>>>15),x=E+(y^w&(N^y))+I[3]+3250441966&4294967295,E=w+(x<<22&4294967295|x>>>10),x=y+(N^E&(w^N))+I[4]+4118548399&4294967295,y=E+(x<<7&4294967295|x>>>25),x=N+(w^y&(E^w))+I[5]+1200080426&4294967295,N=y+(x<<12&4294967295|x>>>20),x=w+(E^N&(y^E))+I[6]+2821735955&4294967295,w=N+(x<<17&4294967295|x>>>15),x=E+(y^w&(N^y))+I[7]+4249261313&4294967295,E=w+(x<<22&4294967295|x>>>10),x=y+(N^E&(w^N))+I[8]+1770035416&4294967295,y=E+(x<<7&4294967295|x>>>25),x=N+(w^y&(E^w))+I[9]+2336552879&4294967295,N=y+(x<<12&4294967295|x>>>20),x=w+(E^N&(y^E))+I[10]+4294925233&4294967295,w=N+(x<<17&4294967295|x>>>15),x=E+(y^w&(N^y))+I[11]+2304563134&4294967295,E=w+(x<<22&4294967295|x>>>10),x=y+(N^E&(w^N))+I[12]+1804603682&4294967295,y=E+(x<<7&4294967295|x>>>25),x=N+(w^y&(E^w))+I[13]+4254626195&4294967295,N=y+(x<<12&4294967295|x>>>20),x=w+(E^N&(y^E))+I[14]+2792965006&4294967295,w=N+(x<<17&4294967295|x>>>15),x=E+(y^w&(N^y))+I[15]+1236535329&4294967295,E=w+(x<<22&4294967295|x>>>10),x=y+(w^N&(E^w))+I[1]+4129170786&4294967295,y=E+(x<<5&4294967295|x>>>27),x=N+(E^w&(y^E))+I[6]+3225465664&4294967295,N=y+(x<<9&4294967295|x>>>23),x=w+(y^E&(N^y))+I[11]+643717713&4294967295,w=N+(x<<14&4294967295|x>>>18),x=E+(N^y&(w^N))+I[0]+3921069994&4294967295,E=w+(x<<20&4294967295|x>>>12),x=y+(w^N&(E^w))+I[5]+3593408605&4294967295,y=E+(x<<5&4294967295|x>>>27),x=N+(E^w&(y^E))+I[10]+38016083&4294967295,N=y+(x<<9&4294967295|x>>>23),x=w+(y^E&(N^y))+I[15]+3634488961&4294967295,w=N+(x<<14&4294967295|x>>>18),x=E+(N^y&(w^N))+I[4]+3889429448&4294967295,E=w+(x<<20&4294967295|x>>>12),x=y+(w^N&(E^w))+I[9]+568446438&4294967295,y=E+(x<<5&4294967295|x>>>27),x=N+(E^w&(y^E))+I[14]+3275163606&4294967295,N=y+(x<<9&4294967295|x>>>23),x=w+(y^E&(N^y))+I[3]+4107603335&4294967295,w=N+(x<<14&4294967295|x>>>18),x=E+(N^y&(w^N))+I[8]+1163531501&4294967295,E=w+(x<<20&4294967295|x>>>12),x=y+(w^N&(E^w))+I[13]+2850285829&4294967295,y=E+(x<<5&4294967295|x>>>27),x=N+(E^w&(y^E))+I[2]+4243563512&4294967295,N=y+(x<<9&4294967295|x>>>23),x=w+(y^E&(N^y))+I[7]+1735328473&4294967295,w=N+(x<<14&4294967295|x>>>18),x=E+(N^y&(w^N))+I[12]+2368359562&4294967295,E=w+(x<<20&4294967295|x>>>12),x=y+(E^w^N)+I[5]+4294588738&4294967295,y=E+(x<<4&4294967295|x>>>28),x=N+(y^E^w)+I[8]+2272392833&4294967295,N=y+(x<<11&4294967295|x>>>21),x=w+(N^y^E)+I[11]+1839030562&4294967295,w=N+(x<<16&4294967295|x>>>16),x=E+(w^N^y)+I[14]+4259657740&4294967295,E=w+(x<<23&4294967295|x>>>9),x=y+(E^w^N)+I[1]+2763975236&4294967295,y=E+(x<<4&4294967295|x>>>28),x=N+(y^E^w)+I[4]+1272893353&4294967295,N=y+(x<<11&4294967295|x>>>21),x=w+(N^y^E)+I[7]+4139469664&4294967295,w=N+(x<<16&4294967295|x>>>16),x=E+(w^N^y)+I[10]+3200236656&4294967295,E=w+(x<<23&4294967295|x>>>9),x=y+(E^w^N)+I[13]+681279174&4294967295,y=E+(x<<4&4294967295|x>>>28),x=N+(y^E^w)+I[0]+3936430074&4294967295,N=y+(x<<11&4294967295|x>>>21),x=w+(N^y^E)+I[3]+3572445317&4294967295,w=N+(x<<16&4294967295|x>>>16),x=E+(w^N^y)+I[6]+76029189&4294967295,E=w+(x<<23&4294967295|x>>>9),x=y+(E^w^N)+I[9]+3654602809&4294967295,y=E+(x<<4&4294967295|x>>>28),x=N+(y^E^w)+I[12]+3873151461&4294967295,N=y+(x<<11&4294967295|x>>>21),x=w+(N^y^E)+I[15]+530742520&4294967295,w=N+(x<<16&4294967295|x>>>16),x=E+(w^N^y)+I[2]+3299628645&4294967295,E=w+(x<<23&4294967295|x>>>9),x=y+(w^(E|~N))+I[0]+4096336452&4294967295,y=E+(x<<6&4294967295|x>>>26),x=N+(E^(y|~w))+I[7]+1126891415&4294967295,N=y+(x<<10&4294967295|x>>>22),x=w+(y^(N|~E))+I[14]+2878612391&4294967295,w=N+(x<<15&4294967295|x>>>17),x=E+(N^(w|~y))+I[5]+4237533241&4294967295,E=w+(x<<21&4294967295|x>>>11),x=y+(w^(E|~N))+I[12]+1700485571&4294967295,y=E+(x<<6&4294967295|x>>>26),x=N+(E^(y|~w))+I[3]+2399980690&4294967295,N=y+(x<<10&4294967295|x>>>22),x=w+(y^(N|~E))+I[10]+4293915773&4294967295,w=N+(x<<15&4294967295|x>>>17),x=E+(N^(w|~y))+I[1]+2240044497&4294967295,E=w+(x<<21&4294967295|x>>>11),x=y+(w^(E|~N))+I[8]+1873313359&4294967295,y=E+(x<<6&4294967295|x>>>26),x=N+(E^(y|~w))+I[15]+4264355552&4294967295,N=y+(x<<10&4294967295|x>>>22),x=w+(y^(N|~E))+I[6]+2734768916&4294967295,w=N+(x<<15&4294967295|x>>>17),x=E+(N^(w|~y))+I[13]+1309151649&4294967295,E=w+(x<<21&4294967295|x>>>11),x=y+(w^(E|~N))+I[4]+4149444226&4294967295,y=E+(x<<6&4294967295|x>>>26),x=N+(E^(y|~w))+I[11]+3174756917&4294967295,N=y+(x<<10&4294967295|x>>>22),x=w+(y^(N|~E))+I[2]+718787259&4294967295,w=N+(x<<15&4294967295|x>>>17),x=E+(N^(w|~y))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(w+(x<<21&4294967295|x>>>11))&4294967295,_.g[2]=_.g[2]+w&4294967295,_.g[3]=_.g[3]+N&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var E=y-this.blockSize,I=this.B,w=this.h,N=0;N<y;){if(w==0)for(;N<=E;)s(this,_,N),N+=this.blockSize;if(typeof _=="string"){for(;N<y;)if(I[w++]=_.charCodeAt(N++),w==this.blockSize){s(this,I),w=0;break}}else for(;N<y;)if(I[w++]=_[N++],w==this.blockSize){s(this,I),w=0;break}}this.h=w,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var E=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=E&255,E/=256;for(this.u(_),_=Array(16),y=E=0;4>y;++y)for(var I=0;32>I;I+=8)_[E++]=this.g[y]>>>I&255;return _};function i(_,y){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=y(_)}function a(_,y){this.h=y;for(var E=[],I=!0,w=_.length-1;0<=w;w--){var N=_[w]|0;I&&N==y||(E[w]=N,I=!1)}this.g=E}var l={};function c(_){return-128<=_&&128>_?i(_,function(y){return new a([y|0],0>y?-1:0)}):new a([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return g;if(0>_)return F(h(-_));for(var y=[],E=1,I=0;_>=E;I++)y[I]=_/E|0,E*=4294967296;return new a(y,0)}function p(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return F(p(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(y,8)),I=g,w=0;w<_.length;w+=8){var N=Math.min(8,_.length-w),x=parseInt(_.substring(w,w+N),y);8>N?(N=h(Math.pow(y,N)),I=I.j(N).add(h(x))):(I=I.j(E),I=I.add(h(x)))}return I}var g=c(0),v=c(1),b=c(16777216);t=a.prototype,t.m=function(){if(R(this))return-F(this).m();for(var _=0,y=1,E=0;E<this.g.length;E++){var I=this.i(E);_+=(0<=I?I:4294967296+I)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C(this))return"0";if(R(this))return"-"+F(this).toString(_);for(var y=h(Math.pow(_,6)),E=this,I="";;){var w=V(E,y).g;E=S(E,w.j(y));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=w,C(E))return N+I;for(;6>N.length;)N="0"+N;I=N+I}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function C(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function R(_){return _.h==-1}t.l=function(_){return _=S(this,_),R(_)?-1:C(_)?0:1};function F(_){for(var y=_.g.length,E=[],I=0;I<y;I++)E[I]=~_.g[I];return new a(E,~_.h).add(v)}t.abs=function(){return R(this)?F(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],I=0,w=0;w<=y;w++){var N=I+(this.i(w)&65535)+(_.i(w)&65535),x=(N>>>16)+(this.i(w)>>>16)+(_.i(w)>>>16);I=x>>>16,N&=65535,x&=65535,E[w]=x<<16|N}return new a(E,E[E.length-1]&-2147483648?-1:0)};function S(_,y){return _.add(F(y))}t.j=function(_){if(C(this)||C(_))return g;if(R(this))return R(_)?F(this).j(F(_)):F(F(this).j(_));if(R(_))return F(this.j(F(_)));if(0>this.l(b)&&0>_.l(b))return h(this.m()*_.m());for(var y=this.g.length+_.g.length,E=[],I=0;I<2*y;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var w=0;w<_.g.length;w++){var N=this.i(I)>>>16,x=this.i(I)&65535,se=_.i(w)>>>16,pe=_.i(w)&65535;E[2*I+2*w]+=x*pe,T(E,2*I+2*w),E[2*I+2*w+1]+=N*pe,T(E,2*I+2*w+1),E[2*I+2*w+1]+=x*se,T(E,2*I+2*w+1),E[2*I+2*w+2]+=N*se,T(E,2*I+2*w+2)}for(I=0;I<y;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=y;I<2*y;I++)E[I]=0;return new a(E,0)};function T(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function A(_,y){this.g=_,this.h=y}function V(_,y){if(C(y))throw Error("division by zero");if(C(_))return new A(g,g);if(R(_))return y=V(F(_),y),new A(F(y.g),F(y.h));if(R(y))return y=V(_,F(y)),new A(F(y.g),y.h);if(30<_.g.length){if(R(_)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var E=v,I=y;0>=I.l(_);)E=M(E),I=M(I);var w=$(E,1),N=$(I,1);for(I=$(I,2),E=$(E,2);!C(I);){var x=N.add(I);0>=x.l(_)&&(w=w.add(E),N=x),I=$(I,1),E=$(E,1)}return y=S(_,w.j(y)),new A(w,y)}for(w=g;0<=_.l(y);){for(E=Math.max(1,Math.floor(_.m()/y.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),N=h(E),x=N.j(y);R(x)||0<x.l(_);)E-=I,N=h(E),x=N.j(y);C(N)&&(N=v),w=w.add(N),_=S(_,x)}return new A(w,_)}t.A=function(_){return V(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)&_.i(I);return new a(E,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)|_.i(I);return new a(E,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)^_.i(I);return new a(E,this.h^_.h)};function M(_){for(var y=_.g.length+1,E=[],I=0;I<y;I++)E[I]=_.i(I)<<1|_.i(I-1)>>>31;return new a(E,_.h)}function $(_,y){var E=y>>5;y%=32;for(var I=_.g.length-E,w=[],N=0;N<I;N++)w[N]=0<y?_.i(N+E)>>>y|_.i(N+E+1)<<32-y:_.i(N+E);return new a(w,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Vr=a}).apply(typeof Im<"u"?Im:typeof self<"u"?self:typeof window<"u"?window:{});var pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nv,Ai,rv,Pa,nd,sv,iv,ov;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,d,f){return o==Array.prototype||o==Object.prototype||(o[d]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof pa=="object"&&pa];for(var d=0;d<o.length;++d){var f=o[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,d){if(d)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var k=o[m];if(!(k in f))break e;f=f[k]}o=o[o.length-1],m=f[o],d=d(m),d!=m&&d!=null&&e(f,o,{configurable:!0,writable:!0,value:d})}}function i(o,d){o instanceof String&&(o+="");var f=0,m=!1,k={next:function(){if(!m&&f<o.length){var P=f++;return{value:d(P,o[P]),done:!1}}return m=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(o){return o||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var d=typeof o;return d=d!="object"?d:o?Array.isArray(o)?"array":d:"null",d=="array"||d=="object"&&typeof o.length=="number"}function h(o){var d=typeof o;return d=="object"&&o!=null||d=="function"}function p(o,d,f){return o.call.apply(o.bind,arguments)}function g(o,d,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,m),o.apply(d,k)}}return function(){return o.apply(d,arguments)}}function v(o,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function b(o,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function C(o,d){function f(){}f.prototype=d.prototype,o.aa=d.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,k,P){for(var q=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)q[ve-2]=arguments[ve];return d.prototype[k].apply(m,q)}}function R(o){const d=o.length;if(0<d){const f=Array(d);for(let m=0;m<d;m++)f[m]=o[m];return f}return[]}function F(o,d){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(c(m)){const k=o.length||0,P=m.length||0;o.length=k+P;for(let q=0;q<P;q++)o[k+q]=m[q]}else o.push(m)}}class S{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function T(o){return/^[\s\xa0]*$/.test(o)}function A(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function V(o){return V[" "](o),o}V[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function $(o,d,f){for(const m in o)d.call(f,o[m],m,o)}function _(o,d){for(const f in o)d.call(void 0,o[f],f,o)}function y(o){const d={};for(const f in o)d[f]=o[f];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(o,d){let f,m;for(let k=1;k<arguments.length;k++){m=arguments[k];for(f in m)o[f]=m[f];for(let P=0;P<E.length;P++)f=E[P],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function w(o){var d=1;o=o.split(":");const f=[];for(;0<d&&o.length;)f.push(o.shift()),d--;return o.length&&f.push(o.join(":")),f}function N(o){l.setTimeout(()=>{throw o},0)}function x(){var o=U;let d=null;return o.g&&(d=o.g,o.g=o.g.next,o.g||(o.h=null),d.next=null),d}class se{constructor(){this.h=this.g=null}add(d,f){const m=pe.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var pe=new S(()=>new L,o=>o.reset());class L{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let H,D=!1,U=new se,J=()=>{const o=l.Promise.resolve(void 0);H=()=>{o.then(W)}};var W=()=>{for(var o;o=x();){try{o.h.call(o.g)}catch(f){N(f)}var d=pe;d.j(o),100>d.h&&(d.h++,o.next=d.g,d.g=o)}D=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(o,d){this.type=o,this.g=this.target=d,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,d=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return o}();function ee(o,d){if(j.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=d,d=o.relatedTarget){if(M){e:{try{V(d.nodeName);var k=!0;break e}catch{}k=!1}k||(d=null)}}else f=="mouseover"?d=o.fromElement:f=="mouseout"&&(d=o.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Se[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ee.aa.h.call(this)}}C(ee,j);var Se={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),kn=0;function Vo(o,d,f,m,k){this.listener=o,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=k,this.key=++kn,this.da=this.fa=!1}function fr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function pr(o){this.src=o,this.g={},this.h=0}pr.prototype.add=function(o,d,f,m,k){var P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);var q=mr(o,d,m,k);return-1<q?(d=o[q],f||(d.fa=!1)):(d=new Vo(d,this.src,P,!!m,k),d.fa=f,o.push(d)),d};function Kr(o,d){var f=d.type;if(f in o.g){var m=o.g[f],k=Array.prototype.indexOf.call(m,d,void 0),P;(P=0<=k)&&Array.prototype.splice.call(m,k,1),P&&(fr(d),o.g[f].length==0&&(delete o.g[f],o.h--))}}function mr(o,d,f,m){for(var k=0;k<o.length;++k){var P=o[k];if(!P.da&&P.listener==d&&P.capture==!!f&&P.ha==m)return k}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),cn={};function Cn(o,d,f,m,k){if(m&&m.once)return Qt(o,d,f,m,k);if(Array.isArray(d)){for(var P=0;P<d.length;P++)Cn(o,d[P],f,m,k);return null}return f=bt(f),o&&o[Ue]?o.K(d,f,h(m)?!!m.capture:!!m,k):Rn(o,d,f,!1,m,k)}function Rn(o,d,f,m,k,P){if(!d)throw Error("Invalid event type");var q=h(k)?!!k.capture:!!k,ve=Yt(o);if(ve||(o[_e]=ve=new pr(o)),f=ve.add(d,f,m,q,P),f.proxy)return f;if(m=dn(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)ie||(k=q),k===void 0&&(k=!1),o.addEventListener(d.toString(),m,k);else if(o.attachEvent)o.attachEvent(Yr(d.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function dn(){function o(f){return d.call(o.src,o.listener,f)}const d=yr;return o}function Qt(o,d,f,m,k){if(Array.isArray(d)){for(var P=0;P<d.length;P++)Qt(o,d[P],f,m,k);return null}return f=bt(f),o&&o[Ue]?o.L(d,f,h(m)?!!m.capture:!!m,k):Rn(o,d,f,!0,m,k)}function Qr(o,d,f,m,k){if(Array.isArray(d))for(var P=0;P<d.length;P++)Qr(o,d[P],f,m,k);else m=h(m)?!!m.capture:!!m,f=bt(f),o&&o[Ue]?(o=o.i,d=String(d).toString(),d in o.g&&(P=o.g[d],f=mr(P,f,m,k),-1<f&&(fr(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete o.g[d],o.h--)))):o&&(o=Yt(o))&&(d=o.g[d.toString()],o=-1,d&&(o=mr(d,f,m,k)),(f=-1<o?d[o]:null)&&gr(f))}function gr(o){if(typeof o!="number"&&o&&!o.da){var d=o.src;if(d&&d[Ue])Kr(d.i,o);else{var f=o.type,m=o.proxy;d.removeEventListener?d.removeEventListener(f,m,o.capture):d.detachEvent?d.detachEvent(Yr(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Yt(d))?(Kr(f,o),f.h==0&&(f.src=null,d[_e]=null)):fr(o)}}}function Yr(o){return o in cn?cn[o]:cn[o]="on"+o}function yr(o,d){if(o.da)o=!0;else{d=new ee(d,this);var f=o.listener,m=o.ha||o.src;o.fa&&gr(o),o=f.call(m,d)}return o}function Yt(o){return o=o[_e],o instanceof pr?o:null}var Xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(o){return typeof o=="function"?o:(o[Xt]||(o[Xt]=function(d){return o.handleEvent(d)}),o[Xt])}function Ne(){le.call(this),this.i=new pr(this),this.M=this,this.F=null}C(Ne,le),Ne.prototype[Ue]=!0,Ne.prototype.removeEventListener=function(o,d,f,m){Qr(this,o,d,f,m)};function Ve(o,d){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=d.type||d,typeof d=="string")d=new j(d,o);else if(d instanceof j)d.target=d.target||o;else{var k=d;d=new j(m,o),I(d,k)}if(k=!0,f)for(var P=f.length-1;0<=P;P--){var q=d.g=f[P];k=Jt(q,m,!0,d)&&k}if(q=d.g=o,k=Jt(q,m,!0,d)&&k,k=Jt(q,m,!1,d)&&k,f)for(P=0;P<f.length;P++)q=d.g=f[P],k=Jt(q,m,!1,d)&&k}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var o=this.i,d;for(d in o.g){for(var f=o.g[d],m=0;m<f.length;m++)fr(f[m]);delete o.g[d],o.h--}}this.F=null},Ne.prototype.K=function(o,d,f,m){return this.i.add(String(o),d,!1,f,m)},Ne.prototype.L=function(o,d,f,m){return this.i.add(String(o),d,!0,f,m)};function Jt(o,d,f,m){if(d=o.i.g[String(d)],!d)return!0;d=d.concat();for(var k=!0,P=0;P<d.length;++P){var q=d[P];if(q&&!q.da&&q.capture==f){var ve=q.listener,Ge=q.ha||q.src;q.fa&&Kr(o.i,q),k=ve.call(Ge,m)!==!1&&k}}return k&&!m.defaultPrevented}function Pn(o,d,f){if(typeof o=="function")f&&(o=v(o,f));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(o,d||0)}function vr(o){o.g=Pn(()=>{o.g=null,o.i&&(o.i=!1,vr(o))},o.l);const d=o.h;o.h=null,o.m.apply(null,d)}class Xr extends le{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(o){le.call(this),this.h=o,this.g={}}C(Zt,le);var Zs=[];function ei(o){$(o.g,function(d,f){this.g.hasOwnProperty(f)&&gr(d)},o),o.g={}}Zt.prototype.N=function(){Zt.aa.N.call(this),ei(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jr=l.JSON.stringify,tu=l.JSON.parse,_r=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function nu(){}nu.prototype.h=null;function of(o){return o.h||(o.h=o.i())}function af(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ru(){j.call(this,"d")}C(ru,j);function su(){j.call(this,"c")}C(su,j);var xr={},lf=null;function Do(){return lf=lf||new Ne}xr.La="serverreachability";function uf(o){j.call(this,xr.La,o)}C(uf,j);function ni(o){const d=Do();Ve(d,new uf(d))}xr.STAT_EVENT="statevent";function cf(o,d){j.call(this,xr.STAT_EVENT,o),this.stat=d}C(cf,j);function ut(o){const d=Do();Ve(d,new cf(d,o))}xr.Ma="timingevent";function df(o,d){j.call(this,xr.Ma,o),this.size=d}C(df,j);function ri(o,d){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},d)}function si(){this.g=!0}si.prototype.xa=function(){this.g=!1};function C_(o,d,f,m,k,P){o.info(function(){if(o.g)if(P)for(var q="",ve=P.split("&"),Ge=0;Ge<ve.length;Ge++){var he=ve[Ge].split("=");if(1<he.length){var tt=he[0];he=he[1];var nt=tt.split("_");q=2<=nt.length&&nt[1]=="type"?q+(tt+"="+he+"&"):q+(tt+"=redacted&")}}else q=null;else q=P;return"XMLHTTP REQ ("+m+") [attempt "+k+"]: "+d+`
`+f+`
`+q})}function R_(o,d,f,m,k,P,q){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+k+"]: "+d+`
`+f+`
`+P+" "+q})}function Zr(o,d,f,m){o.info(function(){return"XMLHTTP TEXT ("+d+"): "+j_(o,f)+(m?" "+m:"")})}function P_(o,d){o.info(function(){return"TIMEOUT: "+d})}si.prototype.info=function(){};function j_(o,d){if(!o.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var k=m[1];if(Array.isArray(k)&&!(1>k.length)){var P=k[0];if(P!="noop"&&P!="stop"&&P!="close")for(var q=1;q<k.length;q++)k[q]=""}}}}return Jr(f)}catch{return d}}var Mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},iu;function Lo(){}C(Lo,nu),Lo.prototype.g=function(){return new XMLHttpRequest},Lo.prototype.i=function(){return{}},iu=new Lo;function jn(o,d,f,m){this.j=o,this.i=d,this.l=f,this.R=m||1,this.U=new Zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ff}function ff(){this.i=null,this.g="",this.h=!1}var pf={},ou={};function au(o,d,f){o.L=1,o.v=zo(hn(d)),o.m=f,o.P=!0,mf(o,null)}function mf(o,d){o.F=Date.now(),Oo(o),o.A=hn(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),kf(f.i,"t",m),o.C=0,f=o.j.J,o.h=new ff,o.g=Gf(o.j,f?d:null,!o.m),0<o.O&&(o.M=new Xr(v(o.Y,o,o.g),o.O)),d=o.U,f=o.g,m=o.ca;var k="readystatechange";Array.isArray(k)||(k&&(Zs[0]=k.toString()),k=Zs);for(var P=0;P<k.length;P++){var q=Cn(f,k[P],m||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,d)):(o.u="GET",o.g.ea(o.A,o.u,null,d)),ni(),C_(o.i,o.u,o.A,o.l,o.R,o.m)}jn.prototype.ca=function(o){o=o.target;const d=this.M;d&&fn(o)==3?d.j():this.Y(o)},jn.prototype.Y=function(o){try{if(o==this.g)e:{const nt=fn(this.g);var d=this.g.Ba();const ns=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||Mf(this.g)))){this.J||nt!=4||d==7||(d==8||0>=ns?ni(3):ni(2)),lu(this);var f=this.g.Z();this.X=f;t:if(gf(this)){var m=Mf(this.g);o="";var k=m.length,P=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wr(this),ii(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<k;d++)this.h.h=!0,o+=this.h.i.decode(m[d],{stream:!(P&&d==k-1)});m.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,R_(this.i,this.u,this.A,this.l,this.R,nt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,Ge=this.g;if((ve=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ve)){var he=ve;break t}}he=null}if(f=he)Zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uu(this,f);else{this.o=!1,this.s=3,ut(12),wr(this),ii(this);break e}}if(this.P){f=!0;let Mt;for(;!this.J&&this.C<q.length;)if(Mt=V_(this,q),Mt==ou){nt==4&&(this.s=4,ut(14),f=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==pf){this.s=4,ut(15),Zr(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Zr(this.i,this.l,Mt,null),uu(this,Mt);if(gf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||q.length!=0||this.h.h||(this.s=1,ut(16),f=!1),this.o=this.o&&f,!f)Zr(this.i,this.l,q,"[Invalid Chunked Response]"),wr(this),ii(this);else if(0<q.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),mu(tt),tt.M=!0,ut(11))}}else Zr(this.i,this.l,q,null),uu(this,q);nt==4&&wr(this),this.o&&!this.J&&(nt==4?$f(this.j,this):(this.o=!1,Oo(this)))}else X_(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),wr(this),ii(this)}}}catch{}finally{}};function gf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function V_(o,d){var f=o.C,m=d.indexOf(`
`,f);return m==-1?ou:(f=Number(d.substring(f,m)),isNaN(f)?pf:(m+=1,m+f>d.length?ou:(d=d.slice(m,m+f),o.C=m+f,d)))}jn.prototype.cancel=function(){this.J=!0,wr(this)};function Oo(o){o.S=Date.now()+o.I,yf(o,o.I)}function yf(o,d){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ri(v(o.ba,o),d)}function lu(o){o.B&&(l.clearTimeout(o.B),o.B=null)}jn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(P_(this.i,this.A),this.L!=2&&(ni(),ut(17)),wr(this),this.s=2,ii(this)):yf(this,this.S-o)};function ii(o){o.j.G==0||o.J||$f(o.j,o)}function wr(o){lu(o);var d=o.M;d&&typeof d.ma=="function"&&d.ma(),o.M=null,ei(o.U),o.g&&(d=o.g,o.g=null,d.abort(),d.ma())}function uu(o,d){try{var f=o.j;if(f.G!=0&&(f.g==o||cu(f.h,o))){if(!o.K&&cu(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var k=m;if(k[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Go(f),Ho(f);else break e;pu(f),ut(18)}}else f.za=k[1],0<f.za-f.T&&37500>k[2]&&f.F&&f.v==0&&!f.C&&(f.C=ri(v(f.Za,f),6e3));if(1>=xf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Tr(f,11)}else if((o.K||f.g==o)&&Go(f),!T(d))for(k=f.Da.g.parse(d),d=0;d<k.length;d++){let he=k[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];const tt=he[3];tt!=null&&(f.la=tt,f.j.info("VER="+f.la));const nt=he[4];nt!=null&&(f.Aa=nt,f.j.info("SVER="+f.Aa));const ns=he[5];ns!=null&&typeof ns=="number"&&0<ns&&(m=1.5*ns,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Mt=o.g;if(Mt){const Qo=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var P=m.h;P.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(du(P,P.h),P.h=null))}if(m.D){const gu=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;gu&&(m.ya=gu,we(m.I,m.D,gu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var q=o;if(m.qa=Wf(m,m.J?m.ia:null,m.W),q.K){wf(m.h,q);var ve=q,Ge=m.L;Ge&&(ve.I=Ge),ve.B&&(lu(ve),Oo(ve)),m.g=q}else zf(m);0<f.i.length&&Wo(f)}else he[0]!="stop"&&he[0]!="close"||Tr(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?Tr(f,7):fu(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}ni(4)}catch{}}var D_=class{constructor(o,d){this.g=o,this.map=d}};function vf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _f(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function xf(o){return o.h?1:o.g?o.g.size:0}function cu(o,d){return o.h?o.h==d:o.g?o.g.has(d):!1}function du(o,d){o.g?o.g.add(d):o.h=d}function wf(o,d){o.h&&o.h==d?o.h=null:o.g&&o.g.has(d)&&o.g.delete(d)}vf.prototype.cancel=function(){if(this.i=Ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ef(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let d=o.i;for(const f of o.g.values())d=d.concat(f.D);return d}return R(o.i)}function M_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var d=[],f=o.length,m=0;m<f;m++)d.push(o[m]);return d}d=[],f=0;for(m in o)d[f++]=o[m];return d}function L_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var d=[];o=o.length;for(var f=0;f<o;f++)d.push(f);return d}d=[],f=0;for(const m in o)d[f++]=m;return d}}}function Tf(o,d){if(o.forEach&&typeof o.forEach=="function")o.forEach(d,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,d,void 0);else for(var f=L_(o),m=M_(o),k=m.length,P=0;P<k;P++)d.call(void 0,m[P],f&&f[P],o)}var If=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function O_(o,d){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),k=null;if(0<=m){var P=o[f].substring(0,m);k=o[f].substring(m+1)}else P=o[f];d(P,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Er(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Er){this.h=o.h,Fo(this,o.j),this.o=o.o,this.g=o.g,Uo(this,o.s),this.l=o.l;var d=o.i,f=new li;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Nf(this,f),this.m=o.m}else o&&(d=String(o).match(If))?(this.h=!1,Fo(this,d[1]||"",!0),this.o=oi(d[2]||""),this.g=oi(d[3]||"",!0),Uo(this,d[4]),this.l=oi(d[5]||"",!0),Nf(this,d[6]||"",!0),this.m=oi(d[7]||"")):(this.h=!1,this.i=new li(null,this.h))}Er.prototype.toString=function(){var o=[],d=this.j;d&&o.push(ai(d,Af,!0),":");var f=this.g;return(f||d=="file")&&(o.push("//"),(d=this.o)&&o.push(ai(d,Af,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ai(f,f.charAt(0)=="/"?z_:U_,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ai(f,$_)),o.join("")};function hn(o){return new Er(o)}function Fo(o,d,f){o.j=f?oi(d,!0):d,o.j&&(o.j=o.j.replace(/:$/,""))}function Uo(o,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);o.s=d}else o.s=null}function Nf(o,d,f){d instanceof li?(o.i=d,q_(o.i,o.h)):(f||(d=ai(d,B_)),o.i=new li(d,o.h))}function we(o,d,f){o.i.set(d,f)}function zo(o){return we(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function oi(o,d){return o?d?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ai(o,d,f){return typeof o=="string"?(o=encodeURI(o).replace(d,F_),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function F_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Af=/[#\/\?@]/g,U_=/[#\?:]/g,z_=/[#\?]/g,B_=/[#\?@]/g,$_=/#/g;function li(o,d){this.h=this.g=null,this.i=o||null,this.j=!!d}function Vn(o){o.g||(o.g=new Map,o.h=0,o.i&&O_(o.i,function(d,f){o.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=li.prototype,t.add=function(o,d){Vn(this),this.i=null,o=es(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(d),this.h+=1,this};function Sf(o,d){Vn(o),d=es(o,d),o.g.has(d)&&(o.i=null,o.h-=o.g.get(d).length,o.g.delete(d))}function bf(o,d){return Vn(o),d=es(o,d),o.g.has(d)}t.forEach=function(o,d){Vn(this),this.g.forEach(function(f,m){f.forEach(function(k){o.call(d,k,m,this)},this)},this)},t.na=function(){Vn(this);const o=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){const k=o[m];for(let P=0;P<k.length;P++)f.push(d[m])}return f},t.V=function(o){Vn(this);let d=[];if(typeof o=="string")bf(this,o)&&(d=d.concat(this.g.get(es(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)d=d.concat(o[f])}return d},t.set=function(o,d){return Vn(this),this.i=null,o=es(this,o),bf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[d]),this.h+=1,this},t.get=function(o,d){return o?(o=this.V(o),0<o.length?String(o[0]):d):d};function kf(o,d,f){Sf(o,d),0<f.length&&(o.i=null,o.g.set(es(o,d),R(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];const P=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var k=P;q[m]!==""&&(k+="="+encodeURIComponent(String(q[m]))),o.push(k)}}return this.i=o.join("&")};function es(o,d){return d=String(d),o.j&&(d=d.toLowerCase()),d}function q_(o,d){d&&!o.j&&(Vn(o),o.i=null,o.g.forEach(function(f,m){var k=m.toLowerCase();m!=k&&(Sf(this,m),kf(this,k,f))},o)),o.j=d}function H_(o,d){const f=new si;if(l.Image){const m=new Image;m.onload=b(Dn,f,"TestLoadImage: loaded",!0,d,m),m.onerror=b(Dn,f,"TestLoadImage: error",!1,d,m),m.onabort=b(Dn,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=b(Dn,f,"TestLoadImage: timeout",!1,d,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else d(!1)}function W_(o,d){const f=new si,m=new AbortController,k=setTimeout(()=>{m.abort(),Dn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(o,{signal:m.signal}).then(P=>{clearTimeout(k),P.ok?Dn(f,"TestPingServer: ok",!0,d):Dn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(k),Dn(f,"TestPingServer: error",!1,d)})}function Dn(o,d,f,m,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),m(f)}catch{}}function G_(){this.g=new _r}function K_(o,d,f){const m=f||"";try{Tf(o,function(k,P){let q=k;h(k)&&(q=Jr(k)),d.push(m+P+"="+encodeURIComponent(q))})}catch(k){throw d.push(m+"type="+encodeURIComponent("_badmap")),k}}function Bo(o){this.l=o.Ub||null,this.j=o.eb||!1}C(Bo,nu),Bo.prototype.g=function(){return new $o(this.l,this.j)},Bo.prototype.i=function(o){return function(){return o}}({});function $o(o,d){Ne.call(this),this.D=o,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C($o,Ne),t=$o.prototype,t.open=function(o,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=d,this.readyState=1,ci(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(d.body=o),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var d=o.value?o.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!o.done}))&&(this.response=this.responseText+=d)}o.done?ui(this):ci(this),this.readyState==3&&Cf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,ui(this))},t.Qa=function(o){this.g&&(this.response=o,ui(this))},t.ga=function(){this.g&&ui(this)};function ui(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ci(o)}t.setRequestHeader=function(o,d){this.u.append(o,d)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=d.next();return o.join(`\r
`)};function ci(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty($o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Rf(o){let d="";return $(o,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function hu(o,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Rf(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):we(o,d,f))}function Pe(o){Ne.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Pe,Ne);var Q_=/^https?$/i,Y_=["POST","PUT"];t=Pe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);d=d?d.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():iu.g(),this.v=this.o?of(this.o):of(iu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(o),!0),this.B=!1}catch(P){Pf(this,P);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var k in m)f.set(k,m[k]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const P of m.keys())f.set(P,m.get(P));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),k=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Y_,d,void 0))||m||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,q]of f)this.g.setRequestHeader(P,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Df(this),this.u=!0,this.g.send(o),this.u=!1}catch(P){Pf(this,P)}};function Pf(o,d){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=d,o.m=5,jf(o),qo(o)}function jf(o){o.A||(o.A=!0,Ve(o,"complete"),Ve(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ve(this,"complete"),Ve(this,"abort"),qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qo(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vf(this):this.bb())},t.bb=function(){Vf(this)};function Vf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||fn(o)!=4||o.Z()!=2)){if(o.u&&fn(o)==4)Pn(o.Ea,0,o);else if(Ve(o,"readystatechange"),fn(o)==4){o.h=!1;try{const q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=q===0){var k=String(o.D).match(If)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),m=!Q_.test(k?k.toLowerCase():"")}f=m}if(f)Ve(o,"complete"),Ve(o,"success");else{o.m=6;try{var P=2<fn(o)?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.Z()+"]",jf(o)}}finally{qo(o)}}}}function qo(o,d){if(o.g){Df(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,d||Ve(o,"ready");try{f.onreadystatechange=m}catch{}}}function Df(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function fn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var d=this.g.responseText;return o&&d.indexOf(o)==0&&(d=d.substring(o.length)),tu(d)}};function Mf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function X_(o){const d={};o=(o.g&&2<=fn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(T(o[m]))continue;var f=w(o[m]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=d[k]||[];d[k]=P,P.push(f)}_(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(o,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||d}function Lf(o){this.Aa=0,this.i=[],this.j=new si,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=di("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=di("baseRetryDelayMs",5e3,o),this.cb=di("retryDelaySeedMs",1e4,o),this.Wa=di("forwardChannelMaxRetries",2,o),this.wa=di("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new vf(o&&o.concurrentRequestLimit),this.Da=new G_,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Lf.prototype,t.la=8,t.G=1,t.connect=function(o,d,f,m){ut(0),this.W=o,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Wf(this,null,this.W),Wo(this)};function fu(o){if(Of(o),o.G==3){var d=o.U++,f=hn(o.I);if(we(f,"SID",o.K),we(f,"RID",d),we(f,"TYPE","terminate"),hi(o,f),d=new jn(o,o.j,d),d.L=2,d.v=zo(hn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=Gf(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Oo(d)}Hf(o)}function Ho(o){o.g&&(mu(o),o.g.cancel(),o.g=null)}function Of(o){Ho(o),o.u&&(l.clearTimeout(o.u),o.u=null),Go(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Wo(o){if(!_f(o.h)&&!o.s){o.s=!0;var d=o.Ga;H||J(),D||(H(),D=!0),U.add(d,o),o.B=0}}function J_(o,d){return xf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=d.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ri(v(o.Ga,o,d),qf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const k=new jn(this,this.j,o);let P=this.o;if(this.S&&(P?(P=y(P),I(P,this.S)):P=this.S),this.m!==null||this.O||(k.H=P,P=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Uf(this,k,d),f=hn(this.I),we(f,"RID",o),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),hi(this,f),P&&(this.O?d="headers="+encodeURIComponent(String(Rf(P)))+"&"+d:this.m&&hu(f,this.m,P)),du(this.h,k),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),k.T=!0,au(k,f,null)):au(k,f,d),this.G=2}}else this.G==3&&(o?Ff(this,o):this.i.length==0||_f(this.h)||Ff(this))};function Ff(o,d){var f;d?f=d.l:f=o.U++;const m=hn(o.I);we(m,"SID",o.K),we(m,"RID",f),we(m,"AID",o.T),hi(o,m),o.m&&o.o&&hu(m,o.m,o.o),f=new jn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),d&&(o.i=d.D.concat(o.i)),d=Uf(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),du(o.h,f),au(f,m,d)}function hi(o,d){o.H&&$(o.H,function(f,m){we(d,m,f)}),o.l&&Tf({},function(f,m){we(d,m,f)})}function Uf(o,d,f){f=Math.min(o.i.length,f);var m=o.l?v(o.l.Na,o.l,o):null;e:{var k=o.i;let P=-1;for(;;){const q=["count="+f];P==-1?0<f?(P=k[0].g,q.push("ofs="+P)):P=0:q.push("ofs="+P);let ve=!0;for(let Ge=0;Ge<f;Ge++){let he=k[Ge].g;const tt=k[Ge].map;if(he-=P,0>he)P=Math.max(0,k[Ge].g-100),ve=!1;else try{K_(tt,q,"req"+he+"_")}catch{m&&m(tt)}}if(ve){m=q.join("&");break e}}}return o=o.i.splice(0,f),d.D=o,m}function zf(o){if(!o.g&&!o.u){o.Y=1;var d=o.Fa;H||J(),D||(H(),D=!0),U.add(d,o),o.v=0}}function pu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ri(v(o.Fa,o),qf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Bf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ri(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Ho(this),Bf(this))};function mu(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Bf(o){o.g=new jn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var d=hn(o.qa);we(d,"RID","rpc"),we(d,"SID",o.K),we(d,"AID",o.T),we(d,"CI",o.F?"0":"1"),!o.F&&o.ja&&we(d,"TO",o.ja),we(d,"TYPE","xmlhttp"),hi(o,d),o.m&&o.o&&hu(d,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=zo(hn(d)),f.m=null,f.P=!0,mf(f,o)}t.Za=function(){this.C!=null&&(this.C=null,Ho(this),pu(this),ut(19))};function Go(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function $f(o,d){var f=null;if(o.g==d){Go(o),mu(o),o.g=null;var m=2}else if(cu(o.h,d))f=d.D,wf(o.h,d),m=1;else return;if(o.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var k=o.B;m=Do(),Ve(m,new df(m,f)),Wo(o)}else zf(o);else if(k=d.s,k==3||k==0&&0<d.X||!(m==1&&J_(o,d)||m==2&&pu(o)))switch(f&&0<f.length&&(d=o.h,d.i=d.i.concat(f)),k){case 1:Tr(o,5);break;case 4:Tr(o,10);break;case 3:Tr(o,6);break;default:Tr(o,2)}}}function qf(o,d){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*d}function Tr(o,d){if(o.j.info("Error code "+d),d==2){var f=v(o.fb,o),m=o.Xa;const k=!m;m=new Er(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Fo(m,"https"),zo(m),k?H_(m.toString(),f):W_(m.toString(),f)}else ut(2);o.G=0,o.l&&o.l.sa(d),Hf(o),Of(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Hf(o){if(o.G=0,o.ka=[],o.l){const d=Ef(o.h);(d.length!=0||o.i.length!=0)&&(F(o.ka,d),F(o.ka,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.ra()}}function Wf(o,d,f){var m=f instanceof Er?hn(f):new Er(f);if(m.g!="")d&&(m.g=d+"."+m.g),Uo(m,m.s);else{var k=l.location;m=k.protocol,d=d?d+"."+k.hostname:k.hostname,k=+k.port;var P=new Er(null);m&&Fo(P,m),d&&(P.g=d),k&&Uo(P,k),f&&(P.l=f),m=P}return f=o.D,d=o.ya,f&&d&&we(m,f,d),we(m,"VER",o.la),hi(o,m),m}function Gf(o,d,f){if(d&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=o.Ca&&!o.pa?new Pe(new Bo({eb:f})):new Pe(o.pa),d.Ha(o.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kf(){}t=Kf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ko(){}Ko.prototype.g=function(o,d){return new wt(o,d)};function wt(o,d){Ne.call(this),this.g=new Lf(d),this.l=o,this.h=d&&d.messageUrlParams||null,o=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(o?o["X-WebChannel-Content-Type"]=d.messageContentType:o={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(o?o["X-WebChannel-Client-Profile"]=d.va:o={"X-WebChannel-Client-Profile":d.va}),this.g.S=o,(o=d&&d.Sb)&&!T(o)&&(this.g.m=o),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!T(d)&&(this.g.D=d,o=this.h,o!==null&&d in o&&(o=this.h,d in o&&delete o[d])),this.j=new ts(this)}C(wt,Ne),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){fu(this.g)},wt.prototype.o=function(o){var d=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Jr(o),o=f);d.i.push(new D_(d.Ya++,o)),d.G==3&&Wo(d)},wt.prototype.N=function(){this.g.l=null,delete this.j,fu(this.g),delete this.g,wt.aa.N.call(this)};function Qf(o){ru.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var d=o.__sm__;if(d){e:{for(const f in d){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,d=d!==null&&o in d?d[o]:void 0),this.data=d}else this.data=o}C(Qf,ru);function Yf(){su.call(this),this.status=1}C(Yf,su);function ts(o){this.g=o}C(ts,Kf),ts.prototype.ua=function(){Ve(this.g,"a")},ts.prototype.ta=function(o){Ve(this.g,new Qf(o))},ts.prototype.sa=function(o){Ve(this.g,new Yf)},ts.prototype.ra=function(){Ve(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,ov=function(){return new Ko},iv=function(){return Do()},sv=xr,nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,Pa=Mo,hf.COMPLETE="complete",rv=hf,af.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,Ai=af,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,nv=Pe}).apply(typeof pa<"u"?pa:typeof self<"u"?self:typeof window<"u"?window:{});const Nm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new mh("@firebase/firestore");function wi(){return Ur.logLevel}function Q(t,...e){if(Ur.logLevel<=ue.DEBUG){const n=e.map(xh);Ur.debug(`Firestore (${Ks}): ${t}`,...n)}}function An(t,...e){if(Ur.logLevel<=ue.ERROR){const n=e.map(xh);Ur.error(`Firestore (${Ks}): ${t}`,...n)}}function uo(t,...e){if(Ur.logLevel<=ue.WARN){const n=e.map(xh);Ur.warn(`Firestore (${Ks}): ${t}`,...n)}}function xh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Ks}) INTERNAL ASSERTION FAILED: `+t;throw An(e),new Error(e)}function ye(t,e){t||Z()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class UT{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new OT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new pt(e)}}class zT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new zT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $T{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new $T(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=HT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function Fs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new $e(0,0))}static max(){return new te(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends co{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const WT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends co{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return WT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new K(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Te.fromString(e))}static fromName(e){return new X(Te.fromString(e).popFirst(5))}static empty(){return new X(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Te(e.slice()))}}function GT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new ir(s,X.empty(),e)}function KT(t){return new ir(t.readTime,t.key,-1)}class ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ir(te.min(),X.empty(),-1)}static max(){return new ir(te.max(),X.empty(),-1)}}function QT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==YT)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{a[h]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function JT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wh.oe=-1;function zl(t){return t==null}function dl(t){return t===0&&1/t==-1/0}function ZT(t){return typeof t=="number"&&Number.isInteger(t)&&!dl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}}class ma{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=s??Qe.EMPTY,this.right=i??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sm(this.data.getIterator())}getIteratorFrom(e){return new Sm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class Sm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new zt([])}unionWith(e){let n=new Je(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new uv("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const e2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(ye(!!t),typeof t=="string"){let e=0;const n=e2.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Th(t){const e=t.mapValue.fields.__previous_value__;return Eh(e)?Th(e):e}function ho(t){const e=or(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r,s,i,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class fo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Eh(t)?4:r2(t)?9007199254740991:n2(t)?10:11:Z()}function un(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ho(t).isEqual(ho(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=or(s.timestampValue),l=or(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return zr(s.bytesValue).isEqual(zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=De(s.doubleValue),l=De(i.doubleValue);return a===l?dl(a)===dl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Fs(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Am(a)!==Am(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!un(a[c],l[c])))return!1;return!0}(t,e);default:return Z()}}function po(t,e){return(t.values||[]).find(n=>un(n,e))!==void 0}function Us(t,e){if(t===e)return 0;const n=Br(t),r=Br(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=De(i.integerValue||i.doubleValue),c=De(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return bm(t.timestampValue,e.timestampValue);case 4:return bm(ho(t),ho(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(i,a){const l=zr(i),c=zr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=fe(l[h],c[h]);if(p!==0)return p}return fe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=fe(De(i.latitude),De(a.latitude));return l!==0?l:fe(De(i.longitude),De(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return km(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,h,p;const g=i.fields||{},v=a.fields||{},b=(l=g.value)===null||l===void 0?void 0:l.arrayValue,C=(c=v.value)===null||c===void 0?void 0:c.arrayValue,R=fe(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:km(b,C)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ga.mapValue&&a===ga.mapValue)return 0;if(i===ga.mapValue)return 1;if(a===ga.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const v=fe(c[g],p[g]);if(v!==0)return v;const b=Us(l[c[g]],h[p[g]]);if(b!==0)return b}return fe(c.length,p.length)}(t.mapValue,e.mapValue);default:throw Z()}}function bm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=or(t),r=or(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function km(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Us(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function zs(t){return rd(t)}function rd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${rd(n.fields[a])}`;return s+"}"}(t.mapValue):Z()}function Cm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sd(t){return!!t&&"integerValue"in t}function Ih(t){return!!t&&"arrayValue"in t}function Rm(t){return!!t&&"nullValue"in t}function Pm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ja(t){return!!t&&"mapValue"in t}function n2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function zi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function r2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zi(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=zi(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(zi(this.value))}}function cv(t){const e=[];return Qs(t.fields,(n,r)=>{const s=new Ye([n]);if(ja(r)){const i=cv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new at(e,0,te.min(),te.min(),te.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,te.min(),te.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,te.min(),te.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this.position=e,this.inclusive=n}}function jm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),n.key):r=Us(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n="asc"){this.field=e,this.dir=n}}function s2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dv=class{};class Fe extends dv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new o2(e,n,r):n==="array-contains"?new u2(e,r):n==="in"?new c2(e,r):n==="not-in"?new d2(e,r):n==="array-contains-any"?new h2(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new a2(e,r):new l2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Us(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends dv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kt(e,n)}matches(e){return hv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hv(t){return t.op==="and"}function fv(t){return i2(t)&&hv(t)}function i2(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function id(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+zs(t.value);if(fv(t))return t.filters.map(e=>id(e)).join(",");{const e=t.filters.map(n=>id(n)).join(",");return`${t.op}(${e})`}}function pv(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&un(r.value,s.value)}(t,e):t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&pv(a,s.filters[l]),!0):!1}(t,e):void Z()}function mv(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${zs(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(mv).join(" ,")+"}"}(t):"Filter"}class o2 extends Fe{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class a2 extends Fe{constructor(e,n){super(e,"in",n),this.keys=gv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class l2 extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=gv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class u2 extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ih(n)&&po(n.arrayValue,this.value)}}class c2 extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&po(this.value.arrayValue,n)}}class d2 extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!po(this.value.arrayValue,n)}}class h2 extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ih(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function Dm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new f2(t,e,n,r,s,i,a)}function Nh(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>id(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zs(r)).join(",")),e.ue=n}return e.ue}function Ah(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vm(t.startAt,e.startAt)&&Vm(t.endAt,e.endAt)}function od(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function p2(t,e,n,r,s,i,a,l){return new Ys(t,e,n,r,s,i,a,l)}function Sh(t){return new Ys(t)}function Mm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yv(t){return t.collectionGroup!==null}function Bi(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Je(Ye.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new mo(i,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new mo(Ye.keyField(),r))}return e.ce}function on(t){const e=ne(t);return e.le||(e.le=m2(e,Bi(t))),e.le}function m2(t,e){if(t.limitType==="F")return Dm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mo(s.field,i)});const n=t.endAt?new hl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hl(t.startAt.position,t.startAt.inclusive):null;return Dm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ad(t,e){const n=t.filters.concat([e]);return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ld(t,e,n){return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bl(t,e){return Ah(on(t),on(e))&&t.limitType===e.limitType}function vv(t){return`${Nh(on(t))}|lt:${t.limitType}`}function ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mv(s)).join(", ")}]`),zl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zs(s)).join(",")),`Target(${r})`}(on(t))}; limitType=${t.limitType})`}function $l(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const h=jm(a,l,c);return a.inclusive?h<=0:h<0}(r.startAt,Bi(r),s)||r.endAt&&!function(a,l,c){const h=jm(a,l,c);return a.inclusive?h>=0:h>0}(r.endAt,Bi(r),s))}(t,e)}function g2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _v(t){return(e,n)=>{let r=!1;for(const s of Bi(t)){const i=y2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function y2(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Us(c,h):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Re(X.comparator);function Sn(){return v2}const xv=new Re(X.comparator);function Si(...t){let e=xv;for(const n of t)e=e.insert(n.key,n);return e}function wv(t){let e=xv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rr(){return $i()}function Ev(){return $i()}function $i(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const _2=new Re(X.comparator),x2=new Je(X.comparator);function ae(...t){let e=x2;for(const n of t)e=e.add(n);return e}const w2=new Je(fe);function E2(){return w2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dl(e)?"-0":e}}function Tv(t){return{integerValue:""+t}}function T2(t,e){return ZT(e)?Tv(e):bh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this._=void 0}}function I2(t,e,n){return t instanceof fl?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Eh(i)&&(i=Th(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof go?Nv(t,e):t instanceof yo?Av(t,e):function(s,i){const a=Iv(s,i),l=Lm(a)+Lm(s.Pe);return sd(a)&&sd(s.Pe)?Tv(l):bh(s.serializer,l)}(t,e)}function N2(t,e,n){return t instanceof go?Nv(t,e):t instanceof yo?Av(t,e):n}function Iv(t,e){return t instanceof pl?function(r){return sd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class fl extends ql{}class go extends ql{constructor(e){super(),this.elements=e}}function Nv(t,e){const n=Sv(e);for(const r of t.elements)n.some(s=>un(s,r))||n.push(r);return{arrayValue:{values:n}}}class yo extends ql{constructor(e){super(),this.elements=e}}function Av(t,e){let n=Sv(e);for(const r of t.elements)n=n.filter(s=>!un(s,r));return{arrayValue:{values:n}}}class pl extends ql{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Lm(t){return De(t.integerValue||t.doubleValue)}function Sv(t){return Ih(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function A2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof go&&s instanceof go||r instanceof yo&&s instanceof yo?Fs(r.elements,s.elements,un):r instanceof pl&&s instanceof pl?un(r.Pe,s.Pe):r instanceof fl&&s instanceof fl}(t.transform,e.transform)}class S2{constructor(e,n){this.version=e,this.transformResults=n}}class qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qt}static exists(e){return new qt(void 0,e)}static updateTime(e){return new qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Va(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hl{}function bv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kh(t.key,qt.none()):new ko(t.key,t.data,qt.none());{const n=t.data,r=Rt.empty();let s=new Je(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Wr(t.key,r,new zt(s.toArray()),qt.none())}}function b2(t,e,n){t instanceof ko?function(s,i,a){const l=s.value.clone(),c=Fm(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Wr?function(s,i,a){if(!Va(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Fm(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(kv(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qi(t,e,n,r){return t instanceof ko?function(i,a,l,c){if(!Va(i.precondition,a))return l;const h=i.value.clone(),p=Um(i.fieldTransforms,c,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wr?function(i,a,l,c){if(!Va(i.precondition,a))return l;const h=Um(i.fieldTransforms,c,a),p=a.data;return p.setAll(kv(i)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,l){return Va(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function k2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Iv(r.transform,s||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,i))}return n||null}function Om(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fs(r,s,(i,a)=>A2(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ko extends Hl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wr extends Hl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Fm(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,N2(a,l,n[s]))}return r}function Um(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,I2(i,a,e))}return r}class kh extends Hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C2 extends Hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&b2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ev();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=bv(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(n,r)=>Om(n,r))&&Fs(this.baseMutations,e.baseMutations,(n,r)=>Om(n,r))}}class Ch{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return _2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Ch(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ce;function V2(t){switch(t){default:return Z();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Cv(t){if(t===void 0)return An("GRPC error has no .code"),O.UNKNOWN;switch(t){case Le.OK:return O.OK;case Le.CANCELLED:return O.CANCELLED;case Le.UNKNOWN:return O.UNKNOWN;case Le.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Le.INTERNAL:return O.INTERNAL;case Le.UNAVAILABLE:return O.UNAVAILABLE;case Le.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Le.NOT_FOUND:return O.NOT_FOUND;case Le.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Le.ABORTED:return O.ABORTED;case Le.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Le.DATA_LOSS:return O.DATA_LOSS;default:return Z()}}(ce=Le||(Le={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new Vr([4294967295,4294967295],0);function zm(t){const e=D2().encode(t),n=new tv;return n.update(e),new Uint8Array(n.digest())}function Bm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Vr([n,r],0),new Vr([s,i],0)]}class Rh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bi(`Invalid padding: ${n}`);if(r<0)throw new bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Vr.fromNumber(r)));return s.compare(M2)===1&&(s=new Vr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=zm(e),[r,s]=Bm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Rh(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=zm(e),[r,s]=Bm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Co.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wl(te.min(),s,new Re(fe),Sn(),ae())}}class Co{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Co(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Rv{constructor(e,n){this.targetId=e,this.me=n}}class Pv{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class $m{constructor(){this.fe=0,this.ge=Hm(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new Co(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Hm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class L2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sn(),this.qe=qm(),this.Qe=new Re(fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(od(i))if(r===0){const a=new X(i.path);this.Ue(n,a,at.newNoDocument(a,te.min()))}else ye(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),c=l?this.Xe(l,e,a):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=zr(r).toUint8Array()}catch(c){if(c instanceof uv)return uo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Rh(a,s,i)}catch(c){return uo(c instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&od(l.target)){const c=new X(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,at.newNoDocument(c,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Wl(e,n,this.Qe,this.ke,r);return this.ke=Sn(),this.qe=qm(),this.Qe=new Re(fe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $m,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Je(fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $m),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function qm(){return new Re(X.comparator)}function Hm(){return new Re(X.comparator)}const O2=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),F2=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),U2=(()=>({and:"AND",or:"OR"}))();class z2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ud(t,e){return t.useProto3Json||zl(e)?e:{value:e}}function ml(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B2(t,e){return ml(t,e.toTimestamp())}function an(t){return ye(!!t),te.fromTimestamp(function(n){const r=or(n);return new $e(r.seconds,r.nanos)}(t))}function Ph(t,e){return cd(t,e).canonicalString()}function cd(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Vv(t){const e=Te.fromString(t);return ye(Fv(e)),e}function dd(t,e){return Ph(t.databaseId,e.path)}function Yu(t,e){const n=Vv(e);if(n.get(1)!==t.databaseId.projectId)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(Mv(n))}function Dv(t,e){return Ph(t.databaseId,e)}function $2(t){const e=Vv(t);return e.length===4?Te.emptyPath():Mv(e)}function hd(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mv(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wm(t,e,n){return{name:dd(t,e),fields:n.value.mapValue.fields}}function q2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ye(p===void 0||typeof p=="string"),et.fromBase64String(p||"")):(ye(p===void 0||p instanceof Buffer||p instanceof Uint8Array),et.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const p=h.code===void 0?O.UNKNOWN:Cv(h.code);return new K(p,h.message||"")}(a);n=new Pv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yu(t,r.document.name),i=an(r.document.updateTime),a=r.document.createTime?an(r.document.createTime):te.min(),l=new Rt({mapValue:{fields:r.document.fields}}),c=at.newFoundDocument(s,i,a,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Da(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yu(t,r.document),i=r.readTime?an(r.readTime):te.min(),a=at.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Da([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yu(t,r.document),i=r.removedTargetIds||[];n=new Da([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new j2(s,i),l=r.targetId;n=new Rv(l,a)}}return n}function H2(t,e){let n;if(e instanceof ko)n={update:Wm(t,e.key,e.value)};else if(e instanceof kh)n={delete:dd(t,e.key)};else if(e instanceof Wr)n={update:Wm(t,e.key,e.data),updateMask:eI(e.fieldMask)};else{if(!(e instanceof C2))return Z();n={verify:dd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof fl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof go)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof yo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pl)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:B2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function W2(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?an(s.updateTime):an(i);return a.isEqual(te.min())&&(a=an(i)),new S2(a,s.transformResults||[])}(n,e))):[]}function G2(t,e){return{documents:[Dv(t,e.path)]}}function K2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Dv(t,s);const i=function(h){if(h.length!==0)return Ov(Kt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:is(v.field),direction:X2(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ud(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function Q2(t){let e=$2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const v=Lv(g);return v instanceof Kt&&fv(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(C){return new mo(os(C.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,zl(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(g){const v=!!g.before,b=g.values||[];return new hl(b,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,b=g.values||[];return new hl(b,v)}(n.endAt)),p2(e,s,a,i,l,"F",c,h)}function Y2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=os(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=os(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=os(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=os(n.unaryFilter.field);return Fe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(os(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>Lv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function X2(t){return O2[t]}function J2(t){return F2[t]}function Z2(t){return U2[t]}function is(t){return{fieldPath:t.canonicalString()}}function os(t){return Ye.fromServerFormat(t.fieldPath)}function Ov(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Pm(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NAN"}};if(Rm(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pm(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NOT_NAN"}};if(Rm(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(n.field),op:J2(n.op),value:n.value}}}(t):t instanceof Kt?function(n){const r=n.getFilters().map(s=>Ov(s));return r.length===1?r[0]:{compositeFilter:{op:Z2(n.op),filters:r}}}(t):Z()}function eI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r,s,i=te.min(),a=te.min(),l=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.ct=e}}function nI(t){const e=Q2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.un=new sI}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ir.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ir.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class sI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Je(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Je(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bs(0)}static kn(){return new Bs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qi(r.mutation,s,zt.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Rr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Si();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Sn();const a=$i(),l=function(){return $i()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Wr)?i=i.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),qi(p.mutation,h,p.mutation.getFieldMask(),$e.now())):a.set(h.key,zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>a.set(h,p)),n.forEach((h,p)=>{var g;return l.set(h,new oI(p,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=$i();let s=new Re((a,l)=>a-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||zt.empty();p=l.applyToLocalView(h,p),r.set(c,p);const g=(s.get(l.batchId)||ae()).add(c);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,g=Ev();p.forEach(v=>{if(!i.has(v)){const b=bv(n.get(v),r.get(v));b!==null&&g.set(v,b),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Rr());let l=-1,c=i;return a.next(h=>z.forEach(h,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{c=c.insert(p,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,ae())).next(p=>({batchId:l,changes:wv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Si();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Si();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,c=>{const h=function(g,v){return new Ys(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,at.newInvalidDocument(p)))});let l=Si();return a.forEach((c,h)=>{const p=i.get(c);p!==void 0&&qi(p.mutation,h,zt.empty(),$e.now()),$l(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:an(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:nI(s.bundledQuery),readTime:an(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.overlays=new Re(X.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rr();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Rr(),i=n.length+1,a=new X(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Rr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Rr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new P2(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this.Tr=new Je(qe.Er),this.dr=new Je(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Te([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Te([])),r=new qe(n,e),s=new qe(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Je(qe.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new R2(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(fe);return n.forEach(s=>{const i=new qe(s,0),a=new qe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const a=new qe(new X(i),0);let l=new Je(fe);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},a),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.Mr=e,this.docs=function(){return new Re(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=Sn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Sn();const a=n.path,l=new X(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||QT(KT(p),r)<=0||(s.has(p.key)||$l(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fI(this)}getSize(e){return z.resolve(this.size)}}class fI extends iI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.persistence=e,this.Nr=new Xs(n=>Nh(n),Ah),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jh,this.targetCount=0,this.kr=Bs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new wh(0),this.Kr=!1,this.Kr=!0,this.$r=new cI,this.referenceDelegate=e(this),this.Ur=new pI(this),this.indexManager=new rI,this.remoteDocumentCache=function(s){return new hI(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tI(n),this.Gr=new lI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new gI(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class gI extends XT{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Jr=new jh,this.Yr=null}static Zr(e){return new Vh(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Dh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Uw()?8:JT(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new yI;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(wi()<=ue.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(wi()<=ue.DEBUG&&Q("QueryEngine","Query:",ss(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(wi()<=ue.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(n))):z.resolve())}Yi(e,n){if(Mm(n))return z.resolve(null);let r=on(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ld(n,null,"F"),r=on(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ae(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,a,c.readTime)?this.Yi(e,ld(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return Mm(n)||s.isEqual(te.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?z.resolve(null):(wi()<=ue.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ss(n)),this.rs(e,a,n,GT(s,-1)).next(l=>l))})}ts(e,n){let r=new Je(_v(e));return n.forEach((s,i)=>{$l(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return wi()<=ue.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,ir.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Re(fe),this._s=new Xs(i=>Nh(i),Ah),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function xI(t,e,n,r){return new _I(t,e,n,r)}async function Uv(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=ae();for(const h of s){a.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function wI(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const g=h.batch,v=g.keys();let b=z.resolve();return v.forEach(C=>{b=b.next(()=>p.getEntry(c,C)).next(R=>{const F=h.docVersions.get(C);ye(F!==null),R.version.compareTo(F)<0&&(g.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),p.addEntry(R)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ae();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zv(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function EI(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,g)=>{const v=s.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,g)));let b=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(et.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),s=s.insert(g,b),function(R,F,S){return R.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(v,b,p)&&l.push(n.Ur.updateTargetData(i,b))});let c=Sn(),h=ae();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(TI(i,a,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(te.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function TI(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Sn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:a,Is:s}})}function II(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NI(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new qn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function fd(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!bo(a))throw a;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Gm(t,e,n){const r=ne(t);let s=te.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,p){const g=ne(c),v=g._s.get(p);return v!==void 0?z.resolve(g.os.get(v)):g.Ur.getTargetData(h,p)}(r,a,on(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:te.min(),n?i:ae())).next(l=>(AI(r,g2(e),l),{documents:l,Ts:i})))}function AI(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Km{constructor(){this.activeTargetIds=E2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SI{constructor(){this.so=new Km,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Km,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=null;function Xu(){return ya===null?ya=function(){return 268435456+Math.round(2147483648*Math.random())}():ya++,"0x"+ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it="WebChannelConnection";class RI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Xu(),c=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,c,h,s).then(p=>(Q("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw uo("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ks}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=kI[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Xu();return new Promise((a,l)=>{const c=new nv;c.setWithCredentials(!0),c.listenOnce(rv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Pa.NO_ERROR:const p=c.getResponseJson();Q(it,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case Pa.TIMEOUT:Q(it,`RPC '${e}' ${i} timed out`),l(new K(O.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:const g=c.getStatus();if(Q(it,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const C=function(F){const S=F.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(S)>=0?S:O.UNKNOWN}(b.status);l(new K(C,b.message))}else l(new K(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new K(O.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{Q(it,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Q(it,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Xu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ov(),l=iv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Q(it,`Creating RPC '${e}' stream ${s}: ${p}`,c);const g=a.createWebChannel(p,c);let v=!1,b=!1;const C=new CI({Io:F=>{b?Q(it,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(v||(Q(it,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),Q(it,`RPC '${e}' stream ${s} sending:`,F),g.send(F))},To:()=>g.close()}),R=(F,S,T)=>{F.listen(S,A=>{try{T(A)}catch(V){setTimeout(()=>{throw V},0)}})};return R(g,Ai.EventType.OPEN,()=>{b||(Q(it,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),R(g,Ai.EventType.CLOSE,()=>{b||(b=!0,Q(it,`RPC '${e}' stream ${s} transport closed`),C.So())}),R(g,Ai.EventType.ERROR,F=>{b||(b=!0,uo(it,`RPC '${e}' stream ${s} transport errored:`,F),C.So(new K(O.UNAVAILABLE,"The operation could not be completed")))}),R(g,Ai.EventType.MESSAGE,F=>{var S;if(!b){const T=F.data[0];ye(!!T);const A=T,V=A.error||((S=A[0])===null||S===void 0?void 0:S.error);if(V){Q(it,`RPC '${e}' stream ${s} received error:`,V);const M=V.status;let $=function(E){const I=Le[E];if(I!==void 0)return Cv(I)}(M),_=V.message;$===void 0&&($=O.INTERNAL,_="Unknown error status: "+M+" with message "+V.message),b=!0,C.So(new K($,_)),g.close()}else Q(it,`RPC '${e}' stream ${s} received:`,T),C.bo(T)}}),R(l,sv.STAT_EVENT,F=>{F.stat===nd.PROXY?Q(it,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===nd.NOPROXY&&Q(it,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){return new z2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r,s,i,a,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PI extends $v{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=q2(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?an(a.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=hd(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=od(c)?{documents:G2(i,c)}:{query:K2(i,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=jv(i,a.resumeToken);const h=ud(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=ml(i,a.snapshotVersion.toTimestamp());const h=ud(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=Y2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=hd(this.serializer),n.removeTarget=e,this.a_(n)}}class jI extends $v{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=W2(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=hd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>H2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,cd(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,cd(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(O.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class DI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(An(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Gr(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ne(c);h.L_.add(4),await Ro(h),h.q_.set("Unknown"),h.L_.delete(4),await Kl(h)}(this))})}),this.q_=new DI(r,s)}}async function Kl(t){if(Gr(t))for(const e of t.B_)await e(!0)}async function Ro(t){for(const e of t.B_)await e(!1)}function qv(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fh(n)?Oh(n):Js(n).r_()&&Lh(n,e))}function Mh(t,e){const n=ne(t),r=Js(n);n.N_.delete(e),r.r_()&&Hv(n,e),n.N_.size===0&&(r.r_()?r.o_():Gr(n)&&n.q_.set("Unknown"))}function Lh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(t).A_(e)}function Hv(t,e){t.Q_.xe(e),Js(t).R_(e)}function Oh(t){t.Q_=new L2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Js(t).start(),t.q_.v_()}function Fh(t){return Gr(t)&&!Js(t).n_()&&t.N_.size>0}function Gr(t){return ne(t).L_.size===0}function Wv(t){t.Q_=void 0}async function LI(t){t.q_.set("Online")}async function OI(t){t.N_.forEach((e,n)=>{Lh(t,e)})}async function FI(t,e){Wv(t),Fh(t)?(t.q_.M_(e),Oh(t)):t.q_.set("Unknown")}async function UI(t,e,n){if(t.q_.set("Online"),e instanceof Pv&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gl(t,r)}else if(e instanceof Da?t.Q_.Ke(e):e instanceof Rv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await zv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(et.EMPTY_BYTE_STRING,p.snapshotVersion)),Hv(i,c);const g=new qn(p.target,c,h,p.sequenceNumber);Lh(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await gl(t,r)}}async function gl(t,e,n){if(!bo(e))throw e;t.L_.add(1),await Ro(t),t.q_.set("Offline"),n||(n=()=>zv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Kl(t)})}function Gv(t,e){return e().catch(n=>gl(t,n,e))}async function Ql(t){const e=ne(t),n=ar(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zI(e);)try{const s=await II(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,BI(e,s)}catch(s){await gl(e,s)}Kv(e)&&Qv(e)}function zI(t){return Gr(t)&&t.O_.length<10}function BI(t,e){t.O_.push(e);const n=ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Kv(t){return Gr(t)&&!ar(t).n_()&&t.O_.length>0}function Qv(t){ar(t).start()}async function $I(t){ar(t).p_()}async function qI(t){const e=ar(t);for(const n of t.O_)e.m_(n.mutations)}async function HI(t,e,n){const r=t.O_.shift(),s=Ch.from(r,e,n);await Gv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ql(t)}async function WI(t,e){e&&ar(t).V_&&await async function(r,s){if(function(a){return V2(a)&&a!==O.ABORTED}(s.code)){const i=r.O_.shift();ar(r).s_(),await Gv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ql(r)}}(t,e),Kv(t)&&Qv(t)}async function Ym(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Gr(n);n.L_.add(3),await Ro(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Kl(n)}async function GI(t,e){const n=ne(t);e?(n.L_.delete(2),await Kl(n)):e||(n.L_.add(2),await Ro(n),n.q_.set("Unknown"))}function Js(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new PI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:LI.bind(null,t),Ro:OI.bind(null,t),mo:FI.bind(null,t),d_:UI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Fh(t)?Oh(t):t.q_.set("Unknown")):(await t.K_.stop(),Wv(t))})),t.K_}function ar(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new jI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$I.bind(null,t),mo:WI.bind(null,t),f_:qI.bind(null,t),g_:HI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ql(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Uh(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zh(t,e){if(An("AsyncQueue",`${e}: ${t}`),bo(t))return new K(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Si(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new bs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.W_=new Re(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $s{constructor(e,n,r,s,i,a,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new $s(e,n,bs.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QI{constructor(){this.queries=Jm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=Jm(),i.forEach((a,l)=>{for(const c of l.j_)c.onError(r)})})(this,new K(O.ABORTED,"Firestore shutting down"))}}function Jm(){return new Xs(t=>vv(t),Bl)}async function Yv(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new KI,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=zh(a,`Initialization of query '${ss(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Bh(n)}async function Xv(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YI(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Bh(n)}function XI(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Bh(t){t.Y_.forEach(e=>{e.next()})}var pd,Zm;(Zm=pd||(pd={})).ea="default",Zm.Cache="cache";class Jv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this.key=e}}class e_{constructor(e){this.key=e}}class JI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=_v(e),this.Ra=new bs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Xm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const v=s.get(p),b=$l(this.query,g)?g:null,C=!!v&&this.mutatedKeys.has(v.key),R=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let F=!1;v&&b?v.data.isEqual(b.data)?C!==R&&(r.track({type:3,doc:b}),F=!0):this.ga(v,b)||(r.track({type:2,doc:b}),F=!0,(c&&this.Aa(b,c)>0||h&&this.Aa(b,h)<0)&&(l=!0)):!v&&b?(r.track({type:0,doc:b}),F=!0):v&&!b&&(r.track({type:1,doc:v}),F=!0,(c||h)&&(l=!0)),F&&(b?(a=a.add(b),i=R?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,g)=>function(b,C){const R=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return R(b)-R(C)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,a.length!==0||h?{snapshot:new $s(this.query,e.Ra,i,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new e_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Zv(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $s.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eN{constructor(e){this.key=e,this.va=!1}}class tN{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Xs(l=>vv(l),Bl),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(X.comparator),this.Na=new Map,this.La=new jh,this.Ba={},this.ka=new Map,this.qa=Bs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nN(t,e,n=!0){const r=o_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await t_(r,e,n,!0),s}async function rN(t,e){const n=o_(t);await t_(n,e,!0,!1)}async function t_(t,e,n,r){const s=await NI(t.localStore,on(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await sN(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&qv(t.remoteStore,s),l}async function sN(t,e,n,r,s){t.Ka=(g,v,b)=>async function(R,F,S,T){let A=F.view.ma(S);A.ns&&(A=await Gm(R.localStore,F.query,!1).then(({documents:_})=>F.view.ma(_,A)));const V=T&&T.targetChanges.get(F.targetId),M=T&&T.targetMismatches.get(F.targetId)!=null,$=F.view.applyChanges(A,R.isPrimaryClient,V,M);return tg(R,F.targetId,$.wa),$.snapshot}(t,g,v,b);const i=await Gm(t.localStore,e,!0),a=new JI(e,i.Ts),l=a.ma(i.documents),c=Co.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,c);tg(t,n,h.wa);const p=new ZI(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function iN(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Bl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mh(r.remoteStore,s.targetId),md(r,s.targetId)}).catch(So)):(md(r,s.targetId),await fd(r.localStore,s.targetId,!0))}async function oN(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mh(n.remoteStore,r.targetId))}async function aN(t,e,n){const r=pN(t);try{const s=await function(a,l){const c=ne(a),h=$e.now(),p=l.reduce((b,C)=>b.add(C.key),ae());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let C=Sn(),R=ae();return c.cs.getEntries(b,p).next(F=>{C=F,C.forEach((S,T)=>{T.isValidDocument()||(R=R.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,C)).next(F=>{g=F;const S=[];for(const T of l){const A=k2(T,g.get(T.key).overlayedDocument);A!=null&&S.push(new Wr(T.key,A,cv(A.value.mapValue),qt.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,S,l)}).next(F=>{v=F;const S=F.applyToLocalDocumentSet(g,R);return c.documentOverlayCache.saveOverlays(b,F.batchId,S)})}).then(()=>({batchId:v.batchId,changes:wv(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let h=a.Ba[a.currentUser.toKey()];h||(h=new Re(fe)),h=h.insert(l,c),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await Po(r,s.changes),await Ql(r.remoteStore)}catch(s){const i=zh(s,"Failed to persist write");n.reject(i)}}async function n_(t,e){const n=ne(t);try{const r=await EI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ye(a.va):s.removedDocuments.size>0&&(ye(a.va),a.va=!1))}),await Po(n,r,e)}catch(r){await So(r)}}function eg(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=ne(a);c.onlineState=l;let h=!1;c.queries.forEach((p,g)=>{for(const v of g.j_)v.Z_(l)&&(h=!0)}),h&&Bh(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lN(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Re(X.comparator);a=a.insert(i,at.newNoDocument(i,te.min()));const l=ae().add(i),c=new Wl(te.min(),new Map,new Re(fe),a,l);await n_(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),$h(r)}else await fd(r.localStore,e,!1).then(()=>md(r,e,n)).catch(So)}async function uN(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await wI(n.localStore,e);s_(n,r,null),r_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Po(n,s)}catch(s){await So(s)}}async function cN(t,e,n){const r=ne(t);try{const s=await function(a,l){const c=ne(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(g=>(ye(g!==null),p=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);s_(r,e,n),r_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Po(r,s)}catch(s){await So(s)}}function r_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function s_(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function md(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||i_(t,r)})}function i_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Mh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$h(t))}function tg(t,e,n){for(const r of n)r instanceof Zv?(t.La.addReference(r.key,e),dN(t,r)):r instanceof e_?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||i_(t,r.key)):Z()}function dN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),$h(t))}function $h(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Te.fromString(e)),r=t.qa.next();t.Na.set(r,new eN(n)),t.Oa=t.Oa.insert(n,r),qv(t.remoteStore,new qn(on(Sh(n.path)),r,"TargetPurposeLimboResolution",wh.oe))}}async function Po(t,e,n){const r=ne(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{a.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){s.push(h);const g=Dh.Wi(c.targetId,h);i.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(c,h){const p=ne(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(h,v=>z.forEach(v.$i,b=>p.persistence.referenceDelegate.addReference(g,v.targetId,b)).next(()=>z.forEach(v.Ui,b=>p.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))}catch(g){if(!bo(g))throw g;Q("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const b=p.os.get(v),C=b.snapshotVersion,R=b.withLastLimboFreeSnapshotVersion(C);p.os=p.os.insert(v,R)}}}(r.localStore,i))}async function hN(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await Uv(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new K(O.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(n,r.hs)}}function fN(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function o_(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lN.bind(null,e),e.Ca.d_=YI.bind(null,e.eventManager),e.Ca.$a=XI.bind(null,e.eventManager),e}function pN(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cN.bind(null,e),e}class yl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return xI(this.persistence,new vI,e.initialUser,this.serializer)}Ga(e){return new mI(Vh.Zr,this.serializer)}Wa(e){return new SI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yl.provider={build:()=>new yl};class gd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hN.bind(null,this.syncEngine),await GI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QI}()}createDatastore(e){const n=Gl(e.databaseInfo.databaseId),r=function(i){return new RI(i)}(e.databaseInfo);return function(i,a,l,c){return new VI(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new MI(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>eg(this.syncEngine,n,0),function(){return Qm.D()?new Qm:new bI}())}createSyncEngine(e,n){return function(s,i,a,l,c,h,p){const g=new tN(s,i,a,l,c,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ro(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gd.provider={build:()=>new gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zu(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Uv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ng(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gN(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ym(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ym(e.remoteStore,s)),t._onlineComponents=e}async function gN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await Zu(t,new yl)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Zu(t,new yl);return t._offlineComponents}async function l_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await ng(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await ng(t,new gd))),t._onlineComponents}function yN(t){return l_(t).then(e=>e.syncEngine)}async function yd(t){const e=await l_(t),n=e.eventManager;return n.onListen=nN.bind(null,e.syncEngine),n.onUnlisten=iN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oN.bind(null,e.syncEngine),n}function vN(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,h){const p=new a_({next:v=>{p.Za(),a.enqueueAndForget(()=>Xv(i,g)),v.fromCache&&c.source==="server"?h.reject(new K(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new Jv(l,p,{includeMetadataChanges:!0,_a:!0});return Yv(i,g)}(await yd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e,n){if(!n)throw new K(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _N(t,e,n,r){if(e===!0&&r===!0)throw new K(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sg(t){if(!X.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ig(t){if(X.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yl(t);throw new K(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_N("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new og({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new og(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FT;switch(r.type){case"firstParty":return new BT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rg.get(n);r&&(Q("ComponentProvider","Removing Datastore"),rg.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hr(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class nr extends hr{constructor(e,n,r){super(e,n,Sh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new X(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function xN(t,e,...n){if(t=Gt(t),c_("collection","path",e),t instanceof qh){const r=Te.fromString(e,...n);return ig(r),new nr(t,null,r)}{if(!(t instanceof xt||t instanceof nr))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return ig(r),new nr(t.firestore,null,r)}}function Hh(t,e,...n){if(t=Gt(t),arguments.length===1&&(e=av.newId()),c_("doc","path",e),t instanceof qh){const r=Te.fromString(e,...n);return sg(r),new xt(t,null,new X(r))}{if(!(t instanceof xt||t instanceof nr))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return sg(r),new xt(t.firestore,t instanceof nr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bv(this,"async_queue_retry"),this.Vu=()=>{const r=Ju();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ju();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bo(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw An("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Uh.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function lg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class $r extends qh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ag,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ag(e),this._firestoreClient=void 0,await e}}}function Wh(t){if(t._terminated)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wN(t),t._firestoreClient}function wN(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new t2(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,u_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new mN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qs(et.fromBase64String(e))}catch(n){throw new K(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qs(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=/^__.*__$/;class TN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ko(e,this.data,n,this.fieldTransforms)}}function h_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Yh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(h_(this.Cu)&&EN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class IN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gl(e)}Qu(e,n,r,s=!1){return new Yh({Cu:e,methodName:n,qu:r,path:Ye.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xh(t){const e=t._freezeSettings(),n=Gl(t._databaseId);return new IN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function f_(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);g_("Data must be an object, but it was:",a,r);const l=p_(r,a);let c,h;if(i.merge)c=new zt(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const v=AN(e,g,n);if(!a.contains(v))throw new K(O.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);bN(p,v)||p.push(v)}c=new zt(p),h=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=a.fieldTransforms;return new TN(new Rt(l),c,h)}function NN(t,e,n,r=!1){return Jh(n,t.Qu(r?4:3,e))}function Jh(t,e){if(m_(t=Gt(t)))return g_("Unsupported field value:",e,t),p_(t,e);if(t instanceof d_)return function(r,s){if(!h_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Jh(l,s.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$e.fromDate(r);return{timestampValue:ml(s.serializer,i)}}if(r instanceof $e){const i=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ml(s.serializer,i)}}if(r instanceof Kh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qs)return{bytesValue:jv(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ph(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Qh)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return bh(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Yl(r)}`)}(t,e)}function p_(t,e){const n={};return lv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(t,(r,s)=>{const i=Jh(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function m_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof Kh||t instanceof qs||t instanceof xt||t instanceof d_||t instanceof Qh)}function g_(t,e,n){if(!m_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Yl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function AN(t,e,n){if((e=Gt(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return y_(t,e);throw vl("Field path arguments must be of type string or ",t,!1,void 0,n)}const SN=new RegExp("[~\\*/\\[\\]]");function y_(t,e,n){if(e.search(SN)>=0)throw vl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gh(...e.split("."))._internalPath}catch{throw vl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new K(O.INVALID_ARGUMENT,l+t+c)}function bN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kN extends v_{data(){return super.data()}}function Xl(t,e){return typeof e=="string"?y_(t,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zh{}class x_ extends Zh{}function Jl(t,e,...n){let r=[];e instanceof Zh&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof ef).length,l=i.filter(c=>c instanceof Zl).length;if(a>1||a>0&&l>0)throw new K(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zl extends x_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zl(e,n,r)}_apply(e){const n=this._parse(e);return E_(e._query,n),new hr(e.firestore,e.converter,ad(e._query,n))}_parse(e){const n=Xh(e.firestore);return function(i,a,l,c,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new K(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){cg(g,p);const b=[];for(const C of g)b.push(ug(c,i,C));v={arrayValue:{values:b}}}else v=ug(c,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||cg(g,p),v=NN(l,a,g,p==="in"||p==="not-in");return Fe.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function CN(t,e,n){const r=e,s=Xl("where",t);return Zl._create(s,r,n)}class ef extends Zh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ef(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)E_(a,c),a=ad(a,c)}(e._query,n),new hr(e.firestore,e.converter,ad(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tf extends x_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tf(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new K(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(i,a)}(e._query,this._field,this._direction);return new hr(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Ys(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function w_(t,e="asc"){const n=e,r=Xl("orderBy",t);return tf._create(r,n)}function ug(t,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new K(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yv(e)&&n.indexOf("/")!==-1)throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!X.isDocumentKey(r))throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cm(t,new X(r))}if(n instanceof xt)return Cm(t,n._key);throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yl(n)}.`)}function cg(t,e){if(!Array.isArray(t)||t.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E_(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RN{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>De(a.doubleValue));return new Qh(i)}convertGeoPoint(e){return new Kh(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Th(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ho(e));default:return null}}convertTimestamp(e){const n=or(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ye(Fv(r));const s=new fo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||An(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I_ extends v_{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ma extends I_{data(e={}){return super.data(e)}}class N_{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ki(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ma(this._firestore,this._userDataWriter,r.key,r,new ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Ma(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ma(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:PN(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class nf extends RN{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function A_(t){t=xn(t,hr);const e=xn(t.firestore,$r),n=Wh(e),r=new nf(e);return __(t._query),vN(n,t._query).then(s=>new N_(e,r,t,s))}function jN(t,e,n){t=xn(t,xt);const r=xn(t.firestore,$r),s=T_(t.converter,e,n);return sf(r,[f_(Xh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,qt.none())])}function VN(t){return sf(xn(t.firestore,$r),[new kh(t._key,qt.none())])}function _l(t,e){const n=xn(t.firestore,$r),r=Hh(t),s=T_(t.converter,e);return sf(n,[f_(Xh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,qt.exists(!1))]).then(()=>r)}function rf(t,...e){var n,r,s;t=Gt(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||lg(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(lg(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let c,h,p;if(t instanceof xt)h=xn(t.firestore,$r),p=Sh(t._key.path),c={next:g=>{e[a]&&e[a](DN(h,t,g))},error:e[a+1],complete:e[a+2]};else{const g=xn(t,hr);h=xn(g.firestore,$r),p=g._query;const v=new nf(h);c={next:b=>{e[a]&&e[a](new N_(h,v,g,b))},error:e[a+1],complete:e[a+2]},__(t._query)}return function(v,b,C,R){const F=new a_(R),S=new Jv(b,F,C);return v.asyncQueue.enqueueAndForget(async()=>Yv(await yd(v),S)),()=>{F.Za(),v.asyncQueue.enqueueAndForget(async()=>Xv(await yd(v),S))}}(Wh(h),p,l,c)}function sf(t,e){return function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget(async()=>aN(await yN(r),s,i)),i.promise}(Wh(t),e)}function DN(t,e,n){const r=n.docs.get(e._key),s=new nf(t);return new I_(t,s,e._key,r,new ki(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ks=s})(Fl),Ls(new Ms("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new $r(new UT(r.getProvider("auth-internal")),new qT(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fo(h.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),er(Nm,"4.7.3",e),er(Nm,"4.7.3","esm2017")})();var MN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const LN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ON=(t,e)=>{const n=Y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},h)=>Y.createElement("svg",{ref:h,...MN,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${LN(t)}`,...c},[...e.map(([p,g])=>Y.createElement(p,g)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var re=ON;const La=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),dg=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),eu=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),xl=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),hg=re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),vd=re("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),wl=re("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),FN=re("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),_d=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),fg=re("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),UN=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pg=re("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),zN=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),mg=re("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),BN=re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),$N=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),qN=re("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),HN=re("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),gg=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),WN=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),S_=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),GN=re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),KN=re("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),QN=re("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),YN=re("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),b_=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),yg=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),XN=re("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ec=re("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),tc=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),JN=re("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),ZN=re("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),eA=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),vg=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),tA=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),nA=re("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),rA=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),sA=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),xd=re("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),nc=re("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),vo=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),El=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),iA="https://italcar.tn/wp-content/uploads/2020/12/logo-italcar.png",ln=t=>xN(db,t),jo=({size:t="h-10"})=>u.jsx("img",{src:iA,alt:"ITALCAR Logo",className:`${t} object-contain`,onError:e=>{e.target.onerror=null,e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),oA=()=>u.jsx("div",{className:"hidden items-center justify-center bg-blue-900 text-white font-black p-2 rounded text-xs",children:"ITALCAR"}),k_=({darkText:t=!1})=>{const[e,n]=Y.useState(new Date),[r,s]=Y.useState({temp:"--",code:0});Y.useEffect(()=>{const l=setInterval(()=>n(new Date),1e3),c=async()=>{try{const g=await(await fetch("https://api.open-meteo.com/v1/forecast?latitude=36.8065&longitude=10.1815&current_weather=true")).json();g.current_weather&&s({temp:g.current_weather.temperature,code:g.current_weather.weathercode})}catch{console.log("Weather fetch failed")}};c();const h=setInterval(c,6e5);return()=>{clearInterval(l),clearInterval(h)}},[]);const i=t?"text-slate-700":"text-white",a=t?"text-slate-400":"text-white/70";return u.jsxs("div",{className:`flex items-center gap-6 ${i}`,children:[u.jsxs("div",{className:"text-right hidden sm:block",children:[u.jsxs("div",{className:"text-xl font-black leading-none flex items-center justify-end gap-2",children:[r.temp,"C ",u.jsx(JN,{size:18,className:"text-red-500"})]}),u.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${a}`,children:"Tunis (Live)"})]}),u.jsx("div",{className:`h-8 w-px hidden sm:block ${t?"bg-slate-200":"bg-white/20"}`}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-xl font-black leading-none",children:e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),u.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${a}`,children:e.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"short"})})]})]})},aA=({onLogin:t})=>{const[e,n]=Y.useState(""),[r,s]=Y.useState(""),[i,a]=Y.useState(""),[l,c]=Y.useState(!1),h=async p=>{if(p.preventDefault(),c(!0),a(""),e==="RMI"&&r==="RMI2026$"){setTimeout(()=>{t({username:"RMI",role:"ADMIN"}),c(!1)},800);return}try{const g=Jl(ln("users"),CN("username","==",e)),v=await A_(g);if(v.empty){if(e==="admin"&&r==="0000"){t({username:"Admin Test",role:"ADMIN"});return}a("Utilisateur inconnu"),c(!1);return}let b=null;v.forEach(C=>{const R=C.data();R.password===r&&(b={...R,id:C.id})}),b?t(b):a("Mot de passe incorrect")}catch(g){console.error(g),a("Erreur de connexion base de donnes")}c(!1)};return u.jsxs("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 z-0",children:u.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-slate-200 skew-x-12 opacity-50"})}),u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-10 w-full max-w-md z-10 border-t-4 border-blue-900",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsxs("div",{className:"flex justify-center mb-4",children:[u.jsx(jo,{size:"h-16"}),u.jsx(oA,{})]}),u.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Portail nergie"}),u.jsx("p",{className:"text-slate-400 text-sm mt-1 font-medium",children:"Systme de Management de l'nergie"})]}),u.jsxs("form",{onSubmit:h,className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Identifiant"}),u.jsxs("div",{className:"relative",children:[u.jsx(rA,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),u.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"Nom d'utilisateur",value:e,onChange:p=>n(p.target.value)})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Mot de passe"}),u.jsxs("div",{className:"relative",children:[u.jsx(qN,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),u.jsx("input",{type:"password",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"",value:r,onChange:p=>s(p.target.value)})]})]}),i&&u.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center font-bold flex items-center justify-center border border-red-100",children:[u.jsx(AlertCircle,{size:16,className:"mr-2"}),i]}),u.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-900 hover:bg-blue-800 text-white font-bold py-3.5 rounded-lg shadow-lg shadow-blue-900/20 transition-all uppercase tracking-wide text-sm",children:l?"Connexion...":"Se Connecter"})]}),u.jsx("div",{className:"mt-8 text-center text-[10px] text-slate-400 font-mono",children:"v8.2.0  ITALCAR SA"})]})]})},lA=({onBack:t,userRole:e})=>{const[n,r]=Y.useState(1),[s,i]=Y.useState([]),[a,l]=Y.useState(!1),[c,h]=Y.useState(!1),[p,g]=Y.useState(null),[v,b]=Y.useState(!1);Y.useEffect(()=>{const j=Jl(ln("steg_logs"),w_("id","desc")),ie=rf(j,ee=>{i(ee.docs.map(Se=>({...Se.data(),docId:Se.id})))});return()=>ie()},[]);const C=[{id:1,name:"MT 1 - Mgrine",code:"MEG-001",type:"MT",icon:pg},{id:2,name:"MT 2 - El Khadhra",code:"ELK-002",type:"MT",icon:hg},{id:3,name:"MT 3 - Naassen",code:"NAS-003",type:"MT",icon:hg},{id:4,name:"BT 1 - Showroom Lac",code:"SHR-001",type:"BT_PV",icon:ec},{id:5,name:"BT 2 - Azur City",code:"AZU-002",type:"BT",icon:ec},{id:6,name:"BT 3 - Rue de Carthage",code:"CAR-003",type:"BT",icon:ec}],[R,F]=Y.useState({unitPriceKwh:.291,powerUnitPrice:5,unitPriceKwhBT:.391,fixedFeesBT:115.5,servicesBT:0,fteGazBT:0,vatRate:19,rtt:3.5,municipalTaxRate:.01,taxCLRate:.005,taxFTERate:.005,powerOverrunPenalty:25}),[S,T]=Y.useState({1:{subscribedPower:250,emptyLosses:1300},2:{subscribedPower:70,emptyLosses:670},3:{subscribedPower:30,emptyLosses:160},4:{subscribedPower:30,emptyLosses:0},5:{subscribedPower:20,emptyLosses:0},6:{subscribedPower:15,emptyLosses:0}}),[A,V]=Y.useState(!1),[M,$]=Y.useState({date:new Date().toISOString().slice(0,7),lastIndex:"",newIndex:"",lastIndexPv:"",newIndexPv:"",previousBalance:"",cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:""}),_=j=>j==null?void 0:j.toLocaleString("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:3}),y=j=>j==null?void 0:j.toLocaleString("fr-TN",{maximumFractionDigits:2}),E=j=>j===""||j===void 0||j===null?"":j.toString().replace(/[^0-9.-]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g," "),I=j=>j.replace(/\s/g,"");Y.useEffect(()=>{const j=s.filter(ie=>ie.siteId===n).sort((ie,ee)=>ee.id-ie.id);if(j.length>0){const ie=j[0],ee=C.find(Se=>Se.id===n).type;$(Se=>({...Se,lastIndex:ie.newIndex,...ee==="BT_PV"?{lastIndexPv:ie.newIndexPv,previousBalance:ie.newCarryOver}:{},manualLastIndex:!1}))}else $(ie=>({...ie,lastIndex:"",lastIndexPv:"",previousBalance:""}))},[n,s]);const w=(j,ie)=>{const ee=["lastIndex","newIndex","lastIndexPv","newIndexPv","previousBalance","maxPower","reactiveCons"].includes(j)?I(ie):ie;$(Se=>({...Se,[j]:ee}))},N=(j,ie)=>F(ee=>({...ee,[j]:ie})),x=(j,ie)=>T(ee=>({...ee,[n]:{...ee[n],[j]:ie}})),se=()=>{const j=C.find(_e=>_e.id===n),ie=S[n],ee=R,Se=parseFloat(M.newIndex)||0,Ue=parseFloat(M.lastIndex)||0,kn=Math.max(0,Se-Ue),Vo=parseFloat(M.lateFees)||0,fr=parseFloat(M.relanceFees)||0,pr=parseFloat(M.adjustment)||0,Kr=parseFloat(ee.rtt)||0,mr=(parseFloat(ee.vatRate)||0)/100;if(j.type.startsWith("BT")){let _e=kn,cn=0,Cn=0,Rn=0,dn=0,Qt=0;if(j.type==="BT_PV"){const Xr=parseFloat(M.newIndexPv)||0,Zt=parseFloat(M.lastIndexPv)||0;Rn=parseFloat(M.previousBalance)||0,Cn=Math.max(0,Xr-Zt),dn=kn-Cn,Qt=dn+Rn,Qt>0?(_e=Qt,cn=0):(_e=0,cn=Qt)}const Qr=parseFloat(ee.unitPriceKwhBT)||.391,gr=parseFloat(ee.fixedFeesBT)||115.5,Yr=parseFloat(ee.servicesBT)||0,yr=_e*Qr,Yt=gr+Yr,Xt=yr+Yt,bt=Xt*(1+mr),Ne=_e*(parseFloat(ee.taxCLRate)||.005),Ve=_e*(parseFloat(ee.taxFTERate)||.005),Jt=parseFloat(ee.fteGazBT)||0,Pn=bt+Ne+Kr+Ve+Jt,vr=Pn+pr+Vo+fr;return{type:j.type,consumptionGrid:kn,productionPv:Cn,currentMonthBalance:dn,prevBalance:Rn,totalBalance:Qt,billedKwh:_e,newCarryOver:cn,consoAmountHT:yr,fixedAmountHT:Yt,totalTTC:bt,contributionCL:Ne,fteElec:Ve,fteGaz:Jt,netToPay:vr,totalFinalTTC:Pn,totalHT:Xt}}else{const _e=parseFloat(M.cosPhi)||1,cn=parseFloat(M.maxPower)||0,Cn=parseFloat(M.reactiveCons)||0,Rn=parseFloat(ee.unitPriceKwh)||.291,dn=parseFloat(ie.subscribedPower)||0,Qt=parseFloat(ee.powerUnitPrice)||5,Qr=parseFloat(ee.municipalTaxRate)||.01,gr=parseFloat(ie.emptyLosses)||0,Yr=parseFloat(ee.powerOverrunPenalty)||25,yr=kn*.02,Yt=kn+gr+yr,Xt=Yt*Rn;let bt=0,Ne="none";if(_e>=.91&&_e<=1)bt=-(Math.round((_e-.9)*100)*.005),Ne="bonus";else if(_e>=.8&&_e<=.9)bt=0,Ne="neutral";else{Ne="penalty";let _r=0;_e<.8&&(_r+=Math.round((.8-Math.max(_e,.75))*100)*.005),_e<.75&&(_r+=Math.round((.75-Math.max(_e,.7))*100)*.01),_e<.7&&(_r+=Math.round((.7-Math.max(_e,.6))*100)*.015),_e<.6&&(_r+=Math.round((.6-_e)*100)*.02),bt=_r}const Ve=Xt*bt,Jt=Math.max(0,cn-dn),Pn=Jt*Yr,vr=Xt+Ve,Xr=vr*(1+mr),Zt=dn*Qt,Zs=Zt+Vo+fr+Pn,ei=Zs*(1+mr),Jr=Yt*Qr,tu=Xr+ei+Kr+Jr+pr;return{type:"MT",energyRecorded:kn,loadLosses:yr,billedKwh:Yt,baseEnergyAmountHT:Xt,adjustmentRate:bt,adjustmentType:Ne,cosPhiAdjustmentAmount:Ve,total1_TTC:Xr,total1_HT:vr,powerPremium:Zt,total2_HT:Zs,total2_TTC:ei,municipalTax:Jr,netToPay:tu,powerOverrun:Jt,powerOverrunAmount:Pn,reactiveCons:Cn,subPower:dn}}},pe=async j=>{j.preventDefault();const ie=C.find(Ue=>Ue.id===n),ee=se(),Se={id:Date.now(),recordDate:M.date,timestamp:new Date().toLocaleTimeString("fr-FR"),siteId:n,siteName:ie.name,siteType:ie.type,...M,...ee};try{await _l(ln("steg_logs"),Se),g({msg:"Relev enregistr dans le Cloud",type:"success"}),$(Ue=>({...Ue,lastIndex:M.newIndex,newIndex:"",...ie.type==="BT_PV"?{lastIndexPv:M.newIndexPv,newIndexPv:"",previousBalance:ee.newCarryOver}:{},cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:"",manualLastIndex:!1}))}catch{g({msg:"Erreur sauvegarde",type:"error"})}setTimeout(()=>g(null),3e3)},L=se(),H=s.filter(j=>j.siteId===n),D=C.find(j=>j.id===n),U=D.type.startsWith("BT"),J=D.type==="MT",W=L,le=D.icon;return u.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-2 md:mb-0",children:[u.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:u.jsx(eu,{size:20})}),u.jsx("div",{className:`p-2 rounded-lg ${U?"bg-red-50 text-red-600":"bg-blue-50 text-blue-900"}`,children:u.jsx(le,{size:24})}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-lg font-black text-slate-800 tracking-tight leading-none uppercase",children:["Facturation ",D.name]}),u.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-500 mt-1",children:[u.jsx("span",{className:`px-2 py-0.5 rounded font-bold uppercase tracking-wider text-[9px] ${U?"bg-red-600 text-white":"bg-blue-900 text-white"}`,children:U?"BASSE TENSION":"MOYENNE TENSION"}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(S_,{size:10,className:"mr-1"})," ",D.code]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx(k_,{darkText:!0}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[u.jsx(xl,{size:16,className:"mr-2"})," Guide"]}),J&&u.jsxs("button",{onClick:()=>l(!0),className:"flex items-center bg-blue-50 hover:bg-blue-100 px-3 py-2 rounded-lg text-xs font-bold text-blue-600 transition-colors border border-blue-100",children:[u.jsx(mg,{size:16,className:"mr-2"})," Cos "]})]})]})]})}),c&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>h(!1),children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-4xl w-full shadow-2xl relative overflow-hidden h-[80vh] flex flex-col",onClick:j=>j.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[u.jsx(xl,{className:"mr-3 text-blue-900",size:28})," Guide de Collecte"]}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Procdures physiques pour les relevs d'index"})]}),u.jsx("button",{onClick:()=>h(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:u.jsx(vo,{size:20,className:"text-slate-600"})})]}),u.jsxs("div",{className:"overflow-y-auto flex-1 space-y-8 pr-2",children:[u.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200",children:[u.jsxs("h4",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[u.jsx(pg,{className:"mr-2"})," Compteurs Moyenne Tension (MT)"]}),u.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Mgrine, El Khadhra, Naassen."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[u.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Navigation"}),u.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Appuyez sur le bouton de dfilement (souvent bleu ou jaune) pour allumer l'cran. Continuez d'appuyer pour faire dfiler les codes OBIS en haut  gauche."})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[u.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Codes OBIS  Relever"}),u.jsxs("ul",{className:"text-xs text-slate-500 space-y-1 font-mono",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"1.8.0"})," : Cumul nergie Active (kWh) [Total]"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"1.8.1"})," : Index Jour (kWh)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"1.8.2"})," : Index Pointe (kWh)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"1.8.3"})," : Index Nuit/Soir (kWh)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"1.6.0"})," : Puissance Max (kW) du mois en cours"]})]})]})]})]}),u.jsxs("div",{className:"bg-orange-50 p-6 rounded-xl border border-orange-200",children:[u.jsxs("h4",{className:"text-lg font-bold text-orange-800 mb-4 flex items-center",children:[u.jsx(tc,{className:"mr-2"})," Photovoltaque & BT"]}),u.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Showroom Lac (BT+PV)."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-100",children:[u.jsx("h5",{className:"font-bold text-slate-800 mb-1",children:"1. Onduleur PV (Marque: Fronius/SMA)"}),u.jsxs("p",{className:"text-xs text-slate-500",children:["Relever la valeur ",u.jsx("strong",{children:'"Total Energy Produced"'})," ou ",u.jsx("strong",{children:'"E-Total"'})," en kWh. C'est l'index de production cumule."]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-100",children:[u.jsx("h5",{className:"font-bold text-slate-800 mb-1",children:"2. Compteur STEG Bidirectionnel"}),u.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Ce compteur affiche deux sens de flux :"}),u.jsxs("ul",{className:"text-xs text-slate-500 list-disc pl-5",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Code 1.8.0"})," : Consommation prise du rseau (Import)."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Code 2.8.0"})," : Surplus inject dans le rseau (Export)."]})]})]})]})]})]})]})}),a&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>l(!1),children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-3xl w-full shadow-2xl relative overflow-hidden",onClick:j=>j.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-start mb-8",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[u.jsx(mg,{className:"mr-3 text-blue-600",size:28})," Comprendre le Cos "]}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Impact sur la facturation et l'efficacit nergtique"})]}),u.jsx("button",{onClick:()=>l(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:u.jsx(vo,{size:20,className:"text-slate-600"})})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider",children:[u.jsx("span",{children:"Pnalit"}),u.jsx("span",{children:"Neutre"}),u.jsx("span",{children:"Bonus"})]}),u.jsxs("div",{className:"h-12 w-full rounded-xl flex overflow-hidden shadow-inner border border-slate-200",children:[u.jsxs("div",{className:"w-[80%] bg-gradient-to-r from-red-500 to-red-400 flex items-center justify-center text-white font-bold text-xs relative group cursor-help",children:["< 0.80",u.jsx("span",{className:"absolute bottom-full mb-2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Mauvais rendement = Pnalits"})]}),u.jsxs("div",{className:"w-[10%] bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-xs border-l border-r border-white relative group cursor-help",children:["0.8-0.9",u.jsx("span",{className:"absolute bottom-full mb-2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Standard = Aucune incidence"})]}),u.jsxs("div",{className:"w-[10%] bg-emerald-500 flex items-center justify-center text-white font-bold text-xs relative group cursor-help",children:["> 0.90",u.jsx("span",{className:"absolute bottom-full mb-2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Excellent = Bonus"})]})]})]}),u.jsx("div",{className:"text-sm text-slate-600 bg-blue-50 p-4 rounded-xl border border-blue-100",children:u.jsxs("p",{children:[u.jsx("strong",{children:"Note :"})," Le Cosinus Phi mesure l'efficacit de votre installation. Un mauvais Cos  (infrieur  0.8) entrane une facturation de l'nergie ractive par la STEG. Assurez-vous que vos batteries de condensateurs fonctionnent correctement."]})})]})}),u.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(j=>u.jsxs("button",{onClick:()=>r(j.id),className:`p-3 rounded-xl border text-xs font-bold transition-all flex flex-col items-center justify-center text-center h-20 group relative overflow-hidden
              ${n===j.id?j.type.startsWith("BT")?"bg-red-600 text-white shadow-lg border-red-600":"bg-blue-900 text-white shadow-lg border-blue-900":"bg-white text-slate-500 border-slate-200 hover:border-blue-200 hover:bg-slate-50"}`,children:[u.jsx(j.icon,{size:20,className:`mb-1 transition-transform ${n===j.id?"opacity-100":"opacity-60 group-hover:scale-110"}`}),u.jsx("span",{children:j.name})]},j.id))}),u.jsxs("form",{onSubmit:pe,className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 space-y-6 relative overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[u.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center",children:[u.jsx(vd,{className:"mr-2 text-slate-400",size:20})," Priode de Facturation"]}),u.jsx("input",{type:"month",value:M.date,onChange:j=>$({...M,date:j.target.value}),className:"bg-slate-50 border border-slate-200 rounded px-3 py-1.5 font-bold text-slate-700 cursor-pointer focus:ring-2 focus:ring-blue-900 outline-none"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[u.jsx(El,{size:12,className:"mr-1"})," Index Actif"]}),u.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3 relative",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex justify-between text-xs font-bold text-slate-500 mb-1",children:["Ancien Index",e==="ADMIN"&&u.jsx(GN,{size:12,className:"cursor-pointer text-slate-400 hover:text-blue-900",onClick:()=>b(!v)})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:E(M.lastIndex),onChange:j=>w("lastIndex",j.target.value),readOnly:e!=="ADMIN"&&!v,className:`w-full border rounded p-2 text-sm font-mono ${e!=="ADMIN"&&!v?"bg-slate-200 text-slate-500":"bg-white border-orange-300"}`}),e!=="ADMIN"&&!v&&u.jsx(gg,{size:12,className:"absolute right-3 top-3 text-slate-400"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-blue-900 mb-1 block",children:"Nouvel Index *"}),u.jsx("input",{type:"text",required:!0,value:E(M.newIndex),onChange:j=>w("newIndex",j.target.value),className:"w-full text-lg border-2 border-blue-200 rounded p-2 font-mono focus:border-blue-900 outline-none"})]}),u.jsxs("div",{className:"text-right text-xs font-bold text-blue-900",children:["Conso: ",y(L.consumptionGrid||L.energyRecorded)," kWh"]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[U?u.jsx(tc,{size:12,className:"mr-1"}):u.jsx(yg,{size:12,className:"mr-1"}),U?"Photovoltaque & Solde":"Paramtres Techniques"]}),D.type==="BT_PV"?u.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 space-y-3",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Ancien PV"}),u.jsx("input",{type:"text",value:E(M.lastIndexPv),onChange:j=>w("lastIndexPv",j.target.value),className:"w-full text-xs p-1 border rounded"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Nouveau PV"}),u.jsx("input",{type:"text",value:E(M.newIndexPv),onChange:j=>w("newIndexPv",j.target.value),className:"w-full text-xs p-1 border rounded font-mono"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-600",children:"Solde N-1"}),u.jsx("input",{type:"text",value:E(M.previousBalance),onChange:j=>w("previousBalance",j.target.value),className:"w-full text-sm p-2 border rounded"})]})]}):D.type==="MT"?u.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Cos  *"}),u.jsx("input",{type:"number",step:"0.01",required:!0,value:M.cosPhi,onChange:j=>w("cosPhi",j.target.value),className:"w-full border p-2 rounded text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"P. Max (kVA) *"}),u.jsx("input",{type:"number",required:!0,value:M.maxPower,onChange:j=>w("maxPower",j.target.value),className:"w-full border p-2 rounded text-sm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Ractif (kVarh)"}),u.jsx("input",{type:"number",value:M.reactiveCons,onChange:j=>w("reactiveCons",j.target.value),className:"w-full border p-2 rounded text-sm"})]})]}):u.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 text-xs text-slate-500 text-center italic",children:"Site BT Standard - Paramtres fixes appliqus."})]})]}),u.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[u.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Frais & Ajustements"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),u.jsx("input",{type:"number",placeholder:"Retard",value:M.lateFees,onChange:j=>w("lateFees",j.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),u.jsx("input",{type:"number",placeholder:"Relance",value:M.relanceFees,onChange:j=>w("relanceFees",j.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),u.jsx("input",{type:"number",placeholder:"Ajustement",value:M.adjustment,onChange:j=>w("adjustment",j.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]})]})]}),u.jsxs("button",{type:"submit",className:`w-full text-white font-bold py-3 rounded-xl shadow-lg transition-transform active:scale-95 flex items-center justify-center ${U?"bg-red-600 hover:bg-red-700":"bg-blue-900 hover:bg-blue-800"}`,children:[u.jsx(b_,{size:18,className:"mr-2"})," Valider & Sauvegarder"]})]}),u.jsxs("div",{className:"bg-slate-100 rounded-xl border border-slate-200 overflow-hidden",children:[u.jsxs("button",{onClick:()=>V(!A),className:"w-full px-6 py-3 flex justify-between items-center text-xs font-bold text-slate-500 uppercase hover:bg-slate-200",children:[u.jsxs("span",{children:[u.jsx(yg,{size:14,className:"inline mr-2"})," Configuration Avance (",U?"BT":"MT",")"]}),A?u.jsx(nA,{size:14,className:"text-red-500"}):u.jsx(gg,{size:14})]}),A&&u.jsx("div",{className:"p-4 bg-white border-t border-slate-200 animate-in slide-in-from-top-2",children:U?u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-xs",children:[u.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-red-800 uppercase tracking-widest border-b pb-1",children:"Paramtres Basse Tension"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix kWh BT"}),u.jsx("input",{type:"number",value:R.unitPriceKwhBT,onChange:j=>N("unitPriceKwhBT",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Redevance Fixe"}),u.jsx("input",{type:"number",value:R.fixedFeesBT,onChange:j=>N("fixedFeesBT",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Services"}),u.jsx("input",{type:"number",value:R.servicesBT,onChange:j=>N("servicesBT",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Taxe CL (Taux)"}),u.jsx("input",{type:"number",value:R.taxCLRate,onChange:j=>N("taxCLRate",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Elec (Taux)"}),u.jsx("input",{type:"number",value:R.taxFTERate,onChange:j=>N("taxFTERate",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Gaz (Montant)"}),u.jsx("input",{type:"number",value:R.fteGazBT,onChange:j=>N("fteGazBT",j.target.value),className:"border p-1 w-full rounded font-mono"})]})]}):u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[u.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-blue-900 uppercase tracking-widest border-b pb-1",children:"Paramtres Moyenne Tension"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"P. Souscrite (kVA)"}),u.jsx("input",{type:"number",value:S[n].subscribedPower,onChange:j=>x("subscribedPower",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix nergie (DT/kWh)"}),u.jsx("input",{type:"number",value:R.unitPriceKwh,onChange:j=>N("unitPriceKwh",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix Puissance (DT/kVA)"}),u.jsx("input",{type:"number",value:R.powerUnitPrice,onChange:j=>N("powerUnitPrice",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"TVA (%)"}),u.jsx("input",{type:"number",value:R.vatRate,onChange:j=>N("vatRate",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Pnalit Dpassement"}),u.jsx("input",{type:"number",value:R.powerOverrunPenalty,onChange:j=>N("powerOverrunPenalty",j.target.value),className:"border p-1 w-full rounded font-mono bg-red-50"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"Pertes  Vide (kWh)"}),u.jsx("input",{type:"number",value:S[n].emptyLosses,onChange:j=>x("emptyLosses",j.target.value),className:"border p-1 w-full rounded font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-400 mb-1",children:"RTT (DT)"}),u.jsx("input",{type:"number",value:R.rtt,onChange:j=>N("rtt",j.target.value),className:"border p-1 w-full rounded font-mono"})]})]})})]})]}),u.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[u.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-lg border transition-all duration-300 relative overflow-hidden ${U?"border-red-200 ring-2 ring-red-50":"border-blue-200 ring-2 ring-blue-50"}`,children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:U?u.jsx(tc,{size:100}):u.jsx(El,{size:100})}),u.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-100 pb-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:`text-sm font-bold uppercase ${U?"text-red-600":"text-blue-900"}`,children:U?"FACTURE BT":"FACTURE MT"}),u.jsx("p",{className:"text-xs text-slate-400",children:D.name})]}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"text-xs text-slate-400 font-mono",children:M.date})})]}),u.jsxs("div",{className:"space-y-3 text-sm",children:[D.type==="BT_PV"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-slate-600",children:[u.jsx("span",{children:"Conso Rseau"}),u.jsxs("span",{className:"font-mono",children:[y(W.consumptionGrid)," kWh"]})]}),u.jsxs("div",{className:"flex justify-between text-orange-600",children:[u.jsx("span",{children:"Prod Photovoltaque"}),u.jsxs("span",{className:"font-mono",children:["-",y(W.productionPv)," kWh"]})]}),u.jsxs("div",{className:"flex justify-between text-slate-500 text-xs bg-slate-50 p-1 rounded",children:[u.jsx("span",{children:"Solde N-1"}),u.jsxs("span",{className:"font-mono",children:[y(W.prevBalance)," kWh"]})]}),u.jsxs("div",{className:`flex justify-between font-bold p-2 rounded ${W.totalBalance>0?"bg-red-50 text-red-700":"bg-emerald-50 text-emerald-700"}`,children:[u.jsx("span",{children:"Solde Final"}),u.jsxs("span",{children:[y(W.totalBalance)," kWh"]})]}),W.totalBalance<=0?u.jsx("div",{className:"text-xs text-center text-emerald-600 italic",children:"Crdit report au mois prochain"}):u.jsxs("div",{className:"flex justify-between text-slate-800 font-bold border-t pt-2",children:[u.jsxs("span",{children:["Factur (",y(W.billedKwh)," kWh)"]}),u.jsx("span",{children:_(W.consoAmountHT)})]})]}),u.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Redevances Fixes"}),u.jsx("span",{children:_(W.fixedAmountHT)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Taxes (TVA, CL, FTE)"}),u.jsx("span",{children:_(W.totalFinalTTC-(W.consoAmountHT+W.fixedAmountHT))})]})]})]}):U?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:u.jsxs("div",{className:"flex justify-between font-bold text-slate-700",children:[u.jsxs("span",{children:["Conso (",y(W.consumptionGrid)," kWh)"]}),u.jsx("span",{children:_(W.consoAmountHT)})]})}),u.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Redevances (Fixe + Serv)"}),u.jsx("span",{children:_(W.fixedAmountHT)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Taxes (TVA,CL,FTE)"}),u.jsx("span",{children:_(W.totalFinalTTC-W.totalHT)})]})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:[u.jsxs("div",{className:"flex justify-between text-slate-600",children:[u.jsx("span",{children:"nergie Enregistre"}),u.jsxs("span",{className:"font-mono",children:[y(W.energyRecorded)," kWh"]})]}),u.jsxs("div",{className:"flex justify-between text-slate-500 text-xs pl-2",children:[u.jsx("span",{children:"+ Pertes"}),u.jsx("span",{className:"font-mono",children:y(W.billedKwh-W.energyRecorded)})]}),u.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mt-1 bg-slate-50 px-2 py-1 rounded",children:[u.jsx("span",{children:"Factur"}),u.jsx("span",{children:_(W.baseEnergyAmountHT)})]})]}),u.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-1 pt-2",children:[u.jsxs("div",{className:`flex justify-between text-xs ${W.cosPhiAdjustmentAmount>0?"text-red-600":"text-emerald-600"}`,children:[u.jsx("span",{children:"Ajustement Cos "}),u.jsx("span",{children:_(W.cosPhiAdjustmentAmount)})]}),u.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[u.jsxs("span",{children:["Prime Fixe (",W.subPower,"kVA x ",y(R.powerUnitPrice),")"]}),u.jsx("span",{children:_(W.powerPremium)})]}),W.powerOverrunAmount>0&&u.jsxs("div",{className:"flex justify-between text-xs text-red-600 font-bold bg-red-50 p-1 rounded",children:[u.jsxs("span",{children:["Pnalit Puissance (",y(W.powerOverrun)," kVA x ",R.powerOverrunPenalty,")"]}),u.jsx("span",{children:_(W.powerOverrunAmount)})]})]}),u.jsxs("div",{className:"text-xs text-slate-500 pt-2 space-y-1 border-t mt-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Total nergie TTC"}),u.jsx("span",{children:_(W.total1_TTC)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Total Fixe TTC"}),u.jsx("span",{children:_(W.total2_TTC)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Taxes (RTT+Muni)"}),u.jsx("span",{children:_(R.rtt+W.municipalTax)})]})]})]}),(parseFloat(M.lateFees)>0||parseFloat(M.relanceFees)>0||parseFloat(M.adjustment)!==0)&&u.jsxs("div",{className:"pt-2 text-xs text-orange-600 border-t mt-2 flex justify-between font-bold",children:[u.jsx("span",{children:"Frais & Ajustements"}),u.jsx("span",{children:_((parseFloat(M.lateFees)||0)+(parseFloat(M.relanceFees)||0)+(parseFloat(M.adjustment)||0))})]})]}),u.jsx("div",{className:"mt-6 border-t-2 border-slate-800 pt-4",children:u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsx("span",{className:"text-lg font-black text-slate-900 uppercase",children:"Net  Payer"}),u.jsx("span",{className:`text-3xl font-black font-mono tracking-tight ${U?"text-red-700":"text-blue-900"}`,children:_(W.netToPay)})]})})]}),u.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 h-[400px] flex flex-col",children:[u.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center",children:[u.jsx(_d,{size:12,className:"mr-1"})," Historique Cloud"]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:H.map(j=>u.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 text-xs hover:bg-blue-50 transition-colors",children:[u.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mb-1",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(vd,{size:12,className:"mr-1"})," ",j.recordDate]}),u.jsx("span",{className:"text-blue-600",children:_(j.netToPay)})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[10px] text-slate-500 mt-2 border-t pt-2 border-slate-200",children:[u.jsxs("div",{children:["Conso: ",u.jsx("span",{className:"font-mono text-slate-700",children:y(j.type==="MT"?j.energyRecorded:j.consumptionGrid)})," kWh"]}),u.jsx("div",{children:j.type==="MT"?`P.Max: ${j.maxPower} kVA`:j.type==="BT_PV"?`PV: ${y(j.productionPv)}`:"Standard"})]})]},j.docId))})]})]})]}),p&&u.jsx("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl",children:p.msg})]})},uA=({onBack:t,userRole:e})=>{const[n,r]=Y.useState(1),[s,i]=Y.useState([]),[a,l]=Y.useState(null),[c,h]=Y.useState(!1),[p,g]=Y.useState(null),[v,b]=Y.useState(T(new Date)),[C,R]=Y.useState(!1),[F,S]=Y.useState({elecPrice:.291,offLoadFactor:.3});function T(L){L=new Date(Date.UTC(L.getFullYear(),L.getMonth(),L.getDate())),L.setUTCDate(L.getUTCDate()+4-(L.getUTCDay()||7));var H=new Date(Date.UTC(L.getUTCFullYear(),0,1)),D=Math.ceil(((L-H)/864e5+1)/7);return`${L.getUTCFullYear()}-W${D}`}Y.useEffect(()=>{const L=Jl(ln("air_logs"),w_("id","desc")),H=rf(L,D=>{i(D.docs.map(U=>({...U.data(),docId:U.id})))});return()=>H()},[]);const A=[{id:1,name:"Compresseur 1",serial:"CAI 827281",model:"Ceccato CSB 30",power:22},{id:2,name:"Compresseur 2",serial:"CAI 808264",model:"Ceccato CSB 30",power:22}],V={oilFilter:2e3,airFilter:2e3,separator:2e3,oil:2e3,general:500},M={oilFilter:"Filtre  Huile",airFilter:"Filtre  Air",separator:"Sparateur",oil:"Huile",general:"Inspection"},$={oilFilter:zN,airFilter:xd,separator:fg,oil:fg,general:UN},[_,y]=Y.useState({1:{lastRun:19960,newRun:"",lastLoad:10500,newLoad:"",description:"",lastMaint:{oilFilter:19960,airFilter:19960,separator:19960,oil:19960,general:19960}},2:{lastRun:18500,newRun:"",lastLoad:9200,newLoad:"",description:"",lastMaint:{oilFilter:18500,airFilter:18500,separator:18500,oil:18500,general:18500}}});Y.useEffect(()=>{const L=s.filter(H=>H.compName===A.find(D=>D.id===n).name);if(L.length>0){const H=L.find(W=>W.type==="WEEKLY_REPORT"),D=H?H.newRun:_[n].lastRun,U=H?H.newLoad:_[n].lastLoad,J={..._[n].lastMaint};Object.keys(V).forEach(W=>{const le=L.find(j=>j.type==="MAINTENANCE"&&j.maintType===M[W]);le&&(J[W]=le.indexDone)}),y(W=>({...W,[n]:{...W[n],lastRun:D,lastLoad:U,lastMaint:J}}))}},[n,s]);const E=(L,H)=>y(D=>({...D,[n]:{...D[n],[L]:H}})),I=()=>{const L=_[n],H=A.find(ee=>ee.id===n),D=Math.max(0,(parseFloat(L.newRun)||0)-(parseFloat(L.lastRun)||0)),U=Math.max(0,(parseFloat(L.newLoad)||0)-(parseFloat(L.lastLoad)||0)),J=D>0?U/D*100:0,W=D/47.5*100,le=U*H.power+(D-U)*H.power*F.offLoadFactor,j=parseFloat(L.newRun)||parseFloat(L.lastRun)||0,ie={};return Object.keys(V).forEach(ee=>{const Ue=(L.lastMaint[ee]||0)+V[ee]-j;ie[ee]={remaining:Ue}}),{runDelta:D,loadDelta:U,loadRate:J,utilRate:W,energyKwh:le,costHT:le*F.elecPrice,maintStatus:ie}},w=async()=>{const L=I(),H=_[n];if(!H.newRun){g("Index manquant");return}const D={id:Date.now(),type:"WEEKLY_REPORT",week:v,compName:A.find(U=>U.id===n).name,...H,...L};await _l(ln("air_logs"),D),y(U=>({...U,[n]:{...U[n],lastRun:H.newRun,newRun:"",lastLoad:H.newLoad,newLoad:"",description:""}})),g("Enregistr"),setTimeout(()=>g(null),3e3)},N=(L,H)=>{const D=parseFloat(_[n].newRun)||parseFloat(_[n].lastRun),U={..._[n].lastMaint,[L]:D};y(W=>({...W,[n]:{...W[n],lastMaint:U}}));const J={id:Date.now(),type:"MAINTENANCE",date:new Date().toLocaleDateString(),compName:A.find(W=>W.id===n).name,maintType:M[L],indexDone:D,details:H};_l(ln("air_logs"),J),l(null),g("Maintenance valide")},x=I(),se=(L,H)=>L<=0?"text-red-600 font-bold":L<H*.2?"text-amber-500 font-bold":"text-emerald-600",pe=(L,H)=>L<=0?"bg-red-600":L<H*.2?"bg-amber-500":"bg-emerald-500";return u.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-2 md:mb-0",children:[u.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:u.jsx(eu,{size:20})}),u.jsx(jo,{size:"h-8"}),u.jsx("div",{className:"w-px h-8 bg-slate-200"}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-lg font-black text-blue-900 flex items-center",children:[u.jsx(xd,{className:"mr-2",size:20})," Air Comprim"]}),u.jsxs("div",{className:"flex items-center text-xs text-slate-500 mt-1",children:[u.jsx(S_,{size:10,className:"mr-1"})," Site Mgrine",u.jsx("span",{className:"mx-2",children:""}),u.jsx(vd,{size:10,className:"mr-1"})," Semaine ",v.split("-W")[1]," ",v.split("-W")[0]]})]})]}),u.jsx("div",{className:"flex gap-4",children:u.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[u.jsx(xl,{size:16,className:"mr-2"})," Guide & Consignes"]})})]})}),c&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>h(!1),children:u.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 shadow-2xl relative",onClick:L=>L.stopPropagation(),children:[u.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:""}),u.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center text-lg",children:[u.jsx(xl,{className:"mr-2 text-blue-900"})," Instructions ES3000"]}),u.jsxs("div",{className:"space-y-6 overflow-y-auto max-h-[60vh]",children:[u.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[u.jsxs("h4",{className:"font-bold text-blue-900 mb-3 flex items-center",children:[u.jsx(La,{size:16,className:"mr-2"})," Navigation Contrleur"]}),u.jsxs("ol",{className:"text-sm text-slate-600 space-y-3 list-decimal pl-5",children:[u.jsxs("li",{children:["L'cran affiche par dfaut la ",u.jsx("strong",{children:"Pression de sortie"}),"."]}),u.jsxs("li",{children:["Appuyez sur la flche ",u.jsx("strong",{children:"DROITE"})," (Tab) pour faire dfiler le menu principal."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Heures Totales :"})," Cherchez le symbole  (Horloge pleine). Notez la valeur."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Heures en Charge :"})," Continuez de dfiler jusqu'au symbole  (Piston/clair). C'est le temps de travail effectif."]}),u.jsxs("li",{children:["Pour revenir, appuyez sur ",u.jsx("strong",{children:"C (Cancel)"})," ou attendez 30s."]})]})]}),u.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[u.jsxs("h4",{className:"font-bold text-orange-900 mb-3 flex items-center",children:[u.jsx(dg,{size:16,className:"mr-2"})," Bonnes Pratiques & Scurit"]}),u.jsxs("ul",{className:"text-sm text-slate-700 space-y-2 list-disc pl-5",children:[u.jsx("li",{children:"Vrifier le niveau d'huile visuel avant chaque dmarrage ou relev (hublot latral)."}),u.jsx("li",{children:"couter s'il y a des bruits anormaux ou des fuites d'air audibles lors de la mise en charge."}),u.jsx("li",{children:"Purger le rservoir d'air quotidiennement si la purge auto est dfaillante."}),u.jsx("li",{children:"Ne jamais ouvrir le capot machine en marche."})]})]})]})]})}),u.jsxs("main",{className:"p-8 max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[u.jsx("div",{className:"flex gap-2",children:A.map(L=>u.jsxs("button",{onClick:()=>r(L.id),className:`flex-1 p-4 rounded-xl border text-left transition-all ${n===L.id?"bg-white border-blue-900 shadow-md ring-1 ring-blue-900":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[u.jsx("div",{className:"font-bold text-slate-700",children:L.name}),u.jsxs("div",{className:"text-xs text-slate-400",children:[L.model," - ",L.serial]})]},L.id))}),u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[u.jsxs("h2",{className:"font-bold flex items-center text-slate-800",children:[u.jsx(ZN,{className:"mr-2 text-blue-900"})," Saisie Relev"]}),u.jsxs("div",{className:"flex items-center text-sm bg-slate-100 px-3 py-1 rounded-lg",children:[u.jsx("span",{className:"font-bold text-slate-500 mr-2",children:"Semaine :"}),u.jsx("input",{type:"week",value:v,onChange:L=>b(L.target.value),className:"bg-transparent font-bold text-slate-800 outline-none cursor-pointer"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Heures Marche"}),e==="ADMIN"&&u.jsx("button",{onClick:()=>R(!C),className:"text-[10px] text-blue-900 hover:underline",children:"Modifier Prcdent"})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),u.jsx("input",{type:"number",readOnly:!C,className:`w-full text-xs bg-transparent font-mono ${C?"border rounded bg-white p-1":""}`,value:_[n].lastRun||"",onChange:L=>E("lastRun",L.target.value)})]}),u.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:_[n].newRun||"",onChange:L=>E("newRun",L.target.value)})]}),u.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block uppercase",children:"Heures Charge"}),u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),u.jsx("input",{type:"number",readOnly:!C,className:`w-full text-xs bg-transparent font-mono ${C?"border rounded bg-white p-1":""}`,value:_[n].lastLoad||"",onChange:L=>E("lastLoad",L.target.value)})]}),u.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:_[n].newLoad||"",onChange:L=>E("newLoad",L.target.value)})]})]}),u.jsx("textarea",{className:"w-full border p-3 rounded-lg text-sm mb-2 focus:border-blue-900 outline-none",rows:"3",placeholder:"Note / Observation sur l'tat du compresseur...",value:_[n].description,onChange:L=>E("description",L.target.value)})]})]}),u.jsx("div",{className:"lg:col-span-5 space-y-6",children:u.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden",children:[u.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center border-b pb-2",children:[u.jsx(La,{className:"mr-2 text-blue-900"})," Analyse Performance"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[u.jsxs("div",{className:"bg-emerald-50 p-3 rounded-xl border border-emerald-100",children:[u.jsx("div",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-1",children:"Taux Charge"}),u.jsxs("div",{className:"font-black text-2xl text-emerald-800",children:[x.loadRate.toFixed(1),"%"]}),u.jsx("div",{className:"w-full bg-emerald-200 h-1.5 rounded-full mt-2 overflow-hidden",children:u.jsx("div",{className:"bg-emerald-600 h-full rounded-full transition-all duration-500",style:{width:`${x.loadRate}%`}})})]}),u.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100",children:[u.jsx("div",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-wider mb-1",children:"Taux Utilisation"}),u.jsxs("div",{className:"font-black text-2xl text-blue-800",children:[x.utilRate.toFixed(1),"%"]}),u.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"Base hebdo 47.5h"})]})]}),u.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg border border-slate-200 mb-6",children:[u.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Cot lec. Estim"}),u.jsxs("span",{className:"font-mono font-black text-slate-800 text-lg",children:[x.costHT.toFixed(0)," ",u.jsx("span",{className:"text-xs",children:"DT"})]})]}),u.jsxs("button",{onClick:w,className:"w-full bg-blue-900 text-white py-3 rounded-xl font-bold hover:bg-blue-800 shadow-lg transition-all flex items-center justify-center",children:[u.jsx(wl,{size:18,className:"mr-2"})," Valider Relev"]})]})}),u.jsx("div",{className:"lg:col-span-12",children:u.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[u.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center",children:[u.jsx(nc,{className:"mr-2 text-red-600"})," Tableau de Maintenance"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4",children:Object.keys(V).map(L=>{const H=$[L],D=x.maintStatus[L].remaining,U=V[L],J=D<U*.2;return u.jsxs("div",{className:`flex flex-col p-4 border rounded-xl hover:shadow-lg transition-all relative overflow-hidden group ${J?"bg-red-50 border-red-200":"bg-slate-50"}`,children:[u.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:u.jsx(H,{size:40})}),u.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:M[L]}),u.jsxs("div",{className:`text-xl font-black mb-2 ${se(D,U)}`,children:[D," h"]}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mb-2 overflow-hidden",children:u.jsx("div",{className:`h-full ${pe(D,U)}`,style:{width:`${Math.min(100,D/U*100)}%`}})}),J&&u.jsxs("div",{className:"text-[10px] text-red-600 font-bold mb-2 flex items-center",children:[u.jsx(dg,{size:10,className:"mr-1"})," Planifier"]}),u.jsx("button",{onClick:()=>l(L),className:"mt-auto w-full py-2 bg-white border border-slate-200 rounded text-xs font-bold hover:bg-slate-800 hover:text-white transition-colors",children:"Faire Maint."})]},L)})})]})}),u.jsx("div",{className:"lg:col-span-12",children:u.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center tracking-wider",children:[u.jsx(BN,{size:16,className:"mr-2"})," Historique Dtaill"]}),u.jsxs("div",{className:"overflow-x-auto",children:[u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold uppercase text-xs",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 rounded-l-lg",children:"Date / Semaine"}),u.jsx("th",{className:"p-3",children:"Type"}),u.jsx("th",{className:"p-3",children:"Dtails / Index"}),u.jsx("th",{className:"p-3",children:"Technicien"}),u.jsx("th",{className:"p-3 text-right rounded-r-lg",children:"Cot / Statut"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:s.filter(L=>L.compName===A.find(H=>H.id===n).name).sort((L,H)=>H.id-L.id).map(L=>{var H,D,U;return u.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[u.jsx("td",{className:"p-3 font-medium text-slate-700",children:L.type==="MAINTENANCE"?L.date:`Semaine ${((H=L.week)==null?void 0:H.split("-W")[1])||"?"}`}),u.jsx("td",{className:"p-3",children:L.type==="MAINTENANCE"?u.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-amber-100 text-amber-700 text-xs font-bold",children:[u.jsx(nc,{size:10,className:"mr-1"})," ",L.maintType]}):u.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-700 text-xs font-bold",children:[u.jsx(La,{size:10,className:"mr-1"})," Relev"]})}),u.jsx("td",{className:"p-3 text-slate-600 text-xs",children:L.type==="MAINTENANCE"?`Effectu  ${L.indexDone} h`:`Marche: ${L.newRun}h | Charge: ${L.newLoad}h`}),u.jsx("td",{className:"p-3 text-slate-500 text-xs font-mono",children:L.type==="MAINTENANCE"?(D=L.details)==null?void 0:D.tech:"-"}),u.jsx("td",{className:"p-3 text-right font-bold",children:L.type==="MAINTENANCE"?u.jsx("span",{className:"text-emerald-600",children:"OK"}):u.jsxs("span",{className:"text-slate-700",children:[(U=L.costHT)==null?void 0:U.toFixed(0)," DT"]})})]},L.docId)})})]}),s.length===0&&u.jsx("div",{className:"text-center p-8 text-slate-400 italic",children:"Aucun historique disponible"})]})]})})]}),a&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm shadow-2xl transform transition-all scale-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-100 pb-3",children:[u.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[u.jsx(nc,{className:"mr-2 text-red-600",size:20})," Validation Maint."]}),u.jsx("button",{onClick:()=>l(null),className:"text-slate-400 hover:text-slate-600",children:u.jsx(vo,{size:20})})]}),u.jsxs("form",{onSubmit:L=>{L.preventDefault();const H=new FormData(L.target);N(a,{date:H.get("date"),tech:H.get("tech"),ref:H.get("ref"),notes:H.get("notes")})},children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Date Intervention *"}),u.jsx("input",{name:"date",type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Intervenant / Technicien *"}),u.jsx("input",{name:"tech",placeholder:"Nom du technicien",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rf. Fiche Intervention *"}),u.jsx("input",{name:"ref",placeholder:"ex: FI-2024-001",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none font-mono"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Notes / Observations"}),u.jsx("textarea",{name:"notes",placeholder:"Dtails supplmentaires...",className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none",rows:"2"})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[u.jsx("button",{type:"button",onClick:()=>l(null),className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-50 rounded-lg transition-colors",children:"Annuler"}),u.jsxs("button",{type:"submit",className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold shadow-lg transition-all flex items-center",children:[u.jsx(FN,{size:18,className:"mr-2"})," Valider"]})]})]})]})}),p&&u.jsxs("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center",children:[u.jsx(wl,{className:"mr-2"})," ",p]})]})},cA=({onBack:t})=>{const[e,n]=Y.useState([]),[r,s]=Y.useState({username:"",password:"",role:"EQUIPE_ENERGIE"}),[i,a]=Y.useState(!1),[l,c]=Y.useState(null);Y.useEffect(()=>{const g=Jl(ln("users")),v=rf(g,b=>{n(b.docs.map(C=>({...C.data(),id:C.id})))});return()=>v()},[]);const h=async g=>{g.preventDefault(),!(!r.username||!r.password)&&(a(!0),await _l(ln("users"),r),s({username:"",password:"",role:"EQUIPE_ENERGIE"}),a(!1))},p=async g=>{if(l===g)try{await VN(Hh(ln("users"),g)),c(null)}catch(v){console.error("Erreur suppression:",v),alert("Erreur lors de la suppression. Vrifiez vos droits.")}else c(g),setTimeout(()=>c(null),3e3)};return u.jsxs("div",{className:"min-h-screen bg-slate-100 p-8",children:[u.jsx("header",{className:"max-w-4xl mx-auto mb-8 flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("button",{onClick:t,className:"mr-4 p-2 bg-white rounded-full shadow hover:bg-slate-50",children:u.jsx(eu,{size:20})}),u.jsx(jo,{size:"h-8"}),u.jsx("h1",{className:"text-2xl font-black text-slate-800 ml-4",children:"Administration"})]})}),u.jsxs("main",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 h-fit",children:[u.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-blue-900",children:[u.jsx(QN,{className:"mr-2"})," Ajouter Utilisateur"]}),u.jsxs("form",{onSubmit:h,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Nom d'utilisateur"}),u.jsx("input",{type:"text",value:r.username,onChange:g=>s({...r,username:g.target.value}),className:"w-full border p-2 rounded",placeholder:"ex: Maintenance"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Mot de passe"}),u.jsx("input",{type:"text",value:r.password,onChange:g=>s({...r,password:g.target.value}),className:"w-full border p-2 rounded",placeholder:"******"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rle"}),u.jsxs("select",{value:r.role,onChange:g=>s({...r,role:g.target.value}),className:"w-full border p-2 rounded bg-white font-bold text-slate-700",children:[u.jsx("option",{value:"ADMIN",children:"Administrateur (Accs Total)"}),u.jsx("option",{value:"EQUIPE_ENERGIE",children:"quipe nergie (Saisie)"}),u.jsx("option",{value:"DIRECTION",children:"Direction (Visuel Uniquement)"})]})]}),u.jsx("button",{disabled:i,className:"w-full bg-blue-900 text-white py-2 rounded font-bold hover:bg-blue-800",children:i?"...":"Ajouter"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[u.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-slate-700",children:[u.jsx(sA,{className:"mr-2"})," Liste Utilisateurs (",e.length,")"]}),u.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:e.map(g=>u.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg hover:bg-slate-50 group",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-bold",children:g.username}),u.jsx("div",{className:`text-[10px] px-2 py-0.5 rounded w-fit uppercase font-bold
                    ${g.role==="ADMIN"?"bg-red-100 text-red-700":g.role==="DIRECTION"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:g.role==="ADMIN"?"Admin":g.role==="DIRECTION"?"Direction":"quipe"})]}),u.jsx("button",{onClick:()=>p(g.id),className:`p-2 rounded transition-all flex items-center ${l===g.id?"bg-red-600 text-white w-24 justify-center text-xs font-bold":"text-slate-300 hover:text-red-600"}`,children:l===g.id?"Confirmer ?":u.jsx(eA,{size:16})})]},g.id))})]})]})]})},dA=({onBack:t,userRole:e})=>{const[n,r]=Y.useState("MEGRINE"),[s,i]=Y.useState({}),[a,l]=Y.useState(!1),[c,h]=Y.useState(!1),[p,g]=Y.useState(null),[v,b]=Y.useState({reductionRate:5,greenRate:2}),C=[{year:2018,temp:19.4},{year:2019,temp:19.6},{year:2020,temp:19.9},{year:2021,temp:20.3},{year:2022,temp:20.8},{year:2023,temp:21.2},{year:2024,temp:21.5},{year:2025,temp:21.8}],R=[2018,2019,2020,2021,2022,2023,2024,2025],F=2023;Y.useEffect(()=>{A_(ln("site_history")).then(w=>{const N={};w.forEach(x=>{const[se,pe]=x.id.split("_");N[se]||(N[se]={}),N[se][pe]=x.data()}),i(x=>({...x,...N}))})},[]);const S=w=>{if(!s[w]){const N={};R.forEach(x=>{w==="LAC"?N[x]={grid:Array(12).fill(""),pv:Array(12).fill(""),export:Array(12).fill("")}:N[x]={months:Array(12).fill("")}}),i(x=>({...x,[w]:N}))}},T={MEGRINE:{name:"Mgrine",area:32500,covered:3e4,open:2500,glazed:365,details:"Showroom 1000m  Atelier FIAT 10000m  Atelier IVECO 9000m  ITALCAR Gros 10000m",energyMix:[{name:"lectricit",value:97,color:"bg-blue-900"},{name:"Gaz",value:3,color:"bg-orange-500"}],elecUsage:[{name:"Clim/Chauffage",value:40,kpi:"kWh/m",significant:!0},{name:"clairage",value:27,kpi:"kWh/m",significant:!0},{name:"Air Comprim",value:17,kpi:"kWh/Nm",significant:!0,subDetails:[{n:"Equipements",v:"40%"},{n:"Rcup. Huile",v:"30%"},{n:"Gonflage",v:"30%"}]},{name:"Informatique",value:8,kpi:"-",significant:!1},{name:"Services",value:5,kpi:"-",significant:!1},{name:"Gaz (Primaire)",value:3,kpi:"kWh/Vhicule",significant:!1}]},ELKHADHRA:{name:"El Khadhra",area:9500,covered:7e3,open:2500,glazed:40,details:"Rception 1000m  Atelier FIAT 3000m  ITALCAR Gros 3000m",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Clim/Chauffage",value:61,kpi:"kWh/m",significant:!0},{name:"clairage",value:23,kpi:"kWh/m",significant:!0},{name:"Air Comprim",value:6,kpi:"kWh/Nm",significant:!1},{name:"Informatique",value:5,kpi:"-",significant:!1},{name:"Services",value:5,kpi:"-",significant:!1}]},NAASSEN:{name:"Naassen",area:32500,covered:1820,open:30680,glazed:0,details:"Admin 920m  Atelier 900m  Parc Neuf 30680m",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"clairage (80% Ext)",value:78,kpi:"kWh/m",significant:!0},{name:"Clim/Chauffage",value:14,kpi:"kWh/m",significant:!1},{name:"Air Comprim",value:5,kpi:"kWh/Nm",significant:!1},{name:"Services",value:2,kpi:"-",significant:!1},{name:"Informatique",value:1,kpi:"-",significant:!1}]},LAC:{name:"Lac",area:2050,covered:850,open:1200,glazed:116,details:"Showroom 850m  Espace Ouvert 1200m",energyMix:[],elecUsage:[{name:"clairage (60% Int)",value:58,kpi:"kWh/m",significant:!0},{name:"Clim/Chauffage",value:36,kpi:"kWh/m",significant:!0},{name:"Informatique",value:3,kpi:"-",significant:!1},{name:"Services",value:3,kpi:"-",significant:!1}]},CARTHAGE:{name:"Rue de Carthage",area:1200,covered:1200,open:0,glazed:50,details:"Sige Social  Bureaux",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Clim/Chauffage",value:65,kpi:"kWh/m",significant:!0},{name:"clairage",value:25,kpi:"kWh/m",significant:!0},{name:"Informatique",value:10,kpi:"-",significant:!0}]},AZUR:{name:"Azur City",area:800,covered:800,open:0,glazed:80,details:"Showroom Commercial",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Eclairage",value:60,kpi:"kWh/m",significant:!0},{name:"Clim",value:35,kpi:"kWh/m",significant:!0},{name:"Services",value:5,kpi:"-",significant:!1}]}},A=T[n],V=(w,N,x="grid")=>{var pe;const se=(pe=s[w])==null?void 0:pe[N];return se?w==="LAC"?se[x]||Array(12).fill(""):se.months||Array(12).fill(""):Array(12).fill("")},M=(w,N,x,se="months")=>{i(pe=>{const L=pe[n],H=L[w]||{};let D;if(n==="LAC"){const U=H[se]?[...H[se]]:Array(12).fill("");U[N]=x,D={...H,[se]:U}}else{const U=H.months?[...H.months]:Array(12).fill("");U[N]=x,D={...H,months:U}}return{...pe,[n]:{...L,[w]:D}}})},$=async()=>{const w=n;if(s[w]){try{for(const N of Object.keys(s[w]))await jN(Hh(db,"artifacts",appId,"public","data","site_history",`${w}_${N}`),s[w][N]);g("Historique sauvegard"),l(!1)}catch(N){console.error(N),g("Erreur")}setTimeout(()=>g(null),3e3)}},_=Y.useMemo(()=>{if(n!=="LAC")return A.energyMix;const w=new Date().getFullYear()-1,N=V("LAC",w,"grid").reduce((D,U)=>D+(parseFloat(U)||0),0),x=V("LAC",w,"pv").reduce((D,U)=>D+(parseFloat(U)||0),0),se=V("LAC",w,"export").reduce((D,U)=>D+(parseFloat(U)||0),0),pe=Math.max(0,x-se),L=N+pe;if(L===0)return[{name:"Rseau STEG",value:100,color:"bg-blue-900"}];const H=Math.round(pe/L*100);return[{name:"Rseau STEG",value:100-H,color:"bg-blue-900"},{name:"Solaire PV (Autocons.)",value:H,color:"bg-orange-500"}]},[n,s]),y=()=>{const x=V(n,2025,"grid")[10],se=V(n,F,"grid")[10],pe=parseFloat(x)||0,L=parseFloat(se)||0,H=L>0?(pe-L)/L*100:0,D=H<=0;return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6 flex flex-col md:flex-row items-center justify-between animate-in slide-in-from-top-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-3 rounded-full ${D?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:D?u.jsx(vg,{size:24}):u.jsx(tA,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Performance Dernire Clture"}),u.jsxs("div",{className:"font-black text-slate-800 text-lg",children:["Novembre ",2025," ",u.jsx("span",{className:"text-slate-400 font-normal",children:"vs"})," Nov. ",F]})]})]}),u.jsxs("div",{className:"flex gap-8 mt-4 md:mt-0 text-center md:text-right",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Rfrence"}),u.jsxs("div",{className:"font-mono font-bold text-slate-600",children:[L.toLocaleString()," kWh"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Ralis"}),u.jsxs("div",{className:"font-mono font-black text-slate-800",children:[pe.toLocaleString()," kWh"]})]}),u.jsxs("div",{className:`flex items-center font-black text-xl ${D?"text-emerald-600":"text-red-600"}`,children:[H>0?"+":"",H.toFixed(1),"%"]})]})]})},E=()=>{const w=R.map(L=>V(n,L,n==="LAC"?"grid":"months").reduce((D,U)=>D+(parseFloat(U)||0),0)),N=w[w.length-1]||5e4,x=[2026,2027,2028,2029,2030],se=x.map((L,H)=>{const D=Math.pow(1-v.reductionRate/100,H+1);return N*D}),pe=Math.max(...w,...se)*1.1;return u.jsxs("div",{className:"bg-slate-900 rounded-xl shadow-lg p-6 text-white overflow-hidden relative",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white uppercase tracking-wider text-xs mb-1",children:"Trajectoire & Vision"}),u.jsx("p",{className:"text-slate-400 text-xs",children:"Historique 2018-2025 et Projection 2030"})]}),u.jsxs("div",{className:"flex gap-4 text-right",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-slate-400 uppercase",children:"Obj. Rduction"}),u.jsxs("div",{className:"font-bold text-emerald-400",children:["-",v.reductionRate,"% / an"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] text-slate-400 uppercase",children:"Part Verte (Vision)"}),u.jsxs("div",{className:"font-bold text-emerald-400",children:["+",v.greenRate,"% / an"]})]})]})]}),u.jsxs("div",{className:"flex items-end gap-1 h-48 relative z-10",children:[w.map((L,H)=>u.jsxs("div",{className:"flex-1 flex flex-col justify-end group",children:[u.jsx("div",{className:"w-full bg-blue-600/80 hover:bg-blue-500 rounded-t relative transition-all",style:{height:`${L/pe*100}%`},children:u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 text-[9px] opacity-0 group-hover:opacity-100 bg-white text-slate-900 px-1 rounded font-bold",children:[Math.round(L/1e3),"k"]})}),u.jsx("div",{className:"text-[9px] text-slate-500 text-center mt-1 border-t border-slate-700 pt-1",children:R[H]})]},H)),se.map((L,H)=>u.jsxs("div",{className:"flex-1 flex flex-col justify-end group",children:[u.jsx("div",{className:"w-full bg-emerald-500/30 hover:bg-emerald-500/60 border-t-2 border-emerald-500 border-dashed rounded-t relative transition-all",style:{height:`${L/pe*100}%`},children:u.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-emerald-500",style:{height:`${Math.min(100,(H+1)*v.greenRate)}%`}})}),u.jsx("div",{className:"text-[9px] text-emerald-500/70 text-center mt-1 border-t border-slate-700 pt-1 font-bold",children:x[H]})]},H))]}),e==="ADMIN"&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700 flex gap-4 text-xs",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-slate-400",children:"Vision Rduction:"}),u.jsx("input",{type:"number",value:v.reductionRate,onChange:L=>b({...v,reductionRate:L.target.value}),className:"bg-slate-800 border border-slate-600 rounded w-12 px-1 text-center text-white font-bold"}),u.jsx("span",{className:"text-slate-500",children:"%"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-slate-400",children:"Vision Verte:"}),u.jsx("input",{type:"number",value:v.greenRate,onChange:L=>b({...v,greenRate:L.target.value}),className:"bg-slate-800 border border-slate-600 rounded w-12 px-1 text-center text-white font-bold"}),u.jsx("span",{className:"text-slate-500",children:"%"})]})]})]})},I=()=>{const pe=C.map((L,H)=>{const D=H/(C.length-1)*300,U=100-(L.temp-18)/(23-18)*100;return`${D},${U}`}).join(" ");return u.jsx("div",{className:"relative h-32 w-full",children:u.jsxs("svg",{viewBox:"0 0 300 100",className:"w-full h-full overflow-visible",children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"tempGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#f97316",stopOpacity:"0.4"}),u.jsx("stop",{offset:"100%",stopColor:"#f97316",stopOpacity:"0"})]})}),u.jsx("path",{d:`M0,100 ${pe} L300,100 Z`,fill:"url(#tempGradient)"}),u.jsx("polyline",{fill:"none",stroke:"#f97316",strokeWidth:"3",points:pe,strokeLinecap:"round",strokeLinejoin:"round"})]})})};return u.jsxs("div",{className:"bg-slate-50 min-h-screen pb-20 relative font-sans text-slate-600",children:[u.jsx("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-40 border-b border-slate-200",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:t,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors text-slate-600",children:u.jsx(eu,{size:20})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-bold text-xl text-slate-800 tracking-tight",children:"DASHBOARD NERGIE"}),u.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Vision Globale & Performance"})]})]}),u.jsx("div",{className:"flex bg-white rounded-full shadow-sm border border-slate-200 p-1.5 gap-1 mt-4 md:mt-0 overflow-x-auto max-w-full",children:Object.keys(T).map(w=>u.jsxs("button",{onClick:()=>r(w),className:`px-4 py-2 rounded-full text-xs font-bold transition-all flex items-center whitespace-nowrap
              ${n===w?"bg-blue-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[n===w&&u.jsx(wl,{size:12,className:"mr-2"}),T[w].name]},w))})]})}),a&&u.jsx("div",{className:"fixed inset-0 bg-slate-900/40 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-5xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[u.jsx("div",{children:u.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center",children:[u.jsx(_d,{className:"mr-2 text-blue-900"})," Saisie Historique - ",A.name]})}),u.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-200 rounded-full text-slate-500",children:u.jsx(vo,{size:20})})]}),u.jsx("div",{className:"overflow-y-auto flex-1 p-6 space-y-8",children:R.map(w=>u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-bold text-slate-700 text-sm",children:w}),u.jsx("div",{className:"h-px bg-slate-100 flex-1"})]}),n==="LAC"?u.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-slate-100",children:[u.jsx(va,{label:"Conso. Rseau",color:"text-slate-600",data:V("LAC",w,"grid"),onChange:(N,x)=>M(w,N,x,"grid")}),u.jsx(va,{label:"Prod. PV",color:"text-orange-500",data:V("LAC",w,"pv"),onChange:(N,x)=>M(w,N,x,"pv")}),u.jsx(va,{label:"Export STEG",color:"text-blue-500",data:V("LAC",w,"export"),onChange:(N,x)=>M(w,N,x,"export")})]}):u.jsx("div",{className:"pl-4 border-l-2 border-slate-100",children:u.jsx(va,{label:"Consommation",color:"text-slate-600",data:V(n,w,"months"),onChange:(N,x)=>M(w,N,x,"months")})})]},w))}),u.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end",children:u.jsxs("button",{onClick:$,className:"bg-blue-900 hover:bg-blue-800 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition-all flex items-center",children:[u.jsx(b_,{className:"mr-2",size:18})," Enregistrer"]})})]})}),c&&u.jsx("div",{className:"fixed inset-0 bg-white z-[60] overflow-auto p-8",children:u.jsxs("div",{className:"max-w-[21cm] mx-auto border border-slate-200 shadow-2xl p-12 min-h-[29.7cm] bg-white relative",children:[u.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 no-print bg-slate-100 p-2 rounded-full",children:u.jsx(vo,{})}),u.jsxs("div",{className:"flex justify-between items-center mb-8 border-b-2 border-blue-900 pb-4",children:[u.jsx(jo,{size:"h-12"}),u.jsxs("div",{className:"text-right",children:[u.jsx("h1",{className:"text-2xl font-black text-blue-900 uppercase",children:"Rapport Mensuel nergie"}),u.jsxs("p",{className:"text-slate-500 text-sm",children:["Site : ",A.name,"  Dcembre 2025"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[u.jsxs("div",{className:"bg-slate-50 p-4 border border-slate-200",children:[u.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Synthse Consommation"}),u.jsxs("div",{className:"text-3xl font-black text-slate-800",children:["45,230 ",u.jsx("span",{className:"text-sm font-normal text-slate-500",children:"kWh"})]}),u.jsx("div",{className:"text-sm text-emerald-600 font-bold mt-1",children:"-4.2% vs N-1"})]}),u.jsxs("div",{className:"bg-slate-50 p-4 border border-slate-200",children:[u.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Indicateurs Cls"}),u.jsxs("div",{className:"text-sm space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Ratio Surf."}),u.jsx("strong",{children:"54 kWh/m"})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Cot Est."}),u.jsx("strong",{children:"12,400 DT"})]})]})]})]}),u.jsx("div",{className:"border rounded p-4 mb-8 h-64 flex items-center justify-center bg-slate-50 text-slate-400",children:"[Graphique Evolution Annuelle - Espace Rserv Impression]"}),u.jsx("div",{className:"text-center text-slate-400 text-xs mt-auto pt-12",children:"Gnr automatiquement par SmartEnergyManager - ITALCAR SA"})]})}),u.jsxs("main",{className:"max-w-7xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[u.jsx(y,{}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex flex-col justify-center col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-900 border-b border-slate-50 pb-2",children:[u.jsx(El,{size:18}),u.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Mix nergtique & PV"})]}),u.jsxs("div",{className:"space-y-4",children:[(n==="LAC"?_:A.energyMix).map((w,N)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700 mb-1",children:[u.jsx("span",{children:w.name}),u.jsxs("span",{children:[w.value,"%"]})]}),u.jsx("div",{className:"w-full bg-slate-100 h-3 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full ${w.color}`,style:{width:`${w.value}%`}})})]},N)),n==="LAC"&&u.jsxs("div",{className:"flex justify-between items-center text-xs bg-orange-50 p-2 rounded border border-orange-100 text-orange-800",children:[u.jsx("span",{children:"Export vers STEG (Excdent)"}),u.jsx("span",{className:"font-bold",children:"12% de la Prod."})]})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex flex-col justify-center col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 text-red-600",children:[u.jsx(La,{size:20}),u.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Ratio Global 2024"})]}),u.jsxs("div",{className:"text-3xl font-black text-slate-800",children:[n==="MEGRINE"?"54.2":n==="LAC"?"128.4":"--",u.jsx("span",{className:"text-sm font-medium text-slate-400 ml-1",children:"kWh/m"})]}),u.jsxs("div",{className:"text-xs font-bold text-emerald-600 mt-1 flex items-center",children:[u.jsx(vg,{size:14,className:"mr-1"})," Objectif 2025 : -5%"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Surface Totale"}),u.jsxs("div",{className:"text-2xl font-black text-blue-900",children:[A.area.toLocaleString()," m"]}),u.jsxs("div",{className:"mt-2 space-y-1",children:[u.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500",children:[u.jsx("span",{children:"Couverte"}),u.jsx("b",{children:A.covered})]}),u.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500",children:[u.jsx("span",{children:"Vitre"}),u.jsx("b",{children:A.glazed})]})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Temp. Moyenne"}),u.jsx(I,{}),u.jsx("div",{className:"text-[10px] text-center text-slate-400 mt-1",children:"Tunis (Annuel)"})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"font-bold text-slate-700 uppercase tracking-wider text-xs flex items-center",children:[u.jsx(KN,{className:"mr-2"})," Rpartition (UES)"]}),A.elecUsage.some(w=>w.name.includes("Gaz"))&&u.jsx("span",{className:"text-[9px] bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Gaz inclus (Faible part)"})]}),u.jsx("div",{className:"space-y-4",children:A.elecUsage.map((w,N)=>u.jsxs("div",{className:"group",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:`text-sm ${w.significant?"font-bold text-slate-800":"text-slate-500"}`,children:w.name}),u.jsxs("span",{className:"font-bold text-slate-800",children:[w.value,"%"]})]}),u.jsx("div",{className:"w-full bg-slate-100 h-1.5 rounded-full overflow-hidden mb-1",children:u.jsx("div",{className:`h-full ${w.significant?"bg-blue-900":"bg-slate-300"}`,style:{width:`${w.value}%`}})}),w.subDetails&&u.jsx("div",{className:"flex gap-2 mt-1 ml-2",children:w.subDetails.map((x,se)=>u.jsxs("div",{className:"bg-slate-50 px-2 py-0.5 rounded border border-slate-100 text-[9px] text-slate-500",children:[x.n,": ",u.jsx("b",{children:x.v})]},se))})]},N))})]})]}),u.jsx(E,{})]}),u.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col gap-3 z-50",children:[e==="ADMIN"&&u.jsxs("button",{onClick:()=>{S(n),l(!0)},className:"bg-slate-800 hover:bg-slate-700 text-white p-4 rounded-full shadow-lg shadow-slate-400 transition-transform hover:scale-110 group relative",children:[u.jsx(_d,{size:20}),u.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-slate-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none",children:"Historique"})]}),u.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-900 hover:bg-blue-800 text-white p-4 rounded-full shadow-xl shadow-blue-300 transition-transform hover:scale-110 group relative",children:[u.jsx(YN,{size:24}),u.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-blue-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none",children:"Rapport Mensuel"})]})]}),p&&u.jsxs("div",{className:"fixed bottom-6 left-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center",children:[u.jsx(wl,{className:"mr-2"})," ",p]})]})},va=({label:t,color:e,data:n,onChange:r})=>u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[u.jsx("div",{className:`w-32 flex-shrink-0 text-[10px] font-bold uppercase ${e}`,children:t}),n.map((s,i)=>u.jsx("input",{type:"number",placeholder:["J","F","M","A","M","J","J","A","S","O","N","D"][i],className:"w-12 p-1 text-center text-xs border border-slate-200 rounded focus:border-blue-900 outline-none font-mono",value:s,onChange:a=>r(i,a.target.value)},i))]}),hA=({user:t,onNavigate:e,onLogout:n})=>{const r=l=>t.role==="ADMIN"?!0:t.role==="EQUIPE_ENERGIE"?["steg","air","sites"].includes(l):t.role==="DIRECTION"?l==="sites":!1,s=()=>{const l=new Date().getHours();return l<12?"Bonjour":l<18?"Bonne aprs-midi":"Bonsoir"},i=()=>{const l=["Pensez  vrifier les fuites d'air comprim chaque semaine.","Un cos  > 0.95 peut rduire la facture de 5%.","Scurit avant tout : Portez vos EPI lors des relevs.","teignez les lumires des zones inoccupes (Atelier Midi).","Nettoyez les filtres des compresseurs pour optimiser le rendement."];return l[Math.floor(Math.random()*l.length)]},[a]=Y.useState(i());return u.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[u.jsxs("div",{className:"z-10 w-full max-w-6xl flex justify-between items-center mb-12 bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx(jo,{size:"h-12"}),u.jsx("div",{className:"h-10 w-px bg-slate-200"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-black mb-0 tracking-tight text-blue-900",children:"PORTAIL NERGIE"}),u.jsxs("p",{className:"text-slate-400 text-sm",children:[s(),", ",u.jsx("span",{className:"text-slate-800 font-bold",children:t.username})]})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-2",children:[u.jsx(k_,{darkText:!0}),u.jsxs("div",{className:"bg-orange-50 text-orange-800 text-[10px] px-3 py-1 rounded-full font-bold border border-orange-100 flex items-center",children:[u.jsx($N,{size:12,className:"mr-2"})," ",a]})]})]}),u.jsxs("div",{className:"z-10 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl w-full",children:[u.jsxs("button",{disabled:!r("steg"),onClick:()=>e("steg"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("steg")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[u.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("steg")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:u.jsx(El,{size:32})}),u.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"nergie & Facturation"}),u.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Suivi des consommations STEG, Factures MT/BT, Analyse Cos  et dpassements de puissance."})]}),u.jsxs("button",{disabled:!r("air"),onClick:()=>e("air"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("air")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[u.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("air")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:u.jsx(xd,{size:32})}),u.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Air Comprim"}),u.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Relevs hebdomadaires des compresseurs, suivi des heures de charge et planning de maintenance."})]}),u.jsxs("button",{disabled:!r("sites"),onClick:()=>e("sites"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("sites")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[u.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("sites")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:u.jsx(HN,{size:32})}),u.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Tableau de Bord Sites"}),u.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Vision globale des sites ITALCAR : Surfaces, Mix nergtique et Trajectoire Carbone 2030."})]})]}),t.role==="ADMIN"&&u.jsx("div",{className:"z-10 mt-8 w-full max-w-6xl flex justify-end",children:u.jsxs("button",{onClick:()=>e("admin"),className:"text-slate-400 hover:text-blue-900 text-xs font-bold flex items-center transition-colors",children:[u.jsx(XN,{size:14,className:"mr-1"})," Administration"]})}),u.jsx("div",{className:"mt-12 text-center text-slate-400 text-xs font-medium uppercase tracking-widest",children:" 2024 ITALCAR SA  Dpartement Maintenance & Infrastructure"}),u.jsx("div",{className:"absolute top-6 right-6",children:u.jsx("button",{onClick:n,className:"bg-white hover:bg-red-50 text-slate-400 hover:text-red-600 p-2 rounded-full shadow-sm transition-colors border border-slate-100",children:u.jsx(WN,{size:18})})})]})},fA=()=>{const[t,e]=Y.useState(null),[n,r]=Y.useState("dashboard"),[s,i]=Y.useState(!1);Y.useEffect(()=>{(async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await jT(auth,__initial_auth_token):await RT(auth)}catch(h){console.error("Auth failed",h)}finally{i(!0)}})()},[]);const a=c=>{e(c),r("dashboard")},l=()=>{e(null),r("dashboard")};return s?t?u.jsxs(u.Fragment,{children:[n==="dashboard"&&u.jsx(hA,{user:t,onNavigate:r,onLogout:l}),n==="admin"&&u.jsx(cA,{onBack:()=>r("dashboard")}),n==="steg"&&u.jsx(lA,{onBack:()=>r("dashboard"),userRole:t.role}),n==="air"&&u.jsx(uA,{onBack:()=>r("dashboard"),userRole:t.role}),n==="sites"&&u.jsx(dA,{onBack:()=>r("dashboard"),userRole:t.role})]}):u.jsx(aA,{onLogin:a}):u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Connexion au Cloud..."})};rc.createRoot(document.getElementById("root")).render(u.jsx(mx.StrictMode,{children:u.jsx(fA,{})}));
