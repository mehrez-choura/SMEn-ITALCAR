(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function E1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _0={exports:{}},eu={},x0={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=Symbol.for("react.element"),T1=Symbol.for("react.portal"),I1=Symbol.for("react.fragment"),b1=Symbol.for("react.strict_mode"),N1=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),k1=Symbol.for("react.forward_ref"),C1=Symbol.for("react.suspense"),R1=Symbol.for("react.memo"),P1=Symbol.for("react.lazy"),Bp=Symbol.iterator;function j1(t){return t===null||typeof t!="object"?null:(t=Bp&&t[Bp]||t["@@iterator"],typeof t=="function"?t:null)}var w0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E0=Object.assign,T0={};function li(t,e,n){this.props=t,this.context=e,this.refs=T0,this.updater=n||w0}li.prototype.isReactComponent={};li.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};li.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I0(){}I0.prototype=li.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=T0,this.updater=n||w0}var ah=oh.prototype=new I0;ah.constructor=oh;E0(ah,li.prototype);ah.isPureReactComponent=!0;var $p=Array.isArray,b0=Object.prototype.hasOwnProperty,lh={current:null},N0={key:!0,ref:!0,__self:!0,__source:!0};function S0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)b0.call(e,r)&&!N0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Lo,type:t,key:i,ref:o,props:s,_owner:lh.current}}function D1(t,e){return{$$typeof:Lo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lo}function V1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qp=/\/+/g;function Yu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V1(""+t.key):e.toString(36)}function Fa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lo:case T1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Yu(o,0):r,$p(s)?(n="",t!=null&&(n=t.replace(qp,"$&/")+"/"),Fa(s,e,n,"",function(h){return h})):s!=null&&(uh(s)&&(s=D1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$p(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Yu(i,u);o+=Fa(i,e,n,c,s)}else if(c=j1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Yu(i,u++),o+=Fa(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function va(t,e,n){if(t==null)return t;var r=[],s=0;return Fa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function M1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Ua={transition:null},L1={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Ua,ReactCurrentOwner:lh};function A0(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:va,forEach:function(t,e,n){va(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return va(t,function(){e++}),e},toArray:function(t){return va(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=li;ue.Fragment=I1;ue.Profiler=N1;ue.PureComponent=oh;ue.StrictMode=b1;ue.Suspense=C1;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L1;ue.act=A0;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=E0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=lh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)b0.call(e,c)&&!N0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Lo,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:A1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S1,_context:t},t.Consumer=t};ue.createElement=S0;ue.createFactory=function(t){var e=S0.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:k1,render:t}};ue.isValidElement=uh;ue.lazy=function(t){return{$$typeof:P1,_payload:{_status:-1,_result:t},_init:M1}};ue.memo=function(t,e){return{$$typeof:R1,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Ua.transition;Ua.transition={};try{t()}finally{Ua.transition=e}};ue.unstable_act=A0;ue.useCallback=function(t,e){return _t.current.useCallback(t,e)};ue.useContext=function(t){return _t.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ue.useEffect=function(t,e){return _t.current.useEffect(t,e)};ue.useId=function(){return _t.current.useId()};ue.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return _t.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ue.useRef=function(t){return _t.current.useRef(t)};ue.useState=function(t){return _t.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return _t.current.useTransition()};ue.version="18.3.1";x0.exports=ue;var ee=x0.exports;const O1=E1(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=ee,U1=Symbol.for("react.element"),z1=Symbol.for("react.fragment"),B1=Object.prototype.hasOwnProperty,$1=F1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q1={key:!0,ref:!0,__self:!0,__source:!0};function k0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)B1.call(e,r)&&!q1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:U1,type:t,key:i,ref:o,props:s,_owner:$1.current}}eu.Fragment=z1;eu.jsx=k0;eu.jsxs=k0;_0.exports=eu;var l=_0.exports,Oc={},C0={exports:{}},Dt={},R0={exports:{}},P0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,W){var J=L.length;L.push(W);e:for(;0<J;){var C=J-1>>>1,B=L[C];if(0<s(B,W))L[C]=W,L[J]=B,J=C;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var W=L[0],J=L.pop();if(J!==W){L[0]=J;e:for(var C=0,B=L.length,N=B>>>1;C<N;){var H=2*(C+1)-1,K=L[H],ne=H+1,le=L[ne];if(0>s(K,J))ne<B&&0>s(le,K)?(L[C]=le,L[ne]=J,C=ne):(L[C]=K,L[H]=J,C=H);else if(ne<B&&0>s(le,J))L[C]=le,L[ne]=J,C=ne;else break e}}return W}function s(L,W){var J=L.sortIndex-W.sortIndex;return J!==0?J:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],p=1,m=null,y=3,A=!1,P=!1,j=!1,F=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=L)r(h),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(h)}}function V(L){if(j=!1,b(L),!P)if(n(c)!==null)P=!0,U(M);else{var W=n(h);W!==null&&Z(V,W.startTime-L)}}function M(L,W){P=!1,j&&(j=!1,I(v),v=-1),A=!0;var J=y;try{for(b(W),m=n(c);m!==null&&(!(m.expirationTime>W)||L&&!S());){var C=m.callback;if(typeof C=="function"){m.callback=null,y=m.priorityLevel;var B=C(m.expirationTime<=W);W=t.unstable_now(),typeof B=="function"?m.callback=B:m===n(c)&&r(c),b(W)}else r(c);m=n(c)}if(m!==null)var N=!0;else{var H=n(h);H!==null&&Z(V,H.startTime-W),N=!1}return N}finally{m=null,y=J,A=!1}}var q=!1,_=null,v=-1,x=5,E=-1;function S(){return!(t.unstable_now()-E<x)}function k(){if(_!==null){var L=t.unstable_now();E=L;var W=!0;try{W=_(!0,L)}finally{W?w():(q=!1,_=null)}}else q=!1}var w;if(typeof T=="function")w=function(){T(k)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ke=ge.port2;ge.port1.onmessage=k,w=function(){ke.postMessage(null)}}else w=function(){F(k,0)};function U(L){_=L,q||(q=!0,w())}function Z(L,W){v=F(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){P||A||(P=!0,U(M))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var J=y;y=W;try{return L()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var J=y;y=L;try{return W()}finally{y=J}},t.unstable_scheduleCallback=function(L,W,J){var C=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?C+J:C):J=C,L){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=J+B,L={id:p++,callback:W,priorityLevel:L,startTime:J,expirationTime:B,sortIndex:-1},J>C?(L.sortIndex=J,e(h,L),n(c)===null&&L===n(h)&&(j?(I(v),v=-1):j=!0,Z(V,J-C))):(L.sortIndex=B,e(c,L),P||A||(P=!0,U(M))),L},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(L){var W=y;return function(){var J=y;y=W;try{return L.apply(this,arguments)}finally{y=J}}}})(P0);R0.exports=P0;var H1=R0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1=ee,jt=H1;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j0=new Set,uo={};function as(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(uo[t]=e,t=0;t<e.length;t++)j0.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fc=Object.prototype.hasOwnProperty,G1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hp={},Wp={};function K1(t){return Fc.call(Wp,t)?!0:Fc.call(Hp,t)?!1:G1.test(t)?Wp[t]=!0:(Hp[t]=!0,!1)}function Q1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y1(t,e,n,r){if(e===null||typeof e>"u"||Q1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function dh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,dh);rt[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,dh);rt[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,dh);rt[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y1(e,n,s,r)&&(n=null),r||s===null?K1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $n=W1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ya=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),fh=Symbol.for("react.strict_mode"),Uc=Symbol.for("react.profiler"),D0=Symbol.for("react.provider"),V0=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),zc=Symbol.for("react.suspense"),Bc=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),M0=Symbol.for("react.offscreen"),Gp=Symbol.iterator;function Pi(t){return t===null||typeof t!="object"?null:(t=Gp&&t[Gp]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Xu;function zi(t){if(Xu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xu=e&&e[1]||""}return`
`+Xu+t}var Ju=!1;function Zu(t,e){if(!t||Ju)return"";Ju=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Ju=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function X1(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=Zu(t.type,!1),t;case 11:return t=Zu(t.type.render,!1),t;case 1:return t=Zu(t.type,!0),t;default:return""}}function $c(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case Ts:return"Portal";case Uc:return"Profiler";case fh:return"StrictMode";case zc:return"Suspense";case Bc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V0:return(t.displayName||"Context")+".Consumer";case D0:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:$c(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return $c(t(e))}catch{}}return null}function J1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $c(e);case 8:return e===fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z1(t){var e=L0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _a(t){t._valueTracker||(t._valueTracker=Z1(t))}function O0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=L0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qc(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function F0(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function Hc(t,e){F0(t,e);var n=Tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wc(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wc(t,e,n){(e!=="number"||al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bi=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Bi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function U0(t,e){var n=Tr(e.value),r=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function z0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?z0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xa,B0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ew=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(t){ew.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qi[e]=Qi[t]})});function $0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qi.hasOwnProperty(t)&&Qi[t]?(""+e).trim():e+"px"}function q0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var tw=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qc(t,e){if(e){if(tw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Yc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jc=null,Ls=null,Os=null;function Jp(t){if(t=Uo(t)){if(typeof Jc!="function")throw Error($(280));var e=t.stateNode;e&&(e=iu(e),Jc(t.stateNode,t.type,e))}}function H0(t){Ls?Os?Os.push(t):Os=[t]:Ls=t}function W0(){if(Ls){var t=Ls,e=Os;if(Os=Ls=null,Jp(t),e)for(t=0;t<e.length;t++)Jp(e[t])}}function G0(t,e){return t(e)}function K0(){}var ec=!1;function Q0(t,e,n){if(ec)return t(e,n);ec=!0;try{return G0(t,e,n)}finally{ec=!1,(Ls!==null||Os!==null)&&(K0(),W0())}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var r=iu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Zc=!1;if(jn)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Zc=!1}function nw(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Yi=!1,ll=null,ul=!1,ed=null,rw={onError:function(t){Yi=!0,ll=t}};function sw(t,e,n,r,s,i,o,u,c){Yi=!1,ll=null,nw.apply(rw,arguments)}function iw(t,e,n,r,s,i,o,u,c){if(sw.apply(this,arguments),Yi){if(Yi){var h=ll;Yi=!1,ll=null}else throw Error($(198));ul||(ul=!0,ed=h)}}function ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Y0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zp(t){if(ls(t)!==t)throw Error($(188))}function ow(t){var e=t.alternate;if(!e){if(e=ls(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Zp(s),t;if(i===r)return Zp(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function X0(t){return t=ow(t),t!==null?J0(t):null}function J0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=J0(t);if(e!==null)return e;t=t.sibling}return null}var Z0=jt.unstable_scheduleCallback,em=jt.unstable_cancelCallback,aw=jt.unstable_shouldYield,lw=jt.unstable_requestPaint,Fe=jt.unstable_now,uw=jt.unstable_getCurrentPriorityLevel,vh=jt.unstable_ImmediatePriority,ev=jt.unstable_UserBlockingPriority,cl=jt.unstable_NormalPriority,cw=jt.unstable_LowPriority,tv=jt.unstable_IdlePriority,tu=null,fn=null;function dw(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(tu,t,void 0,(t.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:pw,hw=Math.log,fw=Math.LN2;function pw(t){return t>>>=0,t===0?32:31-(hw(t)/fw|0)|0}var wa=64,Ea=4194304;function $i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=$i(u):(i&=o,i!==0&&(r=$i(i)))}else o=n&~s,o!==0?r=$i(o):i!==0&&(r=$i(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xt(e),s=1<<n,r|=t[n],e&=~s;return r}function mw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Xt(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=mw(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function td(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nv(){var t=wa;return wa<<=1,!(wa&4194240)&&(wa=64),t}function tc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xt(e),t[e]=n}function vw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function rv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sv,_h,iv,ov,av,nd=!1,Ta=[],ur=null,cr=null,dr=null,fo=new Map,po=new Map,er=[],yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tm(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Uo(e),e!==null&&_h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function _w(t,e,n,r,s){switch(e){case"focusin":return ur=Di(ur,t,e,n,r,s),!0;case"dragenter":return cr=Di(cr,t,e,n,r,s),!0;case"mouseover":return dr=Di(dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fo.set(i,Di(fo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,po.set(i,Di(po.get(i)||null,t,e,n,r,s)),!0}return!1}function lv(t){var e=$r(t.target);if(e!==null){var n=ls(e);if(n!==null){if(e=n.tag,e===13){if(e=Y0(n),e!==null){t.blockedOn=e,av(t.priority,function(){iv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xc=r,n.target.dispatchEvent(r),Xc=null}else return e=Uo(n),e!==null&&_h(e),t.blockedOn=n,!1;e.shift()}return!0}function nm(t,e,n){za(t)&&n.delete(e)}function xw(){nd=!1,ur!==null&&za(ur)&&(ur=null),cr!==null&&za(cr)&&(cr=null),dr!==null&&za(dr)&&(dr=null),fo.forEach(nm),po.forEach(nm)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,nd||(nd=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,xw)))}function mo(t){function e(s){return Vi(s,t)}if(0<Ta.length){Vi(Ta[0],t);for(var n=1;n<Ta.length;n++){var r=Ta[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Vi(ur,t),cr!==null&&Vi(cr,t),dr!==null&&Vi(dr,t),fo.forEach(e),po.forEach(e),n=0;n<er.length;n++)r=er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)lv(n),n.blockedOn===null&&er.shift()}var Fs=$n.ReactCurrentBatchConfig,hl=!0;function ww(t,e,n,r){var s=ve,i=Fs.transition;Fs.transition=null;try{ve=1,xh(t,e,n,r)}finally{ve=s,Fs.transition=i}}function Ew(t,e,n,r){var s=ve,i=Fs.transition;Fs.transition=null;try{ve=4,xh(t,e,n,r)}finally{ve=s,Fs.transition=i}}function xh(t,e,n,r){if(hl){var s=rd(t,e,n,r);if(s===null)dc(t,e,r,fl,n),tm(t,r);else if(_w(s,t,e,n,r))r.stopPropagation();else if(tm(t,r),e&4&&-1<yw.indexOf(t)){for(;s!==null;){var i=Uo(s);if(i!==null&&sv(i),i=rd(t,e,n,r),i===null&&dc(t,e,r,fl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else dc(t,e,r,null,n)}}var fl=null;function rd(t,e,n,r){if(fl=null,t=gh(r),t=$r(t),t!==null)if(e=ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Y0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fl=t,null}function uv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uw()){case vh:return 1;case ev:return 4;case cl:case cw:return 16;case tv:return 536870912;default:return 16}default:return 16}}var or=null,wh=null,Ba=null;function cv(){if(Ba)return Ba;var t,e=wh,n=e.length,r,s="value"in or?or.value:or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ba=s.slice(t,1<r?1-r:void 0)}function $a(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function rm(){return!1}function Vt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ia:rm,this.isPropagationStopped=rm,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eh=Vt(ui),Fo=Pe({},ui,{view:0,detail:0}),Tw=Vt(Fo),nc,rc,Mi,nu=Pe({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Th,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mi&&(Mi&&t.type==="mousemove"?(nc=t.screenX-Mi.screenX,rc=t.screenY-Mi.screenY):rc=nc=0,Mi=t),nc)},movementY:function(t){return"movementY"in t?t.movementY:rc}}),sm=Vt(nu),Iw=Pe({},nu,{dataTransfer:0}),bw=Vt(Iw),Nw=Pe({},Fo,{relatedTarget:0}),sc=Vt(Nw),Sw=Pe({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Aw=Vt(Sw),kw=Pe({},ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cw=Vt(kw),Rw=Pe({},ui,{data:0}),im=Vt(Rw),Pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dw[t])?!!e[t]:!1}function Th(){return Vw}var Mw=Pe({},Fo,{key:function(t){if(t.key){var e=Pw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$a(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Th,charCode:function(t){return t.type==="keypress"?$a(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$a(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lw=Vt(Mw),Ow=Pe({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),om=Vt(Ow),Fw=Pe({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Th}),Uw=Vt(Fw),zw=Pe({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bw=Vt(zw),$w=Pe({},nu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qw=Vt($w),Hw=[9,13,27,32],Ih=jn&&"CompositionEvent"in window,Xi=null;jn&&"documentMode"in document&&(Xi=document.documentMode);var Ww=jn&&"TextEvent"in window&&!Xi,dv=jn&&(!Ih||Xi&&8<Xi&&11>=Xi),am=String.fromCharCode(32),lm=!1;function hv(t,e){switch(t){case"keyup":return Hw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bs=!1;function Gw(t,e){switch(t){case"compositionend":return fv(e);case"keypress":return e.which!==32?null:(lm=!0,am);case"textInput":return t=e.data,t===am&&lm?null:t;default:return null}}function Kw(t,e){if(bs)return t==="compositionend"||!Ih&&hv(t,e)?(t=cv(),Ba=wh=or=null,bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dv&&e.locale!=="ko"?null:e.data;default:return null}}var Qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qw[t.type]:e==="textarea"}function pv(t,e,n,r){H0(r),e=pl(e,"onChange"),0<e.length&&(n=new Eh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ji=null,go=null;function Yw(t){bv(t,0)}function ru(t){var e=As(t);if(O0(e))return t}function Xw(t,e){if(t==="change")return e}var mv=!1;if(jn){var ic;if(jn){var oc="oninput"in document;if(!oc){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),oc=typeof cm.oninput=="function"}ic=oc}else ic=!1;mv=ic&&(!document.documentMode||9<document.documentMode)}function dm(){Ji&&(Ji.detachEvent("onpropertychange",gv),go=Ji=null)}function gv(t){if(t.propertyName==="value"&&ru(go)){var e=[];pv(e,go,t,gh(t)),Q0(Yw,e)}}function Jw(t,e,n){t==="focusin"?(dm(),Ji=e,go=n,Ji.attachEvent("onpropertychange",gv)):t==="focusout"&&dm()}function Zw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ru(go)}function eE(t,e){if(t==="click")return ru(e)}function tE(t,e){if(t==="input"||t==="change")return ru(e)}function nE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var en=typeof Object.is=="function"?Object.is:nE;function vo(t,e){if(en(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Fc.call(e,s)||!en(t[s],e[s]))return!1}return!0}function hm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fm(t,e){var n=hm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hm(n)}}function vv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yv(){for(var t=window,e=al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=al(t.document)}return e}function bh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rE(t){var e=yv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vv(n.ownerDocument.documentElement,n)){if(r!==null&&bh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fm(n,i);var o=fm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sE=jn&&"documentMode"in document&&11>=document.documentMode,Ns=null,sd=null,Zi=null,id=!1;function pm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;id||Ns==null||Ns!==al(r)||(r=Ns,"selectionStart"in r&&bh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zi&&vo(Zi,r)||(Zi=r,r=pl(sd,"onSelect"),0<r.length&&(e=new Eh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ns)))}function ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ss={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},ac={},_v={};jn&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function su(t){if(ac[t])return ac[t];if(!Ss[t])return t;var e=Ss[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _v)return ac[t]=e[n];return t}var xv=su("animationend"),wv=su("animationiteration"),Ev=su("animationstart"),Tv=su("transitionend"),Iv=new Map,mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){Iv.set(t,e),as(e,[t])}for(var lc=0;lc<mm.length;lc++){var uc=mm[lc],iE=uc.toLowerCase(),oE=uc[0].toUpperCase()+uc.slice(1);Ar(iE,"on"+oE)}Ar(xv,"onAnimationEnd");Ar(wv,"onAnimationIteration");Ar(Ev,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(Tv,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aE=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function gm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iw(r,e,void 0,t),t.currentTarget=null}function bv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;gm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;gm(s,u,h),i=c}}}if(ul)throw t=ed,ul=!1,ed=null,t}function Te(t,e){var n=e[cd];n===void 0&&(n=e[cd]=new Set);var r=t+"__bubble";n.has(r)||(Nv(e,t,2,!1),n.add(r))}function cc(t,e,n){var r=0;e&&(r|=4),Nv(n,t,r,e)}var Na="_reactListening"+Math.random().toString(36).slice(2);function yo(t){if(!t[Na]){t[Na]=!0,j0.forEach(function(n){n!=="selectionchange"&&(aE.has(n)||cc(n,!1,t),cc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Na]||(e[Na]=!0,cc("selectionchange",!1,e))}}function Nv(t,e,n,r){switch(uv(e)){case 1:var s=ww;break;case 4:s=Ew;break;default:s=xh}n=s.bind(null,e,n,t),s=void 0,!Zc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=$r(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}Q0(function(){var h=i,p=gh(n),m=[];e:{var y=Iv.get(t);if(y!==void 0){var A=Eh,P=t;switch(t){case"keypress":if($a(n)===0)break e;case"keydown":case"keyup":A=Lw;break;case"focusin":P="focus",A=sc;break;case"focusout":P="blur",A=sc;break;case"beforeblur":case"afterblur":A=sc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Uw;break;case xv:case wv:case Ev:A=Aw;break;case Tv:A=Bw;break;case"scroll":A=Tw;break;case"wheel":A=qw;break;case"copy":case"cut":case"paste":A=Cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=om}var j=(e&4)!==0,F=!j&&t==="scroll",I=j?y!==null?y+"Capture":null:y;j=[];for(var T=h,b;T!==null;){b=T;var V=b.stateNode;if(b.tag===5&&V!==null&&(b=V,I!==null&&(V=ho(T,I),V!=null&&j.push(_o(T,V,b)))),F)break;T=T.return}0<j.length&&(y=new A(y,P,null,n,p),m.push({event:y,listeners:j}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",y&&n!==Xc&&(P=n.relatedTarget||n.fromElement)&&($r(P)||P[Dn]))break e;if((A||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,A?(P=n.relatedTarget||n.toElement,A=h,P=P?$r(P):null,P!==null&&(F=ls(P),P!==F||P.tag!==5&&P.tag!==6)&&(P=null)):(A=null,P=h),A!==P)){if(j=sm,V="onMouseLeave",I="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(j=om,V="onPointerLeave",I="onPointerEnter",T="pointer"),F=A==null?y:As(A),b=P==null?y:As(P),y=new j(V,T+"leave",A,n,p),y.target=F,y.relatedTarget=b,V=null,$r(p)===h&&(j=new j(I,T+"enter",P,n,p),j.target=b,j.relatedTarget=F,V=j),F=V,A&&P)t:{for(j=A,I=P,T=0,b=j;b;b=_s(b))T++;for(b=0,V=I;V;V=_s(V))b++;for(;0<T-b;)j=_s(j),T--;for(;0<b-T;)I=_s(I),b--;for(;T--;){if(j===I||I!==null&&j===I.alternate)break t;j=_s(j),I=_s(I)}j=null}else j=null;A!==null&&vm(m,y,A,j,!1),P!==null&&F!==null&&vm(m,F,P,j,!0)}}e:{if(y=h?As(h):window,A=y.nodeName&&y.nodeName.toLowerCase(),A==="select"||A==="input"&&y.type==="file")var M=Xw;else if(um(y))if(mv)M=tE;else{M=Zw;var q=Jw}else(A=y.nodeName)&&A.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(M=eE);if(M&&(M=M(t,h))){pv(m,M,n,p);break e}q&&q(t,y,h),t==="focusout"&&(q=y._wrapperState)&&q.controlled&&y.type==="number"&&Wc(y,"number",y.value)}switch(q=h?As(h):window,t){case"focusin":(um(q)||q.contentEditable==="true")&&(Ns=q,sd=h,Zi=null);break;case"focusout":Zi=sd=Ns=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,pm(m,n,p);break;case"selectionchange":if(sE)break;case"keydown":case"keyup":pm(m,n,p)}var _;if(Ih)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else bs?hv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(dv&&n.locale!=="ko"&&(bs||v!=="onCompositionStart"?v==="onCompositionEnd"&&bs&&(_=cv()):(or=p,wh="value"in or?or.value:or.textContent,bs=!0)),q=pl(h,v),0<q.length&&(v=new im(v,t,null,n,p),m.push({event:v,listeners:q}),_?v.data=_:(_=fv(n),_!==null&&(v.data=_)))),(_=Ww?Gw(t,n):Kw(t,n))&&(h=pl(h,"onBeforeInput"),0<h.length&&(p=new im("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=_))}bv(m,e)})}function _o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ho(t,n),i!=null&&r.unshift(_o(t,i,s)),i=ho(t,e),i!=null&&r.push(_o(t,i,s))),t=t.return}return r}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=ho(n,i),c!=null&&o.unshift(_o(n,c,u))):s||(c=ho(n,i),c!=null&&o.push(_o(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lE=/\r\n?/g,uE=/\u0000|\uFFFD/g;function ym(t){return(typeof t=="string"?t:""+t).replace(lE,`
`).replace(uE,"")}function Sa(t,e,n){if(e=ym(e),ym(t)!==e&&n)throw Error($(425))}function ml(){}var od=null,ad=null;function ld(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,cE=typeof clearTimeout=="function"?clearTimeout:void 0,_m=typeof Promise=="function"?Promise:void 0,dE=typeof queueMicrotask=="function"?queueMicrotask:typeof _m<"u"?function(t){return _m.resolve(null).then(t).catch(hE)}:ud;function hE(t){setTimeout(function(){throw t})}function hc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mo(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ci=Math.random().toString(36).slice(2),dn="__reactFiber$"+ci,xo="__reactProps$"+ci,Dn="__reactContainer$"+ci,cd="__reactEvents$"+ci,fE="__reactListeners$"+ci,pE="__reactHandles$"+ci;function $r(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dn]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xm(t);t!==null;){if(n=t[dn])return n;t=xm(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){return t=t[dn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function As(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function iu(t){return t[xo]||null}var dd=[],ks=-1;function kr(t){return{current:t}}function be(t){0>ks||(t.current=dd[ks],dd[ks]=null,ks--)}function we(t,e){ks++,dd[ks]=t.current,t.current=e}var Ir={},ft=kr(Ir),Tt=kr(!1),Yr=Ir;function Ks(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function gl(){be(Tt),be(ft)}function wm(t,e,n){if(ft.current!==Ir)throw Error($(168));we(ft,e),we(Tt,n)}function Sv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,J1(t)||"Unknown",s));return Pe({},n,r)}function vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,Yr=ft.current,we(ft,t),we(Tt,Tt.current),!0}function Em(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Sv(t,e,Yr),r.__reactInternalMemoizedMergedChildContext=t,be(Tt),be(ft),we(ft,t)):be(Tt),we(Tt,n)}var bn=null,ou=!1,fc=!1;function Av(t){bn===null?bn=[t]:bn.push(t)}function mE(t){ou=!0,Av(t)}function Cr(){if(!fc&&bn!==null){fc=!0;var t=0,e=ve;try{var n=bn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bn=null,ou=!1}catch(s){throw bn!==null&&(bn=bn.slice(t+1)),Z0(vh,Cr),s}finally{ve=e,fc=!1}}return null}var Cs=[],Rs=0,yl=null,_l=0,Lt=[],Ot=0,Xr=null,Nn=1,Sn="";function Ur(t,e){Cs[Rs++]=_l,Cs[Rs++]=yl,yl=t,_l=e}function kv(t,e,n){Lt[Ot++]=Nn,Lt[Ot++]=Sn,Lt[Ot++]=Xr,Xr=t;var r=Nn;t=Sn;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var i=32-Xt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nn=1<<32-Xt(e)+s|n<<s|r,Sn=i+t}else Nn=1<<i|n<<s|r,Sn=t}function Nh(t){t.return!==null&&(Ur(t,1),kv(t,1,0))}function Sh(t){for(;t===yl;)yl=Cs[--Rs],Cs[Rs]=null,_l=Cs[--Rs],Cs[Rs]=null;for(;t===Xr;)Xr=Lt[--Ot],Lt[Ot]=null,Sn=Lt[--Ot],Lt[Ot]=null,Nn=Lt[--Ot],Lt[Ot]=null}var Pt=null,Rt=null,Ae=!1,Qt=null;function Cv(t,e){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xr!==null?{id:Nn,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Rt=null,!0):!1;default:return!1}}function hd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fd(t){if(Ae){var e=Rt;if(e){var n=e;if(!Tm(t,e)){if(hd(t))throw Error($(418));e=hr(n.nextSibling);var r=Pt;e&&Tm(t,e)?Cv(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Pt=t)}}else{if(hd(t))throw Error($(418));t.flags=t.flags&-4097|2,Ae=!1,Pt=t}}}function Im(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function Aa(t){if(t!==Pt)return!1;if(!Ae)return Im(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ld(t.type,t.memoizedProps)),e&&(e=Rt)){if(hd(t))throw Rv(),Error($(418));for(;e;)Cv(t,e),e=hr(e.nextSibling)}if(Im(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Pt?hr(t.stateNode.nextSibling):null;return!0}function Rv(){for(var t=Rt;t;)t=hr(t.nextSibling)}function Qs(){Rt=Pt=null,Ae=!1}function Ah(t){Qt===null?Qt=[t]:Qt.push(t)}var gE=$n.ReactCurrentBatchConfig;function Li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ka(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bm(t){var e=t._init;return e(t._payload)}function Pv(t){function e(I,T){if(t){var b=I.deletions;b===null?(I.deletions=[T],I.flags|=16):b.push(T)}}function n(I,T){if(!t)return null;for(;T!==null;)e(I,T),T=T.sibling;return null}function r(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function s(I,T){return I=gr(I,T),I.index=0,I.sibling=null,I}function i(I,T,b){return I.index=b,t?(b=I.alternate,b!==null?(b=b.index,b<T?(I.flags|=2,T):b):(I.flags|=2,T)):(I.flags|=1048576,T)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,T,b,V){return T===null||T.tag!==6?(T=xc(b,I.mode,V),T.return=I,T):(T=s(T,b),T.return=I,T)}function c(I,T,b,V){var M=b.type;return M===Is?p(I,T,b.props.children,V,b.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Jn&&bm(M)===T.type)?(V=s(T,b.props),V.ref=Li(I,T,b),V.return=I,V):(V=Ya(b.type,b.key,b.props,null,I.mode,V),V.ref=Li(I,T,b),V.return=I,V)}function h(I,T,b,V){return T===null||T.tag!==4||T.stateNode.containerInfo!==b.containerInfo||T.stateNode.implementation!==b.implementation?(T=wc(b,I.mode,V),T.return=I,T):(T=s(T,b.children||[]),T.return=I,T)}function p(I,T,b,V,M){return T===null||T.tag!==7?(T=Kr(b,I.mode,V,M),T.return=I,T):(T=s(T,b),T.return=I,T)}function m(I,T,b){if(typeof T=="string"&&T!==""||typeof T=="number")return T=xc(""+T,I.mode,b),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ya:return b=Ya(T.type,T.key,T.props,null,I.mode,b),b.ref=Li(I,null,T),b.return=I,b;case Ts:return T=wc(T,I.mode,b),T.return=I,T;case Jn:var V=T._init;return m(I,V(T._payload),b)}if(Bi(T)||Pi(T))return T=Kr(T,I.mode,b,null),T.return=I,T;ka(I,T)}return null}function y(I,T,b,V){var M=T!==null?T.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:u(I,T,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ya:return b.key===M?c(I,T,b,V):null;case Ts:return b.key===M?h(I,T,b,V):null;case Jn:return M=b._init,y(I,T,M(b._payload),V)}if(Bi(b)||Pi(b))return M!==null?null:p(I,T,b,V,null);ka(I,b)}return null}function A(I,T,b,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return I=I.get(b)||null,u(T,I,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ya:return I=I.get(V.key===null?b:V.key)||null,c(T,I,V,M);case Ts:return I=I.get(V.key===null?b:V.key)||null,h(T,I,V,M);case Jn:var q=V._init;return A(I,T,b,q(V._payload),M)}if(Bi(V)||Pi(V))return I=I.get(b)||null,p(T,I,V,M,null);ka(T,V)}return null}function P(I,T,b,V){for(var M=null,q=null,_=T,v=T=0,x=null;_!==null&&v<b.length;v++){_.index>v?(x=_,_=null):x=_.sibling;var E=y(I,_,b[v],V);if(E===null){_===null&&(_=x);break}t&&_&&E.alternate===null&&e(I,_),T=i(E,T,v),q===null?M=E:q.sibling=E,q=E,_=x}if(v===b.length)return n(I,_),Ae&&Ur(I,v),M;if(_===null){for(;v<b.length;v++)_=m(I,b[v],V),_!==null&&(T=i(_,T,v),q===null?M=_:q.sibling=_,q=_);return Ae&&Ur(I,v),M}for(_=r(I,_);v<b.length;v++)x=A(_,I,v,b[v],V),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?v:x.key),T=i(x,T,v),q===null?M=x:q.sibling=x,q=x);return t&&_.forEach(function(S){return e(I,S)}),Ae&&Ur(I,v),M}function j(I,T,b,V){var M=Pi(b);if(typeof M!="function")throw Error($(150));if(b=M.call(b),b==null)throw Error($(151));for(var q=M=null,_=T,v=T=0,x=null,E=b.next();_!==null&&!E.done;v++,E=b.next()){_.index>v?(x=_,_=null):x=_.sibling;var S=y(I,_,E.value,V);if(S===null){_===null&&(_=x);break}t&&_&&S.alternate===null&&e(I,_),T=i(S,T,v),q===null?M=S:q.sibling=S,q=S,_=x}if(E.done)return n(I,_),Ae&&Ur(I,v),M;if(_===null){for(;!E.done;v++,E=b.next())E=m(I,E.value,V),E!==null&&(T=i(E,T,v),q===null?M=E:q.sibling=E,q=E);return Ae&&Ur(I,v),M}for(_=r(I,_);!E.done;v++,E=b.next())E=A(_,I,v,E.value,V),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?v:E.key),T=i(E,T,v),q===null?M=E:q.sibling=E,q=E);return t&&_.forEach(function(k){return e(I,k)}),Ae&&Ur(I,v),M}function F(I,T,b,V){if(typeof b=="object"&&b!==null&&b.type===Is&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ya:e:{for(var M=b.key,q=T;q!==null;){if(q.key===M){if(M=b.type,M===Is){if(q.tag===7){n(I,q.sibling),T=s(q,b.props.children),T.return=I,I=T;break e}}else if(q.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Jn&&bm(M)===q.type){n(I,q.sibling),T=s(q,b.props),T.ref=Li(I,q,b),T.return=I,I=T;break e}n(I,q);break}else e(I,q);q=q.sibling}b.type===Is?(T=Kr(b.props.children,I.mode,V,b.key),T.return=I,I=T):(V=Ya(b.type,b.key,b.props,null,I.mode,V),V.ref=Li(I,T,b),V.return=I,I=V)}return o(I);case Ts:e:{for(q=b.key;T!==null;){if(T.key===q)if(T.tag===4&&T.stateNode.containerInfo===b.containerInfo&&T.stateNode.implementation===b.implementation){n(I,T.sibling),T=s(T,b.children||[]),T.return=I,I=T;break e}else{n(I,T);break}else e(I,T);T=T.sibling}T=wc(b,I.mode,V),T.return=I,I=T}return o(I);case Jn:return q=b._init,F(I,T,q(b._payload),V)}if(Bi(b))return P(I,T,b,V);if(Pi(b))return j(I,T,b,V);ka(I,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,T!==null&&T.tag===6?(n(I,T.sibling),T=s(T,b),T.return=I,I=T):(n(I,T),T=xc(b,I.mode,V),T.return=I,I=T),o(I)):n(I,T)}return F}var Ys=Pv(!0),jv=Pv(!1),xl=kr(null),wl=null,Ps=null,kh=null;function Ch(){kh=Ps=wl=null}function Rh(t){var e=xl.current;be(xl),t._currentValue=e}function pd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){wl=t,kh=Ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Bt(t){var e=t._currentValue;if(kh!==t)if(t={context:t,memoizedValue:e,next:null},Ps===null){if(wl===null)throw Error($(308));Ps=t,wl.dependencies={lanes:0,firstContext:t}}else Ps=Ps.next=t;return e}var qr=null;function Ph(t){qr===null?qr=[t]:qr.push(t)}function Dv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ph(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,Ph(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function qa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function Nm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function El(t,e,n,r){var s=t.updateQueue;Zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,u=i;do{var y=u.lane,A=u.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:A,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,j=u;switch(y=e,A=n,j.tag){case 1:if(P=j.payload,typeof P=="function"){m=P.call(A,m,y);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=j.payload,y=typeof P=="function"?P.call(A,m,y):P,y==null)break e;m=Pe({},m,y);break e;case 2:Zn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[u]:y.push(u))}else A={eventTime:A,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=A,c=m):p=p.next=A,o|=y;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;y=u,u=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(1);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zr|=o,t.lanes=o,t.memoizedState=m}}function Sm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var zo={},pn=kr(zo),wo=kr(zo),Eo=kr(zo);function Hr(t){if(t===zo)throw Error($(174));return t}function Dh(t,e){switch(we(Eo,e),we(wo,t),we(pn,zo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kc(e,t)}be(pn),we(pn,e)}function Xs(){be(pn),be(wo),be(Eo)}function Mv(t){Hr(Eo.current);var e=Hr(pn.current),n=Kc(e,t.type);e!==n&&(we(wo,t),we(pn,n))}function Vh(t){wo.current===t&&(be(pn),be(wo))}var Ce=kr(0);function Tl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pc=[];function Mh(){for(var t=0;t<pc.length;t++)pc[t]._workInProgressVersionPrimary=null;pc.length=0}var Ha=$n.ReactCurrentDispatcher,mc=$n.ReactCurrentBatchConfig,Jr=0,Re=null,$e=null,Ge=null,Il=!1,eo=!1,To=0,vE=0;function at(){throw Error($(321))}function Lh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Oh(t,e,n,r,s,i){if(Jr=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ha.current=t===null||t.memoizedState===null?wE:EE,t=n(r,s),eo){i=0;do{if(eo=!1,To=0,25<=i)throw Error($(301));i+=1,Ge=$e=null,e.updateQueue=null,Ha.current=TE,t=n(r,s)}while(eo)}if(Ha.current=bl,e=$e!==null&&$e.next!==null,Jr=0,Ge=$e=Re=null,Il=!1,e)throw Error($(300));return t}function Fh(){var t=To!==0;return To=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Re.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function $t(){if($e===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ge===null?Re.memoizedState:Ge.next;if(e!==null)Ge=e,$e=t;else{if(t===null)throw Error($(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ge===null?Re.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Io(t,e){return typeof e=="function"?e(t):e}function gc(t){var e=$t(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var p=h.lane;if((Jr&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,Re.lanes|=p,Zr|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,en(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,Zr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vc(t){var e=$t(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);en(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Lv(){}function Ov(t,e){var n=Re,r=$t(),s=e(),i=!en(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Uh(zv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,bo(9,Uv.bind(null,n,r,s,e),void 0,null),Ke===null)throw Error($(349));Jr&30||Fv(n,e,s)}return s}function Fv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uv(t,e,n,r){e.value=n,e.getSnapshot=r,Bv(e)&&$v(t)}function zv(t,e,n){return n(function(){Bv(e)&&$v(t)})}function Bv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!en(t,n)}catch{return!0}}function $v(t){var e=Vn(t,1);e!==null&&Jt(e,t,1,-1)}function Am(t){var e=cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=xE.bind(null,Re,t),[e.memoizedState,t]}function bo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qv(){return $t().memoizedState}function Wa(t,e,n,r){var s=cn();Re.flags|=t,s.memoizedState=bo(1|e,n,void 0,r===void 0?null:r)}function au(t,e,n,r){var s=$t();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&Lh(r,o.deps)){s.memoizedState=bo(e,n,i,r);return}}Re.flags|=t,s.memoizedState=bo(1|e,n,i,r)}function km(t,e){return Wa(8390656,8,t,e)}function Uh(t,e){return au(2048,8,t,e)}function Hv(t,e){return au(4,2,t,e)}function Wv(t,e){return au(4,4,t,e)}function Gv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kv(t,e,n){return n=n!=null?n.concat([t]):null,au(4,4,Gv.bind(null,e,t),n)}function zh(){}function Qv(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yv(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Xv(t,e,n){return Jr&21?(en(n,e)||(n=nv(),Re.lanes|=n,Zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function yE(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=mc.transition;mc.transition={};try{t(!1),e()}finally{ve=n,mc.transition=r}}function Jv(){return $t().memoizedState}function _E(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zv(t))ey(e,n);else if(n=Dv(t,e,n,r),n!==null){var s=yt();Jt(n,t,r,s),ty(n,e,r)}}function xE(t,e,n){var r=mr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zv(t))ey(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,en(u,o)){var c=e.interleaved;c===null?(s.next=s,Ph(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Dv(t,e,s,r),n!==null&&(s=yt(),Jt(n,t,r,s),ty(n,e,r))}}function Zv(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function ey(t,e){eo=Il=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ty(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var bl={readContext:Bt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},wE={readContext:Bt,useCallback:function(t,e){return cn().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:km,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wa(4194308,4,Gv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wa(4,2,t,e)},useMemo:function(t,e){var n=cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_E.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=cn();return t={current:t},e.memoizedState=t},useState:Am,useDebugValue:zh,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=Am(!1),e=t[0];return t=yE.bind(null,t[1]),cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=cn();if(Ae){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ke===null)throw Error($(349));Jr&30||Fv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,km(zv.bind(null,r,i,t),[t]),r.flags|=2048,bo(9,Uv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cn(),e=Ke.identifierPrefix;if(Ae){var n=Sn,r=Nn;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=To++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EE={readContext:Bt,useCallback:Qv,useContext:Bt,useEffect:Uh,useImperativeHandle:Kv,useInsertionEffect:Hv,useLayoutEffect:Wv,useMemo:Yv,useReducer:gc,useRef:qv,useState:function(){return gc(Io)},useDebugValue:zh,useDeferredValue:function(t){var e=$t();return Xv(e,$e.memoizedState,t)},useTransition:function(){var t=gc(Io)[0],e=$t().memoizedState;return[t,e]},useMutableSource:Lv,useSyncExternalStore:Ov,useId:Jv,unstable_isNewReconciler:!1},TE={readContext:Bt,useCallback:Qv,useContext:Bt,useEffect:Uh,useImperativeHandle:Kv,useInsertionEffect:Hv,useLayoutEffect:Wv,useMemo:Yv,useReducer:vc,useRef:qv,useState:function(){return vc(Io)},useDebugValue:zh,useDeferredValue:function(t){var e=$t();return $e===null?e.memoizedState=t:Xv(e,$e.memoizedState,t)},useTransition:function(){var t=vc(Io)[0],e=$t().memoizedState;return[t,e]},useMutableSource:Lv,useSyncExternalStore:Ov,useId:Jv,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function md(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lu={isMounted:function(t){return(t=t._reactInternals)?ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),s=mr(t),i=Rn(r,s);i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(Jt(e,t,s,r),qa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),s=mr(t),i=Rn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(Jt(e,t,s,r),qa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=mr(t),s=Rn(n,r);s.tag=2,e!=null&&(s.callback=e),e=fr(t,s,r),e!==null&&(Jt(e,t,r,n),qa(e,t,r))}};function Cm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vo(n,r)||!vo(s,i):!0}function ny(t,e,n){var r=!1,s=Ir,i=e.contextType;return typeof i=="object"&&i!==null?i=Bt(i):(s=It(e)?Yr:ft.current,r=e.contextTypes,i=(r=r!=null)?Ks(t,s):Ir),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lu.enqueueReplaceState(e,e.state,null)}function gd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Bt(i):(i=It(e)?Yr:ft.current,s.context=Ks(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(md(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lu.enqueueReplaceState(s,s.state,null),El(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=X1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IE=typeof WeakMap=="function"?WeakMap:Map;function ry(t,e,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sl||(Sl=!0,Sd=r),vd(t,e)},n}function sy(t,e,n){n=Rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vd(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Pm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OE.bind(null,t,e,n),e.then(t,t))}function jm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var bE=$n.ReactCurrentOwner,Et=!1;function vt(t,e,n,r){e.child=t===null?jv(e,null,n,r):Ys(e,t.child,n,r)}function Vm(t,e,n,r,s){n=n.render;var i=e.ref;return Us(e,s),r=Oh(t,e,n,r,i,s),n=Fh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Ae&&n&&Nh(e),e.flags|=1,vt(t,e,r,s),e.child)}function Mm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iy(t,e,i,r,s)):(t=Ya(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vo,n(o,r)&&t.ref===e.ref)return Mn(t,e,s)}return e.flags|=1,t=gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function iy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vo(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Mn(t,e,s)}return yd(t,e,n,r,s)}function oy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Ds,Ct),Ct|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Ds,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(Ds,Ct),Ct|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(Ds,Ct),Ct|=r;return vt(t,e,s,n),e.child}function ay(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yd(t,e,n,r,s){var i=It(n)?Yr:ft.current;return i=Ks(e,i),Us(e,s),n=Oh(t,e,n,r,i,s),r=Fh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Ae&&r&&Nh(e),e.flags|=1,vt(t,e,n,s),e.child)}function Lm(t,e,n,r,s){if(It(n)){var i=!0;vl(e)}else i=!1;if(Us(e,s),e.stateNode===null)Ga(t,e),ny(e,n,r),gd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Bt(h):(h=It(n)?Yr:ft.current,h=Ks(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Rm(e,o,r,h),Zn=!1;var y=e.memoizedState;o.state=y,El(e,r,o,s),c=e.memoizedState,u!==r||y!==c||Tt.current||Zn?(typeof p=="function"&&(md(e,n,p,r),c=e.memoizedState),(u=Zn||Cm(e,n,u,r,y,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Vv(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Gt(e.type,u),o.props=h,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bt(c):(c=It(n)?Yr:ft.current,c=Ks(e,c));var A=n.getDerivedStateFromProps;(p=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||y!==c)&&Rm(e,o,r,c),Zn=!1,y=e.memoizedState,o.state=y,El(e,r,o,s);var P=e.memoizedState;u!==m||y!==P||Tt.current||Zn?(typeof A=="function"&&(md(e,n,A,r),P=e.memoizedState),(h=Zn||Cm(e,n,h,r,y,P,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return _d(t,e,n,r,i,s)}function _d(t,e,n,r,s,i){ay(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Em(e,n,!1),Mn(t,e,i);r=e.stateNode,bE.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,u,i)):vt(t,e,u,i),e.memoizedState=r.state,s&&Em(e,n,!0),e.child}function ly(t){var e=t.stateNode;e.pendingContext?wm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wm(t,e.context,!1),Dh(t,e.containerInfo)}function Om(t,e,n,r,s){return Qs(),Ah(s),e.flags|=256,vt(t,e,n,r),e.child}var xd={dehydrated:null,treeContext:null,retryLane:0};function wd(t){return{baseLanes:t,cachePool:null,transitions:null}}function uy(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ce,s&1),t===null)return fd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=du(o,r,0,null),t=Kr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wd(n),e.memoizedState=xd,t):Bh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return NE(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=gr(u,i):(i=Kr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=xd,r}return i=t.child,t=i.sibling,r=gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bh(t,e){return e=du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ca(t,e,n,r){return r!==null&&Ah(r),Ys(e,t.child,null,n),t=Bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yc(Error($(422))),Ca(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=du({mode:"visible",children:r.children},s,0,null),i=Kr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=wd(o),e.memoizedState=xd,i);if(!(e.mode&1))return Ca(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error($(419)),r=yc(i,r,void 0),Ca(t,e,o,r)}if(u=(o&t.childLanes)!==0,Et||u){if(r=Ke,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(t,s),Jt(r,t,s,-1))}return Kh(),r=yc(Error($(421))),Ca(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=FE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rt=hr(s.nextSibling),Pt=e,Ae=!0,Qt=null,t!==null&&(Lt[Ot++]=Nn,Lt[Ot++]=Sn,Lt[Ot++]=Xr,Nn=t.id,Sn=t.overflow,Xr=e),e=Bh(e,r.children),e.flags|=4096,e)}function Fm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pd(t.return,e,n)}function _c(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fm(t,n,e);else if(t.tag===19)Fm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Tl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_c(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Tl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_c(e,!0,n,null,i);break;case"together":_c(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ga(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SE(t,e,n){switch(e.tag){case 3:ly(e),Qs();break;case 5:Mv(e);break;case 1:It(e.type)&&vl(e);break;case 4:Dh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(xl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?uy(t,e,n):(we(Ce,Ce.current&1),t=Mn(t,e,n),t!==null?t.sibling:null);we(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,oy(t,e,n)}return Mn(t,e,n)}var dy,Ed,hy,fy;dy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ed=function(){};hy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Hr(pn.current);var i=null;switch(n){case"input":s=qc(t,s),r=qc(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=Gc(t,s),r=Gc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ml)}Qc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(uo.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(uo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Te("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};fy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oi(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AE(t,e,n){var r=e.pendingProps;switch(Sh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return It(e.type)&&gl(),lt(e),null;case 3:return r=e.stateNode,Xs(),be(Tt),be(ft),Mh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(Cd(Qt),Qt=null))),Ed(t,e),lt(e),null;case 5:Vh(e);var s=Hr(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)hy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return lt(e),null}if(t=Hr(pn.current),Aa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[dn]=e,r[xo]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<qi.length;s++)Te(qi[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":Kp(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":Yp(r,i),Te("invalid",r)}Qc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Sa(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Sa(r.textContent,u,t),s=["children",""+u]):uo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":_a(r),Qp(r,i,!0);break;case"textarea":_a(r),Xp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ml)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=z0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dn]=e,t[xo]=r,dy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yc(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<qi.length;s++)Te(qi[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":Kp(t,r),s=qc(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),Te("invalid",t);break;case"textarea":Yp(t,r),s=Gc(t,r),Te("invalid",t);break;default:s=r}Qc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?q0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&B0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&co(t,c):typeof c=="number"&&co(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Te("scroll",t):c!=null&&hh(t,i,c,o))}switch(n){case"input":_a(t),Qp(t,r,!1);break;case"textarea":_a(t),Xp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ms(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)fy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Hr(Eo.current),Hr(pn.current),Aa(e)){if(r=e.stateNode,n=e.memoizedProps,r[dn]=e,(i=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:Sa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=e,e.stateNode=r}return lt(e),null;case 13:if(be(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Rt!==null&&e.mode&1&&!(e.flags&128))Rv(),Qs(),e.flags|=98560,i=!1;else if(i=Aa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[dn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else Qt!==null&&(Cd(Qt),Qt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?qe===0&&(qe=3):Kh())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Xs(),Ed(t,e),t===null&&yo(e.stateNode.containerInfo),lt(e),null;case 10:return Rh(e.type._context),lt(e),null;case 17:return It(e.type)&&gl(),lt(e),null;case 19:if(be(Ce),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Oi(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tl(t),o!==null){for(e.flags|=128,Oi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Zs&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Tl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return lt(e),null}else 2*Fe()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Ce.current,we(Ce,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Gh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function kE(t,e){switch(Sh(e),e.tag){case 1:return It(e.type)&&gl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),be(Tt),be(ft),Mh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vh(e),null;case 13:if(be(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ce),null;case 4:return Xs(),null;case 10:return Rh(e.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var Ra=!1,dt=!1,CE=typeof WeakSet=="function"?WeakSet:Set,Q=null;function js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Td(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Um=!1;function RE(t,e){if(od=hl,t=yv(),bh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var A;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(A=m.firstChild)!==null;)y=m,m=A;for(;;){if(m===t)break t;if(y===n&&++h===s&&(u=o),y===i&&++p===r&&(c=o),(A=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=A}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ad={focusedElem:t,selectionRange:n},hl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var j=P.memoizedProps,F=P.memoizedState,I=e.stateNode,T=I.getSnapshotBeforeUpdate(e.elementType===e.type?j:Gt(e.type,j),F);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(V){Ve(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return P=Um,Um=!1,P}function to(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Td(e,n,i)}s=s.next}while(s!==r)}}function uu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Id(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function py(t){var e=t.alternate;e!==null&&(t.alternate=null,py(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[xo],delete e[cd],delete e[fE],delete e[pE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function my(t){return t.tag===5||t.tag===3||t.tag===4}function zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||my(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ml));else if(r!==4&&(t=t.child,t!==null))for(bd(t,e,n),t=t.sibling;t!==null;)bd(t,e,n),t=t.sibling}function Nd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nd(t,e,n),t=t.sibling;t!==null;)Nd(t,e,n),t=t.sibling}var Je=null,Kt=!1;function Yn(t,e,n){for(n=n.child;n!==null;)gy(t,e,n),n=n.sibling}function gy(t,e,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(tu,n)}catch{}switch(n.tag){case 5:dt||js(n,e);case 6:var r=Je,s=Kt;Je=null,Yn(t,e,n),Je=r,Kt=s,Je!==null&&(Kt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Kt?(t=Je,n=n.stateNode,t.nodeType===8?hc(t.parentNode,n):t.nodeType===1&&hc(t,n),mo(t)):hc(Je,n.stateNode));break;case 4:r=Je,s=Kt,Je=n.stateNode.containerInfo,Kt=!0,Yn(t,e,n),Je=r,Kt=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Td(n,e,o),s=s.next}while(s!==r)}Yn(t,e,n);break;case 1:if(!dt&&(js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ve(n,e,u)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,Yn(t,e,n),dt=r):Yn(t,e,n);break;default:Yn(t,e,n)}}function Bm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CE),e.forEach(function(r){var s=UE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Je=u.stateNode,Kt=!1;break e;case 3:Je=u.stateNode.containerInfo,Kt=!0;break e;case 4:Je=u.stateNode.containerInfo,Kt=!0;break e}u=u.return}if(Je===null)throw Error($(160));gy(i,o,s),Je=null,Kt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Ve(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vy(e,t),e=e.sibling}function vy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wt(e,t),un(t),r&4){try{to(3,t,t.return),uu(3,t)}catch(j){Ve(t,t.return,j)}try{to(5,t,t.return)}catch(j){Ve(t,t.return,j)}}break;case 1:Wt(e,t),un(t),r&512&&n!==null&&js(n,n.return);break;case 5:if(Wt(e,t),un(t),r&512&&n!==null&&js(n,n.return),t.flags&32){var s=t.stateNode;try{co(s,"")}catch(j){Ve(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&F0(s,i),Yc(u,o);var h=Yc(u,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?q0(s,m):p==="dangerouslySetInnerHTML"?B0(s,m):p==="children"?co(s,m):hh(s,p,m,h)}switch(u){case"input":Hc(s,i);break;case"textarea":U0(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?Ms(s,!!i.multiple,A,!1):y!==!!i.multiple&&(i.defaultValue!=null?Ms(s,!!i.multiple,i.defaultValue,!0):Ms(s,!!i.multiple,i.multiple?[]:"",!1))}s[xo]=i}catch(j){Ve(t,t.return,j)}}break;case 6:if(Wt(e,t),un(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Ve(t,t.return,j)}}break;case 3:if(Wt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(j){Ve(t,t.return,j)}break;case 4:Wt(e,t),un(t);break;case 13:Wt(e,t),un(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hh=Fe())),r&4&&Bm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(h=dt)||p,Wt(e,t),dt=h):Wt(e,t),un(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(m=Q=p;Q!==null;){switch(y=Q,A=y.child,y.tag){case 0:case 11:case 14:case 15:to(4,y,y.return);break;case 1:js(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(j){Ve(r,n,j)}}break;case 5:js(y,y.return);break;case 22:if(y.memoizedState!==null){qm(m);continue}}A!==null?(A.return=y,Q=A):qm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=$0("display",o))}catch(j){Ve(t,t.return,j)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(j){Ve(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wt(e,t),un(t),r&4&&Bm(t);break;case 21:break;default:Wt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(my(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(co(s,""),r.flags&=-33);var i=zm(t);Nd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=zm(t);bd(t,u,o);break;default:throw Error($(161))}}catch(c){Ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PE(t,e,n){Q=t,yy(t)}function yy(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ra;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||dt;u=Ra;var h=dt;if(Ra=o,(dt=c)&&!h)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?Hm(s):c!==null?(c.return=o,Q=c):Hm(s);for(;i!==null;)Q=i,yy(i),i=i.sibling;Q=s,Ra=u,dt=h}$m(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):$m(t)}}function $m(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||uu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&mo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}dt||e.flags&512&&Id(e)}catch(y){Ve(e,e.return,y)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function qm(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Hm(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uu(4,e)}catch(c){Ve(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ve(e,s,c)}}var i=e.return;try{Id(e)}catch(c){Ve(e,i,c)}break;case 5:var o=e.return;try{Id(e)}catch(c){Ve(e,o,c)}}}catch(c){Ve(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var jE=Math.ceil,Nl=$n.ReactCurrentDispatcher,$h=$n.ReactCurrentOwner,zt=$n.ReactCurrentBatchConfig,fe=0,Ke=null,ze=null,tt=0,Ct=0,Ds=kr(0),qe=0,No=null,Zr=0,cu=0,qh=0,no=null,wt=null,Hh=0,Zs=1/0,In=null,Sl=!1,Sd=null,pr=null,Pa=!1,ar=null,Al=0,ro=0,Ad=null,Ka=-1,Qa=0;function yt(){return fe&6?Fe():Ka!==-1?Ka:Ka=Fe()}function mr(t){return t.mode&1?fe&2&&tt!==0?tt&-tt:gE.transition!==null?(Qa===0&&(Qa=nv()),Qa):(t=ve,t!==0||(t=window.event,t=t===void 0?16:uv(t.type)),t):1}function Jt(t,e,n,r){if(50<ro)throw ro=0,Ad=null,Error($(185));Oo(t,n,r),(!(fe&2)||t!==Ke)&&(t===Ke&&(!(fe&2)&&(cu|=n),qe===4&&tr(t,tt)),bt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Zs=Fe()+500,ou&&Cr()))}function bt(t,e){var n=t.callbackNode;gw(t,e);var r=dl(t,t===Ke?tt:0);if(r===0)n!==null&&em(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&em(n),e===1)t.tag===0?mE(Wm.bind(null,t)):Av(Wm.bind(null,t)),dE(function(){!(fe&6)&&Cr()}),n=null;else{switch(rv(r)){case 1:n=vh;break;case 4:n=ev;break;case 16:n=cl;break;case 536870912:n=tv;break;default:n=cl}n=Ny(n,_y.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _y(t,e){if(Ka=-1,Qa=0,fe&6)throw Error($(327));var n=t.callbackNode;if(zs()&&t.callbackNode!==n)return null;var r=dl(t,t===Ke?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kl(t,r);else{e=r;var s=fe;fe|=2;var i=wy();(Ke!==t||tt!==e)&&(In=null,Zs=Fe()+500,Gr(t,e));do try{ME();break}catch(u){xy(t,u)}while(1);Ch(),Nl.current=i,fe=s,ze!==null?e=0:(Ke=null,tt=0,e=qe)}if(e!==0){if(e===2&&(s=td(t),s!==0&&(r=s,e=kd(t,s))),e===1)throw n=No,Gr(t,0),tr(t,r),bt(t,Fe()),n;if(e===6)tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!DE(s)&&(e=kl(t,r),e===2&&(i=td(t),i!==0&&(r=i,e=kd(t,i))),e===1))throw n=No,Gr(t,0),tr(t,r),bt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:zr(t,wt,In);break;case 3:if(tr(t,r),(r&130023424)===r&&(e=Hh+500-Fe(),10<e)){if(dl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ud(zr.bind(null,t,wt,In),e);break}zr(t,wt,In);break;case 4:if(tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Xt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jE(r/1960))-r,10<r){t.timeoutHandle=ud(zr.bind(null,t,wt,In),r);break}zr(t,wt,In);break;case 5:zr(t,wt,In);break;default:throw Error($(329))}}}return bt(t,Fe()),t.callbackNode===n?_y.bind(null,t):null}function kd(t,e){var n=no;return t.current.memoizedState.isDehydrated&&(Gr(t,e).flags|=256),t=kl(t,e),t!==2&&(e=wt,wt=n,e!==null&&Cd(e)),t}function Cd(t){wt===null?wt=t:wt.push.apply(wt,t)}function DE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!en(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~qh,e&=~cu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xt(e),r=1<<n;t[n]=-1,e&=~r}}function Wm(t){if(fe&6)throw Error($(327));zs();var e=dl(t,0);if(!(e&1))return bt(t,Fe()),null;var n=kl(t,e);if(t.tag!==0&&n===2){var r=td(t);r!==0&&(e=r,n=kd(t,r))}if(n===1)throw n=No,Gr(t,0),tr(t,e),bt(t,Fe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,wt,In),bt(t,Fe()),null}function Wh(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Zs=Fe()+500,ou&&Cr())}}function es(t){ar!==null&&ar.tag===0&&!(fe&6)&&zs();var e=fe;fe|=1;var n=zt.transition,r=ve;try{if(zt.transition=null,ve=1,t)return t()}finally{ve=r,zt.transition=n,fe=e,!(fe&6)&&Cr()}}function Gh(){Ct=Ds.current,be(Ds)}function Gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cE(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Sh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gl();break;case 3:Xs(),be(Tt),be(ft),Mh();break;case 5:Vh(r);break;case 4:Xs();break;case 13:be(Ce);break;case 19:be(Ce);break;case 10:Rh(r.type._context);break;case 22:case 23:Gh()}n=n.return}if(Ke=t,ze=t=gr(t.current,null),tt=Ct=e,qe=0,No=null,qh=cu=Zr=0,wt=no=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qr=null}return t}function xy(t,e){do{var n=ze;try{if(Ch(),Ha.current=bl,Il){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Il=!1}if(Jr=0,Ge=$e=Re=null,eo=!1,To=0,$h.current=null,n===null||n.return===null){qe=1,No=e,ze=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=tt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var A=jm(o);if(A!==null){A.flags&=-257,Dm(A,o,u,i,e),A.mode&1&&Pm(i,h,e),e=A,c=h;var P=e.updateQueue;if(P===null){var j=new Set;j.add(c),e.updateQueue=j}else P.add(c);break e}else{if(!(e&1)){Pm(i,h,e),Kh();break e}c=Error($(426))}}else if(Ae&&u.mode&1){var F=jm(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),Dm(F,o,u,i,e),Ah(Js(c,u));break e}}i=c=Js(c,u),qe!==4&&(qe=2),no===null?no=[i]:no.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=ry(i,c,e);Nm(i,I);break e;case 1:u=c;var T=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(pr===null||!pr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=sy(i,u,e);Nm(i,V);break e}}i=i.return}while(i!==null)}Ty(n)}catch(M){e=M,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(1)}function wy(){var t=Nl.current;return Nl.current=bl,t===null?bl:t}function Kh(){(qe===0||qe===3||qe===2)&&(qe=4),Ke===null||!(Zr&268435455)&&!(cu&268435455)||tr(Ke,tt)}function kl(t,e){var n=fe;fe|=2;var r=wy();(Ke!==t||tt!==e)&&(In=null,Gr(t,e));do try{VE();break}catch(s){xy(t,s)}while(1);if(Ch(),fe=n,Nl.current=r,ze!==null)throw Error($(261));return Ke=null,tt=0,qe}function VE(){for(;ze!==null;)Ey(ze)}function ME(){for(;ze!==null&&!aw();)Ey(ze)}function Ey(t){var e=by(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?Ty(t):ze=e,$h.current=null}function Ty(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kE(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,ze=null;return}}else if(n=AE(n,e,Ct),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);qe===0&&(qe=5)}function zr(t,e,n){var r=ve,s=zt.transition;try{zt.transition=null,ve=1,LE(t,e,n,r)}finally{zt.transition=s,ve=r}return null}function LE(t,e,n,r){do zs();while(ar!==null);if(fe&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(vw(t,i),t===Ke&&(ze=Ke=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pa||(Pa=!0,Ny(cl,function(){return zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var o=ve;ve=1;var u=fe;fe|=4,$h.current=null,RE(t,n),vy(n,t),rE(ad),hl=!!od,ad=od=null,t.current=n,PE(n),lw(),fe=u,ve=o,zt.transition=i}else t.current=n;if(Pa&&(Pa=!1,ar=t,Al=s),i=t.pendingLanes,i===0&&(pr=null),dw(n.stateNode),bt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Sl)throw Sl=!1,t=Sd,Sd=null,t;return Al&1&&t.tag!==0&&zs(),i=t.pendingLanes,i&1?t===Ad?ro++:(ro=0,Ad=t):ro=0,Cr(),null}function zs(){if(ar!==null){var t=rv(Al),e=zt.transition,n=ve;try{if(zt.transition=null,ve=16>t?16:t,ar===null)var r=!1;else{if(t=ar,ar=null,Al=0,fe&6)throw Error($(331));var s=fe;for(fe|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Q=h;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:to(8,p,i)}var m=p.child;if(m!==null)m.return=p,Q=m;else for(;Q!==null;){p=Q;var y=p.sibling,A=p.return;if(py(p),p===h){Q=null;break}if(y!==null){y.return=A,Q=y;break}Q=A}}}var P=i.alternate;if(P!==null){var j=P.child;if(j!==null){P.child=null;do{var F=j.sibling;j.sibling=null,j=F}while(j!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,Q=I;break e}Q=i.return}}var T=t.current;for(Q=T;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=T;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:uu(9,u)}}catch(M){Ve(u,u.return,M)}if(u===o){Q=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,Q=V;break e}Q=u.return}}if(fe=s,Cr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(tu,t)}catch{}r=!0}return r}finally{ve=n,zt.transition=e}}return!1}function Gm(t,e,n){e=Js(n,e),e=ry(t,e,1),t=fr(t,e,1),e=yt(),t!==null&&(Oo(t,1,e),bt(t,e))}function Ve(t,e,n){if(t.tag===3)Gm(t,t,n);else for(;e!==null;){if(e.tag===3){Gm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=Js(n,t),t=sy(e,t,1),e=fr(e,t,1),t=yt(),e!==null&&(Oo(e,1,t),bt(e,t));break}}e=e.return}}function OE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(tt&n)===n&&(qe===4||qe===3&&(tt&130023424)===tt&&500>Fe()-Hh?Gr(t,0):qh|=n),bt(t,e)}function Iy(t,e){e===0&&(t.mode&1?(e=Ea,Ea<<=1,!(Ea&130023424)&&(Ea=4194304)):e=1);var n=yt();t=Vn(t,e),t!==null&&(Oo(t,e,n),bt(t,n))}function FE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Iy(t,n)}function UE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Iy(t,n)}var by;by=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,SE(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Ae&&e.flags&1048576&&kv(e,_l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ga(t,e),t=e.pendingProps;var s=Ks(e,ft.current);Us(e,n),s=Oh(null,e,r,t,s,n);var i=Fh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,vl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jh(e),s.updater=lu,e.stateNode=s,s._reactInternals=e,gd(e,r,t,n),e=_d(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&Nh(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ga(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=BE(r),t=Gt(r,t),s){case 0:e=yd(null,e,r,t,n);break e;case 1:e=Lm(null,e,r,t,n);break e;case 11:e=Vm(null,e,r,t,n);break e;case 14:e=Mm(null,e,r,Gt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),yd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),Lm(t,e,r,s,n);case 3:e:{if(ly(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Vv(t,e),El(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error($(423)),e),e=Om(t,e,r,n,s);break e}else if(r!==s){s=Js(Error($(424)),e),e=Om(t,e,r,n,s);break e}else for(Rt=hr(e.stateNode.containerInfo.firstChild),Pt=e,Ae=!0,Qt=null,n=jv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){e=Mn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return Mv(e),t===null&&fd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ld(r,s)?o=null:i!==null&&ld(r,i)&&(e.flags|=32),ay(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&fd(e),null;case 13:return uy(t,e,n);case 4:return Dh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),Vm(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(xl,r._currentValue),r._currentValue=o,i!==null)if(en(i.value,o)){if(i.children===s.children&&!Tt.current){e=Mn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),pd(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),pd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Us(e,n),s=Bt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Gt(r,e.pendingProps),s=Gt(r.type,s),Mm(t,e,r,s,n);case 15:return iy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),Ga(t,e),e.tag=1,It(r)?(t=!0,vl(e)):t=!1,Us(e,n),ny(e,r,s),gd(e,r,s,n),_d(null,e,r,!0,t,n);case 19:return cy(t,e,n);case 22:return oy(t,e,n)}throw Error($(156,e.tag))};function Ny(t,e){return Z0(t,e)}function zE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,e,n,r){return new zE(t,e,n,r)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BE(t){if(typeof t=="function")return Qh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=Ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ya(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Is:return Kr(n.children,s,i,e);case fh:o=8,s|=8;break;case Uc:return t=Ut(12,n,e,s|2),t.elementType=Uc,t.lanes=i,t;case zc:return t=Ut(13,n,e,s),t.elementType=zc,t.lanes=i,t;case Bc:return t=Ut(19,n,e,s),t.elementType=Bc,t.lanes=i,t;case M0:return du(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D0:o=10;break e;case V0:o=9;break e;case ph:o=11;break e;case mh:o=14;break e;case Jn:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Ut(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Kr(t,e,n,r){return t=Ut(7,t,r,e),t.lanes=n,t}function du(t,e,n,r){return t=Ut(22,t,r,e),t.elementType=M0,t.lanes=n,t.stateNode={isHidden:!1},t}function xc(t,e,n){return t=Ut(6,t,null,e),t.lanes=n,t}function wc(t,e,n){return e=Ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $E(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tc(0),this.expirationTimes=tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yh(t,e,n,r,s,i,o,u,c){return t=new $E(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ut(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(i),t}function qE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sy(t){if(!t)return Ir;t=t._reactInternals;e:{if(ls(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(It(n))return Sv(t,n,e)}return e}function Ay(t,e,n,r,s,i,o,u,c){return t=Yh(n,r,!0,t,s,i,o,u,c),t.context=Sy(null),n=t.current,r=yt(),s=mr(n),i=Rn(r,s),i.callback=e??null,fr(n,i,s),t.current.lanes=s,Oo(t,s,r),bt(t,r),t}function hu(t,e,n,r){var s=e.current,i=yt(),o=mr(s);return n=Sy(n),e.context===null?e.context=n:e.pendingContext=n,e=Rn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(s,e,o),t!==null&&(Jt(t,s,o,i),qa(t,s,o)),o}function Cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Km(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xh(t,e){Km(t,e),(t=t.alternate)&&Km(t,e)}function HE(){return null}var ky=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jh(t){this._internalRoot=t}fu.prototype.render=Jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));hu(t,e,null,null)};fu.prototype.unmount=Jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;es(function(){hu(null,t,null,null)}),e[Dn]=null}};function fu(t){this._internalRoot=t}fu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ov();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&lv(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qm(){}function WE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Cl(o);i.call(h)}}var o=Ay(e,r,t,0,null,!1,!1,"",Qm);return t._reactRootContainer=o,t[Dn]=o.current,yo(t.nodeType===8?t.parentNode:t),es(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=Cl(c);u.call(h)}}var c=Yh(t,0,!1,null,null,!1,!1,"",Qm);return t._reactRootContainer=c,t[Dn]=c.current,yo(t.nodeType===8?t.parentNode:t),es(function(){hu(e,c,n,r)}),c}function mu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Cl(o);u.call(c)}}hu(e,o,t,s)}else o=WE(n,e,t,s,r);return Cl(o)}sv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$i(e.pendingLanes);n!==0&&(yh(e,n|1),bt(e,Fe()),!(fe&6)&&(Zs=Fe()+500,Cr()))}break;case 13:es(function(){var r=Vn(t,1);if(r!==null){var s=yt();Jt(r,t,1,s)}}),Xh(t,1)}};_h=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=yt();Jt(e,t,134217728,n)}Xh(t,134217728)}};iv=function(t){if(t.tag===13){var e=mr(t),n=Vn(t,e);if(n!==null){var r=yt();Jt(n,t,e,r)}Xh(t,e)}};ov=function(){return ve};av=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Jc=function(t,e,n){switch(e){case"input":if(Hc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=iu(r);if(!s)throw Error($(90));O0(r),Hc(r,s)}}}break;case"textarea":U0(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};G0=Wh;K0=es;var GE={usingClientEntryPoint:!1,Events:[Uo,As,iu,H0,W0,Wh]},Fi={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KE={bundleType:Fi.bundleType,version:Fi.version,rendererPackageName:Fi.rendererPackageName,rendererConfig:Fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=X0(t),t===null?null:t.stateNode},findFiberByHostInstance:Fi.findFiberByHostInstance||HE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{tu=ja.inject(KE),fn=ja}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GE;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error($(200));return qE(t,e,null,n)};Dt.createRoot=function(t,e){if(!Zh(t))throw Error($(299));var n=!1,r="",s=ky;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yh(t,1,!1,null,null,n,!1,r,s),t[Dn]=e.current,yo(t.nodeType===8?t.parentNode:t),new Jh(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=X0(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return es(t)};Dt.hydrate=function(t,e,n){if(!pu(e))throw Error($(200));return mu(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ky;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ay(e,null,t,1,n??null,s,!1,i,o),t[Dn]=e.current,yo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new fu(e)};Dt.render=function(t,e,n){if(!pu(e))throw Error($(200));return mu(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!pu(t))throw Error($(40));return t._reactRootContainer?(es(function(){mu(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};Dt.unstable_batchedUpdates=Wh;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return mu(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function Cy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cy)}catch(t){console.error(t)}}Cy(),C0.exports=Dt;var QE=C0.exports,Ym=QE;Oc.createRoot=Ym.createRoot,Oc.hydrateRoot=Ym.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},YE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Py={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|u>>4;let y=(u&15)<<2|h>>6,A=h&63;c||(A=64,o||(y=64)),r.push(n[p],n[m],n[y],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ry(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||m==null)throw new XE;const y=i<<2|u>>4;if(r.push(y),h!==64){const A=u<<4&240|h>>2;if(r.push(A),m!==64){const P=h<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JE=function(t){const e=Ry(t);return Py.encodeByteArray(e,!0)},Rl=function(t){return JE(t).replace(/\./g,"")},jy=function(t){try{return Py.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=()=>ZE().__FIREBASE_DEFAULTS__,tT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jy(t[1]);return e&&JSON.parse(e)},gu=()=>{try{return eT()||tT()||nT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Dy=t=>{var e,n;return(n=(e=gu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rT=t=>{const e=Dy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vy=()=>{var t;return(t=gu())===null||t===void 0?void 0:t.config},My=t=>{var e;return(e=gu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Rl(JSON.stringify(n)),Rl(JSON.stringify(o)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function aT(){var t;const e=(t=gu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dT(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hT(){return!aT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fT(){try{return typeof indexedDB=="object"}catch{return!1}}function pT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mT,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bo.prototype.create)}}class Bo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gT(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new qn(s,u,r)}}function gT(t,e){return t.replace(vT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vT=/\{\$([^}]+)}/g;function yT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Xm(i)&&Xm(o)){if(!Pl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Xm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _T(t,e){const n=new xT(t,e);return n.subscribe.bind(n)}class xT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ec),s.error===void 0&&(s.error=Ec),s.complete===void 0&&(s.complete=Ec);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ec(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IT(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TT(t){return t===Br?void 0:t}function IT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ET(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const NT={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ST=de.INFO,AT={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},kT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ef{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=kT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const CT=(t,e)=>e.some(n=>t instanceof n);let Jm,Zm;function RT(){return Jm||(Jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PT(){return Zm||(Zm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ly=new WeakMap,Rd=new WeakMap,Oy=new WeakMap,Tc=new WeakMap,tf=new WeakMap;function jT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ly.set(n,t)}).catch(()=>{}),tf.set(e,t),e}function DT(t){if(Rd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Rd.set(t,e)}let Pd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VT(t){Pd=t(Pd)}function MT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ic(this),e,...n);return Oy.set(r,e.sort?e.sort():[e]),vr(r)}:PT().includes(t)?function(...e){return t.apply(Ic(this),e),vr(Ly.get(this))}:function(...e){return vr(t.apply(Ic(this),e))}}function LT(t){return typeof t=="function"?MT(t):(t instanceof IDBTransaction&&DT(t),CT(t,RT())?new Proxy(t,Pd):t)}function vr(t){if(t instanceof IDBRequest)return jT(t);if(Tc.has(t))return Tc.get(t);const e=LT(t);return e!==t&&(Tc.set(t,e),tf.set(e,t)),e}const Ic=t=>tf.get(t);function OT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=vr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(vr(o.result),c.oldVersion,c.newVersion,vr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const FT=["get","getKey","getAll","getAllKeys","count"],UT=["put","add","delete","clear"],bc=new Map;function eg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bc.get(e))return bc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=UT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FT.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return bc.set(e,i),i}VT(t=>({...t,get:(e,n,r)=>eg(e,n)||t.get(e,n,r),has:(e,n)=>!!eg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jd="@firebase/app",tg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new ef("@firebase/app"),$T="@firebase/app-compat",qT="@firebase/analytics-compat",HT="@firebase/analytics",WT="@firebase/app-check-compat",GT="@firebase/app-check",KT="@firebase/auth",QT="@firebase/auth-compat",YT="@firebase/database",XT="@firebase/data-connect",JT="@firebase/database-compat",ZT="@firebase/functions",eI="@firebase/functions-compat",tI="@firebase/installations",nI="@firebase/installations-compat",rI="@firebase/messaging",sI="@firebase/messaging-compat",iI="@firebase/performance",oI="@firebase/performance-compat",aI="@firebase/remote-config",lI="@firebase/remote-config-compat",uI="@firebase/storage",cI="@firebase/storage-compat",dI="@firebase/firestore",hI="@firebase/vertexai-preview",fI="@firebase/firestore-compat",pI="firebase",mI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="[DEFAULT]",gI={[jd]:"fire-core",[$T]:"fire-core-compat",[HT]:"fire-analytics",[qT]:"fire-analytics-compat",[GT]:"fire-app-check",[WT]:"fire-app-check-compat",[KT]:"fire-auth",[QT]:"fire-auth-compat",[YT]:"fire-rtdb",[XT]:"fire-data-connect",[JT]:"fire-rtdb-compat",[ZT]:"fire-fn",[eI]:"fire-fn-compat",[tI]:"fire-iid",[nI]:"fire-iid-compat",[rI]:"fire-fcm",[sI]:"fire-fcm-compat",[iI]:"fire-perf",[oI]:"fire-perf-compat",[aI]:"fire-rc",[lI]:"fire-rc-compat",[uI]:"fire-gcs",[cI]:"fire-gcs-compat",[dI]:"fire-fst",[fI]:"fire-fst-compat",[hI]:"fire-vertex","fire-js":"fire-js",[pI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new Map,vI=new Map,Vd=new Map;function ng(t,e){try{t.container.addComponent(e)}catch(n){Ln.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Vd.has(e))return Ln.debug(`There were multiple attempts to register component ${e}.`),!1;Vd.set(e,t);for(const n of jl.values())ng(n,t);for(const n of vI.values())ng(n,t);return!0}function nf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Bo("app","Firebase",yI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=mI;function Fy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=Vy()),!n)throw yr.create("no-options");const i=jl.get(s);if(i){if(Pl(n,i.options)&&Pl(r,i.config))return i;throw yr.create("duplicate-app",{appName:s})}const o=new bT(s);for(const c of Vd.values())o.addComponent(c);const u=new _I(n,r,o);return jl.set(s,u),u}function Uy(t=Dd){const e=jl.get(t);if(!e&&t===Dd&&Vy())return Fy();if(!e)throw yr.create("no-app",{appName:t});return e}function _r(t,e,n){var r;let s=(r=gI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ln.warn(u.join(" "));return}ei(new ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="firebase-heartbeat-database",wI=1,So="firebase-heartbeat-store";let Nc=null;function zy(){return Nc||(Nc=OT(xI,wI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(So)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),Nc}async function EI(t){try{const n=(await zy()).transaction(So),r=await n.objectStore(So).get(By(t));return await n.done,r}catch(e){if(e instanceof qn)Ln.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ln.warn(n.message)}}}async function rg(t,e){try{const r=(await zy()).transaction(So,"readwrite");await r.objectStore(So).put(e,By(t)),await r.done}catch(n){if(n instanceof qn)Ln.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function By(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1024,II=30*24*60*60*1e3;class bI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=II}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ln.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sg(),{heartbeatsToSend:r,unsentEntries:s}=NI(this._heartbeatsCache.heartbeats),i=Rl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ln.warn(n),""}}}function sg(){return new Date().toISOString().substring(0,10)}function NI(t,e=TI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ig(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ig(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fT()?pT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ig(t){return Rl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){ei(new ts("platform-logger",e=>new zT(e),"PRIVATE")),ei(new ts("heartbeat",e=>new bI(e),"PRIVATE")),_r(jd,tg,t),_r(jd,tg,"esm2017"),_r("fire-js","")}AI("");var kI="firebase",CI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(kI,CI,"app");var og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,$y;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,v){function x(){}x.prototype=v.prototype,_.D=v.prototype,_.prototype=new x,_.prototype.constructor=_,_.C=function(E,S,k){for(var w=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)w[ge-2]=arguments[ge];return v.prototype[S].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,v,x){x||(x=0);var E=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)E[S]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(S=0;16>S;++S)E[S]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=_.g[0],x=_.g[1],S=_.g[2];var k=_.g[3],w=v+(k^x&(S^k))+E[0]+3614090360&4294967295;v=x+(w<<7&4294967295|w>>>25),w=k+(S^v&(x^S))+E[1]+3905402710&4294967295,k=v+(w<<12&4294967295|w>>>20),w=S+(x^k&(v^x))+E[2]+606105819&4294967295,S=k+(w<<17&4294967295|w>>>15),w=x+(v^S&(k^v))+E[3]+3250441966&4294967295,x=S+(w<<22&4294967295|w>>>10),w=v+(k^x&(S^k))+E[4]+4118548399&4294967295,v=x+(w<<7&4294967295|w>>>25),w=k+(S^v&(x^S))+E[5]+1200080426&4294967295,k=v+(w<<12&4294967295|w>>>20),w=S+(x^k&(v^x))+E[6]+2821735955&4294967295,S=k+(w<<17&4294967295|w>>>15),w=x+(v^S&(k^v))+E[7]+4249261313&4294967295,x=S+(w<<22&4294967295|w>>>10),w=v+(k^x&(S^k))+E[8]+1770035416&4294967295,v=x+(w<<7&4294967295|w>>>25),w=k+(S^v&(x^S))+E[9]+2336552879&4294967295,k=v+(w<<12&4294967295|w>>>20),w=S+(x^k&(v^x))+E[10]+4294925233&4294967295,S=k+(w<<17&4294967295|w>>>15),w=x+(v^S&(k^v))+E[11]+2304563134&4294967295,x=S+(w<<22&4294967295|w>>>10),w=v+(k^x&(S^k))+E[12]+1804603682&4294967295,v=x+(w<<7&4294967295|w>>>25),w=k+(S^v&(x^S))+E[13]+4254626195&4294967295,k=v+(w<<12&4294967295|w>>>20),w=S+(x^k&(v^x))+E[14]+2792965006&4294967295,S=k+(w<<17&4294967295|w>>>15),w=x+(v^S&(k^v))+E[15]+1236535329&4294967295,x=S+(w<<22&4294967295|w>>>10),w=v+(S^k&(x^S))+E[1]+4129170786&4294967295,v=x+(w<<5&4294967295|w>>>27),w=k+(x^S&(v^x))+E[6]+3225465664&4294967295,k=v+(w<<9&4294967295|w>>>23),w=S+(v^x&(k^v))+E[11]+643717713&4294967295,S=k+(w<<14&4294967295|w>>>18),w=x+(k^v&(S^k))+E[0]+3921069994&4294967295,x=S+(w<<20&4294967295|w>>>12),w=v+(S^k&(x^S))+E[5]+3593408605&4294967295,v=x+(w<<5&4294967295|w>>>27),w=k+(x^S&(v^x))+E[10]+38016083&4294967295,k=v+(w<<9&4294967295|w>>>23),w=S+(v^x&(k^v))+E[15]+3634488961&4294967295,S=k+(w<<14&4294967295|w>>>18),w=x+(k^v&(S^k))+E[4]+3889429448&4294967295,x=S+(w<<20&4294967295|w>>>12),w=v+(S^k&(x^S))+E[9]+568446438&4294967295,v=x+(w<<5&4294967295|w>>>27),w=k+(x^S&(v^x))+E[14]+3275163606&4294967295,k=v+(w<<9&4294967295|w>>>23),w=S+(v^x&(k^v))+E[3]+4107603335&4294967295,S=k+(w<<14&4294967295|w>>>18),w=x+(k^v&(S^k))+E[8]+1163531501&4294967295,x=S+(w<<20&4294967295|w>>>12),w=v+(S^k&(x^S))+E[13]+2850285829&4294967295,v=x+(w<<5&4294967295|w>>>27),w=k+(x^S&(v^x))+E[2]+4243563512&4294967295,k=v+(w<<9&4294967295|w>>>23),w=S+(v^x&(k^v))+E[7]+1735328473&4294967295,S=k+(w<<14&4294967295|w>>>18),w=x+(k^v&(S^k))+E[12]+2368359562&4294967295,x=S+(w<<20&4294967295|w>>>12),w=v+(x^S^k)+E[5]+4294588738&4294967295,v=x+(w<<4&4294967295|w>>>28),w=k+(v^x^S)+E[8]+2272392833&4294967295,k=v+(w<<11&4294967295|w>>>21),w=S+(k^v^x)+E[11]+1839030562&4294967295,S=k+(w<<16&4294967295|w>>>16),w=x+(S^k^v)+E[14]+4259657740&4294967295,x=S+(w<<23&4294967295|w>>>9),w=v+(x^S^k)+E[1]+2763975236&4294967295,v=x+(w<<4&4294967295|w>>>28),w=k+(v^x^S)+E[4]+1272893353&4294967295,k=v+(w<<11&4294967295|w>>>21),w=S+(k^v^x)+E[7]+4139469664&4294967295,S=k+(w<<16&4294967295|w>>>16),w=x+(S^k^v)+E[10]+3200236656&4294967295,x=S+(w<<23&4294967295|w>>>9),w=v+(x^S^k)+E[13]+681279174&4294967295,v=x+(w<<4&4294967295|w>>>28),w=k+(v^x^S)+E[0]+3936430074&4294967295,k=v+(w<<11&4294967295|w>>>21),w=S+(k^v^x)+E[3]+3572445317&4294967295,S=k+(w<<16&4294967295|w>>>16),w=x+(S^k^v)+E[6]+76029189&4294967295,x=S+(w<<23&4294967295|w>>>9),w=v+(x^S^k)+E[9]+3654602809&4294967295,v=x+(w<<4&4294967295|w>>>28),w=k+(v^x^S)+E[12]+3873151461&4294967295,k=v+(w<<11&4294967295|w>>>21),w=S+(k^v^x)+E[15]+530742520&4294967295,S=k+(w<<16&4294967295|w>>>16),w=x+(S^k^v)+E[2]+3299628645&4294967295,x=S+(w<<23&4294967295|w>>>9),w=v+(S^(x|~k))+E[0]+4096336452&4294967295,v=x+(w<<6&4294967295|w>>>26),w=k+(x^(v|~S))+E[7]+1126891415&4294967295,k=v+(w<<10&4294967295|w>>>22),w=S+(v^(k|~x))+E[14]+2878612391&4294967295,S=k+(w<<15&4294967295|w>>>17),w=x+(k^(S|~v))+E[5]+4237533241&4294967295,x=S+(w<<21&4294967295|w>>>11),w=v+(S^(x|~k))+E[12]+1700485571&4294967295,v=x+(w<<6&4294967295|w>>>26),w=k+(x^(v|~S))+E[3]+2399980690&4294967295,k=v+(w<<10&4294967295|w>>>22),w=S+(v^(k|~x))+E[10]+4293915773&4294967295,S=k+(w<<15&4294967295|w>>>17),w=x+(k^(S|~v))+E[1]+2240044497&4294967295,x=S+(w<<21&4294967295|w>>>11),w=v+(S^(x|~k))+E[8]+1873313359&4294967295,v=x+(w<<6&4294967295|w>>>26),w=k+(x^(v|~S))+E[15]+4264355552&4294967295,k=v+(w<<10&4294967295|w>>>22),w=S+(v^(k|~x))+E[6]+2734768916&4294967295,S=k+(w<<15&4294967295|w>>>17),w=x+(k^(S|~v))+E[13]+1309151649&4294967295,x=S+(w<<21&4294967295|w>>>11),w=v+(S^(x|~k))+E[4]+4149444226&4294967295,v=x+(w<<6&4294967295|w>>>26),w=k+(x^(v|~S))+E[11]+3174756917&4294967295,k=v+(w<<10&4294967295|w>>>22),w=S+(v^(k|~x))+E[2]+718787259&4294967295,S=k+(w<<15&4294967295|w>>>17),w=x+(k^(S|~v))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+v&4294967295,_.g[1]=_.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,_.g[2]=_.g[2]+S&4294967295,_.g[3]=_.g[3]+k&4294967295}r.prototype.u=function(_,v){v===void 0&&(v=_.length);for(var x=v-this.blockSize,E=this.B,S=this.h,k=0;k<v;){if(S==0)for(;k<=x;)s(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<v;)if(E[S++]=_.charCodeAt(k++),S==this.blockSize){s(this,E),S=0;break}}else for(;k<v;)if(E[S++]=_[k++],S==this.blockSize){s(this,E),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var v=1;v<_.length-8;++v)_[v]=0;var x=8*this.o;for(v=_.length-8;v<_.length;++v)_[v]=x&255,x/=256;for(this.u(_),_=Array(16),v=x=0;4>v;++v)for(var E=0;32>E;E+=8)_[x++]=this.g[v]>>>E&255;return _};function i(_,v){var x=u;return Object.prototype.hasOwnProperty.call(x,_)?x[_]:x[_]=v(_)}function o(_,v){this.h=v;for(var x=[],E=!0,S=_.length-1;0<=S;S--){var k=_[S]|0;E&&k==v||(x[S]=k,E=!1)}this.g=x}var u={};function c(_){return-128<=_&&128>_?i(_,function(v){return new o([v|0],0>v?-1:0)}):new o([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return F(h(-_));for(var v=[],x=1,E=0;_>=x;E++)v[E]=_/x|0,x*=4294967296;return new o(v,0)}function p(_,v){if(_.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(_.charAt(0)=="-")return F(p(_.substring(1),v));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(v,8)),E=m,S=0;S<_.length;S+=8){var k=Math.min(8,_.length-S),w=parseInt(_.substring(S,S+k),v);8>k?(k=h(Math.pow(v,k)),E=E.j(k).add(h(w))):(E=E.j(x),E=E.add(h(w)))}return E}var m=c(0),y=c(1),A=c(16777216);t=o.prototype,t.m=function(){if(j(this))return-F(this).m();for(var _=0,v=1,x=0;x<this.g.length;x++){var E=this.i(x);_+=(0<=E?E:4294967296+E)*v,v*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(P(this))return"0";if(j(this))return"-"+F(this).toString(_);for(var v=h(Math.pow(_,6)),x=this,E="";;){var S=V(x,v).g;x=I(x,S.j(v));var k=((0<x.g.length?x.g[0]:x.h)>>>0).toString(_);if(x=S,P(x))return k+E;for(;6>k.length;)k="0"+k;E=k+E}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function P(_){if(_.h!=0)return!1;for(var v=0;v<_.g.length;v++)if(_.g[v]!=0)return!1;return!0}function j(_){return _.h==-1}t.l=function(_){return _=I(this,_),j(_)?-1:P(_)?0:1};function F(_){for(var v=_.g.length,x=[],E=0;E<v;E++)x[E]=~_.g[E];return new o(x,~_.h).add(y)}t.abs=function(){return j(this)?F(this):this},t.add=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0,S=0;S<=v;S++){var k=E+(this.i(S)&65535)+(_.i(S)&65535),w=(k>>>16)+(this.i(S)>>>16)+(_.i(S)>>>16);E=w>>>16,k&=65535,w&=65535,x[S]=w<<16|k}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(_,v){return _.add(F(v))}t.j=function(_){if(P(this)||P(_))return m;if(j(this))return j(_)?F(this).j(F(_)):F(F(this).j(_));if(j(_))return F(this.j(F(_)));if(0>this.l(A)&&0>_.l(A))return h(this.m()*_.m());for(var v=this.g.length+_.g.length,x=[],E=0;E<2*v;E++)x[E]=0;for(E=0;E<this.g.length;E++)for(var S=0;S<_.g.length;S++){var k=this.i(E)>>>16,w=this.i(E)&65535,ge=_.i(S)>>>16,ke=_.i(S)&65535;x[2*E+2*S]+=w*ke,T(x,2*E+2*S),x[2*E+2*S+1]+=k*ke,T(x,2*E+2*S+1),x[2*E+2*S+1]+=w*ge,T(x,2*E+2*S+1),x[2*E+2*S+2]+=k*ge,T(x,2*E+2*S+2)}for(E=0;E<v;E++)x[E]=x[2*E+1]<<16|x[2*E];for(E=v;E<2*v;E++)x[E]=0;return new o(x,0)};function T(_,v){for(;(_[v]&65535)!=_[v];)_[v+1]+=_[v]>>>16,_[v]&=65535,v++}function b(_,v){this.g=_,this.h=v}function V(_,v){if(P(v))throw Error("division by zero");if(P(_))return new b(m,m);if(j(_))return v=V(F(_),v),new b(F(v.g),F(v.h));if(j(v))return v=V(_,F(v)),new b(F(v.g),v.h);if(30<_.g.length){if(j(_)||j(v))throw Error("slowDivide_ only works with positive integers.");for(var x=y,E=v;0>=E.l(_);)x=M(x),E=M(E);var S=q(x,1),k=q(E,1);for(E=q(E,2),x=q(x,2);!P(E);){var w=k.add(E);0>=w.l(_)&&(S=S.add(x),k=w),E=q(E,1),x=q(x,1)}return v=I(_,S.j(v)),new b(S,v)}for(S=m;0<=_.l(v);){for(x=Math.max(1,Math.floor(_.m()/v.m())),E=Math.ceil(Math.log(x)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),k=h(x),w=k.j(v);j(w)||0<w.l(_);)x-=E,k=h(x),w=k.j(v);P(k)&&(k=y),S=S.add(k),_=I(_,w)}return new b(S,_)}t.A=function(_){return V(this,_).h},t.and=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0;E<v;E++)x[E]=this.i(E)&_.i(E);return new o(x,this.h&_.h)},t.or=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0;E<v;E++)x[E]=this.i(E)|_.i(E);return new o(x,this.h|_.h)},t.xor=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],E=0;E<v;E++)x[E]=this.i(E)^_.i(E);return new o(x,this.h^_.h)};function M(_){for(var v=_.g.length+1,x=[],E=0;E<v;E++)x[E]=_.i(E)<<1|_.i(E-1)>>>31;return new o(x,_.h)}function q(_,v){var x=v>>5;v%=32;for(var E=_.g.length-x,S=[],k=0;k<E;k++)S[k]=0<v?_.i(k+x)>>>v|_.i(k+x+1)<<32-v:_.i(k+x);return new o(S,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$y=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Qr=o}).apply(typeof og<"u"?og:typeof self<"u"?self:typeof window<"u"?window:{});var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qy,Hi,Hy,Xa,Md,Wy,Gy,Ky;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Da=="object"&&Da];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var R=a[g];if(!(R in f))break e;f=f[R]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,g=!1,R={next:function(){if(!g&&f<a.length){var D=f++;return{value:d(D,a[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,g),a.apply(d,R)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function A(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,R,D){for(var G=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)G[xe-2]=arguments[xe];return d.prototype[R].apply(g,G)}}function j(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function F(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const R=a.length||0,D=g.length||0;a.length=R+D;for(let G=0;G<D;G++)a[R+G]=g[G]}else a.push(g)}}class I{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function T(a){return/^[\s\xa0]*$/.test(a)}function b(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var M=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function q(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function _(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,g;for(let R=1;R<arguments.length;R++){g=arguments[R];for(f in g)a[f]=g[f];for(let D=0;D<x.length;D++)f=x[D],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function S(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function k(a){u.setTimeout(()=>{throw a},0)}function w(){var a=W;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ge{constructor(){this.h=this.g=null}add(d,f){const g=ke.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ke=new I(()=>new U,a=>a.reset());class U{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,L=!1,W=new ge,J=()=>{const a=u.Promise.resolve(void 0);Z=()=>{a.then(C)}};var C=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(f){k(f)}var d=ke;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}L=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function K(a,d){if(N.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(M){e:{try{V(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ne[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&K.aa.h.call(this)}}P(K,N);var ne={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function At(a,d,f,g,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=R,this.key=++Ne,this.da=this.fa=!1}function Me(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function mt(a){this.src=a,this.g={},this.h=0}mt.prototype.add=function(a,d,f,g,R){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var G=Ye(a,d,g,R);return-1<G?(d=a[G],f||(d.fa=!1)):(d=new At(d,this.src,D,!!g,R),d.fa=f,a.push(d)),d};function Qe(a,d){var f=d.type;if(f in a.g){var g=a.g[f],R=Array.prototype.indexOf.call(g,d,void 0),D;(D=0<=R)&&Array.prototype.splice.call(g,R,1),D&&(Me(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Ye(a,d,f,g){for(var R=0;R<a.length;++R){var D=a[R];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==g)return R}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),qt={};function nn(a,d,f,g,R){if(g&&g.once)return rn(a,d,f,g,R);if(Array.isArray(d)){for(var D=0;D<d.length;D++)nn(a,d[D],f,g,R);return null}return f=Mt(f),a&&a[le]?a.K(d,f,h(g)?!!g.capture:!!g,R):Hn(a,d,f,!1,g,R)}function Hn(a,d,f,g,R,D){if(!d)throw Error("Invalid event type");var G=h(R)?!!R.capture:!!R,xe=sn(a);if(xe||(a[_e]=xe=new mt(a)),f=xe.add(d,f,g,G,D),f.proxy)return f;if(g=wn(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)H||(R=G),R===void 0&&(R=!1),a.addEventListener(d.toString(),g,R);else if(a.attachEvent)a.attachEvent(hs(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function wn(){function a(f){return d.call(a.src,a.listener,f)}const d=jr;return a}function rn(a,d,f,g,R){if(Array.isArray(d)){for(var D=0;D<d.length;D++)rn(a,d[D],f,g,R);return null}return f=Mt(f),a&&a[le]?a.L(d,f,h(g)?!!g.capture:!!g,R):Hn(a,d,f,!0,g,R)}function ds(a,d,f,g,R){if(Array.isArray(d))for(var D=0;D<d.length;D++)ds(a,d[D],f,g,R);else g=h(g)?!!g.capture:!!g,f=Mt(f),a&&a[le]?(a=a.i,d=String(d).toString(),d in a.g&&(D=a.g[d],f=Ye(D,f,g,R),-1<f&&(Me(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[d],a.h--)))):a&&(a=sn(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Ye(d,f,g,R)),(f=-1<a?d[a]:null)&&Pr(f))}function Pr(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[le])Qe(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(hs(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=sn(d))?(Qe(f,a),f.h==0&&(f.src=null,d[_e]=null)):Me(a)}}}function hs(a){return a in qt?qt[a]:qt[a]="on"+a}function jr(a,d){if(a.da)a=!0;else{d=new K(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Pr(a),a=f.call(g,d)}return a}function sn(a){return a=a[_e],a instanceof mt?a:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(a){return typeof a=="function"?a:(a[on]||(a[on]=function(d){return a.handleEvent(d)}),a[on])}function Se(){B.call(this),this.i=new mt(this),this.M=this,this.F=null}P(Se,B),Se.prototype[le]=!0,Se.prototype.removeEventListener=function(a,d,f,g){ds(this,a,d,f,g)};function Le(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new N(d,a);else if(d instanceof N)d.target=d.target||a;else{var R=d;d=new N(g,a),E(d,R)}if(R=!0,f)for(var D=f.length-1;0<=D;D--){var G=d.g=f[D];R=an(G,g,!0,d)&&R}if(G=d.g=a,R=an(G,g,!0,d)&&R,R=an(G,g,!1,d)&&R,f)for(D=0;D<f.length;D++)G=d.g=f[D],R=an(G,g,!1,d)&&R}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Me(f[g]);delete a.g[d],a.h--}}this.F=null},Se.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Se.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function an(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,D=0;D<d.length;++D){var G=d[D];if(G&&!G.da&&G.capture==f){var xe=G.listener,Xe=G.ha||G.src;G.fa&&Qe(a.i,G),R=xe.call(Xe,g)!==!1&&R}}return R&&!g.defaultPrevented}function Wn(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function Dr(a){a.g=Wn(()=>{a.g=null,a.i&&(a.i=!1,Dr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class fs extends B{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(a){B.call(this),this.h=a,this.g={}}P(ln,B);var yi=[];function _i(a){q(a.g,function(d,f){this.g.hasOwnProperty(f)&&Pr(d)},a),a.g={}}ln.prototype.N=function(){ln.aa.N.call(this),_i(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ps=u.JSON.stringify,Du=u.JSON.parse,Vr=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Vu(){}Vu.prototype.h=null;function Xf(a){return a.h||(a.h=a.i())}function Jf(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mu(){N.call(this,"d")}P(Mu,N);function Lu(){N.call(this,"c")}P(Lu,N);var Mr={},Zf=null;function na(){return Zf=Zf||new Se}Mr.La="serverreachability";function ep(a){N.call(this,Mr.La,a)}P(ep,N);function wi(a){const d=na();Le(d,new ep(d))}Mr.STAT_EVENT="statevent";function tp(a,d){N.call(this,Mr.STAT_EVENT,a),this.stat=d}P(tp,N);function gt(a){const d=na();Le(d,new tp(d,a))}Mr.Ma="timingevent";function np(a,d){N.call(this,Mr.Ma,a),this.size=d}P(np,N);function Ei(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function Zx(a,d,f,g,R,D){a.info(function(){if(a.g)if(D)for(var G="",xe=D.split("&"),Xe=0;Xe<xe.length;Xe++){var pe=xe[Xe].split("=");if(1<pe.length){var it=pe[0];pe=pe[1];var ot=it.split("_");G=2<=ot.length&&ot[1]=="type"?G+(it+"="+pe+"&"):G+(it+"=redacted&")}}else G=null;else G=D;return"XMLHTTP REQ ("+g+") [attempt "+R+"]: "+d+`
`+f+`
`+G})}function e1(a,d,f,g,R,D,G){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+R+"]: "+d+`
`+f+`
`+D+" "+G})}function ms(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+n1(a,f)+(g?" "+g:"")})}function t1(a,d){a.info(function(){return"TIMEOUT: "+d})}Ti.prototype.info=function(){};function n1(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var R=g[1];if(Array.isArray(R)&&!(1>R.length)){var D=R[0];if(D!="noop"&&D!="stop"&&D!="close")for(var G=1;G<R.length;G++)R[G]=""}}}}return ps(f)}catch{return d}}var ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ou;function sa(){}P(sa,Vu),sa.prototype.g=function(){return new XMLHttpRequest},sa.prototype.i=function(){return{}},Ou=new sa;function Gn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sp}function sp(){this.i=null,this.g="",this.h=!1}var ip={},Fu={};function Uu(a,d,f){a.L=1,a.v=la(En(d)),a.m=f,a.P=!0,op(a,null)}function op(a,d){a.F=Date.now(),ia(a),a.A=En(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),xp(f.i,"t",g),a.C=0,f=a.j.J,a.h=new sp,a.g=Op(a.j,f?d:null,!a.m),0<a.O&&(a.M=new fs(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(yi[0]=R.toString()),R=yi);for(var D=0;D<R.length;D++){var G=nn(f,R[D],g||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),wi(),Zx(a.i,a.u,a.A,a.l,a.R,a.m)}Gn.prototype.ca=function(a){a=a.target;const d=this.M;d&&Tn(a)==3?d.j():this.Y(a)},Gn.prototype.Y=function(a){try{if(a==this.g)e:{const ot=Tn(this.g);var d=this.g.Ba();const ys=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Sp(this.g)))){this.J||ot!=4||d==7||(d==8||0>=ys?wi(3):wi(2)),zu(this);var f=this.g.Z();this.X=f;t:if(ap(this)){var g=Sp(this.g);a="";var R=g.length,D=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),Ii(this);var G="";break t}this.h.i=new u.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(D&&d==R-1)});g.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,e1(this.i,this.u,this.A,this.l,this.R,ot,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,Xe=this.g;if((xe=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(xe)){var pe=xe;break t}}pe=null}if(f=pe)ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bu(this,f);else{this.o=!1,this.s=3,gt(12),Lr(this),Ii(this);break e}}if(this.P){f=!0;let Ht;for(;!this.J&&this.C<G.length;)if(Ht=r1(this,G),Ht==Fu){ot==4&&(this.s=4,gt(14),f=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==ip){this.s=4,gt(15),ms(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else ms(this.i,this.l,Ht,null),Bu(this,Ht);if(ap(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||G.length!=0||this.h.h||(this.s=1,gt(16),f=!1),this.o=this.o&&f,!f)ms(this.i,this.l,G,"[Invalid Chunked Response]"),Lr(this),Ii(this);else if(0<G.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Ku(it),it.M=!0,gt(11))}}else ms(this.i,this.l,G,null),Bu(this,G);ot==4&&Lr(this),this.o&&!this.J&&(ot==4?Dp(this.j,this):(this.o=!1,ia(this)))}else x1(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Lr(this),Ii(this)}}}catch{}finally{}};function ap(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function r1(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Fu:(f=Number(d.substring(f,g)),isNaN(f)?ip:(g+=1,g+f>d.length?Fu:(d=d.slice(g,g+f),a.C=g+f,d)))}Gn.prototype.cancel=function(){this.J=!0,Lr(this)};function ia(a){a.S=Date.now()+a.I,lp(a,a.I)}function lp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ei(y(a.ba,a),d)}function zu(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Gn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(t1(this.i,this.A),this.L!=2&&(wi(),gt(17)),Lr(this),this.s=2,Ii(this)):lp(this,this.S-a)};function Ii(a){a.j.G==0||a.J||Dp(a.j,a)}function Lr(a){zu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,_i(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Bu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||$u(f.h,a))){if(!a.K&&$u(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var R=g;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)pa(f),ha(f);else break e;Gu(f),gt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ei(y(f.Za,f),6e3));if(1>=dp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Fr(f,11)}else if((a.K||f.g==a)&&pa(f),!T(d))for(R=f.Da.g.parse(d),d=0;d<R.length;d++){let pe=R[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];const it=pe[3];it!=null&&(f.la=it,f.j.info("VER="+f.la));const ot=pe[4];ot!=null&&(f.Aa=ot,f.j.info("SVER="+f.Aa));const ys=pe[5];ys!=null&&typeof ys=="number"&&0<ys&&(g=1.5*ys,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Ht=a.g;if(Ht){const ga=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var D=g.h;D.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(qu(D,D.h),D.h=null))}if(g.D){const Qu=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Qu&&(g.ya=Qu,Ee(g.I,g.D,Qu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var G=a;if(g.qa=Lp(g,g.J?g.ia:null,g.W),G.K){hp(g.h,G);var xe=G,Xe=g.L;Xe&&(xe.I=Xe),xe.B&&(zu(xe),ia(xe)),g.g=G}else Pp(g);0<f.i.length&&fa(f)}else pe[0]!="stop"&&pe[0]!="close"||Fr(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Fr(f,7):Wu(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}wi(4)}catch{}}var s1=class{constructor(a,d){this.g=a,this.map=d}};function up(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dp(a){return a.h?1:a.g?a.g.size:0}function $u(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function qu(a,d){a.g?a.g.add(d):a.h=d}function hp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}up.prototype.cancel=function(){if(this.i=fp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function fp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return j(a.i)}function i1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function o1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function pp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=o1(a),g=i1(a),R=g.length,D=0;D<R;D++)d.call(void 0,g[D],f&&f[D],a)}var mp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function a1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),R=null;if(0<=g){var D=a[f].substring(0,g);R=a[f].substring(g+1)}else D=a[f];d(D,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Or(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Or){this.h=a.h,oa(this,a.j),this.o=a.o,this.g=a.g,aa(this,a.s),this.l=a.l;var d=a.i,f=new Si;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),gp(this,f),this.m=a.m}else a&&(d=String(a).match(mp))?(this.h=!1,oa(this,d[1]||"",!0),this.o=bi(d[2]||""),this.g=bi(d[3]||"",!0),aa(this,d[4]),this.l=bi(d[5]||"",!0),gp(this,d[6]||"",!0),this.m=bi(d[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}Or.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ni(d,vp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ni(d,vp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ni(f,f.charAt(0)=="/"?c1:u1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ni(f,h1)),a.join("")};function En(a){return new Or(a)}function oa(a,d,f){a.j=f?bi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function aa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function gp(a,d,f){d instanceof Si?(a.i=d,f1(a.i,a.h)):(f||(d=Ni(d,d1)),a.i=new Si(d,a.h))}function Ee(a,d,f){a.i.set(d,f)}function la(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function bi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ni(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,l1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function l1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vp=/[#\/\?@]/g,u1=/[#\?:]/g,c1=/[#\?]/g,d1=/[#\?@]/g,h1=/#/g;function Si(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Kn(a){a.g||(a.g=new Map,a.h=0,a.i&&a1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Si.prototype,t.add=function(a,d){Kn(this),this.i=null,a=gs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function yp(a,d){Kn(a),d=gs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function _p(a,d){return Kn(a),d=gs(a,d),a.g.has(d)}t.forEach=function(a,d){Kn(this),this.g.forEach(function(f,g){f.forEach(function(R){a.call(d,R,g,this)},this)},this)},t.na=function(){Kn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const R=a[g];for(let D=0;D<R.length;D++)f.push(d[g])}return f},t.V=function(a){Kn(this);let d=[];if(typeof a=="string")_p(this,a)&&(d=d.concat(this.g.get(gs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Kn(this),this.i=null,a=gs(this,a),_p(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function xp(a,d,f){yp(a,d),0<f.length&&(a.i=null,a.g.set(gs(a,d),j(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const D=encodeURIComponent(String(g)),G=this.V(g);for(g=0;g<G.length;g++){var R=D;G[g]!==""&&(R+="="+encodeURIComponent(String(G[g]))),a.push(R)}}return this.i=a.join("&")};function gs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function f1(a,d){d&&!a.j&&(Kn(a),a.i=null,a.g.forEach(function(f,g){var R=g.toLowerCase();g!=R&&(yp(this,g),xp(this,R,f))},a)),a.j=d}function p1(a,d){const f=new Ti;if(u.Image){const g=new Image;g.onload=A(Qn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=A(Qn,f,"TestLoadImage: error",!1,d,g),g.onabort=A(Qn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=A(Qn,f,"TestLoadImage: timeout",!1,d,g),u.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function m1(a,d){const f=new Ti,g=new AbortController,R=setTimeout(()=>{g.abort(),Qn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(R),D.ok?Qn(f,"TestPingServer: ok",!0,d):Qn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Qn(f,"TestPingServer: error",!1,d)})}function Qn(a,d,f,g,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),g(f)}catch{}}function g1(){this.g=new Vr}function v1(a,d,f){const g=f||"";try{pp(a,function(R,D){let G=R;h(R)&&(G=ps(R)),d.push(g+D+"="+encodeURIComponent(G))})}catch(R){throw d.push(g+"type="+encodeURIComponent("_badmap")),R}}function ua(a){this.l=a.Ub||null,this.j=a.eb||!1}P(ua,Vu),ua.prototype.g=function(){return new ca(this.l,this.j)},ua.prototype.i=function(a){return function(){return a}}({});function ca(a,d){Se.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(ca,Se),t=ca.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,ki(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function wp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ai(this):ki(this),this.readyState==3&&wp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ai(this))},t.Qa=function(a){this.g&&(this.response=a,Ai(this))},t.ga=function(){this.g&&Ai(this)};function Ai(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ki(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function ki(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ep(a){let d="";return q(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Hu(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Ep(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ee(a,d,f))}function De(a){Se.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(De,Se);var y1=/^https?$/i,_1=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ou.g(),this.v=this.o?Xf(this.o):Xf(Ou),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Tp(this,D);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var R in g)f.set(R,g[R]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())f.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),R=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(_1,d,void 0))||g||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,G]of f)this.g.setRequestHeader(D,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Tp(this,D)}};function Tp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Ip(a),da(a)}function Ip(a){a.A||(a.A=!0,Le(a,"complete"),Le(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Le(this,"complete"),Le(this,"abort"),da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bp(this):this.bb())},t.bb=function(){bp(this)};function bp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Tn(a)!=4||a.Z()!=2)){if(a.u&&Tn(a)==4)Wn(a.Ea,0,a);else if(Le(a,"readystatechange"),Tn(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=G===0){var R=String(a.D).match(mp)[1]||null;!R&&u.self&&u.self.location&&(R=u.self.location.protocol.slice(0,-1)),g=!y1.test(R?R.toLowerCase():"")}f=g}if(f)Le(a,"complete"),Le(a,"success");else{a.m=6;try{var D=2<Tn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Ip(a)}}finally{da(a)}}}}function da(a,d){if(a.g){Np(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Le(a,"ready");try{f.onreadystatechange=g}catch{}}}function Np(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Tn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Du(d)}};function Sp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function x1(a){const d={};a=(a.g&&2<=Tn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(T(a[g]))continue;var f=S(a[g]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[R]||[];d[R]=D,D.push(f)}_(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Ap(a){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,a),this.cb=Ci("retryDelaySeedMs",1e4,a),this.Wa=Ci("forwardChannelMaxRetries",2,a),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new up(a&&a.concurrentRequestLimit),this.Da=new g1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ap.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){gt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Lp(this,null,this.W),fa(this)};function Wu(a){if(kp(a),a.G==3){var d=a.U++,f=En(a.I);if(Ee(f,"SID",a.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),Ri(a,f),d=new Gn(a,a.j,d),d.L=2,d.v=la(En(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=Op(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ia(d)}Mp(a)}function ha(a){a.g&&(Ku(a),a.g.cancel(),a.g=null)}function kp(a){ha(a),a.u&&(u.clearTimeout(a.u),a.u=null),pa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function fa(a){if(!cp(a.h)&&!a.s){a.s=!0;var d=a.Ga;Z||J(),L||(Z(),L=!0),W.add(d,a),a.B=0}}function w1(a,d){return dp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ei(y(a.Ga,a,d),Vp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Gn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=v(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(R.H=D,D=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Rp(this,R,d),f=En(this.I),Ee(f,"RID",a),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),Ri(this,f),D&&(this.O?d="headers="+encodeURIComponent(String(Ep(D)))+"&"+d:this.m&&Hu(f,this.m,D)),qu(this.h,R),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),R.T=!0,Uu(R,f,null)):Uu(R,f,d),this.G=2}}else this.G==3&&(a?Cp(this,a):this.i.length==0||cp(this.h)||Cp(this))};function Cp(a,d){var f;d?f=d.l:f=a.U++;const g=En(a.I);Ee(g,"SID",a.K),Ee(g,"RID",f),Ee(g,"AID",a.T),Ri(a,g),a.m&&a.o&&Hu(g,a.m,a.o),f=new Gn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Rp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),qu(a.h,f),Uu(f,g,d)}function Ri(a,d){a.H&&q(a.H,function(f,g){Ee(d,g,f)}),a.l&&pp({},function(f,g){Ee(d,g,f)})}function Rp(a,d,f){f=Math.min(a.i.length,f);var g=a.l?y(a.l.Na,a.l,a):null;e:{var R=a.i;let D=-1;for(;;){const G=["count="+f];D==-1?0<f?(D=R[0].g,G.push("ofs="+D)):D=0:G.push("ofs="+D);let xe=!0;for(let Xe=0;Xe<f;Xe++){let pe=R[Xe].g;const it=R[Xe].map;if(pe-=D,0>pe)D=Math.max(0,R[Xe].g-100),xe=!1;else try{v1(it,G,"req"+pe+"_")}catch{g&&g(it)}}if(xe){g=G.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function Pp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Z||J(),L||(Z(),L=!0),W.add(d,a),a.v=0}}function Gu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ei(y(a.Fa,a),Vp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,jp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ei(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ha(this),jp(this))};function Ku(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function jp(a){a.g=new Gn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=En(a.qa);Ee(d,"RID","rpc"),Ee(d,"SID",a.K),Ee(d,"AID",a.T),Ee(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(d,"TO",a.ja),Ee(d,"TYPE","xmlhttp"),Ri(a,d),a.m&&a.o&&Hu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=la(En(d)),f.m=null,f.P=!0,op(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ha(this),Gu(this),gt(19))};function pa(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Dp(a,d){var f=null;if(a.g==d){pa(a),Ku(a),a.g=null;var g=2}else if($u(a.h,d))f=d.D,hp(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var R=a.B;g=na(),Le(g,new np(g,f)),fa(a)}else Pp(a);else if(R=d.s,R==3||R==0&&0<d.X||!(g==1&&w1(a,d)||g==2&&Gu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),R){case 1:Fr(a,5);break;case 4:Fr(a,10);break;case 3:Fr(a,6);break;default:Fr(a,2)}}}function Vp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Fr(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),g=a.Xa;const R=!g;g=new Or(g||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||oa(g,"https"),la(g),R?p1(g.toString(),f):m1(g.toString(),f)}else gt(2);a.G=0,a.l&&a.l.sa(d),Mp(a),kp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Mp(a){if(a.G=0,a.ka=[],a.l){const d=fp(a.h);(d.length!=0||a.i.length!=0)&&(F(a.ka,d),F(a.ka,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.ra()}}function Lp(a,d,f){var g=f instanceof Or?En(f):new Or(f);if(g.g!="")d&&(g.g=d+"."+g.g),aa(g,g.s);else{var R=u.location;g=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var D=new Or(null);g&&oa(D,g),d&&(D.g=d),R&&aa(D,R),f&&(D.l=f),g=D}return f=a.D,d=a.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",a.la),Ri(a,g),g}function Op(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new De(new ua({eb:f})):new De(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fp(){}t=Fp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ma(){}ma.prototype.g=function(a,d){return new kt(a,d)};function kt(a,d){Se.call(this),this.g=new Ap(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!T(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!T(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new vs(this)}P(kt,Se),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Wu(this.g)},kt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ps(a),a=f);d.i.push(new s1(d.Ya++,a)),d.G==3&&fa(d)},kt.prototype.N=function(){this.g.l=null,delete this.j,Wu(this.g),delete this.g,kt.aa.N.call(this)};function Up(a){Mu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}P(Up,Mu);function zp(){Lu.call(this),this.status=1}P(zp,Lu);function vs(a){this.g=a}P(vs,Fp),vs.prototype.ua=function(){Le(this.g,"a")},vs.prototype.ta=function(a){Le(this.g,new Up(a))},vs.prototype.sa=function(a){Le(this.g,new zp)},vs.prototype.ra=function(){Le(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,Ky=function(){return new ma},Gy=function(){return na()},Wy=Mr,Md={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ra.NO_ERROR=0,ra.TIMEOUT=8,ra.HTTP_ERROR=6,Xa=ra,rp.COMPLETE="complete",Hy=rp,Jf.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",Se.prototype.listen=Se.prototype.K,Hi=Jf,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,qy=De}).apply(typeof Da<"u"?Da:typeof self<"u"?self:typeof window<"u"?window:{});const ag="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new ef("@firebase/firestore");function Ui(){return ns.logLevel}function X(t,...e){if(ns.logLevel<=de.DEBUG){const n=e.map(rf);ns.debug(`Firestore (${hi}): ${t}`,...n)}}function On(t,...e){if(ns.logLevel<=de.ERROR){const n=e.map(rf);ns.error(`Firestore (${hi}): ${t}`,...n)}}function ti(t,...e){if(ns.logLevel<=de.WARN){const n=e.map(rf);ns.warn(`Firestore (${hi}): ${t}`,...n)}}function rf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${hi}) INTERNAL ASSERTION FAILED: `+t;throw On(e),new Error(e)}function ye(t,e){t||se()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class PI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jI{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Qy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new ct(e)}}class DI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class VI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new MI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=OI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new He(0,0))}static max(){return new oe(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ao.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ao?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends Ao{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const FI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Ao{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return FI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Y(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new Y(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ie.fromString(e))}static fromName(e){return new te(Ie.fromString(e).popFirst(5))}static empty(){return new te(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ie(e.slice()))}}function UI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new br(s,te.empty(),e)}function zI(t){return new br(t.readTime,t.key,-1)}class br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new br(oe.min(),te.empty(),-1)}static max(){return new br(oe.max(),te.empty(),-1)}}function BI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==$I)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++u,u===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function HI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sf.oe=-1;function vu(t){return t==null}function Dl(t){return t===0&&1/t==-1/0}function WI(t){return typeof t=="number"&&Number.isInteger(t)&&!Dl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}}class Va{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ug(this.data.getIterator())}getIteratorFrom(e){return new ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class ug{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new nt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Jy("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const GI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=GI.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function af(t){const e=t.mapValue.fields.__previous_value__;return of(e)?af(e):e}function ko(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r,s,i,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class Co{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?of(t)?4:YI(t)?9007199254740991:QI(t)?10:11:se()}function xn(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ko(t).isEqual(ko(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Nr(s.timestampValue),u=Nr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return rs(s.bytesValue).isEqual(rs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),u=Oe(i.doubleValue);return o===u?Dl(o)===Dl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ni(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(lg(o)!==lg(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!xn(o[c],u[c])))return!1;return!0}(t,e);default:return se()}}function Ro(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function ri(t,e){if(t===e)return 0;const n=ss(t),r=ss(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Oe(i.integerValue||i.doubleValue),c=Oe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return cg(t.timestampValue,e.timestampValue);case 4:return cg(ko(t),ko(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const u=rs(i),c=rs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=me(u[h],c[h]);if(p!==0)return p}return me(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=me(Oe(i.latitude),Oe(o.latitude));return u!==0?u:me(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,h,p;const m=i.fields||{},y=o.fields||{},A=(u=m.value)===null||u===void 0?void 0:u.arrayValue,P=(c=y.value)===null||c===void 0?void 0:c.arrayValue,j=me(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((p=P==null?void 0:P.values)===null||p===void 0?void 0:p.length)||0);return j!==0?j:dg(A,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ma.mapValue&&o===Ma.mapValue)return 0;if(i===Ma.mapValue)return 1;if(o===Ma.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=me(c[m],p[m]);if(y!==0)return y;const A=ri(u[c[m]],h[p[m]]);if(A!==0)return A}return me(c.length,p.length)}(t.mapValue,e.mapValue);default:throw se()}}function cg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Nr(t),r=Nr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function dg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ri(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function si(t){return Ld(t)}function Ld(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ld(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ld(n.fields[o])}`;return s+"}"}(t.mapValue):se()}function hg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Od(t){return!!t&&"integerValue"in t}function lf(t){return!!t&&"arrayValue"in t}function fg(t){return!!t&&"nullValue"in t}function pg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ja(t){return!!t&&"mapValue"in t}function QI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function so(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=so(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=so(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=so(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=so(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ft(so(this.value))}}function Zy(t){const e=[];return fi(t.fields,(n,r)=>{const s=new et([n]);if(Ja(r)){const i=Zy(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new ht(e,0,oe.min(),oe.min(),oe.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,oe.min(),oe.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,oe.min(),oe.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.position=e,this.inclusive=n}}function mg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n="asc"){this.field=e,this.dir=n}}function XI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e_=class{};class Be extends e_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ZI(e,n,r):n==="array-contains"?new nb(e,r):n==="in"?new rb(e,r):n==="not-in"?new sb(e,r):n==="array-contains-any"?new ib(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new eb(e,r):new tb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ri(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tn extends e_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new tn(e,n)}matches(e){return t_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function t_(t){return t.op==="and"}function n_(t){return JI(t)&&t_(t)}function JI(t){for(const e of t.filters)if(e instanceof tn)return!1;return!0}function Fd(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+si(t.value);if(n_(t))return t.filters.map(e=>Fd(e)).join(",");{const e=t.filters.map(n=>Fd(n)).join(",");return`${t.op}(${e})`}}function r_(t,e){return t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof tn?function(r,s){return s instanceof tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&r_(o,s.filters[u]),!0):!1}(t,e):void se()}function s_(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${si(n.value)}`}(t):t instanceof tn?function(n){return n.op.toString()+" {"+n.getFilters().map(s_).join(" ,")+"}"}(t):"Filter"}class ZI extends Be{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class eb extends Be{constructor(e,n){super(e,"in",n),this.keys=i_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tb extends Be{constructor(e,n){super(e,"not-in",n),this.keys=i_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function i_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class nb extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lf(n)&&Ro(n.arrayValue,this.value)}}class rb extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ro(this.value.arrayValue,n)}}class sb extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ro(this.value.arrayValue,n)}}class ib extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ro(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function vg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new ob(t,e,n,r,s,i,o)}function uf(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>si(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>si(r)).join(",")),e.ue=n}return e.ue}function cf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!r_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gg(t.startAt,e.startAt)&&gg(t.endAt,e.endAt)}function Ud(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ab(t,e,n,r,s,i,o,u){return new pi(t,e,n,r,s,i,o,u)}function df(t){return new pi(t)}function yg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o_(t){return t.collectionGroup!==null}function io(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new nt(et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Po(i,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new Po(et.keyField(),r))}return e.ce}function mn(t){const e=ae(t);return e.le||(e.le=lb(e,io(t))),e.le}function lb(t,e){if(t.limitType==="F")return vg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Po(s.field,i)});const n=t.endAt?new Vl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vl(t.startAt.position,t.startAt.inclusive):null;return vg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zd(t,e){const n=t.filters.concat([e]);return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bd(t,e,n){return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yu(t,e){return cf(mn(t),mn(e))&&t.limitType===e.limitType}function a_(t){return`${uf(mn(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>s_(s)).join(", ")}]`),vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>si(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>si(s)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function _u(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of io(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=mg(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,io(r),s)||r.endAt&&!function(o,u,c){const h=mg(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,io(r),s))}(t,e)}function ub(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function l_(t){return(e,n)=>{let r=!1;for(const s of io(t)){const i=cb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function cb(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?ri(c,h):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Xy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new je(te.comparator);function Fn(){return db}const u_=new je(te.comparator);function Wi(...t){let e=u_;for(const n of t)e=e.insert(n.key,n);return e}function c_(t){let e=u_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wr(){return oo()}function d_(){return oo()}function oo(){return new mi(t=>t.toString(),(t,e)=>t.isEqual(e))}const hb=new je(te.comparator),fb=new nt(te.comparator);function ce(...t){let e=fb;for(const n of t)e=e.add(n);return e}const pb=new nt(me);function mb(){return pb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dl(e)?"-0":e}}function h_(t){return{integerValue:""+t}}function gb(t,e){return WI(e)?h_(e):hf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this._=void 0}}function vb(t,e,n){return t instanceof Ml?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&of(i)&&(i=af(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof jo?p_(t,e):t instanceof Do?m_(t,e):function(s,i){const o=f_(s,i),u=_g(o)+_g(s.Pe);return Od(o)&&Od(s.Pe)?h_(u):hf(s.serializer,u)}(t,e)}function yb(t,e,n){return t instanceof jo?p_(t,e):t instanceof Do?m_(t,e):n}function f_(t,e){return t instanceof Ll?function(r){return Od(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ml extends xu{}class jo extends xu{constructor(e){super(),this.elements=e}}function p_(t,e){const n=g_(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Do extends xu{constructor(e){super(),this.elements=e}}function m_(t,e){let n=g_(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Ll extends xu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _g(t){return Oe(t.integerValue||t.doubleValue)}function g_(t){return lf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _b(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jo&&s instanceof jo||r instanceof Do&&s instanceof Do?ni(r.elements,s.elements,xn):r instanceof Ll&&s instanceof Ll?xn(r.Pe,s.Pe):r instanceof Ml&&s instanceof Ml}(t.transform,e.transform)}class xb{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Za(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wu{}function v_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ff(t.key,Zt.none()):new Wo(t.key,t.data,Zt.none());{const n=t.data,r=Ft.empty();let s=new nt(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new us(t.key,r,new Yt(s.toArray()),Zt.none())}}function wb(t,e,n){t instanceof Wo?function(s,i,o){const u=s.value.clone(),c=wg(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof us?function(s,i,o){if(!Za(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=wg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(y_(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ao(t,e,n,r){return t instanceof Wo?function(i,o,u,c){if(!Za(i.precondition,o))return u;const h=i.value.clone(),p=Eg(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(i,o,u,c){if(!Za(i.precondition,o))return u;const h=Eg(i.fieldTransforms,c,o),p=o.data;return p.setAll(y_(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return Za(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function Eb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=f_(r.transform,s||null);i!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,i))}return n||null}function xg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ni(r,s,(i,o)=>_b(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wo extends wu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends wu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function y_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wg(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,yb(o,u,n[s]))}return r}function Eg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,vb(i,o,e))}return r}class ff extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tb extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&wb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=d_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=v_(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ni(this.mutations,e.mutations,(n,r)=>xg(n,r))&&ni(this.baseMutations,e.baseMutations,(n,r)=>xg(n,r))}}class pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return hb}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new pf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,he;function Sb(t){switch(t){default:return se();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function __(t){if(t===void 0)return On("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ue.OK:return O.OK;case Ue.CANCELLED:return O.CANCELLED;case Ue.UNKNOWN:return O.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return O.INTERNAL;case Ue.UNAVAILABLE:return O.UNAVAILABLE;case Ue.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ue.NOT_FOUND:return O.NOT_FOUND;case Ue.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ue.ABORTED:return O.ABORTED;case Ue.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ue.DATA_LOSS:return O.DATA_LOSS;default:return se()}}(he=Ue||(Ue={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Qr([4294967295,4294967295],0);function Tg(t){const e=Ab().encode(t),n=new $y;return n.update(e),new Uint8Array(n.digest())}function Ig(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([s,i],0)]}class mf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gi(`Invalid padding: ${n}`);if(r<0)throw new Gi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Qr.fromNumber(r)));return s.compare(kb)===1&&(s=new Qr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Tg(e),[r,s]=Ig(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mf(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=Tg(e),[r,s]=Ig(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Go.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Eu(oe.min(),s,new je(me),Fn(),ce())}}class Go{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Go(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class x_{constructor(e,n){this.targetId=e,this.me=n}}class w_{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class bg{constructor(){this.fe=0,this.ge=Sg(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se()}}),new Go(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Sg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Cb{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fn(),this.qe=Ng(),this.Qe=new je(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ud(i))if(r===0){const o=new te(i.path);this.Ue(n,o,ht.newNoDocument(o,oe.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=rs(r).toUint8Array()}catch(c){if(c instanceof Jy)return ti("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new mf(o,s,i)}catch(c){return ti(c instanceof Gi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&Ud(u.target)){const c=new te(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ht.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Eu(e,n,this.Qe,this.ke,r);return this.ke=Fn(),this.qe=Ng(),this.Qe=new je(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new bg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ng(){return new je(te.comparator)}function Sg(){return new je(te.comparator)}const Rb=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Pb=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),jb=(()=>({and:"AND",or:"OR"}))();class Db{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $d(t,e){return t.useProto3Json||vu(e)?e:{value:e}}function Ol(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Vb(t,e){return Ol(t,e.toTimestamp())}function gn(t){return ye(!!t),oe.fromTimestamp(function(n){const r=Nr(n);return new He(r.seconds,r.nanos)}(t))}function gf(t,e){return qd(t,e).canonicalString()}function qd(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T_(t){const e=Ie.fromString(t);return ye(A_(e)),e}function Hd(t,e){return gf(t.databaseId,e.path)}function Sc(t,e){const n=T_(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(b_(n))}function I_(t,e){return gf(t.databaseId,e)}function Mb(t){const e=T_(t);return e.length===4?Ie.emptyPath():b_(e)}function Wd(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function b_(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ag(t,e,n){return{name:Hd(t,e),fields:n.value.mapValue.fields}}function Lb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ye(p===void 0||typeof p=="string"),st.fromBase64String(p||"")):(ye(p===void 0||p instanceof Buffer||p instanceof Uint8Array),st.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const p=h.code===void 0?O.UNKNOWN:__(h.code);return new Y(p,h.message||"")}(o);n=new w_(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sc(t,r.document.name),i=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):oe.min(),u=new Ft({mapValue:{fields:r.document.fields}}),c=ht.newFoundDocument(s,i,o,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new el(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sc(t,r.document),i=r.readTime?gn(r.readTime):oe.min(),o=ht.newNoDocument(s,i),u=r.removedTargetIds||[];n=new el([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sc(t,r.document),i=r.removedTargetIds||[];n=new el([],i,s,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Nb(s,i),u=r.targetId;n=new x_(u,o)}}return n}function Ob(t,e){let n;if(e instanceof Wo)n={update:Ag(t,e.key,e.value)};else if(e instanceof ff)n={delete:Hd(t,e.key)};else if(e instanceof us)n={update:Ag(t,e.key,e.data),updateMask:Gb(e.fieldMask)};else{if(!(e instanceof Tb))return se();n={verify:Hd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ml)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Do)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ll)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Vb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se()}(t,e.precondition)),n}function Fb(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?gn(s.updateTime):gn(i);return o.isEqual(oe.min())&&(o=gn(i)),new xb(o,s.transformResults||[])}(n,e))):[]}function Ub(t,e){return{documents:[I_(t,e.path)]}}function zb(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=I_(t,s);const i=function(h){if(h.length!==0)return S_(tn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:ws(y.field),direction:qb(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=$d(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function Bb(t){let e=Mb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const y=N_(m);return y instanceof tn&&n_(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(P){return new Po(Es(P.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let u=null;n.limit&&(u=function(m){let y;return y=typeof m=="object"?m.value:m,vu(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,A=m.values||[];return new Vl(A,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,A=m.values||[];return new Vl(A,y)}(n.endAt)),ab(e,s,o,i,u,"F",c,h)}function $b(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function N_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Es(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Es(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Es(n.unaryFilter.field);return Be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Es(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return Be.create(Es(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tn.create(n.compositeFilter.filters.map(r=>N_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function qb(t){return Rb[t]}function Hb(t){return Pb[t]}function Wb(t){return jb[t]}function ws(t){return{fieldPath:t.canonicalString()}}function Es(t){return et.fromServerFormat(t.fieldPath)}function S_(t){return t instanceof Be?function(n){if(n.op==="=="){if(pg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(fg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(fg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:Hb(n.op),value:n.value}}}(t):t instanceof tn?function(n){const r=n.getFilters().map(s=>S_(s));return r.length===1?r[0]:{compositeFilter:{op:Wb(n.op),filters:r}}}(t):se()}function Gb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function A_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),u=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.ct=e}}function Qb(t){const e=Bb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.un=new Xb}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(br.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class Xb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new nt(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new nt(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ii(0)}static kn(){return new ii(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.changes=new mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ao(r.mutation,s,Yt.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Wr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Wi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Fn();const o=oo(),u=function(){return oo()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof us)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),ao(p.mutation,h,p.mutation.getFieldMask(),He.now())):o.set(h.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return u.set(h,new Zb(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=oo();let s=new je((o,u)=>o-u),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||Yt.empty();p=u.applyToLocalView(h,p),r.set(c,p);const m=(s.get(u.batchId)||ce()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,m=d_();p.forEach(y=>{if(!i.has(y)){const A=v_(n.get(y),r.get(y));A!==null&&m.set(y,A),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Wr());let u=-1,c=i;return o.next(h=>z.forEach(h,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,ce())).next(p=>({batchId:u,changes:c_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Wi();return this.indexManager.getCollectionParents(e,i).next(u=>z.forEach(u,c=>{const h=function(m,y){return new pi(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,ht.newInvalidDocument(p)))});let u=Wi();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&ao(p.mutation,h,Yt.empty(),He.now()),_u(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:gn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Qb(s.bundledQuery),readTime:gn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.overlays=new je(te.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wr();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Wr(),i=n.length+1,o=new te(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Wr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=Wr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=s)););return z.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bb(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Tr=new nt(We.Er),this.dr=new nt(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Ie([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Ie([])),r=new We(n,e),s=new We(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new nt(We.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ib(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new We(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(me);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new We(new te(i),0);let u=new nt(me);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.wr)),!0)},o),z.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.Mr=e,this.docs=function(){return new je(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fn();const o=n.path,u=new te(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||BI(zI(p),r)<=0||(s.has(p.key)||_u(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new o2(this)}getSize(e){return z.resolve(this.size)}}class o2 extends Jb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.persistence=e,this.Nr=new mi(n=>uf(n),cf),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vf,this.targetCount=0,this.kr=ii.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ii(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sf(0),this.Kr=!1,this.Kr=!0,this.$r=new r2,this.referenceDelegate=e(this),this.Ur=new a2(this),this.indexManager=new Yb,this.remoteDocumentCache=function(s){return new i2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Kb(n),this.Gr=new t2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new n2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new s2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new u2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class u2 extends qI{constructor(e){super(),this.currentSequenceNumber=e}}class yf{constructor(e){this.persistence=e,this.Jr=new vf,this.Yr=null}static Zr(e){return new yf(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _f(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hT()?8:HI(pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new c2;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ui()<=de.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Ui()<=de.DEBUG&&X("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ui()<=de.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):z.resolve())}Yi(e,n){if(yg(n))return z.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Bd(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,Bd(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return yg(n)||s.isEqual(oe.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(Ui()<=de.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xs(n)),this.rs(e,o,n,UI(s,-1)).next(u=>u))})}ts(e,n){let r=new nt(l_(e));return n.forEach((s,i)=>{_u(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ui()<=de.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,br.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new je(me),this._s=new mi(i=>uf(i),cf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function f2(t,e,n,r){return new h2(t,e,n,r)}async function k_(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ce();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function p2(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const m=h.batch,y=m.keys();let A=z.resolve();return y.forEach(P=>{A=A.next(()=>p.getEntry(c,P)).next(j=>{const F=h.docVersions.get(P);ye(F!==null),j.version.compareTo(F)<0&&(m.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ce();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function C_(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function m2(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const y=s.get(m);if(!y)return;u.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let A=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(st.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),s=s.insert(m,A),function(j,F,I){return j.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,A,p)&&u.push(n.Ur.updateTargetData(i,A))});let c=Fn(),h=ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),u.push(g2(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(oe.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(p)}return z.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function g2(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):X("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function v2(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y2(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Gd(t,e,n){const r=ae(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ho(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function kg(t,e,n){const r=ae(t);let s=oe.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=ae(c),y=m._s.get(p);return y!==void 0?z.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)}(r,o,mn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:ce())).next(u=>(_2(r,ub(e),u),{documents:u,Ts:i})))}function _2(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Cg{constructor(){this.activeTargetIds=mb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x2{constructor(){this.so=new Cg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La=null;function Ac(){return La===null?La=function(){return 268435456+Math.round(2147483648*Math.random())}():La++,"0x"+La.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class I2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=Ac(),c=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(X("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw ti("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=E2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Ac();return new Promise((o,u)=>{const c=new qy;c.setWithCredentials(!0),c.listenOnce(Hy.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xa.NO_ERROR:const p=c.getResponseJson();X(ut,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Xa.TIMEOUT:X(ut,`RPC '${e}' ${i} timed out`),u(new Y(O.DEADLINE_EXCEEDED,"Request time out"));break;case Xa.HTTP_ERROR:const m=c.getStatus();if(X(ut,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const A=y==null?void 0:y.error;if(A&&A.status&&A.message){const P=function(F){const I=F.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(I)>=0?I:O.UNKNOWN}(A.status);u(new Y(P,A.message))}else u(new Y(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Y(O.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{X(ut,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);X(ut,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Ac(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ky(),u=Gy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");X(ut,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let y=!1,A=!1;const P=new T2({Io:F=>{A?X(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(y||(X(ut,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),X(ut,`RPC '${e}' stream ${s} sending:`,F),m.send(F))},To:()=>m.close()}),j=(F,I,T)=>{F.listen(I,b=>{try{T(b)}catch(V){setTimeout(()=>{throw V},0)}})};return j(m,Hi.EventType.OPEN,()=>{A||(X(ut,`RPC '${e}' stream ${s} transport opened.`),P.yo())}),j(m,Hi.EventType.CLOSE,()=>{A||(A=!0,X(ut,`RPC '${e}' stream ${s} transport closed`),P.So())}),j(m,Hi.EventType.ERROR,F=>{A||(A=!0,ti(ut,`RPC '${e}' stream ${s} transport errored:`,F),P.So(new Y(O.UNAVAILABLE,"The operation could not be completed")))}),j(m,Hi.EventType.MESSAGE,F=>{var I;if(!A){const T=F.data[0];ye(!!T);const b=T,V=b.error||((I=b[0])===null||I===void 0?void 0:I.error);if(V){X(ut,`RPC '${e}' stream ${s} received error:`,V);const M=V.status;let q=function(x){const E=Ue[x];if(E!==void 0)return __(E)}(M),_=V.message;q===void 0&&(q=O.INTERNAL,_="Unknown error status: "+M+" with message "+V.message),A=!0,P.So(new Y(q,_)),m.close()}else X(ut,`RPC '${e}' stream ${s} received:`,T),P.bo(T)}}),j(u,Wy.STAT_EVENT,F=>{F.stat===Md.PROXY?X(ut,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===Md.NOPROXY&&X(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function kc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return new Db(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new R_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class b2 extends P_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Lb(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?gn(o.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Wd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Ud(c)?{documents:Ub(i,c)}:{query:zb(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=E_(i,o.resumeToken);const h=$d(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(oe.min())>0){u.readTime=Ol(i,o.snapshotVersion.toTimestamp());const h=$d(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=$b(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Wd(this.serializer),n.removeTarget=e,this.a_(n)}}class N2 extends P_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Fb(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Wd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ob(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,qd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,qd(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class A2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(On(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{cs(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ae(c);h.L_.add(4),await Ko(h),h.q_.set("Unknown"),h.L_.delete(4),await Iu(h)}(this))})}),this.q_=new A2(r,s)}}async function Iu(t){if(cs(t))for(const e of t.B_)await e(!0)}async function Ko(t){for(const e of t.B_)await e(!1)}function j_(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Tf(n)?Ef(n):gi(n).r_()&&wf(n,e))}function xf(t,e){const n=ae(t),r=gi(n);n.N_.delete(e),r.r_()&&D_(n,e),n.N_.size===0&&(r.r_()?r.o_():cs(n)&&n.q_.set("Unknown"))}function wf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gi(t).A_(e)}function D_(t,e){t.Q_.xe(e),gi(t).R_(e)}function Ef(t){t.Q_=new Cb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),gi(t).start(),t.q_.v_()}function Tf(t){return cs(t)&&!gi(t).n_()&&t.N_.size>0}function cs(t){return ae(t).L_.size===0}function V_(t){t.Q_=void 0}async function C2(t){t.q_.set("Online")}async function R2(t){t.N_.forEach((e,n)=>{wf(t,e)})}async function P2(t,e){V_(t),Tf(t)?(t.q_.M_(e),Ef(t)):t.q_.set("Unknown")}async function j2(t,e,n){if(t.q_.set("Online"),e instanceof w_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fl(t,r)}else if(e instanceof el?t.Q_.Ke(e):e instanceof x_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await C_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(st.EMPTY_BYTE_STRING,p.snapshotVersion)),D_(i,c);const m=new lr(p.target,c,h,p.sequenceNumber);wf(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Fl(t,r)}}async function Fl(t,e,n){if(!Ho(e))throw e;t.L_.add(1),await Ko(t),t.q_.set("Offline"),n||(n=()=>C_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Iu(t)})}function M_(t,e){return e().catch(n=>Fl(t,n,e))}async function bu(t){const e=ae(t),n=Sr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;D2(e);)try{const s=await v2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,V2(e,s)}catch(s){await Fl(e,s)}L_(e)&&O_(e)}function D2(t){return cs(t)&&t.O_.length<10}function V2(t,e){t.O_.push(e);const n=Sr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function L_(t){return cs(t)&&!Sr(t).n_()&&t.O_.length>0}function O_(t){Sr(t).start()}async function M2(t){Sr(t).p_()}async function L2(t){const e=Sr(t);for(const n of t.O_)e.m_(n.mutations)}async function O2(t,e,n){const r=t.O_.shift(),s=pf.from(r,e,n);await M_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bu(t)}async function F2(t,e){e&&Sr(t).V_&&await async function(r,s){if(function(o){return Sb(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();Sr(r).s_(),await M_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bu(r)}}(t,e),L_(t)&&O_(t)}async function Pg(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=cs(n);n.L_.add(3),await Ko(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Iu(n)}async function U2(t,e){const n=ae(t);e?(n.L_.delete(2),await Iu(n)):e||(n.L_.add(2),await Ko(n),n.q_.set("Unknown"))}function gi(t){return t.K_||(t.K_=function(n,r,s){const i=ae(n);return i.w_(),new b2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:C2.bind(null,t),Ro:R2.bind(null,t),mo:P2.bind(null,t),d_:j2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Tf(t)?Ef(t):t.q_.set("Unknown")):(await t.K_.stop(),V_(t))})),t.K_}function Sr(t){return t.U_||(t.U_=function(n,r,s){const i=ae(n);return i.w_(),new N2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:M2.bind(null,t),mo:F2.bind(null,t),f_:L2.bind(null,t),g_:O2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bu(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new If(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bf(t,e){if(On("AsyncQueue",`${e}: ${t}`),Ho(t))return new Y(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Wi(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new Bs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.W_=new je(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oi{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new oi(e,n,Bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class B2{constructor(){this.queries=Dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=Dg(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new Y(O.ABORTED,"Firestore shutting down"))}}function Dg(){return new mi(t=>a_(t),yu)}async function F_(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new z2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=bf(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Nf(n)}async function U_(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $2(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Nf(n)}function q2(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Nf(t){t.Y_.forEach(e=>{e.next()})}var Kd,Vg;(Vg=Kd||(Kd={})).ea="default",Vg.Cache="cache";class z_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Kd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.key=e}}class $_{constructor(e){this.key=e}}class H2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=l_(e),this.Ra=new Bs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new jg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const y=s.get(p),A=_u(this.query,m)?m:null,P=!!y&&this.mutatedKeys.has(y.key),j=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let F=!1;y&&A?y.data.isEqual(A.data)?P!==j&&(r.track({type:3,doc:A}),F=!0):this.ga(y,A)||(r.track({type:2,doc:A}),F=!0,(c&&this.Aa(A,c)>0||h&&this.Aa(A,h)<0)&&(u=!0)):!y&&A?(r.track({type:0,doc:A}),F=!0):y&&!A&&(r.track({type:1,doc:y}),F=!0,(c||h)&&(u=!0)),F&&(A?(o=o.add(A),i=j?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(A,P){const j=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return j(A)-j(P)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new oi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new $_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new B_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class W2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class G2{constructor(e){this.key=e,this.va=!1}}class K2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new mi(u=>a_(u),yu),this.Ma=new Map,this.xa=new Set,this.Oa=new je(te.comparator),this.Na=new Map,this.La=new vf,this.Ba={},this.ka=new Map,this.qa=ii.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Q2(t,e,n=!0){const r=Q_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await q_(r,e,n,!0),s}async function Y2(t,e){const n=Q_(t);await q_(n,e,!0,!1)}async function q_(t,e,n,r){const s=await y2(t.localStore,mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await X2(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&j_(t.remoteStore,s),u}async function X2(t,e,n,r,s){t.Ka=(m,y,A)=>async function(j,F,I,T){let b=F.view.ma(I);b.ns&&(b=await kg(j.localStore,F.query,!1).then(({documents:_})=>F.view.ma(_,b)));const V=T&&T.targetChanges.get(F.targetId),M=T&&T.targetMismatches.get(F.targetId)!=null,q=F.view.applyChanges(b,j.isPrimaryClient,V,M);return Lg(j,F.targetId,q.wa),q.snapshot}(t,m,y,A);const i=await kg(t.localStore,e,!0),o=new H2(e,i.Ts),u=o.ma(i.documents),c=Go.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);Lg(t,n,h.wa);const p=new W2(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function J2(t,e,n){const r=ae(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!yu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Gd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xf(r.remoteStore,s.targetId),Qd(r,s.targetId)}).catch(qo)):(Qd(r,s.targetId),await Gd(r.localStore,s.targetId,!0))}async function Z2(t,e){const n=ae(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xf(n.remoteStore,r.targetId))}async function eN(t,e,n){const r=aN(t);try{const s=await function(o,u){const c=ae(o),h=He.now(),p=u.reduce((A,P)=>A.add(P.key),ce());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let P=Fn(),j=ce();return c.cs.getEntries(A,p).next(F=>{P=F,P.forEach((I,T)=>{T.isValidDocument()||(j=j.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,P)).next(F=>{m=F;const I=[];for(const T of u){const b=Eb(T,m.get(T.key).overlayedDocument);b!=null&&I.push(new us(T.key,b,Zy(b.value.mapValue),Zt.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,I,u)}).next(F=>{y=F;const I=F.applyToLocalDocumentSet(m,j);return c.documentOverlayCache.saveOverlays(A,F.batchId,I)})}).then(()=>({batchId:y.batchId,changes:c_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new je(me)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Qo(r,s.changes),await bu(r.remoteStore)}catch(s){const i=bf(s,"Failed to persist write");n.reject(i)}}async function H_(t,e){const n=ae(t);try{const r=await m2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ye(o.va):s.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await Qo(n,r,e)}catch(r){await qo(r)}}function Mg(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ae(o);c.onlineState=u;let h=!1;c.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(u)&&(h=!0)}),h&&Nf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tN(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new je(te.comparator);o=o.insert(i,ht.newNoDocument(i,oe.min()));const u=ce().add(i),c=new Eu(oe.min(),new Map,new je(me),o,u);await H_(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Sf(r)}else await Gd(r.localStore,e,!1).then(()=>Qd(r,e,n)).catch(qo)}async function nN(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await p2(n.localStore,e);G_(n,r,null),W_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qo(n,s)}catch(s){await qo(s)}}async function rN(t,e,n){const r=ae(t);try{const s=await function(o,u){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(ye(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);G_(r,e,n),W_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qo(r,s)}catch(s){await qo(s)}}function W_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function G_(t,e,n){const r=ae(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Qd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||K_(t,r)})}function K_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(xf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sf(t))}function Lg(t,e,n){for(const r of n)r instanceof B_?(t.La.addReference(r.key,e),sN(t,r)):r instanceof $_?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||K_(t,r.key)):se()}function sN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Sf(t))}function Sf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new G2(n)),t.Oa=t.Oa.insert(n,r),j_(t.remoteStore,new lr(mn(df(n.path)),r,"TargetPurposeLimboResolution",sf.oe))}}async function Qo(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=_f.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=ae(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(h,y=>z.forEach(y.$i,A=>p.persistence.referenceDelegate.addReference(m,y.targetId,A)).next(()=>z.forEach(y.Ui,A=>p.persistence.referenceDelegate.removeReference(m,y.targetId,A)))))}catch(m){if(!Ho(m))throw m;X("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const A=p.os.get(y),P=A.snapshotVersion,j=A.withLastLimboFreeSnapshotVersion(P);p.os=p.os.insert(y,j)}}}(r.localStore,i))}async function iN(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await k_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new Y(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qo(n,r.hs)}}function oN(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function Q_(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tN.bind(null,e),e.Ca.d_=$2.bind(null,e.eventManager),e.Ca.$a=q2.bind(null,e.eventManager),e}function aN(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rN.bind(null,e),e}class Ul{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return f2(this.persistence,new d2,e.initialUser,this.serializer)}Ga(e){return new l2(yf.Zr,this.serializer)}Wa(e){return new x2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ul.provider={build:()=>new Ul};class Yd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iN.bind(null,this.syncEngine),await U2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new B2}()}createDatastore(e){const n=Tu(e.databaseInfo.databaseId),r=function(i){return new I2(i)}(e.databaseInfo);return function(i,o,u,c){return new S2(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new k2(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Mg(this.syncEngine,n,0),function(){return Rg.D()?new Rg:new w2}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,p){const m=new K2(s,i,o,u,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ko(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yd.provider={build:()=>new Yd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=Yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cc(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await k_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Og(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uN(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Pg(e.remoteStore,s)),t._onlineComponents=e}async function uN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ti("Error using user provided cache. Falling back to memory cache: "+n),await Cc(t,new Ul)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Cc(t,new Ul);return t._offlineComponents}async function X_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Og(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Og(t,new Yd))),t._onlineComponents}function cN(t){return X_(t).then(e=>e.syncEngine)}async function Xd(t){const e=await X_(t),n=e.eventManager;return n.onListen=Q2.bind(null,e.syncEngine),n.onUnlisten=J2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Y2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Z2.bind(null,e.syncEngine),n}function dN(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const p=new Y_({next:y=>{p.Za(),o.enqueueAndForget(()=>U_(i,m)),y.fromCache&&c.source==="server"?h.reject(new Y(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new z_(u,p,{includeMetadataChanges:!0,_a:!0});return F_(i,m)}(await Xd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e,n){if(!n)throw new Y(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hN(t,e,n,r){if(e===!0&&r===!0)throw new Y(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ug(t){if(!te.isDocumentKey(t))throw new Y(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zg(t){if(te.isDocumentKey(t))throw new Y(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nu(t);throw new Y(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Su{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RI;switch(r.type){case"firstParty":return new VI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fg.get(n);r&&(X("ComponentProvider","Removing Datastore"),Fg.delete(n),r.terminate())}(this),Promise.resolve()}}function fN(t,e,n,r={}){var s;const i=(t=vn(t,Su))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=ct.MOCK_USER;else{u=iT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Y(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ct(h)}t._authCredentials=new PI(new Qy(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class wr extends Rr{constructor(e,n,r){super(e,n,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new te(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function ex(t,e,...n){if(t=St(t),Z_("collection","path",e),t instanceof Su){const r=Ie.fromString(e,...n);return zg(r),new wr(t,null,r)}{if(!(t instanceof Nt||t instanceof wr))throw new Y(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return zg(r),new wr(t.firestore,null,r)}}function Af(t,e,...n){if(t=St(t),arguments.length===1&&(e=Yy.newId()),Z_("doc","path",e),t instanceof Su){const r=Ie.fromString(e,...n);return Ug(r),new Nt(t,null,new te(r))}{if(!(t instanceof Nt||t instanceof wr))throw new Y(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Ug(r),new Nt(t.firestore,t instanceof wr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new R_(this,"async_queue_retry"),this.Vu=()=>{const r=kc();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=kc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=kc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ho(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw On("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=If.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function qg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class is extends Su{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new $g,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $g(e),this._firestoreClient=void 0,await e}}}function pN(t,e){const n=typeof t=="object"?t:Uy(),r=typeof t=="string"?t:e||"(default)",s=nf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=rT("firestore");i&&fN(s,...i)}return s}function kf(t){if(t._terminated)throw new Y(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mN(t),t._firestoreClient}function mN(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,h,p){return new KI(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,J_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new lN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(st.fromBase64String(e))}catch(n){throw new Y(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ai(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=/^__.*__$/;class vN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wo(e,this.data,n,this.fieldTransforms)}}function nx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class jf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nx(this.Cu)&&gN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class yN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tu(e)}Qu(e,n,r,s=!1){return new jf({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Df(t){const e=t._freezeSettings(),n=Tu(t._databaseId);return new yN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rx(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ox("Data must be an object, but it was:",o,r);const u=sx(r,o);let c,h;if(i.merge)c=new Yt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=xN(e,m,n);if(!o.contains(y))throw new Y(O.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);EN(p,y)||p.push(y)}c=new Yt(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new vN(new Ft(u),c,h)}function _N(t,e,n,r=!1){return Vf(n,t.Qu(r?4:3,e))}function Vf(t,e){if(ix(t=St(t)))return ox("Unsupported field value:",e,t),sx(t,e);if(t instanceof tx)return function(r,s){if(!nx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Vf(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=He.fromDate(r);return{timestampValue:Ol(s.serializer,i)}}if(r instanceof He){const i=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ol(s.serializer,i)}}if(r instanceof Rf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:E_(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pf)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return hf(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Nu(r)}`)}(t,e)}function sx(t,e){const n={};return Xy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(t,(r,s)=>{const i=Vf(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ix(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof Rf||t instanceof ai||t instanceof Nt||t instanceof tx||t instanceof Pf)}function ox(t,e,n){if(!ix(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xN(t,e,n){if((e=St(e))instanceof Cf)return e._internalPath;if(typeof e=="string")return ax(t,e);throw zl("Field path arguments must be of type string or ",t,!1,void 0,n)}const wN=new RegExp("[~\\*/\\[\\]]");function ax(t,e,n){if(e.search(wN)>=0)throw zl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cf(...e.split("."))._internalPath}catch{throw zl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(O.INVALID_ARGUMENT,u+t+c)}function EN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Au("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TN extends lx{data(){return super.data()}}function Au(t,e){return typeof e=="string"?ax(t,e):e instanceof Cf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mf{}class cx extends Mf{}function ku(t,e,...n){let r=[];e instanceof Mf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Lf).length,u=i.filter(c=>c instanceof Cu).length;if(o>1||o>0&&u>0)throw new Y(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Cu extends cx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Cu(e,n,r)}_apply(e){const n=this._parse(e);return hx(e._query,n),new Rr(e.firestore,e.converter,zd(e._query,n))}_parse(e){const n=Df(e.firestore);return function(i,o,u,c,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Y(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Wg(m,p);const A=[];for(const P of m)A.push(Hg(c,i,P));y={arrayValue:{values:A}}}else y=Hg(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Wg(m,p),y=_N(u,o,m,p==="in"||p==="not-in");return Be.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function IN(t,e,n){const r=e,s=Au("where",t);return Cu._create(s,r,n)}class Lf extends Mf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)hx(o,c),o=zd(o,c)}(e._query,n),new Rr(e.firestore,e.converter,zd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Of extends cx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Of(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Po(i,o)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new pi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function dx(t,e="asc"){const n=e,r=Au("orderBy",t);return Of._create(r,n)}function Hg(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new Y(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o_(e)&&n.indexOf("/")!==-1)throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!te.isDocumentKey(r))throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hg(t,new te(r))}if(n instanceof Nt)return hg(t,n._key);throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nu(n)}.`)}function Wg(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hx(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bN{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new Pf(i)}convertGeoPoint(e){return new Rf(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=af(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ko(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);ye(A_(r));const s=new Co(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||On(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class px extends lx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Au("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tl extends px{data(e={}){return super.data(e)}}class mx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ki(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tl(this._firestore,this._userDataWriter,r.key,r,new Ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new tl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ki(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new tl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ki(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:NN(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function NN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}class Ff extends bN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function gx(t){t=vn(t,Rr);const e=vn(t.firestore,is),n=kf(e),r=new Ff(e);return ux(t._query),dN(n,t._query).then(s=>new mx(e,r,t,s))}function SN(t,e,n){t=vn(t,Nt);const r=vn(t.firestore,is),s=fx(t.converter,e,n);return zf(r,[rx(Df(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zt.none())])}function AN(t){return zf(vn(t.firestore,is),[new ff(t._key,Zt.none())])}function Bl(t,e){const n=vn(t.firestore,is),r=Af(t),s=fx(t.converter,e);return zf(n,[rx(Df(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function Uf(t,...e){var n,r,s;t=St(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||qg(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(qg(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Nt)h=vn(t.firestore,is),p=df(t._key.path),c={next:m=>{e[o]&&e[o](kN(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=vn(t,Rr);h=vn(m.firestore,is),p=m._query;const y=new Ff(h);c={next:A=>{e[o]&&e[o](new mx(h,y,m,A))},error:e[o+1],complete:e[o+2]},ux(t._query)}return function(y,A,P,j){const F=new Y_(j),I=new z_(A,F,P);return y.asyncQueue.enqueueAndForget(async()=>F_(await Xd(y),I)),()=>{F.Za(),y.asyncQueue.enqueueAndForget(async()=>U_(await Xd(y),I))}}(kf(h),p,u,c)}function zf(t,e){return function(r,s){const i=new xr;return r.asyncQueue.enqueueAndForget(async()=>eN(await cN(r),s,i)),i.promise}(kf(t),e)}function kN(t,e,n){const r=n.docs.get(e._key),s=new Ff(t);return new px(t,s,e._key,r,new Ki(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){hi=s})(di),ei(new ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new is(new jI(r.getProvider("auth-internal")),new LI(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),_r(ag,"4.7.3",e),_r(ag,"4.7.3","esm2017")})();function Bf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function vx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CN=vx,yx=new Bo("auth","Firebase",vx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new ef("@firebase/auth");function RN(t,...e){$l.logLevel<=de.WARN&&$l.warn(`Auth (${di}): ${t}`,...e)}function nl(t,...e){$l.logLevel<=de.ERROR&&$l.error(`Auth (${di}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw $f(t,...e)}function yn(t,...e){return $f(t,...e)}function _x(t,e,n){const r=Object.assign(Object.assign({},CN()),{[e]:n});return new Bo("auth","Firebase",r).create(e,{appName:t.name})}function Pn(t){return _x(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $f(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yx.create(t,...e)}function re(t,e,...n){if(!t)throw $f(e,...n)}function An(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nl(e),new Error(e)}function zn(t,e){t||An(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PN(){return Gg()==="http:"||Gg()==="https:"}function Gg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PN()||uT()||"connection"in navigator)?navigator.onLine:!0}function DN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.shortDelay=e,this.longDelay=n,zn(n>e,"Short delay should be less than long delay!"),this.isMobile=oT()||cT()}get(){return jN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t,e){zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Yo(3e4,6e4);function Xo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vi(t,e,n,r,s={}){return wx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=$o(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return lT()||(h.referrerPolicy="no-referrer"),xx.fetch()(Ex(t,t.config.apiHost,n,u),h)})}async function wx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},VN),e);try{const s=new LN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Oa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Oa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Oa(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw _x(t,p,h);Un(t,p)}}catch(s){if(s instanceof qn)throw s;Un(t,"network-request-failed",{message:String(s)})}}async function Hf(t,e,n,r,s={}){const i=await vi(t,e,n,r,s);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Ex(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?qf(t.config,s):`${t.config.apiScheme}://${s}`}class LN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),MN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Oa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){return vi(t,"POST","/v1/accounts:delete",e)}async function Tx(t,e){return vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FN(t,e=!1){const n=St(t),r=await n.getIdToken(e),s=Wf(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:lo(Rc(s.auth_time)),issuedAtTime:lo(Rc(s.iat)),expirationTime:lo(Rc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Rc(t){return Number(t)*1e3}function Wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nl("JWT malformed, contained fewer than 3 sections"),null;try{const s=jy(n);return s?JSON.parse(s):(nl("Failed to decode base64 JWT payload"),null)}catch(s){return nl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Kg(t){const e=Wf(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&UN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function UN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vo(t,Tx(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ix(i.providerUserInfo):[],u=$N(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Zd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function BN(t){const e=St(t);await ql(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $N(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ix(t){return t.map(e=>{var{providerId:n}=e,r=Bf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e){const n=await wx(t,{},async()=>{const r=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Ex(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",xx.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HN(t,e){return vi(t,"POST","/v2/accounts:revokeToken",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=Kg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $s;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return An("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FN(this,e)}reload(){return BN(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ql(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(Pn(this.auth));const e=await this.getIdToken();return await Vo(this,ON(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,A=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(u=n.tenantId)!==null&&u!==void 0?u:void 0,F=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,T=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:b,emailVerified:V,isAnonymous:M,providerData:q,stsTokenManager:_}=n;re(b&&_,e,"internal-error");const v=$s.fromJSON(this.name,_);re(typeof b=="string",e,"internal-error"),Xn(m,e.name),Xn(y,e.name),re(typeof V=="boolean",e,"internal-error"),re(typeof M=="boolean",e,"internal-error"),Xn(A,e.name),Xn(P,e.name),Xn(j,e.name),Xn(F,e.name),Xn(I,e.name),Xn(T,e.name);const x=new kn({uid:b,auth:e,email:y,emailVerified:V,displayName:m,isAnonymous:M,photoURL:P,phoneNumber:A,tenantId:j,stsTokenManager:v,createdAt:I,lastLoginAt:T});return q&&Array.isArray(q)&&(x.providerData=q.map(E=>Object.assign({},E))),F&&(x._redirectEventId=F),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new $s;s.updateFromServerResponse(n);const i=new kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ql(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ix(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new $s;u.updateFromIdToken(r);const c=new kn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=new Map;function Cn(t){zn(t instanceof Function,"Expected a class definition");let e=Qg.get(t);return e?(zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bx.type="NONE";const Yg=bx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e,n){return`firebase:${t}:${e}:${n}`}class qs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=rl(this.userKey,s.apiKey,i),this.fullPersistenceKey=rl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qs(Cn(Yg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Cn(Yg);const o=rl(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(o);if(p){const m=kn._fromJSON(e,p);h!==i&&(u=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new qs(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new qs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rx(e))return"Blackberry";if(Px(e))return"Webos";if(Sx(e))return"Safari";if((e.includes("chrome/")||Ax(e))&&!e.includes("edge/"))return"Chrome";if(Cx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Nx(t=pt()){return/firefox\//i.test(t)}function Sx(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ax(t=pt()){return/crios\//i.test(t)}function kx(t=pt()){return/iemobile/i.test(t)}function Cx(t=pt()){return/android/i.test(t)}function Rx(t=pt()){return/blackberry/i.test(t)}function Px(t=pt()){return/webos/i.test(t)}function Gf(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WN(t=pt()){var e;return Gf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GN(){return dT()&&document.documentMode===10}function jx(t=pt()){return Gf(t)||Cx(t)||Px(t)||Rx(t)||/windows phone/i.test(t)||kx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e=[]){let n;switch(t){case"Browser":n=Xg(pt());break;case"Worker":n=`${Xg(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${di}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e={}){return vi(t,"GET","/v2/passwordPolicy",Xo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=6;class XN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jg(this),this.idTokenSubscription=new Jg(this),this.beforeStateQueue=new KN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await qs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Tx(this,{idToken:e}),r=await kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ql(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(Pn(this));const n=e?St(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(Pn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(Pn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QN(this),n=new XN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await HN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await qs.create(this,[Cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&RN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Jo(t){return St(t)}class Jg{constructor(e){this.auth=e,this.observer=null,this.addObserver=_T(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZN(t){Kf=t}function eS(t){return Kf.loadJS(t)}function tS(){return Kf.gapiScript}function nS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t,e){const n=nf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Pl(i,e??{}))return s;Un(s,"already-initialized")}return n.initialize({options:e})}function sS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iS(t,e,n){const r=Jo(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Vx(e),{host:o,port:u}=oS(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||aS()}function Vx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oS(t){const e=Vx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Zg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Zg(o)}}}function Zg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return An("not implemented")}_getIdTokenResponse(e){return An("not implemented")}_linkToIdToken(e,n){return An("not implemented")}_getReauthenticationResolver(e){return An("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e){return Hf(t,"POST","/v1/accounts:signInWithIdp",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="http://localhost";class os extends Mx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Bf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}buildRequest(){const e={requestUri:lS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends Lx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Zo{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Zo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Zo{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Zo{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(t,e){return Hf(t,"POST","/v1/accounts:signUp",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await kn._fromIdTokenResponse(e,r,s),o=e0(r);return new Bn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=e0(r);return new Bn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function e0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(t){var e;if(hn(t.app))return Promise.reject(Pn(t));const n=Jo(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Bn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await uS(n,{returnSecureToken:!0}),s=await Bn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hl(e,n,r,s)}}function Ox(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hl._fromErrorAndOperation(t,i,e,r):i})}async function dS(t,e,n=!1){const r=await Vo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bn._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e,n=!1){const{auth:r}=t;if(hn(r.app))return Promise.reject(Pn(r));const s="reauthenticate";try{const i=await Vo(t,Ox(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=Wf(i.idToken);re(o,r,"internal-error");const{sub:u}=o;return re(t.uid===u,r,"user-mismatch"),Bn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(t,e,n=!1){if(hn(t.app))return Promise.reject(Pn(t));const r="signIn",s=await Ox(t,r,e),i=await Bn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(t,e){return Hf(t,"POST","/v1/accounts:signInWithCustomToken",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t,e){if(hn(t.app))return Promise.reject(Pn(t));const n=Jo(t),r=await pS(n,{token:e,returnSecureToken:!0}),s=await Bn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}function gS(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function vS(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function yS(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}const Wl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wl,"1"),this.storage.removeItem(Wl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=1e3,xS=10;class Ux extends Fx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);GN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_S)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ux.type="LOCAL";const wS=Ux;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends Fx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zx.type="SESSION";const Bx=zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ru(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async h=>h(n.origin,i)),c=await ES(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const h=Qf("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(y.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return window}function IS(t){_n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return typeof _n().WorkerGlobalScope<"u"&&typeof _n().importScripts=="function"}async function bS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SS(){return $x()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="firebaseLocalStorageDb",AS=1,Gl="firebaseLocalStorage",Hx="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pu(t,e){return t.transaction([Gl],e?"readwrite":"readonly").objectStore(Gl)}function kS(){const t=indexedDB.deleteDatabase(qx);return new ea(t).toPromise()}function eh(){const t=indexedDB.open(qx,AS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gl,{keyPath:Hx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gl)?e(r):(r.close(),await kS(),e(await eh()))})})}async function t0(t,e,n){const r=Pu(t,!0).put({[Hx]:e,value:n});return new ea(r).toPromise()}async function CS(t,e){const n=Pu(t,!1).get(e),r=await new ea(n).toPromise();return r===void 0?null:r.value}function n0(t,e){const n=Pu(t,!0).delete(e);return new ea(n).toPromise()}const RS=800,PS=3;class Wx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $x()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ru._getInstance(SS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await bS(),!this.activeServiceWorker)return;this.sender=new TS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eh();return await t0(e,Wl,"1"),await n0(e,Wl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>t0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pu(s,!1).getAll();return new ea(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wx.type="LOCAL";const jS=Wx;new Yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t,e){return e?Cn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends Mx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VS(t){return fS(t.auth,new Yf(t),t.bypassAuthState)}function MS(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),hS(n,new Yf(t),t.bypassAuthState)}async function LS(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),dS(n,new Yf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VS;case"linkViaPopup":case"linkViaRedirect":return LS;case"reauthViaPopup":case"reauthViaRedirect":return MS;default:Un(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=new Yo(2e3,1e4);class Vs extends Gx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=Qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OS.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="pendingRedirect",sl=new Map;class US extends Gx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sl.get(this.auth._key());if(!e){try{const r=await zS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sl.set(this.auth._key(),e)}return this.bypassAuthState||sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zS(t,e){const n=qS(e),r=$S(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function BS(t,e){sl.set(t._key(),e)}function $S(t){return Cn(t._redirectPersistence)}function qS(t){return rl(FS,t.config.apiKey,t.name)}async function HS(t,e,n=!1){if(hn(t.app))return Promise.reject(Pn(t));const r=Jo(t),s=DS(r,e),o=await new US(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=10*60*1e3;class GS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Kx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WS&&this.cachedEventUids.clear(),this.cachedEventUids.has(r0(e))}saveEventToCache(e){this.cachedEventUids.add(r0(e)),this.lastProcessedEventTime=Date.now()}}function r0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e={}){return vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XS=/^https?/;async function JS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QS(t);for(const n of e)try{if(ZS(n))return}catch{}Un(t,"unauthorized-domain")}function ZS(t){const e=Jd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!XS.test(n))return!1;if(YS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new Yo(3e4,6e4);function s0(){const t=_n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tA(t){return new Promise((e,n)=>{var r,s,i;function o(){s0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s0(),n(yn(t,"network-request-failed"))},timeout:eA.get()})}if(!((s=(r=_n().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=_n().gapi)===null||i===void 0)&&i.load)o();else{const u=nS("iframefcb");return _n()[u]=()=>{gapi.load?o():n(yn(t,"network-request-failed"))},eS(`${tS()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw il=null,e})}let il=null;function nA(t){return il=il||tA(t),il}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new Yo(5e3,15e3),sA="__/auth/iframe",iA="emulator/auth/iframe",oA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lA(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qf(e,iA):`https://${t.config.authDomain}/${sA}`,r={apiKey:e.apiKey,appName:t.name,v:di},s=aA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$o(r).slice(1)}`}async function uA(t){const e=await nA(t),n=_n().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:lA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),u=_n().setTimeout(()=>{i(o)},rA.get());function c(){_n().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dA=500,hA=600,fA="_blank",pA="http://localhost";class i0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mA(t,e,n,r=dA,s=hA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},cA),{width:r.toString(),height:s.toString(),top:i,left:o}),h=pt().toLowerCase();n&&(u=Ax(h)?fA:n),Nx(h)&&(e=e||pA,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[A,P])=>`${y}${A}=${P},`,"");if(WN(h)&&u!=="_self")return gA(e||"",u),new i0(null);const m=window.open(e||"",u,p);re(m,t,"popup-blocked");try{m.focus()}catch{}return new i0(m)}function gA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="__/auth/handler",yA="emulator/auth/handler",_A=encodeURIComponent("fac");async function o0(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:di,eventId:s};if(e instanceof Lx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(i||{}))o[p]=m}if(e instanceof Zo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),h=c?`#${_A}=${encodeURIComponent(c)}`:"";return`${xA(t)}?${$o(u).slice(1)}${h}`}function xA({config:t}){return t.emulator?qf(t,yA):`https://${t.authDomain}/${vA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="webStorageSupport";class wA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bx,this._completeRedirectFn=HS,this._overrideRedirectResult=BS}async _openPopup(e,n,r,s){var i;zn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await o0(e,n,r,Jd(),s);return mA(e,o,Qf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await o0(e,n,r,Jd(),s);return IS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(zn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uA(e),r=new GS(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pc,{type:Pc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Pc];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jx()||Sx()||Gf()}}const EA=wA;var a0="@firebase/auth",l0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bA(t){ei(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dx(t)},h=new JN(r,s,i,c);return sS(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new ts("auth-internal",e=>{const n=Jo(e.getProvider("auth").getImmediate());return(r=>new TA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(a0,l0,IA(t)),_r(a0,l0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=5*60,SA=My("authIdTokenMaxAge")||NA;let u0=null;const AA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SA)return;const s=n==null?void 0:n.token;u0!==s&&(u0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kA(t=Uy()){const e=nf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rS(t,{popupRedirectResolver:EA,persistence:[jS,wS,Bx]}),r=My("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=AA(i.toString());vS(n,o,()=>o(n.currentUser)),gS(n,u=>o(u))}}const s=Dy("auth");return s&&iS(n,`http://${s}`),n}function CA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",CA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bA("Browser");const RA={apiKey:"AIzaSyCUSBzbKBE2JRiiHZAwtkvJzy72RgrRoEU",authDomain:"smen-italcar.firebaseapp.com",projectId:"smen-italcar",storageBucket:"smen-italcar.firebasestorage.app",messagingSenderId:"188301662792",appId:"1:188301662792:web:1eca55e7e122582a8ed67d"},Qx=Fy(RA),Kl=pN(Qx),jc=kA(Qx);var PA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DA=(t,e)=>{const n=ee.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:u,...c},h)=>ee.createElement("svg",{ref:h,...PA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${jA(t)}`,...c},[...e.map(([p,m])=>ee.createElement(p,m)),...(Array.isArray(u)?u:[u])||[]]));return n.displayName=`${t}`,n};var ie=DA;const Dc=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Mo=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ju=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ql=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),th=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Yl=ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Xl=ie("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),VA=ie("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),nh=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),c0=ie("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),MA=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),d0=ie("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),LA=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),h0=ie("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),f0=ie("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),OA=ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),FA=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),UA=ie("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),zA=ie("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),BA=ie("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),p0=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),$A=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Jl=ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),qA=ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),m0=ie("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),HA=ie("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),g0=ie("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Yx=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Zl=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),WA=ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Vc=ie("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),Mc=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),v0=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ol=ie("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),GA=ie("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Xx=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y0=ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),rh=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),KA=ie("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),QA=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),YA=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),sh=ie("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),Lc=ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Ws=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ih=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Er=t=>ex(Kl,t),ta=({size:t="h-10"})=>l.jsxs("div",{className:`flex items-center gap-1 font-black text-blue-900 tracking-tighter ${t==="h-14"?"text-4xl":"text-xl"}`,children:[l.jsx("div",{className:"bg-blue-900 text-white px-2 py-0.5 rounded shadow-sm",children:"IT"}),l.jsx("span",{children:"ITALCAR"})]}),XA=()=>l.jsx("div",{className:"hidden items-center justify-center bg-blue-900 text-white font-black p-2 rounded text-xs",children:"ITALCAR"}),Jx=({darkText:t=!1})=>{const[e,n]=ee.useState(new Date),[r,s]=ee.useState({temp:"--",code:0});ee.useEffect(()=>{const u=setInterval(()=>n(new Date),1e3),c=async()=>{try{const m=await(await fetch("https://api.open-meteo.com/v1/forecast?latitude=36.8065&longitude=10.1815&current_weather=true")).json();m.current_weather&&s({temp:m.current_weather.temperature,code:m.current_weather.weathercode})}catch{console.log("Weather fetch failed")}};c();const h=setInterval(c,6e5);return()=>{clearInterval(u),clearInterval(h)}},[]);const i=t?"text-slate-800":"text-white",o=t?"text-slate-500":"text-white/80";return l.jsxs("div",{className:`flex items-center gap-8 ${i}`,children:[l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsxs("div",{className:"text-3xl font-black leading-none flex items-center gap-2",children:[r.temp," ",l.jsx(ol,{size:20,className:"text-orange-500"})]}),l.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${o}`,children:"Tunis"})]}),l.jsx("div",{className:`h-10 w-px ${t?"bg-slate-300":"bg-white/30"}`}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("div",{className:"text-3xl font-black leading-none",children:e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),l.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${o}`,children:e.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"short"})})]})]})},JA=({onLogin:t})=>{const[e,n]=ee.useState(""),[r,s]=ee.useState(""),[i,o]=ee.useState(""),[u,c]=ee.useState(!1),h=async p=>{if(p.preventDefault(),c(!0),o(""),e==="RMI"&&r==="RMI2026$"){setTimeout(()=>{t({username:"RMI",role:"ADMIN"}),c(!1)},800);return}try{const m=ku(Er("users"),IN("username","==",e)),y=await gx(m);if(y.empty){if(e==="admin"&&r==="0000"){t({username:"Admin Test",role:"ADMIN"});return}o("Utilisateur inconnu"),c(!1);return}let A=null;y.forEach(P=>{const j=P.data();j.password===r&&(A={...j,id:P.id})}),A?t(A):o("Mot de passe incorrect")}catch(m){console.error(m),o("Erreur de connexion base de donnes")}c(!1)};return l.jsxs("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 z-0",children:l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-slate-200 skew-x-12 opacity-50"})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-10 w-full max-w-md z-10 border-t-4 border-blue-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsxs("div",{className:"flex justify-center mb-4",children:[l.jsx(ta,{size:"h-16"}),l.jsx(XA,{})]}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Portail nergie"}),l.jsx("p",{className:"text-slate-400 text-sm mt-1 font-medium",children:"Systme de Management de l'nergie"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Identifiant"}),l.jsxs("div",{className:"relative",children:[l.jsx(QA,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"Nom d'utilisateur",value:e,onChange:p=>n(p.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx(UA,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"",value:r,onChange:p=>s(p.target.value)})]})]}),i&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center font-bold flex items-center justify-center border border-red-100",children:[l.jsx(Mo,{size:16,className:"mr-2"}),i]}),l.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-900 hover:bg-blue-800 text-white font-bold py-3.5 rounded-lg shadow-lg shadow-blue-900/20 transition-all uppercase tracking-wide text-sm",children:u?"Connexion...":"Se Connecter"})]}),l.jsx("div",{className:"mt-8 text-center text-[10px] text-slate-400 font-mono",children:"v8.2.0  ITALCAR SA"})]})]})},ZA=({onBack:t,userRole:e})=>{const[n,r]=ee.useState(1),[s,i]=ee.useState([]),[o,u]=ee.useState(!1),[c,h]=ee.useState(!1),[p,m]=ee.useState(null),[y,A]=ee.useState(!1);ee.useEffect(()=>{const N=ku(Er("steg_logs"),dx("id","desc")),H=Uf(N,K=>{i(K.docs.map(ne=>({...ne.data(),docId:ne.id})))});return()=>H()},[]);const P=[{id:1,name:"MT 1 - Mgrine",code:"MEG-001",type:"MT",icon:d0},{id:2,name:"MT 2 - El Khadhra",code:"ELK-002",type:"MT",icon:th},{id:3,name:"MT 3 - Naassen",code:"NAS-003",type:"MT",icon:th},{id:4,name:"BT 1 - Showroom Lac",code:"SHR-001",type:"BT_PV",icon:Vc},{id:5,name:"BT 2 - Azur City",code:"AZU-002",type:"BT",icon:Vc},{id:6,name:"BT 3 - Rue de Carthage",code:"CAR-003",type:"BT",icon:Vc}],[j,F]=ee.useState({unitPriceKwh:.291,powerUnitPrice:5,unitPriceKwhBT:.391,fixedFeesBT:115.5,servicesBT:0,fteGazBT:0,vatRate:19,rtt:3.5,municipalTaxRate:.01,taxCLRate:.005,taxFTERate:.005,powerOverrunPenalty:25}),[I,T]=ee.useState({1:{subscribedPower:250,emptyLosses:1300},2:{subscribedPower:70,emptyLosses:670},3:{subscribedPower:30,emptyLosses:160},4:{subscribedPower:30,emptyLosses:0},5:{subscribedPower:20,emptyLosses:0},6:{subscribedPower:15,emptyLosses:0}}),[b,V]=ee.useState(!1),[M,q]=ee.useState({date:new Date().toISOString().slice(0,7),lastIndex:"",newIndex:"",lastIndexPv:"",newIndexPv:"",previousBalance:"",cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:""}),_=N=>N==null?void 0:N.toLocaleString("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:3}),v=N=>N==null?void 0:N.toLocaleString("fr-TN",{maximumFractionDigits:2}),x=N=>N===""||N===void 0||N===null?"":N.toString().replace(/[^0-9.-]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g," "),E=N=>N.replace(/\s/g,"");ee.useEffect(()=>{const N=s.filter(H=>H.siteId===n).sort((H,K)=>K.id-H.id);if(N.length>0){const H=N[0],K=P.find(ne=>ne.id===n).type;q(ne=>({...ne,lastIndex:H.newIndex,...K==="BT_PV"?{lastIndexPv:H.newIndexPv,previousBalance:H.newCarryOver}:{},manualLastIndex:!1}))}else q(H=>({...H,lastIndex:"",lastIndexPv:"",previousBalance:""}))},[n,s]);const S=(N,H)=>{const K=["lastIndex","newIndex","lastIndexPv","newIndexPv","previousBalance","maxPower","reactiveCons"].includes(N)?E(H):H;q(ne=>({...ne,[N]:K}))},k=(N,H)=>F(K=>({...K,[N]:H})),w=(N,H)=>T(K=>({...K,[n]:{...K[n],[N]:H}})),ge=()=>{const N=P.find(_e=>_e.id===n),H=I[n],K=j,ne=parseFloat(M.newIndex)||0,le=parseFloat(M.lastIndex)||0,Ne=Math.max(0,ne-le),At=parseFloat(M.lateFees)||0,Me=parseFloat(M.relanceFees)||0,mt=parseFloat(M.adjustment)||0,Qe=parseFloat(K.rtt)||0,Ye=(parseFloat(K.vatRate)||0)/100;if(N.type.startsWith("BT")){let _e=Ne,qt=0,nn=0,Hn=0,wn=0,rn=0;if(N.type==="BT_PV"){const fs=parseFloat(M.newIndexPv)||0,ln=parseFloat(M.lastIndexPv)||0;Hn=parseFloat(M.previousBalance)||0,nn=Math.max(0,fs-ln),wn=Ne-nn,rn=wn+Hn,rn>0?(_e=rn,qt=0):(_e=0,qt=rn)}const ds=parseFloat(K.unitPriceKwhBT)||.391,Pr=parseFloat(K.fixedFeesBT)||115.5,hs=parseFloat(K.servicesBT)||0,jr=_e*ds,sn=Pr+hs,on=jr+sn,Mt=on*(1+Ye),Se=_e*(parseFloat(K.taxCLRate)||.005),Le=_e*(parseFloat(K.taxFTERate)||.005),an=parseFloat(K.fteGazBT)||0,Wn=Mt+Se+Qe+Le+an,Dr=Wn+mt+At+Me;return{type:N.type,consumptionGrid:Ne,productionPv:nn,currentMonthBalance:wn,prevBalance:Hn,totalBalance:rn,billedKwh:_e,newCarryOver:qt,consoAmountHT:jr,fixedAmountHT:sn,totalTTC:Mt,contributionCL:Se,fteElec:Le,fteGaz:an,netToPay:Dr,totalFinalTTC:Wn,totalHT:on}}else{const _e=parseFloat(M.cosPhi)||1,qt=parseFloat(M.maxPower)||0,nn=parseFloat(M.reactiveCons)||0,Hn=parseFloat(K.unitPriceKwh)||.291,wn=parseFloat(H.subscribedPower)||0,rn=parseFloat(K.powerUnitPrice)||5,ds=parseFloat(K.municipalTaxRate)||.01,Pr=parseFloat(H.emptyLosses)||0,hs=parseFloat(K.powerOverrunPenalty)||25,jr=Ne*.02,sn=Ne+Pr+jr,on=sn*Hn;let Mt=0,Se="none";if(_e>=.91&&_e<=1)Mt=-(Math.round((_e-.9)*100)*.005),Se="bonus";else if(_e>=.8&&_e<=.9)Mt=0,Se="neutral";else{Se="penalty";let Vr=0;_e<.8&&(Vr+=Math.round((.8-Math.max(_e,.75))*100)*.005),_e<.75&&(Vr+=Math.round((.75-Math.max(_e,.7))*100)*.01),_e<.7&&(Vr+=Math.round((.7-Math.max(_e,.6))*100)*.015),_e<.6&&(Vr+=Math.round((.6-_e)*100)*.02),Mt=Vr}const Le=on*Mt,an=Math.max(0,qt-wn),Wn=an*hs,Dr=on+Le,fs=Dr*(1+Ye),ln=wn*rn,yi=ln+At+Me+Wn,_i=yi*(1+Ye),ps=sn*ds,Du=fs+_i+Qe+ps+mt;return{type:"MT",energyRecorded:Ne,loadLosses:jr,billedKwh:sn,baseEnergyAmountHT:on,adjustmentRate:Mt,adjustmentType:Se,cosPhiAdjustmentAmount:Le,total1_TTC:fs,total1_HT:Dr,powerPremium:ln,total2_HT:yi,total2_TTC:_i,municipalTax:ps,netToPay:Du,powerOverrun:an,powerOverrunAmount:Wn,reactiveCons:nn,subPower:wn}}},ke=async N=>{N.preventDefault();const H=P.find(le=>le.id===n),K=ge(),ne={id:Date.now(),recordDate:M.date,timestamp:new Date().toLocaleTimeString("fr-FR"),siteId:n,siteName:H.name,siteType:H.type,...M,...K};try{await Bl(Er("steg_logs"),ne),m({msg:"Relev enregistr dans le Cloud",type:"success"}),q(le=>({...le,lastIndex:M.newIndex,newIndex:"",...H.type==="BT_PV"?{lastIndexPv:M.newIndexPv,newIndexPv:"",previousBalance:K.newCarryOver}:{},cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:"",manualLastIndex:!1}))}catch{m({msg:"Erreur sauvegarde",type:"error"})}setTimeout(()=>m(null),3e3)},U=ge(),Z=s.filter(N=>N.siteId===n),L=P.find(N=>N.id===n),W=L.type.startsWith("BT"),J=L.type==="MT",C=U,B=L.icon;return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-2 md:mb-0",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:l.jsx(ju,{size:20})}),l.jsx("div",{className:`p-2 rounded-lg ${W?"bg-red-50 text-red-600":"bg-blue-50 text-blue-900"}`,children:l.jsx(B,{size:24})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-black text-slate-800 tracking-tight leading-none uppercase",children:["Facturation ",L.name]}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-500 mt-1",children:[l.jsx("span",{className:`px-2 py-0.5 rounded font-bold uppercase tracking-wider text-[9px] ${W?"bg-red-600 text-white":"bg-blue-900 text-white"}`,children:W?"BASSE TENSION":"MOYENNE TENSION"}),l.jsxs("span",{className:"flex items-center",children:[l.jsx(Jl,{size:10,className:"mr-1"})," ",L.code]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(Jx,{darkText:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[l.jsx(Ql,{size:16,className:"mr-2"})," Guide"]}),J&&l.jsxs("button",{onClick:()=>u(!0),className:"flex items-center bg-blue-50 hover:bg-blue-100 px-3 py-2 rounded-lg text-xs font-bold text-blue-600 transition-colors border border-blue-100",children:[l.jsx(f0,{size:16,className:"mr-2"})," Cos "]})]})]})]})}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-4xl w-full shadow-2xl relative overflow-hidden h-[80vh] flex flex-col",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[l.jsx(Ql,{className:"mr-3 text-blue-900",size:28})," Guide de Collecte"]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Procdures physiques pour les relevs d'index"})]}),l.jsx("button",{onClick:()=>h(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:l.jsx(Ws,{size:20,className:"text-slate-600"})})]}),l.jsxs("div",{className:"overflow-y-auto flex-1 space-y-8 pr-2",children:[l.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200",children:[l.jsxs("h4",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[l.jsx(d0,{className:"mr-2"})," Compteurs Moyenne Tension (MT)"]}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Mgrine, El Khadhra, Naassen."}),l.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-900",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Procdure de Relev"}),l.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed text-justify",children:["Pour la lecture des donnes du compteur, Appuyer brivement sur le bouton poussoir suprieur (Disp.) pour faire apparatre le contrle display puis Appuyer brivement une seconde fois, l'indication ST-DATA s'affiche.",l.jsx("br",{}),l.jsx("br",{}),"Ensuite, Appuyer et maintenir la pression, jusqu' l'apparition du premier affichage (ncompteur).",l.jsx("br",{}),l.jsx("br",{}),"Puis, une brve impulsion sur ce mme bouton fait avancer d'un pas le dfilement des index. A la fin de la liste, END s'affiche."]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Codes OBIS  Relever"}),l.jsxs("ul",{className:"text-xs text-slate-500 space-y-1 font-mono",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"1.8.0"})," : Cumul nergie Active (kWh) [Puissance]"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Ractif"})," : (Index Energie Ractive)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Cos Phi"})," : Relever le facteur de puissance affich"]}),l.jsx("li",{className:"text-slate-400 italic",children:"(Pas de relev Soir/Nuit ni Pointe requis)"})]})]})]})]}),l.jsxs("div",{className:"bg-orange-50 p-6 rounded-xl border border-orange-200",children:[l.jsxs("h4",{className:"text-lg font-bold text-orange-800 mb-4 flex items-center",children:[l.jsx(Mc,{className:"mr-2"})," Photovoltaque & BT"]}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Showroom Lac (BT+PV)."}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-100",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-1",children:"Compteur STEG Bidirectionnel"}),l.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Ce compteur affiche deux sens de flux :"}),l.jsxs("ul",{className:"text-xs text-slate-500 list-disc pl-5",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Code 1.8.0"})," : Consommation prise du rseau (Import)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Code 2.8.0"})," : Surplus inject dans le rseau (Export)."]})]})]})})]})]})]})}),o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>u(!1),children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-3xl w-full shadow-2xl relative overflow-hidden",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-start mb-8",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[l.jsx(f0,{className:"mr-3 text-blue-600",size:28})," Comprendre le Cos "]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Impact sur la facturation et l'efficacit nergtique"})]}),l.jsx("button",{onClick:()=>u(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:l.jsx(Ws,{size:20,className:"text-slate-600"})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider px-1",children:[l.jsx("span",{className:"text-red-600",children:"Pnalit"}),l.jsx("span",{className:"text-slate-500",children:"Neutre"}),l.jsx("span",{className:"text-emerald-600",children:"Bonus"})]}),l.jsxs("div",{className:"h-12 w-full rounded-xl flex overflow-hidden shadow-inner border border-slate-200 relative",children:[l.jsx("div",{className:"w-[40%] bg-red-100 flex items-center justify-center text-red-700 font-bold text-xs border-r border-white",title:"< 0.8",children:"< 0.80"}),l.jsx("div",{className:"w-[30%] bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-xs border-r border-white",title:"0.8 - 0.9",children:"0.8 - 0.90"}),l.jsx("div",{className:"w-[30%] bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-xs",title:"> 0.9",children:"> 0.90"})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1 font-mono",children:[l.jsx("span",{children:"0.50"}),l.jsx("span",{children:"0.80"}),l.jsx("span",{children:"0.90"}),l.jsx("span",{children:"1.00"})]})]}),l.jsx("div",{className:"text-sm text-slate-600 bg-blue-50 p-4 rounded-xl border border-blue-100",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Note :"})," Le Cosinus Phi mesure l'efficacit de votre installation. Un mauvais Cos  (infrieur  0.8) entrane une facturation de l'nergie ractive par la STEG. Assurez-vous que vos batteries de condensateurs fonctionnent correctement."]})})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[l.jsx("div",{className:"grid grid-cols-3 gap-2",children:P.map(N=>l.jsxs("button",{onClick:()=>r(N.id),className:`p-3 rounded-xl border text-xs font-bold transition-all flex flex-col items-center justify-center text-center h-20 group relative overflow-hidden
                            ${n===N.id?N.type.startsWith("BT")?"bg-red-600 text-white shadow-lg border-red-600":"bg-blue-900 text-white shadow-lg border-blue-900":"bg-white text-slate-500 border-slate-200 hover:border-blue-200 hover:bg-slate-50"}`,children:[l.jsx(N.icon,{size:20,className:`mb-1 transition-transform ${n===N.id?"opacity-100":"opacity-60 group-hover:scale-110"}`}),l.jsx("span",{children:N.name})]},N.id))}),l.jsxs("form",{onSubmit:ke,className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 space-y-6 relative overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center",children:[l.jsx(Yl,{className:"mr-2 text-slate-400",size:20})," Priode de Facturation"]}),l.jsx("input",{type:"month",value:M.date,onChange:N=>q({...M,date:N.target.value}),className:"bg-slate-50 border border-slate-200 rounded px-3 py-1.5 font-bold text-slate-700 cursor-pointer focus:ring-2 focus:ring-blue-900 outline-none"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[l.jsx(ih,{size:12,className:"mr-1"})," Index Actif"]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3 relative",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"flex justify-between text-xs font-bold text-slate-500 mb-1",children:["Ancien Index",e==="ADMIN"&&l.jsx(qA,{size:12,className:"cursor-pointer text-slate-400 hover:text-blue-900",onClick:()=>A(!y)})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:x(M.lastIndex),onChange:N=>S("lastIndex",N.target.value),readOnly:e!=="ADMIN"&&!y,className:`w-full border rounded p-2 text-sm font-mono ${e!=="ADMIN"&&!y?"bg-slate-200 text-slate-500":"bg-white border-orange-300"}`}),e!=="ADMIN"&&!y&&l.jsx(p0,{size:12,className:"absolute right-3 top-3 text-slate-400"})]}),y&&l.jsxs("p",{className:"text-[10px] text-orange-600 mt-1 flex items-center",children:[l.jsx(Mo,{size:10,className:"mr-1"})," Modification manuelle active"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-blue-900 mb-1 block",children:"Nouvel Index *"}),l.jsx("input",{type:"text",required:!0,value:x(M.newIndex),onChange:N=>S("newIndex",N.target.value),className:"w-full text-lg border-2 border-blue-200 rounded p-2 font-mono focus:border-blue-900 outline-none"})]}),l.jsxs("div",{className:"text-right text-xs font-bold text-blue-600",children:["Conso: ",v(U.consumptionGrid||U.energyRecorded)," kWh"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[W?l.jsx(Mc,{size:12,className:"mr-1"}):l.jsx(Zl,{size:12,className:"mr-1"}),W?"Photovoltaque & Solde":"Paramtres Techniques"]}),L.type==="BT_PV"?l.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Ancien PV"}),l.jsx("input",{type:"text",value:x(M.lastIndexPv),onChange:N=>S("lastIndexPv",N.target.value),className:"w-full text-xs p-1 border rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Nouveau PV"}),l.jsx("input",{type:"text",value:x(M.newIndexPv),onChange:N=>S("newIndexPv",N.target.value),className:"w-full text-xs p-1 border rounded font-mono"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-600",children:"Solde N-1"}),l.jsx("input",{type:"text",value:x(M.previousBalance),onChange:N=>S("previousBalance",N.target.value),className:"w-full text-sm p-2 border rounded"})]})]}):L.type==="MT"?l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Cos  *"}),l.jsx("input",{type:"number",step:"0.01",required:!0,value:M.cosPhi,onChange:N=>S("cosPhi",N.target.value),className:"w-full border p-2 rounded text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"P. Max (kVA) *"}),l.jsx("input",{type:"number",required:!0,value:M.maxPower,onChange:N=>S("maxPower",N.target.value),className:"w-full border p-2 rounded text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Ractif (kVarh)"}),l.jsx("input",{type:"number",value:M.reactiveCons,onChange:N=>S("reactiveCons",N.target.value),className:"w-full border p-2 rounded text-sm"})]})]}):l.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 text-xs text-slate-500 text-center italic",children:"Site BT Standard - Paramtres fixes appliqus."})]})]}),l.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[l.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Frais & Ajustements"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Retard",value:M.lateFees,onChange:N=>S("lateFees",N.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Relance",value:M.relanceFees,onChange:N=>S("relanceFees",N.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Ajustement",value:M.adjustment,onChange:N=>S("adjustment",N.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]})]})]}),l.jsxs("button",{type:"submit",className:`w-full text-white font-bold py-3 rounded-xl shadow-lg transition-transform active:scale-95 flex items-center justify-center ${W?"bg-red-600 hover:bg-red-700":"bg-blue-900 hover:bg-blue-800"}`,children:[l.jsx(Yx,{size:18,className:"mr-2"})," Valider & Sauvegarder"]})]}),l.jsxs("div",{className:"bg-slate-100 rounded-xl border border-slate-200 overflow-hidden",children:[l.jsxs("button",{onClick:()=>V(!b),className:"w-full px-6 py-3 flex justify-between items-center text-xs font-bold text-slate-500 uppercase hover:bg-slate-200",children:[l.jsxs("span",{children:[l.jsx(Zl,{size:14,className:"inline mr-2"})," Configuration Avance (",W?"BT":"MT",")"]}),b?l.jsx(KA,{size:14,className:"text-red-500"}):l.jsx(p0,{size:14})]}),b&&l.jsx("div",{className:"p-4 bg-white border-t border-slate-200 animate-in slide-in-from-top-2",children:W?l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-xs",children:[l.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-red-800 uppercase tracking-widest border-b pb-1",children:"Paramtres Basse Tension"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix kWh BT"}),l.jsx("input",{type:"number",value:j.unitPriceKwhBT,onChange:N=>k("unitPriceKwhBT",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Redevance Fixe"}),l.jsx("input",{type:"number",value:j.fixedFeesBT,onChange:N=>k("fixedFeesBT",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Services"}),l.jsx("input",{type:"number",value:j.servicesBT,onChange:N=>k("servicesBT",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Taxe CL (Taux)"}),l.jsx("input",{type:"number",value:j.taxCLRate,onChange:N=>k("taxCLRate",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Elec (Taux)"}),l.jsx("input",{type:"number",value:j.taxFTERate,onChange:N=>k("taxFTERate",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Gaz (Montant)"}),l.jsx("input",{type:"number",value:j.fteGazBT,onChange:N=>k("fteGazBT",N.target.value),className:"border p-1 w-full rounded font-mono"})]})]}):l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[l.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-blue-900 uppercase tracking-widest border-b pb-1",children:"Paramtres Moyenne Tension"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"P. Souscrite (kVA)"}),l.jsx("input",{type:"number",value:I[n].subscribedPower,onChange:N=>w("subscribedPower",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix nergie (DT/kWh)"}),l.jsx("input",{type:"number",value:j.unitPriceKwh,onChange:N=>k("unitPriceKwh",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix Puissance (DT/kVA)"}),l.jsx("input",{type:"number",value:j.powerUnitPrice,onChange:N=>k("powerUnitPrice",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"TVA (%)"}),l.jsx("input",{type:"number",value:j.vatRate,onChange:N=>k("vatRate",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Pnalit Dpassement"}),l.jsx("input",{type:"number",value:j.powerOverrunPenalty,onChange:N=>k("powerOverrunPenalty",N.target.value),className:"border p-1 w-full rounded font-mono bg-red-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Pertes  Vide (kWh)"}),l.jsx("input",{type:"number",value:I[n].emptyLosses,onChange:N=>w("emptyLosses",N.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"RTT (DT)"}),l.jsx("input",{type:"number",value:j.rtt,onChange:N=>k("rtt",N.target.value),className:"border p-1 w-full rounded font-mono"})]})]})})]})]}),l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-lg border transition-all duration-300 relative overflow-hidden ${W?"border-red-200 ring-2 ring-red-50":"border-blue-200 ring-2 ring-blue-50"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:W?l.jsx(Mc,{size:100}):l.jsx(ih,{size:100})}),l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-100 pb-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-bold uppercase ${W?"text-red-600":"text-blue-900"}`,children:W?"FACTURE BT":"FACTURE MT"}),l.jsx("p",{className:"text-xs text-slate-400",children:L.name})]}),l.jsx("div",{className:"text-right",children:l.jsx("p",{className:"text-xs text-slate-400 font-mono",children:M.date})})]}),l.jsxs("div",{className:"space-y-3 text-sm",children:[L.type==="BT_PV"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-slate-600",children:[l.jsx("span",{children:"Conso Rseau"}),l.jsxs("span",{className:"font-mono",children:[v(C.consumptionGrid)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-orange-600",children:[l.jsx("span",{children:"Prod Photovoltaque"}),l.jsxs("span",{className:"font-mono",children:["-",v(C.productionPv)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-slate-500 text-xs bg-slate-50 p-1 rounded",children:[l.jsx("span",{children:"Solde N-1"}),l.jsxs("span",{className:"font-mono",children:[v(C.prevBalance)," kWh"]})]}),l.jsxs("div",{className:`flex justify-between font-bold p-2 rounded ${C.totalBalance>0?"bg-red-50 text-red-700":"bg-emerald-50 text-emerald-700"}`,children:[l.jsx("span",{children:"Solde Final"}),l.jsxs("span",{children:[v(C.totalBalance)," kWh"]})]}),C.totalBalance<=0?l.jsx("div",{className:"text-xs text-center text-emerald-600 italic",children:"Crdit report au mois prochain"}):l.jsxs("div",{className:"flex justify-between text-slate-800 font-bold border-t pt-2",children:[l.jsxs("span",{children:["Factur (",v(C.billedKwh)," kWh)"]}),l.jsx("span",{children:_(C.consoAmountHT)})]})]}),l.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Redevances Fixes"}),l.jsx("span",{children:_(C.fixedAmountHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (TVA, CL, FTE)"}),l.jsx("span",{children:_(C.totalFinalTTC-(C.consoAmountHT+C.fixedAmountHT))})]})]})]}):W?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:l.jsxs("div",{className:"flex justify-between font-bold text-slate-700",children:[l.jsxs("span",{children:["Conso (",v(C.consumptionGrid)," kWh)"]}),l.jsx("span",{children:_(C.consoAmountHT)})]})}),l.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Redevances (Fixe + Serv)"}),l.jsx("span",{children:_(C.fixedAmountHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (TVA,CL,FTE)"}),l.jsx("span",{children:_(C.totalFinalTTC-C.totalHT)})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:[l.jsxs("div",{className:"flex justify-between text-slate-600",children:[l.jsx("span",{children:"nergie Enregistre"}),l.jsxs("span",{className:"font-mono",children:[v(C.energyRecorded)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-slate-500 text-xs pl-2",children:[l.jsx("span",{children:"+ Pertes"}),l.jsx("span",{className:"font-mono",children:v(C.billedKwh-C.energyRecorded)})]}),l.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mt-1 bg-slate-50 px-2 py-1 rounded",children:[l.jsx("span",{children:"Factur"}),l.jsx("span",{children:_(C.baseEnergyAmountHT)})]})]}),l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-1 pt-2",children:[l.jsxs("div",{className:`flex justify-between text-xs ${C.cosPhiAdjustmentAmount>0?"text-red-600":"text-emerald-600"}`,children:[l.jsx("span",{children:"Ajustement Cos "}),l.jsx("span",{children:_(C.cosPhiAdjustmentAmount)})]}),l.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[l.jsxs("span",{children:["Prime Fixe (",C.subPower,"kVA x ",v(j.powerUnitPrice),")"]}),l.jsx("span",{children:_(C.powerPremium)})]}),C.powerOverrunAmount>0&&l.jsxs("div",{className:"flex justify-between text-xs text-red-600 font-bold bg-red-50 p-1 rounded",children:[l.jsxs("span",{children:["Pnalit Puissance (",v(C.powerOverrun)," kVA x ",j.powerOverrunPenalty,")"]}),l.jsx("span",{children:_(C.powerOverrunAmount)})]})]}),l.jsxs("div",{className:"text-xs text-slate-500 pt-2 space-y-1 border-t mt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total nergie TTC"}),l.jsx("span",{children:_(C.total1_TTC)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Fixe TTC"}),l.jsx("span",{children:_(C.total2_TTC)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (RTT+Muni)"}),l.jsx("span",{children:_(j.rtt+C.municipalTax)})]})]})]}),(parseFloat(M.lateFees)>0||parseFloat(M.relanceFees)>0||parseFloat(M.adjustment)!==0)&&l.jsxs("div",{className:"pt-2 text-xs text-orange-600 border-t mt-2 flex justify-between font-bold",children:[l.jsx("span",{children:"Frais & Ajustements"}),l.jsx("span",{children:_((parseFloat(M.lateFees)||0)+(parseFloat(M.relanceFees)||0)+(parseFloat(M.adjustment)||0))})]})]}),l.jsx("div",{className:"mt-6 border-t-2 border-slate-800 pt-4",children:l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("span",{className:"text-lg font-black text-slate-900 uppercase",children:"Net  Payer"}),l.jsx("span",{className:`text-3xl font-black font-mono tracking-tight ${W?"text-red-700":"text-blue-900"}`,children:_(C.netToPay)})]})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 h-[400px] flex flex-col",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center",children:[l.jsx(nh,{size:12,className:"mr-1"})," Historique Cloud"]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:Z.map(N=>l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 text-xs hover:bg-blue-50 transition-colors",children:[l.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mb-1",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(Yl,{size:12,className:"mr-1"})," ",N.recordDate]}),l.jsx("span",{className:"text-blue-600",children:_(N.netToPay)})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[10px] text-slate-500 mt-2 border-t pt-2 border-slate-200",children:[l.jsxs("div",{children:["Conso: ",l.jsx("span",{className:"font-mono text-slate-700",children:v(N.type==="MT"?N.energyRecorded:N.consumptionGrid)})," kWh"]}),l.jsx("div",{children:N.type==="MT"?`P.Max: ${N.maxPower} kVA`:N.type==="BT_PV"?`PV: ${v(N.productionPv)}`:"Standard"}),N.type==="MT"&&l.jsxs("div",{children:["Cos : ",l.jsx("span",{className:N.cosPhi<.8?"text-red-500 font-bold":"text-emerald-600",children:N.cosPhi})]}),N.type==="MT"&&N.reactiveCons>0&&l.jsxs("div",{children:["Ractif: ",N.reactiveCons]})]})]},N.docId))})]})]})]}),p&&l.jsx("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl",children:p.msg})]})},ek=({onBack:t,userRole:e})=>{const[n,r]=ee.useState(1),[s,i]=ee.useState([]),[o,u]=ee.useState(null),[c,h]=ee.useState(!1),[p,m]=ee.useState(null),[y,A]=ee.useState(T(new Date)),[P,j]=ee.useState(!1),[F,I]=ee.useState({elecPrice:.291,offLoadFactor:.3});function T(U){U=new Date(Date.UTC(U.getFullYear(),U.getMonth(),U.getDate())),U.setUTCDate(U.getUTCDate()+4-(U.getUTCDay()||7));var Z=new Date(Date.UTC(U.getUTCFullYear(),0,1)),L=Math.ceil(((U-Z)/864e5+1)/7);return`${U.getUTCFullYear()}-W${L}`}ee.useEffect(()=>{const U=ku(Er("air_logs"),dx("id","desc")),Z=Uf(U,L=>{i(L.docs.map(W=>({...W.data(),docId:W.id})))});return()=>Z()},[]);const b=[{id:1,name:"Compresseur 1",serial:"CAI 827281",model:"Ceccato CSB 30",power:22},{id:2,name:"Compresseur 2",serial:"CAI 808264",model:"Ceccato CSB 30",power:22}],V={oilFilter:2e3,airFilter:2e3,separator:2e3,oil:2e3,general:500},M={oilFilter:"Filtre  Huile",airFilter:"Filtre  Air",separator:"Sparateur",oil:"Huile",general:"Inspection"},q={oilFilter:LA,airFilter:sh,separator:c0,oil:c0,general:MA},[_,v]=ee.useState({1:{lastRun:19960,newRun:"",lastLoad:10500,newLoad:"",description:"",lastMaint:{oilFilter:19960,airFilter:19960,separator:19960,oil:19960,general:19960}},2:{lastRun:18500,newRun:"",lastLoad:9200,newLoad:"",description:"",lastMaint:{oilFilter:18500,airFilter:18500,separator:18500,oil:18500,general:18500}}});ee.useEffect(()=>{const U=s.filter(Z=>Z.compName===b.find(L=>L.id===n).name);if(U.length>0){const Z=U.find(C=>C.type==="WEEKLY_REPORT"),L=Z?Z.newRun:_[n].lastRun,W=Z?Z.newLoad:_[n].lastLoad,J={..._[n].lastMaint};Object.keys(V).forEach(C=>{const B=U.find(N=>N.type==="MAINTENANCE"&&N.maintType===M[C]);B&&(J[C]=B.indexDone)}),v(C=>({...C,[n]:{...C[n],lastRun:L,lastLoad:W,lastMaint:J}}))}},[n,s]);const x=(U,Z)=>v(L=>({...L,[n]:{...L[n],[U]:Z}})),E=()=>{const U=_[n],Z=b.find(K=>K.id===n),L=Math.max(0,(parseFloat(U.newRun)||0)-(parseFloat(U.lastRun)||0)),W=Math.max(0,(parseFloat(U.newLoad)||0)-(parseFloat(U.lastLoad)||0)),J=L>0?W/L*100:0,C=L/47.5*100,B=W*Z.power+(L-W)*Z.power*F.offLoadFactor,N=parseFloat(U.newRun)||parseFloat(U.lastRun)||0,H={};return Object.keys(V).forEach(K=>{const le=(U.lastMaint[K]||0)+V[K]-N;H[K]={remaining:le}}),{runDelta:L,loadDelta:W,loadRate:J,utilRate:C,energyKwh:B,costHT:B*F.elecPrice,maintStatus:H}},S=async()=>{const U=E(),Z=_[n];if(!Z.newRun){m("Index manquant");return}const L={id:Date.now(),type:"WEEKLY_REPORT",week:y,compName:b.find(W=>W.id===n).name,...Z,...U};await Bl(Er("air_logs"),L),v(W=>({...W,[n]:{...W[n],lastRun:Z.newRun,newRun:"",lastLoad:Z.newLoad,newLoad:"",description:""}})),m("Enregistr"),setTimeout(()=>m(null),3e3)},k=(U,Z)=>{const L=parseFloat(_[n].newRun)||parseFloat(_[n].lastRun),W={..._[n].lastMaint,[U]:L};v(C=>({...C,[n]:{...C[n],lastMaint:W}}));const J={id:Date.now(),type:"MAINTENANCE",date:new Date().toLocaleDateString(),compName:b.find(C=>C.id===n).name,maintType:M[U],indexDone:L,details:Z};Bl(Er("air_logs"),J),u(null),m("Maintenance valide")},w=E(),ge=(U,Z)=>U<=0?"text-red-600 font-bold":U<Z*.2?"text-amber-500 font-bold":"text-emerald-600",ke=(U,Z)=>U<=0?"bg-red-600":U<Z*.2?"bg-amber-500":"bg-emerald-500";return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-2 md:mb-0",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:l.jsx(ju,{size:20})}),l.jsx(ta,{size:"h-8"}),l.jsx("div",{className:"w-px h-8 bg-slate-200"}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-black text-blue-900 flex items-center",children:[l.jsx(sh,{className:"mr-2",size:20})," Air Comprim"]}),l.jsxs("div",{className:"flex items-center text-xs text-slate-500 mt-1",children:[l.jsx(Jl,{size:10,className:"mr-1"})," Site Mgrine",l.jsx("span",{className:"mx-2",children:""}),l.jsx(Yl,{size:10,className:"mr-1"})," Semaine ",y.split("-W")[1]," ",y.split("-W")[0]]})]})]}),l.jsx("div",{className:"flex gap-4",children:l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[l.jsx(Ql,{size:16,className:"mr-2"})," Guide & Consignes"]})})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 shadow-2xl relative",onClick:U=>U.stopPropagation(),children:[l.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:""}),l.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center text-lg",children:[l.jsx(Ql,{className:"mr-2 text-blue-900"})," Instructions ES3000"]}),l.jsxs("div",{className:"space-y-6 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[l.jsxs("h4",{className:"font-bold text-blue-900 mb-3 flex items-center",children:[l.jsx(Dc,{size:16,className:"mr-2"})," Navigation Contrleur"]}),l.jsxs("ol",{className:"text-sm text-slate-600 space-y-3 list-decimal pl-5",children:[l.jsxs("li",{children:["L'cran affiche par dfaut la ",l.jsx("strong",{children:"Pression de sortie"}),"."]}),l.jsxs("li",{children:["Appuyez sur la flche ",l.jsx("strong",{children:"DROITE"})," (Tab) pour faire dfiler le menu principal."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Heures Totales :"})," Cherchez le symbole  (Horloge pleine). Notez la valeur."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Heures en Charge :"})," Continuez de dfiler jusqu'au symbole  (Piston/clair). C'est le temps de travail effectif."]}),l.jsxs("li",{children:["Pour revenir, appuyez sur ",l.jsx("strong",{children:"C (Cancel)"})," ou attendez 30s."]})]})]}),l.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[l.jsxs("h4",{className:"font-bold text-orange-900 mb-3 flex items-center",children:[l.jsx(Mo,{size:16,className:"mr-2"})," Bonnes Pratiques & Scurit"]}),l.jsxs("ul",{className:"text-sm text-slate-700 space-y-2 list-disc pl-5",children:[l.jsx("li",{children:"Vrifier le niveau d'huile visuel avant chaque dmarrage ou relev (hublot latral)."}),l.jsx("li",{children:"couter s'il y a des bruits anormaux ou des fuites d'air audibles lors de la mise en charge."}),l.jsx("li",{children:"Purger le rservoir d'air quotidiennement si la purge auto est dfaillante."}),l.jsx("li",{children:"Ne jamais ouvrir le capot machine en marche."})]})]})]})]})}),l.jsxs("main",{className:"p-8 max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[l.jsx("div",{className:"flex gap-2",children:b.map(U=>l.jsxs("button",{onClick:()=>r(U.id),className:`flex-1 p-4 rounded-xl border text-left transition-all ${n===U.id?"bg-white border-blue-900 shadow-md ring-1 ring-blue-900":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[l.jsx("div",{className:"font-bold text-slate-700",children:U.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[U.model," - ",U.serial]})]},U.id))}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("h2",{className:"font-bold flex items-center text-slate-800",children:[l.jsx(GA,{className:"mr-2 text-blue-900"})," Saisie Relev"]}),l.jsxs("div",{className:"flex items-center text-sm bg-slate-100 px-3 py-1 rounded-lg",children:[l.jsx("span",{className:"font-bold text-slate-500 mr-2",children:"Semaine :"}),l.jsx("input",{type:"week",value:y,onChange:U=>A(U.target.value),className:"bg-transparent font-bold text-slate-800 outline-none cursor-pointer"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Heures Marche"}),e==="ADMIN"&&l.jsx("button",{onClick:()=>j(!P),className:"text-[10px] text-blue-900 hover:underline",children:"Modifier Prcdent"})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),l.jsx("input",{type:"number",readOnly:!P,className:`w-full text-xs bg-transparent font-mono ${P?"border rounded bg-white p-1":""}`,value:_[n].lastRun||"",onChange:U=>x("lastRun",U.target.value)})]}),l.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:_[n].newRun||"",onChange:U=>x("newRun",U.target.value)})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block uppercase",children:"Heures Charge"}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),l.jsx("input",{type:"number",readOnly:!P,className:`w-full text-xs bg-transparent font-mono ${P?"border rounded bg-white p-1":""}`,value:_[n].lastLoad||"",onChange:U=>x("lastLoad",U.target.value)})]}),l.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:_[n].newLoad||"",onChange:U=>x("newLoad",U.target.value)})]})]}),l.jsx("textarea",{className:"w-full border p-3 rounded-lg text-sm mb-2 focus:border-blue-900 outline-none",rows:"3",placeholder:"Note / Observation sur l'tat du compresseur...",value:_[n].description,onChange:U=>x("description",U.target.value)})]})]}),l.jsx("div",{className:"lg:col-span-5 space-y-6",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden",children:[l.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center border-b pb-2",children:[l.jsx(Dc,{className:"mr-2 text-blue-900"})," Analyse Performance"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-emerald-50 p-3 rounded-xl border border-emerald-100",children:[l.jsx("div",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-1",children:"Taux Charge"}),l.jsxs("div",{className:"font-black text-2xl text-emerald-800",children:[w.loadRate.toFixed(1),"%"]}),l.jsx("div",{className:"w-full bg-emerald-200 h-1.5 rounded-full mt-2 overflow-hidden",children:l.jsx("div",{className:"bg-emerald-600 h-full rounded-full transition-all duration-500",style:{width:`${w.loadRate}%`}})})]}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100",children:[l.jsx("div",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-wider mb-1",children:"Taux Utilisation"}),l.jsxs("div",{className:"font-black text-2xl text-blue-800",children:[w.utilRate.toFixed(1),"%"]}),l.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"Base hebdo 47.5h"})]})]}),l.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg border border-slate-200 mb-6",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Cot lec. Estim"}),l.jsxs("span",{className:"font-mono font-black text-slate-800 text-lg",children:[w.costHT.toFixed(0)," ",l.jsx("span",{className:"text-xs",children:"DT"})]})]}),l.jsxs("button",{onClick:S,className:"w-full bg-blue-900 text-white py-3 rounded-xl font-bold hover:bg-blue-800 shadow-lg transition-all flex items-center justify-center",children:[l.jsx(Xl,{size:18,className:"mr-2"})," Valider Relev"]})]})}),l.jsx("div",{className:"lg:col-span-12",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center",children:[l.jsx(Lc,{className:"mr-2 text-red-600"})," Tableau de Maintenance"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4",children:Object.keys(V).map(U=>{const Z=q[U],L=w.maintStatus[U].remaining,W=V[U],J=L<W*.2;return l.jsxs("div",{className:`flex flex-col p-4 border rounded-xl hover:shadow-lg transition-all relative overflow-hidden group ${J?"bg-red-50 border-red-200":"bg-slate-50"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:l.jsx(Z,{size:40})}),l.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:M[U]}),l.jsxs("div",{className:`text-xl font-black mb-2 ${ge(L,W)}`,children:[L," h"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mb-2 overflow-hidden",children:l.jsx("div",{className:`h-full ${ke(L,W)}`,style:{width:`${Math.min(100,L/W*100)}%`}})}),J&&l.jsxs("div",{className:"text-[10px] text-red-600 font-bold mb-2 flex items-center",children:[l.jsx(Mo,{size:10,className:"mr-1"})," Planifier"]}),l.jsx("button",{onClick:()=>u(U),className:"mt-auto w-full py-2 bg-white border border-slate-200 rounded text-xs font-bold hover:bg-slate-800 hover:text-white transition-colors",children:"Faire Maint."})]},U)})})]})}),l.jsx("div",{className:"lg:col-span-12",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center tracking-wider",children:[l.jsx(OA,{size:16,className:"mr-2"})," Historique Dtaill"]}),l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold uppercase text-xs",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 rounded-l-lg",children:"Date / Semaine"}),l.jsx("th",{className:"p-3",children:"Type"}),l.jsx("th",{className:"p-3",children:"Dtails / Index"}),l.jsx("th",{className:"p-3",children:"Technicien"}),l.jsx("th",{className:"p-3 text-right rounded-r-lg",children:"Cot / Statut"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:s.filter(U=>U.compName===b.find(Z=>Z.id===n).name).sort((U,Z)=>Z.id-U.id).map(U=>{var Z,L,W;return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsx("td",{className:"p-3 font-medium text-slate-700",children:U.type==="MAINTENANCE"?U.date:`Semaine ${((Z=U.week)==null?void 0:Z.split("-W")[1])||"?"}`}),l.jsx("td",{className:"p-3",children:U.type==="MAINTENANCE"?l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-amber-100 text-amber-700 text-xs font-bold",children:[l.jsx(Lc,{size:10,className:"mr-1"})," ",U.maintType]}):l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-700 text-xs font-bold",children:[l.jsx(Dc,{size:10,className:"mr-1"})," Relev"]})}),l.jsx("td",{className:"p-3 text-slate-600 text-xs",children:U.type==="MAINTENANCE"?`Effectu  ${U.indexDone} h`:`Marche: ${U.newRun}h | Charge: ${U.newLoad}h`}),l.jsx("td",{className:"p-3 text-slate-500 text-xs font-mono",children:U.type==="MAINTENANCE"?(L=U.details)==null?void 0:L.tech:"-"}),l.jsx("td",{className:"p-3 text-right font-bold",children:U.type==="MAINTENANCE"?l.jsx("span",{className:"text-emerald-600",children:"OK"}):l.jsxs("span",{className:"text-slate-700",children:[(W=U.costHT)==null?void 0:W.toFixed(0)," DT"]})})]},U.docId)})})]}),s.length===0&&l.jsx("div",{className:"text-center p-8 text-slate-400 italic",children:"Aucun historique disponible"})]})]})})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm shadow-2xl transform transition-all scale-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-100 pb-3",children:[l.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[l.jsx(Lc,{className:"mr-2 text-red-600",size:20})," Validation Maint."]}),l.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600",children:l.jsx(Ws,{size:20})})]}),l.jsxs("div",{className:"mb-4 text-sm text-slate-600 bg-amber-50 p-3 rounded-lg border border-amber-100",children:["Vous validez la maintenance : ",l.jsx("strong",{children:M[o]})]}),l.jsxs("form",{onSubmit:U=>{U.preventDefault();const Z=new FormData(U.target);k(o,{date:Z.get("date"),tech:Z.get("tech"),ref:Z.get("ref"),notes:Z.get("notes")})},children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Date Intervention *"}),l.jsx("input",{name:"date",type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Intervenant / Technicien *"}),l.jsx("input",{name:"tech",placeholder:"Nom du technicien",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rf. Fiche Intervention *"}),l.jsx("input",{name:"ref",placeholder:"ex: FI-2024-001",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Notes / Observations"}),l.jsx("textarea",{name:"notes",placeholder:"Dtails supplmentaires...",className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none",rows:"2"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[l.jsx("button",{type:"button",onClick:()=>u(null),className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-50 rounded-lg transition-colors",children:"Annuler"}),l.jsxs("button",{type:"submit",className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold shadow-lg transition-all flex items-center",children:[l.jsx(VA,{size:18,className:"mr-2"})," Valider"]})]})]})]})}),p&&l.jsxs("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center",children:[l.jsx(Xl,{className:"mr-2"})," ",p]})]})},tk=({onBack:t})=>{const[e,n]=ee.useState([]),[r,s]=ee.useState({username:"",password:"",role:"EQUIPE_ENERGIE"}),[i,o]=ee.useState(!1),[u,c]=ee.useState(null);ee.useEffect(()=>{const m=ku(Er("users")),y=Uf(m,A=>{n(A.docs.map(P=>({...P.data(),id:P.id})))});return()=>y()},[]);const h=async m=>{m.preventDefault(),!(!r.username||!r.password)&&(o(!0),await Bl(Er("users"),r),s({username:"",password:"",role:"EQUIPE_ENERGIE"}),o(!1))},p=async m=>{if(u===m)try{await AN(Af(Kl,"artifacts",appId,"public","data","users",m)),c(null)}catch(y){console.error("Erreur suppression:",y)}else c(m),setTimeout(()=>c(null),3e3)};return l.jsxs("div",{className:"min-h-screen bg-slate-100 p-8",children:[l.jsx("header",{className:"max-w-4xl mx-auto mb-8 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:t,className:"mr-4 p-2 bg-white rounded-full shadow hover:bg-slate-50",children:l.jsx(ju,{size:20})}),l.jsx(ta,{size:"h-8"}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 ml-4",children:"Administration"})]})}),l.jsxs("main",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 h-fit",children:[l.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-blue-900",children:[l.jsx(HA,{className:"mr-2"})," Ajouter Utilisateur"]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Nom d'utilisateur"}),l.jsx("input",{type:"text",value:r.username,onChange:m=>s({...r,username:m.target.value}),className:"w-full border p-2 rounded",placeholder:"ex: Maintenance"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Mot de passe"}),l.jsx("input",{type:"text",value:r.password,onChange:m=>s({...r,password:m.target.value}),className:"w-full border p-2 rounded",placeholder:"******"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rle"}),l.jsxs("select",{value:r.role,onChange:m=>s({...r,role:m.target.value}),className:"w-full border p-2 rounded bg-white font-bold text-slate-700",children:[l.jsx("option",{value:"ADMIN",children:"Administrateur (Accs Total)"}),l.jsx("option",{value:"EQUIPE_ENERGIE",children:"quipe nergie (Saisie)"}),l.jsx("option",{value:"DIRECTION",children:"Direction (Visuel Uniquement)"})]})]}),l.jsx("button",{disabled:i,className:"w-full bg-blue-900 text-white py-2 rounded font-bold hover:bg-blue-800",children:i?"...":"Ajouter"})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-slate-700",children:[l.jsx(YA,{className:"mr-2"})," Liste Utilisateurs (",e.length,")"]}),l.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:e.map(m=>l.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg hover:bg-slate-50 group",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold",children:m.username}),l.jsx("div",{className:`text-[10px] px-2 py-0.5 rounded w-fit uppercase font-bold 
                                        ${m.role==="ADMIN"?"bg-red-100 text-red-700":m.role==="DIRECTION"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:m.role==="ADMIN"?"Admin":m.role==="DIRECTION"?"Direction":"quipe"})]}),l.jsx("button",{onClick:()=>p(m.id),className:`p-2 rounded transition-all flex items-center ${u===m.id?"bg-red-600 text-white w-24 justify-center text-xs font-bold":"text-slate-300 hover:text-red-600"}`,children:u===m.id?"Confirmer ?":l.jsx(Xx,{size:16})})]},m.id))})]})]})]})},nk=({onBack:t,userRole:e})=>{const[n,r]=ee.useState("MEGRINE"),[s,i]=ee.useState({}),[o,u]=ee.useState(!1),[c,h]=ee.useState(!1),[p,m]=ee.useState(!1),y=new Date;y.setMonth(y.getMonth()-1);const[A,P]=ee.useState(y.toISOString().slice(0,7)),[j,F]=ee.useState(null),[I,T]=ee.useState({MEGRINE:{name:"Mgrine",area:32500,covered:30100,open:2400,glazed:365,coveredBreakdown:[{label:"Zone A (Atelier FIAT)",value:10100},{label:"ITALCAR Gros (Magasin)",value:1e4},{label:"Zone B (Atelier IVECO)",value:9e3},{label:"Showroom & Rception",value:1e3}],visionTargets:{reduction:15,renewable:20},energyMix:[{name:"lectricit",value:97,color:"bg-blue-900"},{name:"Gaz",value:3,color:"bg-orange-500"}],elecUsage:[{name:"Clim/Chauffage",value:40,ratio:"35 kWh/m",significant:!0,subUsages:[{name:"Groupes d'eau glace",value:60},{name:"Split System Bureaux",value:30},{name:"CTA",value:10}]},{name:"clairage",value:27,ratio:"12 kWh/m",significant:!0,subUsages:[{name:"Ateliers (Sodium)",value:50},{name:"Showroom (LED)",value:30},{name:"Extrieur",value:20}]},{name:"Air Comprim",value:17,ratio:"0.12 kWh/Nm",significant:!0,subUsages:[{name:"Compresseur Principal",value:80},{name:"Scheur",value:20}]},{name:"Informatique",value:8,ratio:"-",significant:!1,subUsages:[]},{name:"Services",value:5,ratio:"-",significant:!1,subUsages:[]},{name:"Gaz (Primaire)",value:3,ratio:"-",significant:!1,subUsages:[]}]},ELKHADHRA:{name:"El Khadhra",area:9500,covered:7e3,open:2500,glazed:40,coveredBreakdown:[{label:"Atelier FIAT",value:3e3},{label:"ITALCAR Gros",value:3e3},{label:"Rception",value:1e3}],visionTargets:{reduction:10,renewable:5},energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Clim/Chauffage",value:60,ratio:"45 kWh/m",significant:!0,subUsages:[{name:"Global",value:100}]},{name:"clairage",value:25,ratio:"15 kWh/m",significant:!0,subUsages:[{name:"Global",value:100}]},{name:"Air Comprim",value:5,ratio:"-",significant:!1,subUsages:[]},{name:"Divers",value:10,ratio:"-",significant:!1,subUsages:[]}]},LAC:{name:"Lac",area:2050,covered:850,open:1200,glazed:116,coveredBreakdown:[{label:"Showroom",value:850}],visionTargets:{reduction:25,renewable:40},energyMix:[],elecUsage:[{name:"clairage",value:45,ratio:"22 kWh/m",significant:!0,subUsages:[{name:"Spots Halognes",value:70},{name:"LED",value:30}]},{name:"Climatisation",value:45,ratio:"25 kWh/m",significant:!0,subUsages:[{name:"VRV",value:100}]},{name:"Informatique",value:10,ratio:"-",significant:!1,subUsages:[]}]},NAASSEN:{name:"Naassen",area:32500,covered:1850,open:30680,glazed:0,coveredBreakdown:[{label:"Rception",value:920},{label:"Atelier FIAT",value:900}],visionTargets:{reduction:5,renewable:0},energyMix:[{name:"lec",value:100,color:"bg-blue-900"}],elecUsage:[]},CARTHAGE:{name:"Rue de Carthage",area:320,covered:320,open:0,glazed:70,coveredBreakdown:[{label:"Showroom",value:320}],visionTargets:{reduction:10,renewable:0},energyMix:[{name:"lec",value:100,color:"bg-blue-900"}],elecUsage:[]},AZUR:{name:"Azur City",area:130,covered:130,open:0,glazed:0,coveredBreakdown:[{label:"Showroom",value:130}],visionTargets:{reduction:10,renewable:0},energyMix:[{name:"lec",value:100,color:"bg-blue-900"}],elecUsage:[]}}),b=(C,B,N)=>{T(H=>{const K={...H},ne=K[n],le=[...ne.elecUsage];return le[C]={...le[C],[B]:N},ne.elecUsage=le,K})},V=(C,B,N,H)=>{T(K=>{const ne={...K},le=ne[n],Ne=[...le.elecUsage],At=[...Ne[C].subUsages];return At[B]={...At[B],[N]:H},Ne[C]={...Ne[C],subUsages:At},le.elecUsage=Ne,ne})},M=C=>{T(B=>{const N={...B};return N[n].elecUsage[C].subUsages.push({name:"Nouveau",value:0}),N})},q=(C,B)=>{T(N=>{const H={...N};return H[n].elecUsage[C].subUsages.splice(B,1),H})},_=(C,B)=>{T(N=>({...N,[n]:{...N[n],visionTargets:{...N[n].visionTargets,[C]:parseFloat(B)}}}))},v=["REF",2018,2019,2020,2021,2022,2023,2024,2025];ee.useEffect(()=>{const C=ex(Kl,"artifacts",appId,"public","data","site_history");gx(C).then(B=>{const N={};B.forEach(H=>{const[K,ne]=H.id.split("_");N[K]||(N[K]={}),N[K][ne]=H.data()}),i(H=>({...H,...N}))})},[]);const x=C=>{if(!s[C]){const B={};v.forEach(N=>{C==="LAC"?B[N]={grid:Array(12).fill(""),pvProd:Array(12).fill(""),pvExport:Array(12).fill(""),temperatures:Array(12).fill("")}:B[N]={months:Array(12).fill(""),temperatures:Array(12).fill("")}}),i(N=>({...N,[C]:B}))}},E=(C,B,N="months")=>{var K;const H=(K=s[C])==null?void 0:K[B];return H&&H[N]||Array(12).fill("")},S=(C,B,N,H="months")=>{i(K=>{const ne=K[n]||{},le=ne[C]||{},Ne=le[H]?[...le[H]]:Array(12).fill("");return Ne[B]=N,{...K,[n]:{...ne,[C]:{...le,[H]:Ne}}}})},k=async()=>{const C=n;if(s[C]){try{for(const B of Object.keys(s[C]))await SN(Af(Kl,"artifacts",appId,"public","data","site_history",`${C}_${B}`),s[C][B]);F("Historique sauvegard"),u(!1)}catch(B){console.error(B),F("Erreur")}setTimeout(()=>F(null),3e3)}},w=I[n],ge=new Date().getFullYear(),ke=new Date().getMonth()-1,U=()=>{const C=E(n,"REF",n==="LAC"?"grid":"months"),B=E(n,ge,n==="LAC"?"grid":"months");let N=parseFloat(C[ke])||0,H=parseFloat(B[ke])||0;if(n==="LAC"){const Me=E(n,"REF","pvProd")[ke]||0,mt=E(n,"REF","pvExport")[ke]||0,Qe=E(n,ge,"pvProd")[ke]||0,Ye=E(n,ge,"pvExport")[ke]||0;N+=Math.max(0,Me-mt),H+=Math.max(0,Qe-Ye)}const K=N>0?(H-N)/N*100:0;let ne=0,le=0;for(let Me=0;Me<=ke;Me++){let mt=parseFloat(C[Me])||0,Qe=parseFloat(B[Me])||0;if(n==="LAC"){const Ye=parseFloat(E(n,"REF","pvProd")[Me])||0,_e=parseFloat(E(n,"REF","pvExport")[Me])||0,qt=parseFloat(E(n,ge,"pvProd")[Me])||0,nn=parseFloat(E(n,ge,"pvExport")[Me])||0;mt+=Math.max(0,Ye-_e),Qe+=Math.max(0,qt-nn)}ne+=mt,le+=Qe}const Ne=ne>0?(le-ne)/ne*100:0,At=new Date(ge,ke).toLocaleString("fr-FR",{month:"long"});return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-blue-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Performance Mensuelle"}),l.jsxs("div",{className:"text-xl font-black text-slate-800 capitalize mb-4",children:[At," ",ge," ",l.jsx("span",{className:"text-sm font-normal text-slate-400",children:"vs Rf."})]}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black text-blue-900",children:[H.toLocaleString()," ",l.jsx("span",{className:"text-sm text-slate-400 font-bold",children:"kWh"})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Rf: ",N.toLocaleString()," kWh"]})]}),l.jsxs("div",{className:`px-4 py-2 rounded-xl font-bold text-lg flex items-center ${K<=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[K>0?l.jsx(rh,{size:20,className:"mr-2"}):l.jsx(y0,{size:20,className:"mr-2"}),K>0?"+":"",K.toFixed(1),"%"]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-indigo-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Performance Cumule (YTD)"}),l.jsxs("div",{className:"text-xl font-black text-slate-800 capitalize mb-4",children:["Jan - ",At," ",l.jsx("span",{className:"text-sm font-normal text-slate-400",children:"vs Rf."})]}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-black text-indigo-900",children:[le.toLocaleString()," ",l.jsx("span",{className:"text-sm text-slate-400 font-bold",children:"kWh"})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Rf: ",ne.toLocaleString()," kWh"]})]}),l.jsxs("div",{className:`px-4 py-2 rounded-xl font-bold text-lg flex items-center ${Ne<=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[Ne>0?l.jsx(rh,{size:20,className:"mr-2"}):l.jsx(y0,{size:20,className:"mr-2"}),Ne>0?"+":"",Ne.toFixed(1),"%"]})]})]})]})]})},Z=()=>{const C=ge-1,B=parseFloat(E(n,ge,"temperatures")[ke])||0,N=parseFloat(E(n,C,"temperatures")[ke])||0,H=B-N;let K="Tempratures stables. Impact neutre.",ne="text-slate-600";H>2?(K="Forte chaleur vs N-1. Surcharge Clim attendue.",ne="text-red-600"):H>.5?(K="Plus chaud que N-1. Lgre hausse Clim.",ne="text-orange-600"):H<-2?(K="Nettement plus froid. Baisse Clim / Hausse Chauff.",ne="text-blue-600"):H<-.5&&(K="Plus frais que N-1.",ne="text-cyan-600");const le=new Date(ge,ke).toLocaleString("fr-FR",{month:"long"});return l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm h-full flex flex-col relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx(ol,{size:20,className:"text-amber-500"}),l.jsxs("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider",children:["Impact Mto (",le,")"]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-xs text-slate-400 font-bold mb-1",children:["N-1 (",C,")"]}),l.jsxs("div",{className:"text-2xl font-black text-slate-600",children:[N.toFixed(1),""]})]}),l.jsx("div",{className:"h-px flex-1 bg-slate-200 mx-4 relative",children:l.jsxs("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 px-2 py-1 rounded text-xs font-bold ${H>0?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:[H>0?"+":"",H.toFixed(1),""]})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-xs text-slate-400 font-bold mb-1",children:["Actuel (",ge,")"]}),l.jsxs("div",{className:"text-2xl font-black text-slate-800",children:[B.toFixed(1),""]})]})]}),l.jsxs("div",{className:`mt-auto p-3 rounded-xl bg-slate-50 border border-slate-100 text-xs font-bold ${ne} flex items-start`,children:[l.jsx(FA,{size:14,className:"mr-2 mt-0.5 flex-shrink-0"}),K]})]})},L=()=>{const C=w.visionTargets,N=E(n,"REF",n==="LAC"?"grid":"months").reduce((Qe,Ye)=>Qe+(parseFloat(Ye)||0),0),K=E(n,2024,n==="LAC"?"grid":"months").reduce((Qe,Ye)=>Qe+(parseFloat(Ye)||0),0),le=E(n,2025,n==="LAC"?"grid":"months").reduce((Qe,Ye)=>Qe+(parseFloat(Ye)||0),0)||K*.98,Ne=N*(1-C.reduction/100),At=N-K,Me=N-Ne,mt=Me>0?Math.min(100,Math.max(0,At/Me*100)):0;return l.jsxs("div",{className:"bg-gradient-to-r from-blue-900 to-indigo-900 p-6 rounded-2xl shadow-lg mt-8 text-white relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 opacity-10 transform translate-x-10 -translate-y-10",children:l.jsx(v0,{size:200})}),l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center relative z-10",children:[l.jsxs("div",{className:"mb-6 md:mb-0 flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(h0,{className:"text-yellow-400",size:24}),l.jsxs("h3",{className:"font-black text-xl uppercase tracking-tight",children:["VISION 2030 - ",w.name]})]}),l.jsxs("p",{className:"text-blue-200 text-sm max-w-lg mb-4 italic",children:['"Objectif de rduire la consommation de ',l.jsxs("strong",{children:[C.reduction,"%"]})," et d'atteindre ",l.jsxs("strong",{children:[C.renewable,"%"]}),` d'approvisionnement renouvelable d'ici 2030."`]}),l.jsxs("div",{className:"mt-4 flex flex-wrap gap-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-black",children:[K.toLocaleString()," ",l.jsx("span",{className:"text-xs font-normal text-blue-300",children:"kWh"})]}),l.jsx("div",{className:"text-[10px] uppercase font-bold text-blue-300",children:"Conso 2024"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-black",children:[le.toLocaleString()," ",l.jsx("span",{className:"text-xs font-normal text-blue-300",children:"kWh"})]}),l.jsx("div",{className:"text-[10px] uppercase font-bold text-blue-300",children:"Est. 2025"})]}),l.jsxs("div",{className:"bg-white/10 px-3 py-1 rounded-lg border border-white/20",children:[l.jsxs("div",{className:"text-2xl font-black text-yellow-400",children:[Ne.toLocaleString()," ",l.jsx("span",{className:"text-xs font-normal text-yellow-200/70",children:"kWh"})]}),l.jsxs("div",{className:"text-[10px] uppercase font-bold text-yellow-200",children:["Cible 2030 (-",C.reduction,"%)"]})]}),l.jsxs("div",{className:"bg-white/10 px-3 py-1 rounded-lg border border-white/20",children:[l.jsxs("div",{className:"text-2xl font-black text-emerald-400",children:[C.renewable,"%"]}),l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-200",children:"Cible Renouvelable"})]})]})]}),l.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20 w-full md:w-auto min-w-[220px]",children:[l.jsxs("div",{className:"text-xs font-bold uppercase text-blue-300 mb-2 flex justify-between",children:[l.jsx("span",{children:"Progression Global"}),l.jsxs("span",{children:[mt.toFixed(0),"%"]})]}),l.jsx("div",{className:"w-full bg-black/30 h-3 rounded-full overflow-hidden mb-2 relative",children:l.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-emerald-400 h-full rounded-full transition-all duration-1000",style:{width:`${mt}%`}})}),l.jsx("div",{className:"text-[10px] font-mono text-blue-200 text-center",children:"Vers l'efficacit nergtique"})]})]})]})},W=()=>{const C=n==="LAC"?35:0,B=100-C;return l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm h-full flex flex-col justify-between overflow-hidden relative",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[l.jsx(BA,{size:20,className:"text-emerald-500"}),l.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider",children:"Origine nergie"})]}),l.jsx("div",{className:"flex items-center justify-center relative z-10 py-2",children:l.jsxs("div",{className:"relative w-32 h-32",children:[l.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[l.jsx("path",{className:"text-slate-100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.8"}),l.jsx("path",{className:"text-emerald-500",strokeDasharray:`${C}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.8",strokeLinecap:"round"})]}),l.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center",children:[l.jsxs("div",{className:"text-2xl font-black text-slate-800",children:[C,"%"]}),l.jsx("div",{className:"text-[8px] uppercase font-bold text-emerald-600",children:"Renouvelable"})]})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center relative z-10",children:[l.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[l.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Rseau"}),l.jsxs("div",{className:"font-bold text-slate-700",children:[B,"%"]})]}),l.jsxs("div",{className:"bg-emerald-50 p-2 rounded-lg",children:[l.jsx("div",{className:"text-[10px] text-emerald-600 uppercase font-bold",children:"Solaire"}),l.jsxs("div",{className:"font-bold text-emerald-800",children:[C,"%"]})]})]})]})},J=()=>l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm h-full relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:l.jsx(th,{size:120})}),l.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-slate-50 pb-2 relative z-10",children:[l.jsx(Jl,{size:20,className:"text-red-600"}),l.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider",children:"Fiche Technique"})]}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"flex items-baseline mb-4",children:[l.jsx("span",{className:"text-4xl font-black text-slate-800",children:w.area.toLocaleString()}),l.jsx("span",{className:"ml-2 text-sm font-bold text-slate-400",children:"m Totaux"})]}),l.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-200",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Espace Couvert"}),l.jsxs("span",{className:"font-black text-slate-800",children:[w.covered.toLocaleString()," m"]})]}),l.jsx("div",{className:"space-y-1 pl-2",children:w.coveredBreakdown.map((C,B)=>l.jsxs("div",{className:"flex justify-between text-[11px]",children:[l.jsxs("span",{className:"text-slate-500",children:[" ",C.label]}),l.jsxs("span",{className:"font-bold text-slate-600",children:[C.value.toLocaleString()," m"]})]},B))})]})]})]});return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-20 relative font-sans text-slate-600",children:[l.jsx("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-40 border-b border-slate-200 no-print",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:t,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors text-slate-600",children:l.jsx(ju,{size:20})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-xl text-slate-800 tracking-tight",children:"DASHBOARD NERGIE"}),l.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Vision Globale & Performance"})]})]}),l.jsx("div",{className:"flex bg-white rounded-full shadow-sm border border-slate-200 p-1.5 gap-1 mt-4 md:mt-0 overflow-x-auto max-w-full",children:Object.keys(I).map(C=>l.jsxs("button",{onClick:()=>r(C),className:`px-4 py-2 rounded-full text-xs font-bold transition-all flex items-center whitespace-nowrap ${n===C?"bg-blue-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[n===C&&l.jsx(Xl,{size:12,className:"mr-2"})," ",I[C].name]},C))})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto p-6 animate-in fade-in duration-500",children:[l.jsx(U,{}),l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 mb-8 relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider flex items-center",children:[l.jsx(m0,{className:"mr-2"})," Rpartition des Usages (UES)"]}),e==="ADMIN"&&l.jsx("button",{onClick:()=>h(!0),className:"p-2 bg-slate-50 hover:bg-slate-100 rounded-full text-slate-400 hover:text-blue-900 transition-colors",children:l.jsx(Zl,{size:16})})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.elecUsage.length>0?w.elecUsage.map((C,B)=>l.jsxs("div",{className:"border border-slate-100 rounded-xl p-4 bg-slate-50",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("span",{className:`text-sm ${C.significant?"font-bold text-blue-900":"text-slate-500 font-medium"}`,children:C.name}),l.jsxs("span",{className:"bg-white border px-2 py-0.5 rounded text-xs font-black shadow-sm",children:[C.value,"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full overflow-hidden mb-3",children:l.jsx("div",{className:`h-full ${C.significant?"bg-blue-900":"bg-slate-400"}`,style:{width:`${C.value}%`}})}),l.jsx("div",{className:"space-y-1 mt-3 pt-3 border-t border-slate-200/50",children:C.subUsages&&C.subUsages.length>0?C.subUsages.map((N,H)=>l.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[l.jsxs("span",{className:"text-slate-500 flex items-center",children:[l.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full mr-1.5"}),N.name]}),l.jsxs("span",{className:"font-mono font-bold text-slate-600",children:[N.value,"%"]})]},H)):l.jsx("div",{className:"text-[9px] text-slate-400 italic",children:"Aucun sous-dtail"})})]},B)):l.jsx("div",{className:"col-span-3 text-center py-8 text-slate-400 italic bg-slate-50 rounded-xl border border-dashed",children:"Donnes de rpartition non disponibles pour ce site."})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(J,{}),l.jsx(W,{}),l.jsx(Z,{})]}),l.jsx(L,{})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl w-full max-w-3xl p-6 shadow-2xl relative max-h-[85vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center",children:[l.jsx(Zl,{className:"mr-2 text-blue-900"})," Configuration Dtaille - ",w.name]}),l.jsx("button",{onClick:()=>h(!1),children:l.jsx(Ws,{size:20,className:"text-slate-400 hover:text-slate-600"})})]}),l.jsxs("div",{className:"overflow-y-auto pr-2 space-y-6 flex-1",children:[l.jsxs("div",{className:`p-3 rounded-lg text-xs font-bold flex justify-between ${w.elecUsage.reduce((C,B)=>C+B.value,0)===100?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"}`,children:[l.jsx("span",{children:"Total Usages Principaux"}),l.jsxs("span",{children:[w.elecUsage.reduce((C,B)=>C+B.value,0),"% (Cible: 100%)"]})]}),w.elecUsage.map((C,B)=>l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 relative",children:[l.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center mb-4",children:[l.jsx("div",{className:"col-span-4 font-bold text-sm text-blue-900",children:C.name}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase block",children:"Part Globale (%)"}),l.jsx("input",{type:"number",value:C.value,onChange:N=>b(B,"value",parseFloat(N.target.value)),className:"w-full p-1 border rounded text-sm font-bold bg-white"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase block",children:"Ratio Perf."}),l.jsx("input",{type:"text",value:C.ratio,onChange:N=>b(B,"ratio",N.target.value),className:"w-full p-1 border rounded text-xs bg-white"})]}),l.jsx("div",{className:"col-span-2 text-right",children:l.jsx("button",{onClick:()=>b(B,"significant",!C.significant),className:`p-2 rounded-full ${C.significant?"bg-orange-100 text-orange-600":"bg-slate-200 text-slate-400"}`,children:l.jsx(Mo,{size:16})})})]}),l.jsxs("div",{className:"bg-white border border-slate-100 rounded-lg p-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h5",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Sous-Usages (Somme doit = 100% du parent)"}),l.jsx("button",{onClick:()=>M(B),className:"text-[10px] bg-blue-50 text-blue-600 px-2 py-0.5 rounded hover:bg-blue-100",children:"+ Ajouter"})]}),C.subUsages.map((N,H)=>l.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[l.jsx("input",{type:"text",value:N.name,onChange:K=>V(B,H,"name",K.target.value),className:"flex-1 text-xs border rounded p-1",placeholder:"Nom"}),l.jsx("input",{type:"number",value:N.value,onChange:K=>V(B,H,"value",parseFloat(K.target.value)),className:"w-16 text-xs border rounded p-1 text-center",placeholder:"%"}),l.jsx("button",{onClick:()=>q(B,H),className:"text-red-400 hover:text-red-600",children:l.jsx(Xx,{size:12})})]},H)),l.jsxs("div",{className:`text-right text-[10px] font-bold ${C.subUsages.reduce((N,H)=>N+H.value,0)===100?"text-emerald-600":"text-red-500"}`,children:["Total Sous-Usages: ",C.subUsages.reduce((N,H)=>N+H.value,0),"%"]})]})]},B))]}),l.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-end",children:l.jsx("button",{onClick:()=>h(!1),className:"bg-blue-900 text-white px-6 py-2 rounded-lg font-bold shadow-md",children:"Terminer Configuration"})})]})}),o&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/40 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-7xl max-h-[95vh] flex flex-col shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center",children:[l.jsx(nh,{className:"mr-2 text-blue-900"})," Donnes & Objectifs - ",w.name]}),l.jsx("button",{onClick:()=>u(!1),children:l.jsx(Ws,{size:20})})]}),l.jsxs("div",{className:"px-6 py-4 bg-indigo-50 border-b border-indigo-100 flex gap-6 items-center",children:[l.jsxs("div",{className:"font-black text-indigo-900 uppercase text-xs tracking-wider flex items-center",children:[l.jsx(v0,{size:16,className:"mr-2"})," Objectifs Vision 2030"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs font-bold text-indigo-700",children:"Cible Rduction Conso (%):"}),l.jsx("input",{type:"number",value:w.visionTargets.reduction,onChange:C=>_("reduction",C.target.value),className:"w-20 p-1 border border-indigo-200 rounded text-center font-bold text-indigo-900 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs font-bold text-indigo-700",children:"Cible nergie Renouvelable (%):"}),l.jsx("input",{type:"number",value:w.visionTargets.renewable,onChange:C=>_("renewable",C.target.value),className:"w-20 p-1 border border-indigo-200 rounded text-center font-bold text-indigo-900 focus:ring-2 focus:ring-indigo-500 outline-none"})]})]}),l.jsx("div",{className:"overflow-y-auto flex-1 p-6 space-y-8 bg-slate-50/50",children:v.map(C=>l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("span",{className:`font-bold text-sm px-3 py-1 rounded-full ${C==="REF"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:C==="REF"?"BASELINE (Rf)":C}),l.jsx("div",{className:"h-px bg-slate-100 flex-1"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("div",{className:"min-w-max",children:[l.jsx("div",{className:"flex gap-2 mb-2 pl-32",children:["JAN","FV","MAR","AVR","MAI","JUN","JUL","AO","SEP","OCT","NOV","DC"].map(B=>l.jsx("div",{className:"w-20 text-center text-[10px] font-bold text-slate-400",children:B},B))}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"w-32 text-xs font-bold text-slate-600 uppercase",children:"Conso (kWh)"}),E(n,C,n==="LAC"?"grid":"months").map((B,N)=>l.jsx("input",{type:"number",className:"w-20 p-2 text-center text-xs border rounded focus:border-blue-900 outline-none",placeholder:"-",value:B,onChange:H=>S(C,N,H.target.value,n==="LAC"?"grid":"months")},N))]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("div",{className:"w-32 text-xs font-bold text-amber-600 uppercase flex items-center gap-1",children:[l.jsx(ol,{size:10})," Temp. Moy (C)"]}),E(n,C,"temperatures").map((B,N)=>l.jsx("input",{type:"number",step:"0.1",className:"w-20 p-2 text-center text-xs border border-amber-200 bg-amber-50 rounded focus:border-amber-600 outline-none",placeholder:"-",value:B,onChange:H=>S(C,N,H.target.value,"temperatures")},N))]})]})})]},C))}),l.jsx("div",{className:"p-4 border-t bg-white flex justify-end gap-2",children:l.jsxs("button",{onClick:k,className:"bg-blue-900 text-white px-6 py-2 rounded-lg font-bold shadow-lg flex items-center",children:[l.jsx(Yx,{size:18,className:"mr-2"})," Enregistrer Tout"]})})]})}),p&&l.jsxs("div",{className:"fixed inset-0 bg-slate-900/90 z-[70] overflow-auto flex justify-center items-center p-0 md:p-4",children:[l.jsxs("div",{className:"fixed top-6 right-6 z-[80] flex gap-3 bg-white/90 p-2 rounded-xl shadow-xl border border-slate-200 backdrop-blur-md no-print",children:[l.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg px-3 border border-slate-200",children:[l.jsx(Yl,{size:16,className:"text-slate-500 mr-2"}),l.jsx("input",{type:"month",value:A,onChange:C=>P(C.target.value),className:"bg-transparent border-none text-sm font-bold p-2 outline-none text-slate-700"})]}),l.jsx("div",{className:"h-10 w-px bg-slate-200 mx-1"}),l.jsxs("button",{onClick:()=>window.print(),className:"bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-800 font-bold flex items-center shadow-md transition-all active:scale-95",children:[l.jsx(g0,{size:18,className:"mr-2"})," Imprimer"]}),l.jsx("button",{onClick:()=>m(!1),className:"bg-red-50 text-red-600 px-3 py-2 rounded-lg hover:bg-red-100 transition-colors border border-red-100",children:l.jsx(Ws,{size:20})})]}),l.jsxs("div",{className:"bg-white shadow-2xl relative overflow-hidden flex flex-col mx-auto my-auto print:fixed print:inset-0 print:w-full print:h-full print:m-0",style:{width:"21cm",minHeight:"29.7cm",padding:"2cm"},children:[l.jsxs("div",{className:"border-b-4 border-blue-900 pb-4 mb-8 flex justify-between items-end",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(ta,{size:"h-14"}),l.jsx("div",{className:"h-12 w-px bg-slate-200"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-900 uppercase leading-none mb-1",children:"Rapport Mensuel"}),l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Performance & ISO 50001"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-blue-900 uppercase tracking-tighter mb-1",children:new Date(A).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),l.jsxs("div",{className:"flex justify-end items-center gap-2 text-sm font-bold text-slate-600",children:[l.jsx(Jl,{size:14})," ",w.name]})]})]}),l.jsxs("div",{className:"flex-1 space-y-8",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Consommation"}),l.jsxs("div",{className:"text-3xl font-black text-slate-800",children:["42,500 ",l.jsx("span",{className:"text-sm font-medium text-slate-400",children:"kWh"})]})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Performance"}),l.jsxs("div",{className:"text-3xl font-black text-blue-900",children:["12.4 ",l.jsx("span",{className:"text-sm font-medium text-slate-400",children:"kWh/m"})]})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Vs Rfrence (N-1)"}),l.jsx("div",{className:"text-3xl font-black text-emerald-600",children:"-4.5%"})]})]}),l.jsxs("div",{className:"border border-slate-200 rounded-xl p-6",children:[l.jsxs("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-wider mb-4 border-b pb-2 flex items-center",children:[l.jsx(ol,{size:14,className:"mr-2"})," Comparatif Climatique Mensuel"]}),l.jsxs("div",{className:"flex items-center justify-around",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold mb-1",children:"Moyenne N-1"}),l.jsx("div",{className:"text-2xl font-black text-slate-400",children:"22.5C"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold mb-1",children:"+1.5C"}),l.jsx("div",{className:"w-32 h-1 bg-slate-100 rounded-full",children:l.jsx("div",{className:"w-1/2 h-full bg-orange-400 ml-auto rounded-full"})})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold mb-1",children:"Moyenne Actuelle"}),l.jsx("div",{className:"text-2xl font-black text-slate-800",children:"24.0C"})]})]}),l.jsx("p",{className:"mt-4 text-xs text-slate-500 italic text-center bg-slate-50 p-2 rounded",children:`"Temprature moyenne suprieure  l'anne prcdente. Une lgre augmentation de la consommation de climatisation est justifie."`})]}),l.jsxs("div",{className:"border border-slate-200 rounded-xl p-6",children:[l.jsxs("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-wider mb-4 border-b pb-2 flex items-center",children:[l.jsx(m0,{size:14,className:"mr-2"})," Rpartition Dtaille des Usages"]}),l.jsx("div",{className:"grid grid-cols-2 gap-8",children:w.elecUsage.filter(C=>C.significant).map((C,B)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between font-bold text-sm text-blue-900 mb-2",children:[l.jsx("span",{children:C.name}),l.jsxs("span",{children:[C.value,"%"]})]}),l.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full mb-3 overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-900",style:{width:`${C.value}%`}})}),l.jsx("div",{className:"space-y-1 pl-2 border-l-2 border-slate-100",children:C.subUsages&&C.subUsages.length>0?C.subUsages.map((N,H)=>l.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[l.jsx("span",{children:N.name}),l.jsxs("span",{className:"font-mono",children:[N.value,"%"]})]},H)):l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Dtail non disponible"})})]},B))})]}),l.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-xl p-6 flex-1",children:[l.jsxs("h3",{className:"text-xs font-black text-indigo-800 uppercase tracking-wider mb-4 flex items-center",children:[l.jsx(h0,{size:14,className:"mr-2"})," Vision 2030 & Amlioration Continue"]}),l.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg border border-indigo-100 shadow-sm",children:[l.jsx("div",{className:"text-sm text-indigo-900 font-bold mb-2",children:"Objectifs Stratgiques du Site :"}),l.jsxs("ul",{className:"text-xs text-slate-600 space-y-1 list-disc pl-4",children:[l.jsxs("li",{children:["Rduire la consommation nergtique de ",l.jsxs("strong",{children:[w.visionTargets.reduction,"%"]})," par rapport  l'anne de rfrence."]}),l.jsxs("li",{children:["Atteindre une part de ",l.jsxs("strong",{children:[w.visionTargets.renewable,"%"]})," d'nergie renouvelable dans le mix nergtique."]})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-3",children:"Bonnes Pratiques  Appliquer (UES)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-white p-3 rounded-lg text-xs text-slate-600 border border-slate-100",children:[l.jsx("strong",{className:"block text-blue-900 mb-1",children:"Climatisation / Chauffage"}),"Vrifier la fermeture des portes et fentres. Maintenir les consignes  24C (t) et 20C (Hiver). Nettoyage rgulier des filtres."]}),l.jsxs("div",{className:"bg-white p-3 rounded-lg text-xs text-slate-600 border border-slate-100",children:[l.jsx("strong",{className:"block text-blue-900 mb-1",children:"clairage & Bureaux"}),"Privilgier la lumire naturelle. teindre systmatiquement les zones inoccupes (runions, pauses). teindre les crans le soir."]})]})]})]})]}),l.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 flex justify-between items-end text-[10px] text-slate-400 uppercase font-medium",children:[l.jsxs("div",{children:[l.jsx("div",{children:"ITALCAR SA  Direction Technique"}),l.jsxs("div",{children:["Gnr le ",new Date().toLocaleDateString()]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{children:"Rapport Valid par le Responsable nergie"}),l.jsx("div",{className:"mt-4 border-t border-slate-300 w-32 ml-auto",children:"Signature"})]})]})]})]}),l.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col gap-3 z-50 no-print",children:[e==="ADMIN"&&l.jsx("button",{onClick:()=>{x(n),u(!0)},className:"bg-slate-800 hover:bg-slate-700 text-white p-4 rounded-full shadow-lg transition-transform hover:scale-110 group relative",children:l.jsx(nh,{size:20})}),l.jsx("button",{onClick:()=>m(!0),className:"bg-blue-900 hover:bg-blue-800 text-white p-4 rounded-full shadow-xl transition-transform hover:scale-110 group relative",children:l.jsx(g0,{size:24})})]}),j&&l.jsxs("div",{className:"fixed bottom-6 left-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center animate-in slide-in-from-bottom-4",children:[l.jsx(Xl,{className:"mr-2"})," ",j]})]})},rk=({user:t,onNavigate:e,onLogout:n})=>{const r=i=>t.role==="ADMIN"?!0:t.role==="EQUIPE_ENERGIE"?["steg","air","sites"].includes(i):t.role==="DIRECTION"?i==="sites":!1,s=()=>{const i=new Date().getHours();return i<12?"Bonjour":i<18?"Bonne aprs-midi":"Bonsoir"};return l.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[l.jsxs("div",{className:"z-10 w-full max-w-6xl flex justify-between items-center mb-12 bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(ta,{size:"h-12"}),l.jsx("div",{className:"h-10 w-px bg-slate-200"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black mb-0 tracking-tight text-blue-900",children:"PORTAIL NERGIE"}),l.jsxs("p",{className:"text-slate-400 text-sm",children:[s(),", ",l.jsx("span",{className:"text-slate-800 font-bold",children:t.username})]})]})]}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx(Jx,{darkText:!0}),l.jsxs("div",{className:"bg-emerald-50 text-emerald-800 text-[10px] px-3 py-1 rounded-full font-bold border border-emerald-100 flex items-center",children:[l.jsx(rh,{size:12,className:"mr-2"})," Performance Globale en hausse"]})]})]}),l.jsxs("div",{className:"z-10 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl w-full",children:[l.jsxs("button",{disabled:!r("steg"),onClick:()=>e("steg"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("steg")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("steg")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(ih,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"nergie & Facturation"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Suivi des consommations STEG, Factures MT/BT, Analyse Cos  et dpassements de puissance."})]}),l.jsxs("button",{disabled:!r("air"),onClick:()=>e("air"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("air")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("air")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(sh,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Air Comprim"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Relevs hebdomadaires des compresseurs, suivi des heures de charge et planning de maintenance."})]}),l.jsxs("button",{disabled:!r("sites"),onClick:()=>e("sites"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("sites")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("sites")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(zA,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Tableau de Bord Sites"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Vision globale des sites ITALCAR : Surfaces, Mix nergtique et Trajectoire Carbone 2030."})]})]}),t.role==="ADMIN"&&l.jsx("div",{className:"z-10 mt-8 w-full max-w-6xl flex justify-end",children:l.jsxs("button",{onClick:()=>e("admin"),className:"text-slate-400 hover:text-blue-900 text-xs font-bold flex items-center transition-colors",children:[l.jsx(WA,{size:14,className:"mr-1"})," Administration"]})}),l.jsx("div",{className:"mt-12 text-center text-slate-400 text-xs font-medium uppercase tracking-widest",children:" 2025 ITALCAR SA  Energy Management System"}),l.jsx("div",{className:"absolute top-6 right-6",children:l.jsx("button",{onClick:n,className:"bg-white hover:bg-red-50 text-slate-400 hover:text-red-600 p-2 rounded-full shadow-sm transition-colors border border-slate-100",children:l.jsx($A,{size:18})})})]})},sk=()=>{const[t,e]=ee.useState(null),[n,r]=ee.useState("dashboard"),[s,i]=ee.useState(!1);ee.useEffect(()=>{(async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await mS(jc,__initial_auth_token):await cS(jc)}catch(p){console.error("Auth failed",p)}finally{i(!0)}})();const h=yS(jc,p=>{});return()=>h()},[]);const o=c=>{e(c),r("dashboard")},u=()=>{e(null),r("dashboard")};return s?t?l.jsxs(l.Fragment,{children:[n==="dashboard"&&l.jsx(rk,{user:t,onNavigate:r,onLogout:u}),n==="admin"&&l.jsx(tk,{onBack:()=>r("dashboard")}),n==="steg"&&l.jsx(ZA,{onBack:()=>r("dashboard"),userRole:t.role}),n==="air"&&l.jsx(ek,{onBack:()=>r("dashboard"),userRole:t.role}),n==="sites"&&l.jsx(nk,{onBack:()=>r("dashboard"),userRole:t.role})]}):l.jsx(JA,{onLogin:o}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white font-bold uppercase tracking-widest",children:"Connexion au Cloud..."})};Oc.createRoot(document.getElementById("root")).render(l.jsx(O1.StrictMode,{children:l.jsx(sk,{})}));
