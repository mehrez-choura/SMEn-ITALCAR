(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function v1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h0={exports:{}},Jl={},f0={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=Symbol.for("react.element"),_1=Symbol.for("react.portal"),x1=Symbol.for("react.fragment"),w1=Symbol.for("react.strict_mode"),E1=Symbol.for("react.profiler"),T1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),b1=Symbol.for("react.forward_ref"),S1=Symbol.for("react.suspense"),N1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),Lp=Symbol.iterator;function k1(t){return t===null||typeof t!="object"?null:(t=Lp&&t[Lp]||t["@@iterator"],typeof t=="function"?t:null)}var p0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m0=Object.assign,g0={};function ai(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||p0}ai.prototype.isReactComponent={};ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y0(){}y0.prototype=ai.prototype;function th(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||p0}var nh=th.prototype=new y0;nh.constructor=th;m0(nh,ai.prototype);nh.isPureReactComponent=!0;var Op=Array.isArray,v0=Object.prototype.hasOwnProperty,rh={current:null},_0={key:!0,ref:!0,__self:!0,__source:!0};function x0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)v0.call(e,r)&&!_0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Mo,type:t,key:i,ref:o,props:s,_owner:rh.current}}function C1(t,e){return{$$typeof:Mo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mo}function R1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fp=/\/+/g;function Ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R1(""+t.key):e.toString(36)}function Fa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mo:case _1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ku(o,0):r,Op(s)?(n="",t!=null&&(n=t.replace(Fp,"$&/")+"/"),Fa(s,e,n,"",function(h){return h})):s!=null&&(sh(s)&&(s=C1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Op(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Ku(i,u);o+=Fa(i,e,n,c,s)}else if(c=k1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Ku(i,u++),o+=Fa(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ya(t,e,n){if(t==null)return t;var r=[],s=0;return Fa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function P1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},Ua={transition:null},j1={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Ua,ReactCurrentOwner:rh};function w0(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:ya,forEach:function(t,e,n){ya(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ya(t,function(){e++}),e},toArray:function(t){return ya(t,function(e){return e})||[]},only:function(t){if(!sh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=ai;ae.Fragment=x1;ae.Profiler=E1;ae.PureComponent=th;ae.StrictMode=w1;ae.Suspense=S1;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j1;ae.act=w0;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)v0.call(e,c)&&!_0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Mo,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:I1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T1,_context:t},t.Consumer=t};ae.createElement=x0;ae.createFactory=function(t){var e=x0.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:b1,render:t}};ae.isValidElement=sh;ae.lazy=function(t){return{$$typeof:A1,_payload:{_status:-1,_result:t},_init:P1}};ae.memo=function(t,e){return{$$typeof:N1,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Ua.transition;Ua.transition={};try{t()}finally{Ua.transition=e}};ae.unstable_act=w0;ae.useCallback=function(t,e){return ft.current.useCallback(t,e)};ae.useContext=function(t){return ft.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};ae.useEffect=function(t,e){return ft.current.useEffect(t,e)};ae.useId=function(){return ft.current.useId()};ae.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return ft.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};ae.useRef=function(t){return ft.current.useRef(t)};ae.useState=function(t){return ft.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return ft.current.useTransition()};ae.version="18.3.1";f0.exports=ae;var Z=f0.exports;const D1=v1(Z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=Z,M1=Symbol.for("react.element"),L1=Symbol.for("react.fragment"),O1=Object.prototype.hasOwnProperty,F1=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function E0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)O1.call(e,r)&&!U1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:M1,type:t,key:i,ref:o,props:s,_owner:F1.current}}Jl.Fragment=L1;Jl.jsx=E0;Jl.jsxs=E0;h0.exports=Jl;var l=h0.exports,Dc={},T0={exports:{}},At={},I0={exports:{}},b0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,O){var G=D.length;D.push(O);e:for(;0<G;){var z=G-1>>>1,Y=D[z];if(0<s(Y,O))D[z]=O,D[G]=Y,G=z;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var O=D[0],G=D.pop();if(G!==O){D[0]=G;e:for(var z=0,Y=D.length,P=Y>>>1;z<P;){var J=2*(z+1)-1,se=D[J],be=J+1,Fe=D[be];if(0>s(se,G))be<Y&&0>s(Fe,se)?(D[z]=Fe,D[be]=G,z=be):(D[z]=se,D[J]=G,z=J);else if(be<Y&&0>s(Fe,G))D[z]=Fe,D[be]=G,z=be;else break e}}return O}function s(D,O){var G=D.sortIndex-O.sortIndex;return G!==0?G:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],p=1,m=null,_=3,N=!1,R=!1,j=!1,F=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var O=n(h);O!==null;){if(O.callback===null)r(h);else if(O.startTime<=D)r(h),O.sortIndex=O.expirationTime,e(c,O);else break;O=n(h)}}function M(D){if(j=!1,b(D),!R)if(n(c)!==null)R=!0,C(L);else{var O=n(h);O!==null&&$(M,O.startTime-D)}}function L(D,O){R=!1,j&&(j=!1,I(y),y=-1),N=!0;var G=_;try{for(b(O),m=n(c);m!==null&&(!(m.expirationTime>O)||D&&!S());){var z=m.callback;if(typeof z=="function"){m.callback=null,_=m.priorityLevel;var Y=z(m.expirationTime<=O);O=t.unstable_now(),typeof Y=="function"?m.callback=Y:m===n(c)&&r(c),b(O)}else r(c);m=n(c)}if(m!==null)var P=!0;else{var J=n(h);J!==null&&$(M,J.startTime-O),P=!1}return P}finally{m=null,_=G,N=!1}}var q=!1,v=null,y=-1,x=5,T=-1;function S(){return!(t.unstable_now()-T<x)}function A(){if(v!==null){var D=t.unstable_now();T=D;var O=!0;try{O=v(!0,D)}finally{O?E():(q=!1,v=null)}}else q=!1}var E;if(typeof w=="function")E=function(){w(A)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,wt=Oe.port2;Oe.port1.onmessage=A,E=function(){wt.postMessage(null)}}else E=function(){F(A,0)};function C(D){v=D,q||(q=!0,E())}function $(D,O){y=F(function(){D(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){R||N||(R=!0,C(L))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(_){case 1:case 2:case 3:var O=3;break;default:O=_}var G=_;_=O;try{return D()}finally{_=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=_;_=D;try{return O()}finally{_=G}},t.unstable_scheduleCallback=function(D,O,G){var z=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?z+G:z):G=z,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,D={id:p++,callback:O,priorityLevel:D,startTime:G,expirationTime:Y,sortIndex:-1},G>z?(D.sortIndex=G,e(h,D),n(c)===null&&D===n(h)&&(j?(I(y),y=-1):j=!0,$(M,G-z))):(D.sortIndex=Y,e(c,D),R||N||(R=!0,C(L))),D},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(D){var O=_;return function(){var G=_;_=O;try{return D.apply(this,arguments)}finally{_=G}}}})(b0);I0.exports=b0;var z1=I0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1=Z,St=z1;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S0=new Set,uo={};function is(t,e){Ws(t,e),Ws(t+"Capture",e)}function Ws(t,e){for(uo[t]=e,t=0;t<e.length;t++)S0.add(e[t])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vc=Object.prototype.hasOwnProperty,$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Up={},zp={};function H1(t){return Vc.call(zp,t)?!0:Vc.call(Up,t)?!1:$1.test(t)?zp[t]=!0:(Up[t]=!0,!1)}function q1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W1(t,e,n,r){if(e===null||typeof e>"u"||q1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ih=/[\-:]([a-z])/g;function oh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ih,oh);Je[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ih,oh);Je[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ih,oh);Je[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ah(t,e,n,r){var s=Je.hasOwnProperty(e)?Je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W1(e,n,s,r)&&(n=null),r||s===null?H1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ln=B1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),Es=Symbol.for("react.portal"),Ts=Symbol.for("react.fragment"),lh=Symbol.for("react.strict_mode"),Mc=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),A0=Symbol.for("react.context"),uh=Symbol.for("react.forward_ref"),Lc=Symbol.for("react.suspense"),Oc=Symbol.for("react.suspense_list"),ch=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),k0=Symbol.for("react.offscreen"),Bp=Symbol.iterator;function Ri(t){return t===null||typeof t!="object"?null:(t=Bp&&t[Bp]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Qu;function Ui(t){if(Qu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qu=e&&e[1]||""}return`
`+Qu+t}var Yu=!1;function Xu(t,e){if(!t||Yu)return"";Yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ui(t):""}function G1(t){switch(t.tag){case 5:return Ui(t.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return t=Xu(t.type,!1),t;case 11:return t=Xu(t.type.render,!1),t;case 1:return t=Xu(t.type,!0),t;default:return""}}function Fc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ts:return"Fragment";case Es:return"Portal";case Mc:return"Profiler";case lh:return"StrictMode";case Lc:return"Suspense";case Oc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A0:return(t.displayName||"Context")+".Consumer";case N0:return(t._context.displayName||"Context")+".Provider";case uh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ch:return e=t.displayName||null,e!==null?e:Fc(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return Fc(t(e))}catch{}}return null}function K1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fc(e);case 8:return e===lh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q1(t){var e=C0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _a(t){t._valueTracker||(t._valueTracker=Q1(t))}function R0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=C0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uc(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $p(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P0(t,e){e=e.checked,e!=null&&ah(t,"checked",e,!1)}function zc(t,e){P0(t,e);var n=vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bc(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bc(t,e,n){(e!=="number"||ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zi=Array.isArray;function Vs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(zi(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function j0(t,e){var n=vr(e.value),r=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function D0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?D0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xa,V0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y1=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){Y1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ki[e]=Ki[t]})});function M0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+e).trim():e+"px"}function L0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=M0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var X1=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qc(t,e){if(e){if(X1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Wc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=null;function dh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kc=null,Ms=null,Ls=null;function Gp(t){if(t=Fo(t)){if(typeof Kc!="function")throw Error(H(280));var e=t.stateNode;e&&(e=ru(e),Kc(t.stateNode,t.type,e))}}function O0(t){Ms?Ls?Ls.push(t):Ls=[t]:Ms=t}function F0(){if(Ms){var t=Ms,e=Ls;if(Ls=Ms=null,Gp(t),e)for(t=0;t<e.length;t++)Gp(e[t])}}function U0(t,e){return t(e)}function z0(){}var Ju=!1;function B0(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return U0(t,e,n)}finally{Ju=!1,(Ms!==null||Ls!==null)&&(z0(),F0())}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var r=ru(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Qc=!1;if(Nn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Qc=!1}function J1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Qi=!1,ul=null,cl=!1,Yc=null,Z1={onError:function(t){Qi=!0,ul=t}};function ew(t,e,n,r,s,i,o,u,c){Qi=!1,ul=null,J1.apply(Z1,arguments)}function tw(t,e,n,r,s,i,o,u,c){if(ew.apply(this,arguments),Qi){if(Qi){var h=ul;Qi=!1,ul=null}else throw Error(H(198));cl||(cl=!0,Yc=h)}}function os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kp(t){if(os(t)!==t)throw Error(H(188))}function nw(t){var e=t.alternate;if(!e){if(e=os(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kp(s),t;if(i===r)return Kp(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function H0(t){return t=nw(t),t!==null?q0(t):null}function q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q0(t);if(e!==null)return e;t=t.sibling}return null}var W0=St.unstable_scheduleCallback,Qp=St.unstable_cancelCallback,rw=St.unstable_shouldYield,sw=St.unstable_requestPaint,De=St.unstable_now,iw=St.unstable_getCurrentPriorityLevel,hh=St.unstable_ImmediatePriority,G0=St.unstable_UserBlockingPriority,dl=St.unstable_NormalPriority,ow=St.unstable_LowPriority,K0=St.unstable_IdlePriority,Zl=null,sn=null;function aw(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:cw,lw=Math.log,uw=Math.LN2;function cw(t){return t>>>=0,t===0?32:31-(lw(t)/uw|0)|0}var wa=64,Ea=4194304;function Bi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Bi(u):(i&=o,i!==0&&(r=Bi(i)))}else o=n&~s,o!==0?r=Bi(o):i!==0&&(r=Bi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ht(e),s=1<<n,r|=t[n],e&=~s;return r}function dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ht(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=dw(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Xc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q0(){var t=wa;return wa<<=1,!(wa&4194240)&&(wa=64),t}function Zu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ht(e),t[e]=n}function fw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ht(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ht(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function Y0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X0,ph,J0,Z0,ey,Jc=!1,Ta=[],ir=null,or=null,ar=null,fo=new Map,po=new Map,Yn=[],pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yp(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(e.pointerId)}}function ji(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Fo(e),e!==null&&ph(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mw(t,e,n,r,s){switch(e){case"focusin":return ir=ji(ir,t,e,n,r,s),!0;case"dragenter":return or=ji(or,t,e,n,r,s),!0;case"mouseover":return ar=ji(ar,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fo.set(i,ji(fo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,po.set(i,ji(po.get(i)||null,t,e,n,r,s)),!0}return!1}function ty(t){var e=zr(t.target);if(e!==null){var n=os(e);if(n!==null){if(e=n.tag,e===13){if(e=$0(n),e!==null){t.blockedOn=e,ey(t.priority,function(){J0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gc=r,n.target.dispatchEvent(r),Gc=null}else return e=Fo(n),e!==null&&ph(e),t.blockedOn=n,!1;e.shift()}return!0}function Xp(t,e,n){za(t)&&n.delete(e)}function gw(){Jc=!1,ir!==null&&za(ir)&&(ir=null),or!==null&&za(or)&&(or=null),ar!==null&&za(ar)&&(ar=null),fo.forEach(Xp),po.forEach(Xp)}function Di(t,e){t.blockedOn===e&&(t.blockedOn=null,Jc||(Jc=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,gw)))}function mo(t){function e(s){return Di(s,t)}if(0<Ta.length){Di(Ta[0],t);for(var n=1;n<Ta.length;n++){var r=Ta[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ir!==null&&Di(ir,t),or!==null&&Di(or,t),ar!==null&&Di(ar,t),fo.forEach(e),po.forEach(e),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)ty(n),n.blockedOn===null&&Yn.shift()}var Os=Ln.ReactCurrentBatchConfig,fl=!0;function yw(t,e,n,r){var s=pe,i=Os.transition;Os.transition=null;try{pe=1,mh(t,e,n,r)}finally{pe=s,Os.transition=i}}function vw(t,e,n,r){var s=pe,i=Os.transition;Os.transition=null;try{pe=4,mh(t,e,n,r)}finally{pe=s,Os.transition=i}}function mh(t,e,n,r){if(fl){var s=Zc(t,e,n,r);if(s===null)uc(t,e,r,pl,n),Yp(t,r);else if(mw(s,t,e,n,r))r.stopPropagation();else if(Yp(t,r),e&4&&-1<pw.indexOf(t)){for(;s!==null;){var i=Fo(s);if(i!==null&&X0(i),i=Zc(t,e,n,r),i===null&&uc(t,e,r,pl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else uc(t,e,r,null,n)}}var pl=null;function Zc(t,e,n,r){if(pl=null,t=dh(r),t=zr(t),t!==null)if(e=os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pl=t,null}function ny(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iw()){case hh:return 1;case G0:return 4;case dl:case ow:return 16;case K0:return 536870912;default:return 16}default:return 16}}var nr=null,gh=null,Ba=null;function ry(){if(Ba)return Ba;var t,e=gh,n=e.length,r,s="value"in nr?nr.value:nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ba=s.slice(t,1<r?1-r:void 0)}function $a(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function Jp(){return!1}function kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ia:Jp,this.isPropagationStopped=Jp,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yh=kt(li),Oo=Ae({},li,{view:0,detail:0}),_w=kt(Oo),ec,tc,Vi,eu=Ae({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vi&&(Vi&&t.type==="mousemove"?(ec=t.screenX-Vi.screenX,tc=t.screenY-Vi.screenY):tc=ec=0,Vi=t),ec)},movementY:function(t){return"movementY"in t?t.movementY:tc}}),Zp=kt(eu),xw=Ae({},eu,{dataTransfer:0}),ww=kt(xw),Ew=Ae({},Oo,{relatedTarget:0}),nc=kt(Ew),Tw=Ae({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),Iw=kt(Tw),bw=Ae({},li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sw=kt(bw),Nw=Ae({},li,{data:0}),em=kt(Nw),Aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cw[t])?!!e[t]:!1}function vh(){return Rw}var Pw=Ae({},Oo,{key:function(t){if(t.key){var e=Aw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$a(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(t){return t.type==="keypress"?$a(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$a(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jw=kt(Pw),Dw=Ae({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tm=kt(Dw),Vw=Ae({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),Mw=kt(Vw),Lw=Ae({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ow=kt(Lw),Fw=Ae({},eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uw=kt(Fw),zw=[9,13,27,32],_h=Nn&&"CompositionEvent"in window,Yi=null;Nn&&"documentMode"in document&&(Yi=document.documentMode);var Bw=Nn&&"TextEvent"in window&&!Yi,sy=Nn&&(!_h||Yi&&8<Yi&&11>=Yi),nm=String.fromCharCode(32),rm=!1;function iy(t,e){switch(t){case"keyup":return zw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Is=!1;function $w(t,e){switch(t){case"compositionend":return oy(e);case"keypress":return e.which!==32?null:(rm=!0,nm);case"textInput":return t=e.data,t===nm&&rm?null:t;default:return null}}function Hw(t,e){if(Is)return t==="compositionend"||!_h&&iy(t,e)?(t=ry(),Ba=gh=nr=null,Is=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sy&&e.locale!=="ko"?null:e.data;default:return null}}var qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qw[t.type]:e==="textarea"}function ay(t,e,n,r){O0(r),e=ml(e,"onChange"),0<e.length&&(n=new yh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xi=null,go=null;function Ww(t){vy(t,0)}function tu(t){var e=Ns(t);if(R0(e))return t}function Gw(t,e){if(t==="change")return e}var ly=!1;if(Nn){var rc;if(Nn){var sc="oninput"in document;if(!sc){var im=document.createElement("div");im.setAttribute("oninput","return;"),sc=typeof im.oninput=="function"}rc=sc}else rc=!1;ly=rc&&(!document.documentMode||9<document.documentMode)}function om(){Xi&&(Xi.detachEvent("onpropertychange",uy),go=Xi=null)}function uy(t){if(t.propertyName==="value"&&tu(go)){var e=[];ay(e,go,t,dh(t)),B0(Ww,e)}}function Kw(t,e,n){t==="focusin"?(om(),Xi=e,go=n,Xi.attachEvent("onpropertychange",uy)):t==="focusout"&&om()}function Qw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(go)}function Yw(t,e){if(t==="click")return tu(e)}function Xw(t,e){if(t==="input"||t==="change")return tu(e)}function Jw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:Jw;function yo(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vc.call(e,s)||!Gt(t[s],e[s]))return!1}return!0}function am(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lm(t,e){var n=am(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=am(n)}}function cy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dy(){for(var t=window,e=ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ll(t.document)}return e}function xh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zw(t){var e=dy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cy(n.ownerDocument.documentElement,n)){if(r!==null&&xh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lm(n,i);var o=lm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eE=Nn&&"documentMode"in document&&11>=document.documentMode,bs=null,ed=null,Ji=null,td=!1;function um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;td||bs==null||bs!==ll(r)||(r=bs,"selectionStart"in r&&xh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&yo(Ji,r)||(Ji=r,r=ml(ed,"onSelect"),0<r.length&&(e=new yh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bs)))}function ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ss={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},ic={},hy={};Nn&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function nu(t){if(ic[t])return ic[t];if(!Ss[t])return t;var e=Ss[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hy)return ic[t]=e[n];return t}var fy=nu("animationend"),py=nu("animationiteration"),my=nu("animationstart"),gy=nu("transitionend"),yy=new Map,cm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(t,e){yy.set(t,e),is(e,[t])}for(var oc=0;oc<cm.length;oc++){var ac=cm[oc],tE=ac.toLowerCase(),nE=ac[0].toUpperCase()+ac.slice(1);Tr(tE,"on"+nE)}Tr(fy,"onAnimationEnd");Tr(py,"onAnimationIteration");Tr(my,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(gy,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rE=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tw(r,e,void 0,t),t.currentTarget=null}function vy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;dm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;dm(s,u,h),i=c}}}if(cl)throw t=Yc,cl=!1,Yc=null,t}function xe(t,e){var n=e[od];n===void 0&&(n=e[od]=new Set);var r=t+"__bubble";n.has(r)||(_y(e,t,2,!1),n.add(r))}function lc(t,e,n){var r=0;e&&(r|=4),_y(n,t,r,e)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function vo(t){if(!t[Sa]){t[Sa]=!0,S0.forEach(function(n){n!=="selectionchange"&&(rE.has(n)||lc(n,!1,t),lc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sa]||(e[Sa]=!0,lc("selectionchange",!1,e))}}function _y(t,e,n,r){switch(ny(e)){case 1:var s=yw;break;case 4:s=vw;break;default:s=mh}n=s.bind(null,e,n,t),s=void 0,!Qc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function uc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=zr(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}B0(function(){var h=i,p=dh(n),m=[];e:{var _=yy.get(t);if(_!==void 0){var N=yh,R=t;switch(t){case"keypress":if($a(n)===0)break e;case"keydown":case"keyup":N=jw;break;case"focusin":R="focus",N=nc;break;case"focusout":R="blur",N=nc;break;case"beforeblur":case"afterblur":N=nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=Mw;break;case fy:case py:case my:N=Iw;break;case gy:N=Ow;break;case"scroll":N=_w;break;case"wheel":N=Uw;break;case"copy":case"cut":case"paste":N=Sw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=tm}var j=(e&4)!==0,F=!j&&t==="scroll",I=j?_!==null?_+"Capture":null:_;j=[];for(var w=h,b;w!==null;){b=w;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,I!==null&&(M=ho(w,I),M!=null&&j.push(_o(w,M,b)))),F)break;w=w.return}0<j.length&&(_=new N(_,R,null,n,p),m.push({event:_,listeners:j}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",_&&n!==Gc&&(R=n.relatedTarget||n.fromElement)&&(zr(R)||R[An]))break e;if((N||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,N?(R=n.relatedTarget||n.toElement,N=h,R=R?zr(R):null,R!==null&&(F=os(R),R!==F||R.tag!==5&&R.tag!==6)&&(R=null)):(N=null,R=h),N!==R)){if(j=Zp,M="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(j=tm,M="onPointerLeave",I="onPointerEnter",w="pointer"),F=N==null?_:Ns(N),b=R==null?_:Ns(R),_=new j(M,w+"leave",N,n,p),_.target=F,_.relatedTarget=b,M=null,zr(p)===h&&(j=new j(I,w+"enter",R,n,p),j.target=b,j.relatedTarget=F,M=j),F=M,N&&R)t:{for(j=N,I=R,w=0,b=j;b;b=vs(b))w++;for(b=0,M=I;M;M=vs(M))b++;for(;0<w-b;)j=vs(j),w--;for(;0<b-w;)I=vs(I),b--;for(;w--;){if(j===I||I!==null&&j===I.alternate)break t;j=vs(j),I=vs(I)}j=null}else j=null;N!==null&&hm(m,_,N,j,!1),R!==null&&F!==null&&hm(m,F,R,j,!0)}}e:{if(_=h?Ns(h):window,N=_.nodeName&&_.nodeName.toLowerCase(),N==="select"||N==="input"&&_.type==="file")var L=Gw;else if(sm(_))if(ly)L=Xw;else{L=Qw;var q=Kw}else(N=_.nodeName)&&N.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(L=Yw);if(L&&(L=L(t,h))){ay(m,L,n,p);break e}q&&q(t,_,h),t==="focusout"&&(q=_._wrapperState)&&q.controlled&&_.type==="number"&&Bc(_,"number",_.value)}switch(q=h?Ns(h):window,t){case"focusin":(sm(q)||q.contentEditable==="true")&&(bs=q,ed=h,Ji=null);break;case"focusout":Ji=ed=bs=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,um(m,n,p);break;case"selectionchange":if(eE)break;case"keydown":case"keyup":um(m,n,p)}var v;if(_h)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Is?iy(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(sy&&n.locale!=="ko"&&(Is||y!=="onCompositionStart"?y==="onCompositionEnd"&&Is&&(v=ry()):(nr=p,gh="value"in nr?nr.value:nr.textContent,Is=!0)),q=ml(h,y),0<q.length&&(y=new em(y,t,null,n,p),m.push({event:y,listeners:q}),v?y.data=v:(v=oy(n),v!==null&&(y.data=v)))),(v=Bw?$w(t,n):Hw(t,n))&&(h=ml(h,"onBeforeInput"),0<h.length&&(p=new em("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=v))}vy(m,e)})}function _o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ho(t,n),i!=null&&r.unshift(_o(t,i,s)),i=ho(t,e),i!=null&&r.push(_o(t,i,s))),t=t.return}return r}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=ho(n,i),c!=null&&o.unshift(_o(n,c,u))):s||(c=ho(n,i),c!=null&&o.push(_o(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sE=/\r\n?/g,iE=/\u0000|\uFFFD/g;function fm(t){return(typeof t=="string"?t:""+t).replace(sE,`
`).replace(iE,"")}function Na(t,e,n){if(e=fm(e),fm(t)!==e&&n)throw Error(H(425))}function gl(){}var nd=null,rd=null;function sd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var id=typeof setTimeout=="function"?setTimeout:void 0,oE=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,aE=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(t){return pm.resolve(null).then(t).catch(lE)}:id;function lE(t){setTimeout(function(){throw t})}function cc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mo(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ui=Math.random().toString(36).slice(2),nn="__reactFiber$"+ui,xo="__reactProps$"+ui,An="__reactContainer$"+ui,od="__reactEvents$"+ui,uE="__reactListeners$"+ui,cE="__reactHandles$"+ui;function zr(t){var e=t[nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mm(t);t!==null;){if(n=t[nn])return n;t=mm(t)}return e}t=n,n=t.parentNode}return null}function Fo(t){return t=t[nn]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function ru(t){return t[xo]||null}var ad=[],As=-1;function Ir(t){return{current:t}}function Ee(t){0>As||(t.current=ad[As],ad[As]=null,As--)}function ve(t,e){As++,ad[As]=t.current,t.current=e}var _r={},lt=Ir(_r),yt=Ir(!1),Kr=_r;function Gs(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vt(t){return t=t.childContextTypes,t!=null}function yl(){Ee(yt),Ee(lt)}function gm(t,e,n){if(lt.current!==_r)throw Error(H(168));ve(lt,e),ve(yt,n)}function xy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,K1(t)||"Unknown",s));return Ae({},n,r)}function vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Kr=lt.current,ve(lt,t),ve(yt,yt.current),!0}function ym(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=xy(t,e,Kr),r.__reactInternalMemoizedMergedChildContext=t,Ee(yt),Ee(lt),ve(lt,t)):Ee(yt),ve(yt,n)}var _n=null,su=!1,dc=!1;function wy(t){_n===null?_n=[t]:_n.push(t)}function dE(t){su=!0,wy(t)}function br(){if(!dc&&_n!==null){dc=!0;var t=0,e=pe;try{var n=_n;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_n=null,su=!1}catch(s){throw _n!==null&&(_n=_n.slice(t+1)),W0(hh,br),s}finally{pe=e,dc=!1}}return null}var ks=[],Cs=0,_l=null,xl=0,Rt=[],Pt=0,Qr=null,xn=1,wn="";function Or(t,e){ks[Cs++]=xl,ks[Cs++]=_l,_l=t,xl=e}function Ey(t,e,n){Rt[Pt++]=xn,Rt[Pt++]=wn,Rt[Pt++]=Qr,Qr=t;var r=xn;t=wn;var s=32-Ht(r)-1;r&=~(1<<s),n+=1;var i=32-Ht(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,xn=1<<32-Ht(e)+s|n<<s|r,wn=i+t}else xn=1<<i|n<<s|r,wn=t}function wh(t){t.return!==null&&(Or(t,1),Ey(t,1,0))}function Eh(t){for(;t===_l;)_l=ks[--Cs],ks[Cs]=null,xl=ks[--Cs],ks[Cs]=null;for(;t===Qr;)Qr=Rt[--Pt],Rt[Pt]=null,wn=Rt[--Pt],Rt[Pt]=null,xn=Rt[--Pt],Rt[Pt]=null}var bt=null,It=null,Ie=!1,Bt=null;function Ty(t,e){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,It=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qr!==null?{id:xn,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bt=t,It=null,!0):!1;default:return!1}}function ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ud(t){if(Ie){var e=It;if(e){var n=e;if(!vm(t,e)){if(ld(t))throw Error(H(418));e=lr(n.nextSibling);var r=bt;e&&vm(t,e)?Ty(r,n):(t.flags=t.flags&-4097|2,Ie=!1,bt=t)}}else{if(ld(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ie=!1,bt=t}}}function _m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function Aa(t){if(t!==bt)return!1;if(!Ie)return _m(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sd(t.type,t.memoizedProps)),e&&(e=It)){if(ld(t))throw Iy(),Error(H(418));for(;e;)Ty(t,e),e=lr(e.nextSibling)}if(_m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=bt?lr(t.stateNode.nextSibling):null;return!0}function Iy(){for(var t=It;t;)t=lr(t.nextSibling)}function Ks(){It=bt=null,Ie=!1}function Th(t){Bt===null?Bt=[t]:Bt.push(t)}var hE=Ln.ReactCurrentBatchConfig;function Mi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function ka(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xm(t){var e=t._init;return e(t._payload)}function by(t){function e(I,w){if(t){var b=I.deletions;b===null?(I.deletions=[w],I.flags|=16):b.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=hr(I,w),I.index=0,I.sibling=null,I}function i(I,w,b){return I.index=b,t?(b=I.alternate,b!==null?(b=b.index,b<w?(I.flags|=2,w):b):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,w,b,M){return w===null||w.tag!==6?(w=vc(b,I.mode,M),w.return=I,w):(w=s(w,b),w.return=I,w)}function c(I,w,b,M){var L=b.type;return L===Ts?p(I,w,b.props.children,M,b.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Kn&&xm(L)===w.type)?(M=s(w,b.props),M.ref=Mi(I,w,b),M.return=I,M):(M=Ya(b.type,b.key,b.props,null,I.mode,M),M.ref=Mi(I,w,b),M.return=I,M)}function h(I,w,b,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=_c(b,I.mode,M),w.return=I,w):(w=s(w,b.children||[]),w.return=I,w)}function p(I,w,b,M,L){return w===null||w.tag!==7?(w=Wr(b,I.mode,M,L),w.return=I,w):(w=s(w,b),w.return=I,w)}function m(I,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=vc(""+w,I.mode,b),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case va:return b=Ya(w.type,w.key,w.props,null,I.mode,b),b.ref=Mi(I,null,w),b.return=I,b;case Es:return w=_c(w,I.mode,b),w.return=I,w;case Kn:var M=w._init;return m(I,M(w._payload),b)}if(zi(w)||Ri(w))return w=Wr(w,I.mode,b,null),w.return=I,w;ka(I,w)}return null}function _(I,w,b,M){var L=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return L!==null?null:u(I,w,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case va:return b.key===L?c(I,w,b,M):null;case Es:return b.key===L?h(I,w,b,M):null;case Kn:return L=b._init,_(I,w,L(b._payload),M)}if(zi(b)||Ri(b))return L!==null?null:p(I,w,b,M,null);ka(I,b)}return null}function N(I,w,b,M,L){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(b)||null,u(w,I,""+M,L);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case va:return I=I.get(M.key===null?b:M.key)||null,c(w,I,M,L);case Es:return I=I.get(M.key===null?b:M.key)||null,h(w,I,M,L);case Kn:var q=M._init;return N(I,w,b,q(M._payload),L)}if(zi(M)||Ri(M))return I=I.get(b)||null,p(w,I,M,L,null);ka(w,M)}return null}function R(I,w,b,M){for(var L=null,q=null,v=w,y=w=0,x=null;v!==null&&y<b.length;y++){v.index>y?(x=v,v=null):x=v.sibling;var T=_(I,v,b[y],M);if(T===null){v===null&&(v=x);break}t&&v&&T.alternate===null&&e(I,v),w=i(T,w,y),q===null?L=T:q.sibling=T,q=T,v=x}if(y===b.length)return n(I,v),Ie&&Or(I,y),L;if(v===null){for(;y<b.length;y++)v=m(I,b[y],M),v!==null&&(w=i(v,w,y),q===null?L=v:q.sibling=v,q=v);return Ie&&Or(I,y),L}for(v=r(I,v);y<b.length;y++)x=N(v,I,y,b[y],M),x!==null&&(t&&x.alternate!==null&&v.delete(x.key===null?y:x.key),w=i(x,w,y),q===null?L=x:q.sibling=x,q=x);return t&&v.forEach(function(S){return e(I,S)}),Ie&&Or(I,y),L}function j(I,w,b,M){var L=Ri(b);if(typeof L!="function")throw Error(H(150));if(b=L.call(b),b==null)throw Error(H(151));for(var q=L=null,v=w,y=w=0,x=null,T=b.next();v!==null&&!T.done;y++,T=b.next()){v.index>y?(x=v,v=null):x=v.sibling;var S=_(I,v,T.value,M);if(S===null){v===null&&(v=x);break}t&&v&&S.alternate===null&&e(I,v),w=i(S,w,y),q===null?L=S:q.sibling=S,q=S,v=x}if(T.done)return n(I,v),Ie&&Or(I,y),L;if(v===null){for(;!T.done;y++,T=b.next())T=m(I,T.value,M),T!==null&&(w=i(T,w,y),q===null?L=T:q.sibling=T,q=T);return Ie&&Or(I,y),L}for(v=r(I,v);!T.done;y++,T=b.next())T=N(v,I,y,T.value,M),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),w=i(T,w,y),q===null?L=T:q.sibling=T,q=T);return t&&v.forEach(function(A){return e(I,A)}),Ie&&Or(I,y),L}function F(I,w,b,M){if(typeof b=="object"&&b!==null&&b.type===Ts&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case va:e:{for(var L=b.key,q=w;q!==null;){if(q.key===L){if(L=b.type,L===Ts){if(q.tag===7){n(I,q.sibling),w=s(q,b.props.children),w.return=I,I=w;break e}}else if(q.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Kn&&xm(L)===q.type){n(I,q.sibling),w=s(q,b.props),w.ref=Mi(I,q,b),w.return=I,I=w;break e}n(I,q);break}else e(I,q);q=q.sibling}b.type===Ts?(w=Wr(b.props.children,I.mode,M,b.key),w.return=I,I=w):(M=Ya(b.type,b.key,b.props,null,I.mode,M),M.ref=Mi(I,w,b),M.return=I,I=M)}return o(I);case Es:e:{for(q=b.key;w!==null;){if(w.key===q)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(I,w.sibling),w=s(w,b.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=_c(b,I.mode,M),w.return=I,I=w}return o(I);case Kn:return q=b._init,F(I,w,q(b._payload),M)}if(zi(b))return R(I,w,b,M);if(Ri(b))return j(I,w,b,M);ka(I,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,b),w.return=I,I=w):(n(I,w),w=vc(b,I.mode,M),w.return=I,I=w),o(I)):n(I,w)}return F}var Qs=by(!0),Sy=by(!1),wl=Ir(null),El=null,Rs=null,Ih=null;function bh(){Ih=Rs=El=null}function Sh(t){var e=wl.current;Ee(wl),t._currentValue=e}function cd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fs(t,e){El=t,Ih=Rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(Ih!==t)if(t={context:t,memoizedValue:e,next:null},Rs===null){if(El===null)throw Error(H(308));Rs=t,El.dependencies={lanes:0,firstContext:t}}else Rs=Rs.next=t;return e}var Br=null;function Nh(t){Br===null?Br=[t]:Br.push(t)}function Ny(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nh(e)):(n.next=s.next,s.next=n),e.interleaved=n,kn(t,r)}function kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qn=!1;function Ah(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ay(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,kn(t,n)}return s=r.interleaved,s===null?(e.next=e,Nh(r)):(e.next=s.next,s.next=e),r.interleaved=e,kn(t,n)}function Ha(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fh(t,n)}}function wm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tl(t,e,n,r){var s=t.updateQueue;Qn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,u=i;do{var _=u.lane,N=u.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:N,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,j=u;switch(_=e,N=n,j.tag){case 1:if(R=j.payload,typeof R=="function"){m=R.call(N,m,_);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=j.payload,_=typeof R=="function"?R.call(N,m,_):R,_==null)break e;m=Ae({},m,_);break e;case 2:Qn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[u]:_.push(u))}else N={eventTime:N,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=N,c=m):p=p.next=N,o|=_;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;_=u,u=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(1);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xr|=o,t.lanes=o,t.memoizedState=m}}function Em(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Uo={},on=Ir(Uo),wo=Ir(Uo),Eo=Ir(Uo);function $r(t){if(t===Uo)throw Error(H(174));return t}function kh(t,e){switch(ve(Eo,e),ve(wo,t),ve(on,Uo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hc(e,t)}Ee(on),ve(on,e)}function Ys(){Ee(on),Ee(wo),Ee(Eo)}function ky(t){$r(Eo.current);var e=$r(on.current),n=Hc(e,t.type);e!==n&&(ve(wo,t),ve(on,n))}function Ch(t){wo.current===t&&(Ee(on),Ee(wo))}var Se=Ir(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hc=[];function Rh(){for(var t=0;t<hc.length;t++)hc[t]._workInProgressVersionPrimary=null;hc.length=0}var qa=Ln.ReactCurrentDispatcher,fc=Ln.ReactCurrentBatchConfig,Yr=0,Ne=null,Ue=null,He=null,bl=!1,Zi=!1,To=0,fE=0;function nt(){throw Error(H(321))}function Ph(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,s,i){if(Yr=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qa.current=t===null||t.memoizedState===null?yE:vE,t=n(r,s),Zi){i=0;do{if(Zi=!1,To=0,25<=i)throw Error(H(301));i+=1,He=Ue=null,e.updateQueue=null,qa.current=_E,t=n(r,s)}while(Zi)}if(qa.current=Sl,e=Ue!==null&&Ue.next!==null,Yr=0,He=Ue=Ne=null,bl=!1,e)throw Error(H(300));return t}function Dh(){var t=To!==0;return To=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ne.memoizedState=He=t:He=He.next=t,He}function Lt(){if(Ue===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=He===null?Ne.memoizedState:He.next;if(e!==null)He=e,Ue=t;else{if(t===null)throw Error(H(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},He===null?Ne.memoizedState=He=t:He=He.next=t}return He}function Io(t,e){return typeof e=="function"?e(t):e}function pc(t){var e=Lt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var p=h.lane;if((Yr&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,Ne.lanes|=p,Xr|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,Gt(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,Xr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mc(t){var e=Lt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gt(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Cy(){}function Ry(t,e){var n=Ne,r=Lt(),s=e(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,gt=!0),r=r.queue,Vh(Dy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,bo(9,jy.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(H(349));Yr&30||Py(n,e,s)}return s}function Py(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jy(t,e,n,r){e.value=n,e.getSnapshot=r,Vy(e)&&My(t)}function Dy(t,e,n){return n(function(){Vy(e)&&My(t)})}function Vy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function My(t){var e=kn(t,1);e!==null&&qt(e,t,1,-1)}function Tm(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=gE.bind(null,Ne,t),[e.memoizedState,t]}function bo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ly(){return Lt().memoizedState}function Wa(t,e,n,r){var s=tn();Ne.flags|=t,s.memoizedState=bo(1|e,n,void 0,r===void 0?null:r)}function iu(t,e,n,r){var s=Lt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Ph(r,o.deps)){s.memoizedState=bo(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=bo(1|e,n,i,r)}function Im(t,e){return Wa(8390656,8,t,e)}function Vh(t,e){return iu(2048,8,t,e)}function Oy(t,e){return iu(4,2,t,e)}function Fy(t,e){return iu(4,4,t,e)}function Uy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zy(t,e,n){return n=n!=null?n.concat([t]):null,iu(4,4,Uy.bind(null,e,t),n)}function Mh(){}function By(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ph(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $y(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ph(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hy(t,e,n){return Yr&21?(Gt(n,e)||(n=Q0(),Ne.lanes|=n,Xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function pE(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=fc.transition;fc.transition={};try{t(!1),e()}finally{pe=n,fc.transition=r}}function qy(){return Lt().memoizedState}function mE(t,e,n){var r=dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wy(t))Gy(e,n);else if(n=Ny(t,e,n,r),n!==null){var s=ht();qt(n,t,r,s),Ky(n,e,r)}}function gE(t,e,n){var r=dr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wy(t))Gy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Gt(u,o)){var c=e.interleaved;c===null?(s.next=s,Nh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Ny(t,e,s,r),n!==null&&(s=ht(),qt(n,t,r,s),Ky(n,e,r))}}function Wy(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Gy(t,e){Zi=bl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ky(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fh(t,n)}}var Sl={readContext:Mt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},yE={readContext:Mt,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:Im,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wa(4194308,4,Uy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wa(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mE.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:Tm,useDebugValue:Mh,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=Tm(!1),e=t[0];return t=pE.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=tn();if(Ie){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),qe===null)throw Error(H(349));Yr&30||Py(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Im(Dy.bind(null,r,i,t),[t]),r.flags|=2048,bo(9,jy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=tn(),e=qe.identifierPrefix;if(Ie){var n=wn,r=xn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=To++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vE={readContext:Mt,useCallback:By,useContext:Mt,useEffect:Vh,useImperativeHandle:zy,useInsertionEffect:Oy,useLayoutEffect:Fy,useMemo:$y,useReducer:pc,useRef:Ly,useState:function(){return pc(Io)},useDebugValue:Mh,useDeferredValue:function(t){var e=Lt();return Hy(e,Ue.memoizedState,t)},useTransition:function(){var t=pc(Io)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:Cy,useSyncExternalStore:Ry,useId:qy,unstable_isNewReconciler:!1},_E={readContext:Mt,useCallback:By,useContext:Mt,useEffect:Vh,useImperativeHandle:zy,useInsertionEffect:Oy,useLayoutEffect:Fy,useMemo:$y,useReducer:mc,useRef:Ly,useState:function(){return mc(Io)},useDebugValue:Mh,useDeferredValue:function(t){var e=Lt();return Ue===null?e.memoizedState=t:Hy(e,Ue.memoizedState,t)},useTransition:function(){var t=mc(Io)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:Cy,useSyncExternalStore:Ry,useId:qy,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ou={isMounted:function(t){return(t=t._reactInternals)?os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ht(),s=dr(t),i=bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(qt(e,t,s,r),Ha(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ht(),s=dr(t),i=bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(qt(e,t,s,r),Ha(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ht(),r=dr(t),s=bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=ur(t,s,r),e!==null&&(qt(e,t,r,n),Ha(e,t,r))}};function bm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yo(n,r)||!yo(s,i):!0}function Qy(t,e,n){var r=!1,s=_r,i=e.contextType;return typeof i=="object"&&i!==null?i=Mt(i):(s=vt(e)?Kr:lt.current,r=e.contextTypes,i=(r=r!=null)?Gs(t,s):_r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ou,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Sm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ou.enqueueReplaceState(e,e.state,null)}function hd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ah(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mt(i):(i=vt(e)?Kr:lt.current,s.context=Gs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(dd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ou.enqueueReplaceState(s,s.state,null),Tl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xs(t,e){try{var n="",r=e;do n+=G1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xE=typeof WeakMap=="function"?WeakMap:Map;function Yy(t,e,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Al||(Al=!0,Td=r),fd(t,e)},n}function Xy(t,e,n){n=bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){fd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){fd(t,e),typeof r!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Nm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DE.bind(null,t,e,n),e.then(t,t))}function Am(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function km(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bn(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var wE=Ln.ReactCurrentOwner,gt=!1;function dt(t,e,n,r){e.child=t===null?Sy(e,null,n,r):Qs(e,t.child,n,r)}function Cm(t,e,n,r,s){n=n.render;var i=e.ref;return Fs(e,s),r=jh(t,e,n,r,i,s),n=Dh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(Ie&&n&&wh(e),e.flags|=1,dt(t,e,r,s),e.child)}function Rm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jy(t,e,i,r,s)):(t=Ya(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(o,r)&&t.ref===e.ref)return Cn(t,e,s)}return e.flags|=1,t=hr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yo(i,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,Cn(t,e,s)}return pd(t,e,n,r,s)}function Zy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(js,Tt),Tt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(js,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(js,Tt),Tt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(js,Tt),Tt|=r;return dt(t,e,s,n),e.child}function ev(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pd(t,e,n,r,s){var i=vt(n)?Kr:lt.current;return i=Gs(e,i),Fs(e,s),n=jh(t,e,n,r,i,s),r=Dh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(Ie&&r&&wh(e),e.flags|=1,dt(t,e,n,s),e.child)}function Pm(t,e,n,r,s){if(vt(n)){var i=!0;vl(e)}else i=!1;if(Fs(e,s),e.stateNode===null)Ga(t,e),Qy(e,n,r),hd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Mt(h):(h=vt(n)?Kr:lt.current,h=Gs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Sm(e,o,r,h),Qn=!1;var _=e.memoizedState;o.state=_,Tl(e,r,o,s),c=e.memoizedState,u!==r||_!==c||yt.current||Qn?(typeof p=="function"&&(dd(e,n,p,r),c=e.memoizedState),(u=Qn||bm(e,n,u,r,_,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ay(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Ut(e.type,u),o.props=h,m=e.pendingProps,_=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mt(c):(c=vt(n)?Kr:lt.current,c=Gs(e,c));var N=n.getDerivedStateFromProps;(p=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||_!==c)&&Sm(e,o,r,c),Qn=!1,_=e.memoizedState,o.state=_,Tl(e,r,o,s);var R=e.memoizedState;u!==m||_!==R||yt.current||Qn?(typeof N=="function"&&(dd(e,n,N,r),R=e.memoizedState),(h=Qn||bm(e,n,h,r,_,R,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return md(t,e,n,r,i,s)}function md(t,e,n,r,s,i){ev(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ym(e,n,!1),Cn(t,e,i);r=e.stateNode,wE.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qs(e,t.child,null,i),e.child=Qs(e,null,u,i)):dt(t,e,u,i),e.memoizedState=r.state,s&&ym(e,n,!0),e.child}function tv(t){var e=t.stateNode;e.pendingContext?gm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gm(t,e.context,!1),kh(t,e.containerInfo)}function jm(t,e,n,r,s){return Ks(),Th(s),e.flags|=256,dt(t,e,n,r),e.child}var gd={dehydrated:null,treeContext:null,retryLane:0};function yd(t){return{baseLanes:t,cachePool:null,transitions:null}}function nv(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Se,s&1),t===null)return ud(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=uu(o,r,0,null),t=Wr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=yd(n),e.memoizedState=gd,t):Lh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return EE(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=hr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=hr(u,i):(i=Wr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?yd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=gd,r}return i=t.child,t=i.sibling,r=hr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lh(t,e){return e=uu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ca(t,e,n,r){return r!==null&&Th(r),Qs(e,t.child,null,n),t=Lh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=gc(Error(H(422))),Ca(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=uu({mode:"visible",children:r.children},s,0,null),i=Wr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Qs(e,t.child,null,o),e.child.memoizedState=yd(o),e.memoizedState=gd,i);if(!(e.mode&1))return Ca(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(H(419)),r=gc(i,r,void 0),Ca(t,e,o,r)}if(u=(o&t.childLanes)!==0,gt||u){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kn(t,s),qt(r,t,s,-1))}return $h(),r=gc(Error(H(421))),Ca(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=VE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,It=lr(s.nextSibling),bt=e,Ie=!0,Bt=null,t!==null&&(Rt[Pt++]=xn,Rt[Pt++]=wn,Rt[Pt++]=Qr,xn=t.id,wn=t.overflow,Qr=e),e=Lh(e,r.children),e.flags|=4096,e)}function Dm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cd(t.return,e,n)}function yc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function rv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dm(t,n,e);else if(t.tag===19)Dm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yc(e,!0,n,null,i);break;case"together":yc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ga(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TE(t,e,n){switch(e.tag){case 3:tv(e),Ks();break;case 5:ky(e);break;case 1:vt(e.type)&&vl(e);break;case 4:kh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?nv(t,e,n):(ve(Se,Se.current&1),t=Cn(t,e,n),t!==null?t.sibling:null);ve(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Zy(t,e,n)}return Cn(t,e,n)}var sv,vd,iv,ov;sv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vd=function(){};iv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$r(on.current);var i=null;switch(n){case"input":s=Uc(t,s),r=Uc(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=$c(t,s),r=$c(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gl)}qc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(uo.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(uo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&xe("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};ov=function(t,e,n,r){n!==r&&(e.flags|=4)};function Li(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IE(t,e,n){var r=e.pendingProps;switch(Eh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return vt(e.type)&&yl(),rt(e),null;case 3:return r=e.stateNode,Ys(),Ee(yt),Ee(lt),Rh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Sd(Bt),Bt=null))),vd(t,e),rt(e),null;case 5:Ch(e);var s=$r(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)iv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return rt(e),null}if(t=$r(on.current),Aa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[nn]=e,r[xo]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<$i.length;s++)xe($i[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":$p(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":qp(r,i),xe("invalid",r)}qc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Na(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Na(r.textContent,u,t),s=["children",""+u]):uo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":_a(r),Hp(r,i,!0);break;case"textarea":_a(r),Wp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=D0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nn]=e,t[xo]=r,sv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wc(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<$i.length;s++)xe($i[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":$p(t,r),s=Uc(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),xe("invalid",t);break;case"textarea":qp(t,r),s=$c(t,r),xe("invalid",t);break;default:s=r}qc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?L0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&V0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&co(t,c):typeof c=="number"&&co(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xe("scroll",t):c!=null&&ah(t,i,c,o))}switch(n){case"input":_a(t),Hp(t,r,!1);break;case"textarea":_a(t),Wp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)ov(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=$r(Eo.current),$r(on.current),Aa(e)){if(r=e.stateNode,n=e.memoizedProps,r[nn]=e,(i=r.nodeValue!==n)&&(t=bt,t!==null))switch(t.tag){case 3:Na(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Na(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=e,e.stateNode=r}return rt(e),null;case 13:if(Ee(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&It!==null&&e.mode&1&&!(e.flags&128))Iy(),Ks(),e.flags|=98560,i=!1;else if(i=Aa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[nn]=e}else Ks(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Bt!==null&&(Sd(Bt),Bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?ze===0&&(ze=3):$h())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Ys(),vd(t,e),t===null&&vo(e.stateNode.containerInfo),rt(e),null;case 10:return Sh(e.type._context),rt(e),null;case 17:return vt(e.type)&&yl(),rt(e),null;case 19:if(Ee(Se),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Li(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,Li(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>Js&&(e.flags|=128,r=!0,Li(i,!1),e.lanes=4194304)}else{if(!r)if(t=Il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Li(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return rt(e),null}else 2*De()-i.renderingStartTime>Js&&n!==1073741824&&(e.flags|=128,r=!0,Li(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=Se.current,ve(Se,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Bh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function bE(t,e){switch(Eh(e),e.tag){case 1:return vt(e.type)&&yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ys(),Ee(yt),Ee(lt),Rh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ch(e),null;case 13:if(Ee(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ks()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Se),null;case 4:return Ys(),null;case 10:return Sh(e.type._context),null;case 22:case 23:return Bh(),null;case 24:return null;default:return null}}var Ra=!1,ot=!1,SE=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function _d(t,e,n){try{n()}catch(r){Re(t,e,r)}}var Vm=!1;function NE(t,e){if(nd=fl,t=dy(),xh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,p=0,m=t,_=null;t:for(;;){for(var N;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(N=m.firstChild)!==null;)_=m,m=N;for(;;){if(m===t)break t;if(_===n&&++h===s&&(u=o),_===i&&++p===r&&(c=o),(N=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=N}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:t,selectionRange:n},fl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var j=R.memoizedProps,F=R.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?j:Ut(e.type,j),F);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(M){Re(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return R=Vm,Vm=!1,R}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&_d(e,n,i)}s=s.next}while(s!==r)}}function au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function av(t){var e=t.alternate;e!==null&&(t.alternate=null,av(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nn],delete e[xo],delete e[od],delete e[uE],delete e[cE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lv(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gl));else if(r!==4&&(t=t.child,t!==null))for(wd(t,e,n),t=t.sibling;t!==null;)wd(t,e,n),t=t.sibling}function Ed(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ed(t,e,n),t=t.sibling;t!==null;)Ed(t,e,n),t=t.sibling}var Ge=null,zt=!1;function Wn(t,e,n){for(n=n.child;n!==null;)uv(t,e,n),n=n.sibling}function uv(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:ot||Ps(n,e);case 6:var r=Ge,s=zt;Ge=null,Wn(t,e,n),Ge=r,zt=s,Ge!==null&&(zt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(zt?(t=Ge,n=n.stateNode,t.nodeType===8?cc(t.parentNode,n):t.nodeType===1&&cc(t,n),mo(t)):cc(Ge,n.stateNode));break;case 4:r=Ge,s=zt,Ge=n.stateNode.containerInfo,zt=!0,Wn(t,e,n),Ge=r,zt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&_d(n,e,o),s=s.next}while(s!==r)}Wn(t,e,n);break;case 1:if(!ot&&(Ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Re(n,e,u)}Wn(t,e,n);break;case 21:Wn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Wn(t,e,n),ot=r):Wn(t,e,n);break;default:Wn(t,e,n)}}function Lm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SE),e.forEach(function(r){var s=ME.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Ge=u.stateNode,zt=!1;break e;case 3:Ge=u.stateNode.containerInfo,zt=!0;break e;case 4:Ge=u.stateNode.containerInfo,zt=!0;break e}u=u.return}if(Ge===null)throw Error(H(160));uv(i,o,s),Ge=null,zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Re(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cv(e,t),e=e.sibling}function cv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(e,t),en(t),r&4){try{eo(3,t,t.return),au(3,t)}catch(j){Re(t,t.return,j)}try{eo(5,t,t.return)}catch(j){Re(t,t.return,j)}}break;case 1:Ft(e,t),en(t),r&512&&n!==null&&Ps(n,n.return);break;case 5:if(Ft(e,t),en(t),r&512&&n!==null&&Ps(n,n.return),t.flags&32){var s=t.stateNode;try{co(s,"")}catch(j){Re(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&P0(s,i),Wc(u,o);var h=Wc(u,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?L0(s,m):p==="dangerouslySetInnerHTML"?V0(s,m):p==="children"?co(s,m):ah(s,p,m,h)}switch(u){case"input":zc(s,i);break;case"textarea":j0(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?Vs(s,!!i.multiple,N,!1):_!==!!i.multiple&&(i.defaultValue!=null?Vs(s,!!i.multiple,i.defaultValue,!0):Vs(s,!!i.multiple,i.multiple?[]:"",!1))}s[xo]=i}catch(j){Re(t,t.return,j)}}break;case 6:if(Ft(e,t),en(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Re(t,t.return,j)}}break;case 3:if(Ft(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(j){Re(t,t.return,j)}break;case 4:Ft(e,t),en(t);break;case 13:Ft(e,t),en(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Uh=De())),r&4&&Lm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(h=ot)||p,Ft(e,t),ot=h):Ft(e,t),en(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(K=t,p=t.child;p!==null;){for(m=K=p;K!==null;){switch(_=K,N=_.child,_.tag){case 0:case 11:case 14:case 15:eo(4,_,_.return);break;case 1:Ps(_,_.return);var R=_.stateNode;if(typeof R.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(j){Re(r,n,j)}}break;case 5:Ps(_,_.return);break;case 22:if(_.memoizedState!==null){Fm(m);continue}}N!==null?(N.return=_,K=N):Fm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=M0("display",o))}catch(j){Re(t,t.return,j)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(j){Re(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ft(e,t),en(t),r&4&&Lm(t);break;case 21:break;default:Ft(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lv(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(co(s,""),r.flags&=-33);var i=Mm(t);Ed(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Mm(t);wd(t,u,o);break;default:throw Error(H(161))}}catch(c){Re(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AE(t,e,n){K=t,dv(t)}function dv(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ra;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||ot;u=Ra;var h=ot;if(Ra=o,(ot=c)&&!h)for(K=s;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?Um(s):c!==null?(c.return=o,K=c):Um(s);for(;i!==null;)K=i,dv(i),i=i.sibling;K=s,Ra=u,ot=h}Om(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Om(t)}}function Om(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Em(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Em(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&mo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ot||e.flags&512&&xd(e)}catch(_){Re(e,e.return,_)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Fm(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Um(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{au(4,e)}catch(c){Re(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Re(e,s,c)}}var i=e.return;try{xd(e)}catch(c){Re(e,i,c)}break;case 5:var o=e.return;try{xd(e)}catch(c){Re(e,o,c)}}}catch(c){Re(e,e.return,c)}if(e===t){K=null;break}var u=e.sibling;if(u!==null){u.return=e.return,K=u;break}K=e.return}}var kE=Math.ceil,Nl=Ln.ReactCurrentDispatcher,Oh=Ln.ReactCurrentOwner,Vt=Ln.ReactCurrentBatchConfig,de=0,qe=null,Me=null,Ye=0,Tt=0,js=Ir(0),ze=0,So=null,Xr=0,lu=0,Fh=0,to=null,mt=null,Uh=0,Js=1/0,vn=null,Al=!1,Td=null,cr=null,Pa=!1,rr=null,kl=0,no=0,Id=null,Ka=-1,Qa=0;function ht(){return de&6?De():Ka!==-1?Ka:Ka=De()}function dr(t){return t.mode&1?de&2&&Ye!==0?Ye&-Ye:hE.transition!==null?(Qa===0&&(Qa=Q0()),Qa):(t=pe,t!==0||(t=window.event,t=t===void 0?16:ny(t.type)),t):1}function qt(t,e,n,r){if(50<no)throw no=0,Id=null,Error(H(185));Lo(t,n,r),(!(de&2)||t!==qe)&&(t===qe&&(!(de&2)&&(lu|=n),ze===4&&Xn(t,Ye)),_t(t,r),n===1&&de===0&&!(e.mode&1)&&(Js=De()+500,su&&br()))}function _t(t,e){var n=t.callbackNode;hw(t,e);var r=hl(t,t===qe?Ye:0);if(r===0)n!==null&&Qp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qp(n),e===1)t.tag===0?dE(zm.bind(null,t)):wy(zm.bind(null,t)),aE(function(){!(de&6)&&br()}),n=null;else{switch(Y0(r)){case 1:n=hh;break;case 4:n=G0;break;case 16:n=dl;break;case 536870912:n=K0;break;default:n=dl}n=_v(n,hv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hv(t,e){if(Ka=-1,Qa=0,de&6)throw Error(H(327));var n=t.callbackNode;if(Us()&&t.callbackNode!==n)return null;var r=hl(t,t===qe?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cl(t,r);else{e=r;var s=de;de|=2;var i=pv();(qe!==t||Ye!==e)&&(vn=null,Js=De()+500,qr(t,e));do try{PE();break}catch(u){fv(t,u)}while(1);bh(),Nl.current=i,de=s,Me!==null?e=0:(qe=null,Ye=0,e=ze)}if(e!==0){if(e===2&&(s=Xc(t),s!==0&&(r=s,e=bd(t,s))),e===1)throw n=So,qr(t,0),Xn(t,r),_t(t,De()),n;if(e===6)Xn(t,r);else{if(s=t.current.alternate,!(r&30)&&!CE(s)&&(e=Cl(t,r),e===2&&(i=Xc(t),i!==0&&(r=i,e=bd(t,i))),e===1))throw n=So,qr(t,0),Xn(t,r),_t(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Fr(t,mt,vn);break;case 3:if(Xn(t,r),(r&130023424)===r&&(e=Uh+500-De(),10<e)){if(hl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ht(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=id(Fr.bind(null,t,mt,vn),e);break}Fr(t,mt,vn);break;case 4:if(Xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ht(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kE(r/1960))-r,10<r){t.timeoutHandle=id(Fr.bind(null,t,mt,vn),r);break}Fr(t,mt,vn);break;case 5:Fr(t,mt,vn);break;default:throw Error(H(329))}}}return _t(t,De()),t.callbackNode===n?hv.bind(null,t):null}function bd(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(qr(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=mt,mt=n,e!==null&&Sd(e)),t}function Sd(t){mt===null?mt=t:mt.push.apply(mt,t)}function CE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xn(t,e){for(e&=~Fh,e&=~lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ht(e),r=1<<n;t[n]=-1,e&=~r}}function zm(t){if(de&6)throw Error(H(327));Us();var e=hl(t,0);if(!(e&1))return _t(t,De()),null;var n=Cl(t,e);if(t.tag!==0&&n===2){var r=Xc(t);r!==0&&(e=r,n=bd(t,r))}if(n===1)throw n=So,qr(t,0),Xn(t,e),_t(t,De()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,mt,vn),_t(t,De()),null}function zh(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Js=De()+500,su&&br())}}function Jr(t){rr!==null&&rr.tag===0&&!(de&6)&&Us();var e=de;de|=1;var n=Vt.transition,r=pe;try{if(Vt.transition=null,pe=1,t)return t()}finally{pe=r,Vt.transition=n,de=e,!(de&6)&&br()}}function Bh(){Tt=js.current,Ee(js)}function qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oE(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Eh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yl();break;case 3:Ys(),Ee(yt),Ee(lt),Rh();break;case 5:Ch(r);break;case 4:Ys();break;case 13:Ee(Se);break;case 19:Ee(Se);break;case 10:Sh(r.type._context);break;case 22:case 23:Bh()}n=n.return}if(qe=t,Me=t=hr(t.current,null),Ye=Tt=e,ze=0,So=null,Fh=lu=Xr=0,mt=to=null,Br!==null){for(e=0;e<Br.length;e++)if(n=Br[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Br=null}return t}function fv(t,e){do{var n=Me;try{if(bh(),qa.current=Sl,bl){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bl=!1}if(Yr=0,He=Ue=Ne=null,Zi=!1,To=0,Oh.current=null,n===null||n.return===null){ze=1,So=e,Me=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=Ye,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var N=Am(o);if(N!==null){N.flags&=-257,km(N,o,u,i,e),N.mode&1&&Nm(i,h,e),e=N,c=h;var R=e.updateQueue;if(R===null){var j=new Set;j.add(c),e.updateQueue=j}else R.add(c);break e}else{if(!(e&1)){Nm(i,h,e),$h();break e}c=Error(H(426))}}else if(Ie&&u.mode&1){var F=Am(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),km(F,o,u,i,e),Th(Xs(c,u));break e}}i=c=Xs(c,u),ze!==4&&(ze=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Yy(i,c,e);wm(i,I);break e;case 1:u=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(cr===null||!cr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=Xy(i,u,e);wm(i,M);break e}}i=i.return}while(i!==null)}gv(n)}catch(L){e=L,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function pv(){var t=Nl.current;return Nl.current=Sl,t===null?Sl:t}function $h(){(ze===0||ze===3||ze===2)&&(ze=4),qe===null||!(Xr&268435455)&&!(lu&268435455)||Xn(qe,Ye)}function Cl(t,e){var n=de;de|=2;var r=pv();(qe!==t||Ye!==e)&&(vn=null,qr(t,e));do try{RE();break}catch(s){fv(t,s)}while(1);if(bh(),de=n,Nl.current=r,Me!==null)throw Error(H(261));return qe=null,Ye=0,ze}function RE(){for(;Me!==null;)mv(Me)}function PE(){for(;Me!==null&&!rw();)mv(Me)}function mv(t){var e=vv(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?gv(t):Me=e,Oh.current=null}function gv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bE(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Me=null;return}}else if(n=IE(n,e,Tt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);ze===0&&(ze=5)}function Fr(t,e,n){var r=pe,s=Vt.transition;try{Vt.transition=null,pe=1,jE(t,e,n,r)}finally{Vt.transition=s,pe=r}return null}function jE(t,e,n,r){do Us();while(rr!==null);if(de&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fw(t,i),t===qe&&(Me=qe=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pa||(Pa=!0,_v(dl,function(){return Us(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vt.transition,Vt.transition=null;var o=pe;pe=1;var u=de;de|=4,Oh.current=null,NE(t,n),cv(n,t),Zw(rd),fl=!!nd,rd=nd=null,t.current=n,AE(n),sw(),de=u,pe=o,Vt.transition=i}else t.current=n;if(Pa&&(Pa=!1,rr=t,kl=s),i=t.pendingLanes,i===0&&(cr=null),aw(n.stateNode),_t(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Al)throw Al=!1,t=Td,Td=null,t;return kl&1&&t.tag!==0&&Us(),i=t.pendingLanes,i&1?t===Id?no++:(no=0,Id=t):no=0,br(),null}function Us(){if(rr!==null){var t=Y0(kl),e=Vt.transition,n=pe;try{if(Vt.transition=null,pe=16>t?16:t,rr===null)var r=!1;else{if(t=rr,rr=null,kl=0,de&6)throw Error(H(331));var s=de;for(de|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(K=h;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:eo(8,p,i)}var m=p.child;if(m!==null)m.return=p,K=m;else for(;K!==null;){p=K;var _=p.sibling,N=p.return;if(av(p),p===h){K=null;break}if(_!==null){_.return=N,K=_;break}K=N}}}var R=i.alternate;if(R!==null){var j=R.child;if(j!==null){R.child=null;do{var F=j.sibling;j.sibling=null,j=F}while(j!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,K=I;break e}K=i.return}}var w=t.current;for(K=w;K!==null;){o=K;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,K=b;else e:for(o=w;K!==null;){if(u=K,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:au(9,u)}}catch(L){Re(u,u.return,L)}if(u===o){K=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,K=M;break e}K=u.return}}if(de=s,br(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Zl,t)}catch{}r=!0}return r}finally{pe=n,Vt.transition=e}}return!1}function Bm(t,e,n){e=Xs(n,e),e=Yy(t,e,1),t=ur(t,e,1),e=ht(),t!==null&&(Lo(t,1,e),_t(t,e))}function Re(t,e,n){if(t.tag===3)Bm(t,t,n);else for(;e!==null;){if(e.tag===3){Bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cr===null||!cr.has(r))){t=Xs(n,t),t=Xy(e,t,1),e=ur(e,t,1),t=ht(),e!==null&&(Lo(e,1,t),_t(e,t));break}}e=e.return}}function DE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Ye&n)===n&&(ze===4||ze===3&&(Ye&130023424)===Ye&&500>De()-Uh?qr(t,0):Fh|=n),_t(t,e)}function yv(t,e){e===0&&(t.mode&1?(e=Ea,Ea<<=1,!(Ea&130023424)&&(Ea=4194304)):e=1);var n=ht();t=kn(t,e),t!==null&&(Lo(t,e,n),_t(t,n))}function VE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yv(t,n)}function ME(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),yv(t,n)}var vv;vv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,TE(t,e,n);gt=!!(t.flags&131072)}else gt=!1,Ie&&e.flags&1048576&&Ey(e,xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ga(t,e),t=e.pendingProps;var s=Gs(e,lt.current);Fs(e,n),s=jh(null,e,r,t,s,n);var i=Dh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vt(r)?(i=!0,vl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ah(e),s.updater=ou,e.stateNode=s,s._reactInternals=e,hd(e,r,t,n),e=md(null,e,r,!0,i,n)):(e.tag=0,Ie&&i&&wh(e),dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ga(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=OE(r),t=Ut(r,t),s){case 0:e=pd(null,e,r,t,n);break e;case 1:e=Pm(null,e,r,t,n);break e;case 11:e=Cm(null,e,r,t,n);break e;case 14:e=Rm(null,e,r,Ut(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),pd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Pm(t,e,r,s,n);case 3:e:{if(tv(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ay(t,e),Tl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Xs(Error(H(423)),e),e=jm(t,e,r,n,s);break e}else if(r!==s){s=Xs(Error(H(424)),e),e=jm(t,e,r,n,s);break e}else for(It=lr(e.stateNode.containerInfo.firstChild),bt=e,Ie=!0,Bt=null,n=Sy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ks(),r===s){e=Cn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return ky(e),t===null&&ud(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,sd(r,s)?o=null:i!==null&&sd(r,i)&&(e.flags|=32),ev(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&ud(e),null;case 13:return nv(t,e,n);case 4:return kh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qs(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Cm(t,e,r,s,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(wl,r._currentValue),r._currentValue=o,i!==null)if(Gt(i.value,o)){if(i.children===s.children&&!yt.current){e=Cn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=bn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),cd(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),cd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fs(e,n),s=Mt(s),r=r(s),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,s=Ut(r,e.pendingProps),s=Ut(r.type,s),Rm(t,e,r,s,n);case 15:return Jy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Ga(t,e),e.tag=1,vt(r)?(t=!0,vl(e)):t=!1,Fs(e,n),Qy(e,r,s),hd(e,r,s,n),md(null,e,r,!0,t,n);case 19:return rv(t,e,n);case 22:return Zy(t,e,n)}throw Error(H(156,e.tag))};function _v(t,e){return W0(t,e)}function LE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,e,n,r){return new LE(t,e,n,r)}function Hh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OE(t){if(typeof t=="function")return Hh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uh)return 11;if(t===ch)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=Dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ya(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ts:return Wr(n.children,s,i,e);case lh:o=8,s|=8;break;case Mc:return t=Dt(12,n,e,s|2),t.elementType=Mc,t.lanes=i,t;case Lc:return t=Dt(13,n,e,s),t.elementType=Lc,t.lanes=i,t;case Oc:return t=Dt(19,n,e,s),t.elementType=Oc,t.lanes=i,t;case k0:return uu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N0:o=10;break e;case A0:o=9;break e;case uh:o=11;break e;case ch:o=14;break e;case Kn:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Dt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Wr(t,e,n,r){return t=Dt(7,t,r,e),t.lanes=n,t}function uu(t,e,n,r){return t=Dt(22,t,r,e),t.elementType=k0,t.lanes=n,t.stateNode={isHidden:!1},t}function vc(t,e,n){return t=Dt(6,t,null,e),t.lanes=n,t}function _c(t,e,n){return e=Dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qh(t,e,n,r,s,i,o,u,c){return t=new FE(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ah(i),t}function UE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xv(t){if(!t)return _r;t=t._reactInternals;e:{if(os(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(vt(n))return xy(t,n,e)}return e}function wv(t,e,n,r,s,i,o,u,c){return t=qh(n,r,!0,t,s,i,o,u,c),t.context=xv(null),n=t.current,r=ht(),s=dr(n),i=bn(r,s),i.callback=e??null,ur(n,i,s),t.current.lanes=s,Lo(t,s,r),_t(t,r),t}function cu(t,e,n,r){var s=e.current,i=ht(),o=dr(s);return n=xv(n),e.context===null?e.context=n:e.pendingContext=n,e=bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ur(s,e,o),t!==null&&(qt(t,s,o,i),Ha(t,s,o)),o}function Rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $m(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wh(t,e){$m(t,e),(t=t.alternate)&&$m(t,e)}function zE(){return null}var Ev=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gh(t){this._internalRoot=t}du.prototype.render=Gh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));cu(t,e,null,null)};du.prototype.unmount=Gh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jr(function(){cu(null,t,null,null)}),e[An]=null}};function du(t){this._internalRoot=t}du.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yn.length&&e!==0&&e<Yn[n].priority;n++);Yn.splice(n,0,t),n===0&&ty(t)}};function Kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hm(){}function BE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Rl(o);i.call(h)}}var o=wv(e,r,t,0,null,!1,!1,"",Hm);return t._reactRootContainer=o,t[An]=o.current,vo(t.nodeType===8?t.parentNode:t),Jr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=Rl(c);u.call(h)}}var c=qh(t,0,!1,null,null,!1,!1,"",Hm);return t._reactRootContainer=c,t[An]=c.current,vo(t.nodeType===8?t.parentNode:t),Jr(function(){cu(e,c,n,r)}),c}function fu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Rl(o);u.call(c)}}cu(e,o,t,s)}else o=BE(n,e,t,s,r);return Rl(o)}X0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bi(e.pendingLanes);n!==0&&(fh(e,n|1),_t(e,De()),!(de&6)&&(Js=De()+500,br()))}break;case 13:Jr(function(){var r=kn(t,1);if(r!==null){var s=ht();qt(r,t,1,s)}}),Wh(t,1)}};ph=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var n=ht();qt(e,t,134217728,n)}Wh(t,134217728)}};J0=function(t){if(t.tag===13){var e=dr(t),n=kn(t,e);if(n!==null){var r=ht();qt(n,t,e,r)}Wh(t,e)}};Z0=function(){return pe};ey=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Kc=function(t,e,n){switch(e){case"input":if(zc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ru(r);if(!s)throw Error(H(90));R0(r),zc(r,s)}}}break;case"textarea":j0(t,n);break;case"select":e=n.value,e!=null&&Vs(t,!!n.multiple,e,!1)}};U0=zh;z0=Jr;var $E={usingClientEntryPoint:!1,Events:[Fo,Ns,ru,O0,F0,zh]},Oi={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:Oi.bundleType,version:Oi.version,rendererPackageName:Oi.rendererPackageName,rendererConfig:Oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=H0(t),t===null?null:t.stateNode},findFiberByHostInstance:Oi.findFiberByHostInstance||zE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{Zl=ja.inject(HE),sn=ja}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$E;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kh(e))throw Error(H(200));return UE(t,e,null,n)};At.createRoot=function(t,e){if(!Kh(t))throw Error(H(299));var n=!1,r="",s=Ev;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qh(t,1,!1,null,null,n,!1,r,s),t[An]=e.current,vo(t.nodeType===8?t.parentNode:t),new Gh(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=H0(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Jr(t)};At.hydrate=function(t,e,n){if(!hu(e))throw Error(H(200));return fu(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!Kh(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ev;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wv(e,null,t,1,n??null,s,!1,i,o),t[An]=e.current,vo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new du(e)};At.render=function(t,e,n){if(!hu(e))throw Error(H(200));return fu(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!hu(t))throw Error(H(40));return t._reactRootContainer?(Jr(function(){fu(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1};At.unstable_batchedUpdates=zh;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hu(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return fu(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function Tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tv)}catch(t){console.error(t)}}Tv(),T0.exports=At;var qE=T0.exports,qm=qE;Dc.createRoot=qm.createRoot,Dc.hydrateRoot=qm.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},WE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|u>>4;let _=(u&15)<<2|h>>6,N=h&63;c||(N=64,o||(_=64)),r.push(n[p],n[m],n[_],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Iv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||m==null)throw new GE;const _=i<<2|u>>4;if(r.push(_),h!==64){const N=u<<4&240|h>>2;if(r.push(N),m!==64){const R=h<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KE=function(t){const e=Iv(t);return bv.encodeByteArray(e,!0)},Pl=function(t){return KE(t).replace(/\./g,"")},Sv=function(t){try{return bv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=()=>QE().__FIREBASE_DEFAULTS__,XE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sv(t[1]);return e&&JSON.parse(e)},pu=()=>{try{return YE()||XE()||JE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nv=t=>{var e,n;return(n=(e=pu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZE=t=>{const e=Nv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Av=()=>{var t;return(t=pu())===null||t===void 0?void 0:t.config},kv=t=>{var e;return(e=pu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Pl(JSON.stringify(n)),Pl(JSON.stringify(o)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function rT(){var t;const e=(t=pu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aT(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lT(){return!rT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uT(){try{return typeof indexedDB=="object"}catch{return!1}}function cT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="FirebaseError";class On extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dT,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hT(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new On(s,u,r)}}function hT(t,e){return t.replace(fT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fT=/\{\$([^}]+)}/g;function pT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Wm(i)&&Wm(o)){if(!jl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mT(t,e){const n=new gT(t,e);return n.subscribe.bind(n)}class gT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xc),s.error===void 0&&(s.error=xc),s.complete===void 0&&(s.complete=xc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xT(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_T(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _T(t){return t===Ur?void 0:t}function xT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const ET={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},TT=ue.INFO,IT={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},bT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=IT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qh{constructor(e){this.name=e,this._logLevel=TT,this._logHandler=bT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ET[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const ST=(t,e)=>e.some(n=>t instanceof n);let Gm,Km;function NT(){return Gm||(Gm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AT(){return Km||(Km=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cv=new WeakMap,Nd=new WeakMap,Rv=new WeakMap,wc=new WeakMap,Yh=new WeakMap;function kT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Cv.set(n,t)}).catch(()=>{}),Yh.set(e,t),e}function CT(t){if(Nd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Nd.set(t,e)}let Ad={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RT(t){Ad=t(Ad)}function PT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ec(this),e,...n);return Rv.set(r,e.sort?e.sort():[e]),fr(r)}:AT().includes(t)?function(...e){return t.apply(Ec(this),e),fr(Cv.get(this))}:function(...e){return fr(t.apply(Ec(this),e))}}function jT(t){return typeof t=="function"?PT(t):(t instanceof IDBTransaction&&CT(t),ST(t,NT())?new Proxy(t,Ad):t)}function fr(t){if(t instanceof IDBRequest)return kT(t);if(wc.has(t))return wc.get(t);const e=jT(t);return e!==t&&(wc.set(t,e),Yh.set(e,t)),e}const Ec=t=>Yh.get(t);function DT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=fr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(fr(o.result),c.oldVersion,c.newVersion,fr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const VT=["get","getKey","getAll","getAllKeys","count"],MT=["put","add","delete","clear"],Tc=new Map;function Qm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tc.get(e))return Tc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VT.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return Tc.set(e,i),i}RT(t=>({...t,get:(e,n,r)=>Qm(e,n)||t.get(e,n,r),has:(e,n)=>!!Qm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kd="@firebase/app",Ym="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new Qh("@firebase/app"),FT="@firebase/app-compat",UT="@firebase/analytics-compat",zT="@firebase/analytics",BT="@firebase/app-check-compat",$T="@firebase/app-check",HT="@firebase/auth",qT="@firebase/auth-compat",WT="@firebase/database",GT="@firebase/data-connect",KT="@firebase/database-compat",QT="@firebase/functions",YT="@firebase/functions-compat",XT="@firebase/installations",JT="@firebase/installations-compat",ZT="@firebase/messaging",eI="@firebase/messaging-compat",tI="@firebase/performance",nI="@firebase/performance-compat",rI="@firebase/remote-config",sI="@firebase/remote-config-compat",iI="@firebase/storage",oI="@firebase/storage-compat",aI="@firebase/firestore",lI="@firebase/vertexai-preview",uI="@firebase/firestore-compat",cI="firebase",dI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]",hI={[kd]:"fire-core",[FT]:"fire-core-compat",[zT]:"fire-analytics",[UT]:"fire-analytics-compat",[$T]:"fire-app-check",[BT]:"fire-app-check-compat",[HT]:"fire-auth",[qT]:"fire-auth-compat",[WT]:"fire-rtdb",[GT]:"fire-data-connect",[KT]:"fire-rtdb-compat",[QT]:"fire-fn",[YT]:"fire-fn-compat",[XT]:"fire-iid",[JT]:"fire-iid-compat",[ZT]:"fire-fcm",[eI]:"fire-fcm-compat",[tI]:"fire-perf",[nI]:"fire-perf-compat",[rI]:"fire-rc",[sI]:"fire-rc-compat",[iI]:"fire-gcs",[oI]:"fire-gcs-compat",[aI]:"fire-fst",[uI]:"fire-fst-compat",[lI]:"fire-vertex","fire-js":"fire-js",[cI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Map,fI=new Map,Rd=new Map;function Xm(t,e){try{t.container.addComponent(e)}catch(n){Rn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zs(t){const e=t.name;if(Rd.has(e))return Rn.debug(`There were multiple attempts to register component ${e}.`),!1;Rd.set(e,t);for(const n of Dl.values())Xm(n,t);for(const n of fI.values())Xm(n,t);return!0}function Xh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new zo("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=dI;function Pv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw pr.create("bad-app-name",{appName:String(s)});if(n||(n=Av()),!n)throw pr.create("no-options");const i=Dl.get(s);if(i){if(jl(n,i.options)&&jl(r,i.config))return i;throw pr.create("duplicate-app",{appName:s})}const o=new wT(s);for(const c of Rd.values())o.addComponent(c);const u=new mI(n,r,o);return Dl.set(s,u),u}function jv(t=Cd){const e=Dl.get(t);if(!e&&t===Cd&&Av())return Pv();if(!e)throw pr.create("no-app",{appName:t});return e}function mr(t,e,n){var r;let s=(r=hI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rn.warn(u.join(" "));return}Zs(new Zr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebase-heartbeat-database",yI=1,No="firebase-heartbeat-store";let Ic=null;function Dv(){return Ic||(Ic=DT(gI,yI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(No)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),Ic}async function vI(t){try{const n=(await Dv()).transaction(No),r=await n.objectStore(No).get(Vv(t));return await n.done,r}catch(e){if(e instanceof On)Rn.warn(e.message);else{const n=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rn.warn(n.message)}}}async function Jm(t,e){try{const r=(await Dv()).transaction(No,"readwrite");await r.objectStore(No).put(e,Vv(t)),await r.done}catch(n){if(n instanceof On)Rn.warn(n.message);else{const r=pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rn.warn(r.message)}}}function Vv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=1024,xI=30*24*60*60*1e3;class wI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=xI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Rn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zm(),{heartbeatsToSend:r,unsentEntries:s}=EI(this._heartbeatsCache.heartbeats),i=Pl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rn.warn(n),""}}}function Zm(){return new Date().toISOString().substring(0,10)}function EI(t,e=_I){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),eg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uT()?cT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eg(t){return Pl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){Zs(new Zr("platform-logger",e=>new LT(e),"PRIVATE")),Zs(new Zr("heartbeat",e=>new wI(e),"PRIVATE")),mr(kd,Ym,t),mr(kd,Ym,"esm2017"),mr("fire-js","")}II("");var bI="firebase",SI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(bI,SI,"app");var tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,Mv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function x(){}x.prototype=y.prototype,v.D=y.prototype,v.prototype=new x,v.prototype.constructor=v,v.C=function(T,S,A){for(var E=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)E[Oe-2]=arguments[Oe];return y.prototype[S].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,x){x||(x=0);var T=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)T[S]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(S=0;16>S;++S)T[S]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=v.g[0],x=v.g[1],S=v.g[2];var A=v.g[3],E=y+(A^x&(S^A))+T[0]+3614090360&4294967295;y=x+(E<<7&4294967295|E>>>25),E=A+(S^y&(x^S))+T[1]+3905402710&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(x^A&(y^x))+T[2]+606105819&4294967295,S=A+(E<<17&4294967295|E>>>15),E=x+(y^S&(A^y))+T[3]+3250441966&4294967295,x=S+(E<<22&4294967295|E>>>10),E=y+(A^x&(S^A))+T[4]+4118548399&4294967295,y=x+(E<<7&4294967295|E>>>25),E=A+(S^y&(x^S))+T[5]+1200080426&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(x^A&(y^x))+T[6]+2821735955&4294967295,S=A+(E<<17&4294967295|E>>>15),E=x+(y^S&(A^y))+T[7]+4249261313&4294967295,x=S+(E<<22&4294967295|E>>>10),E=y+(A^x&(S^A))+T[8]+1770035416&4294967295,y=x+(E<<7&4294967295|E>>>25),E=A+(S^y&(x^S))+T[9]+2336552879&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(x^A&(y^x))+T[10]+4294925233&4294967295,S=A+(E<<17&4294967295|E>>>15),E=x+(y^S&(A^y))+T[11]+2304563134&4294967295,x=S+(E<<22&4294967295|E>>>10),E=y+(A^x&(S^A))+T[12]+1804603682&4294967295,y=x+(E<<7&4294967295|E>>>25),E=A+(S^y&(x^S))+T[13]+4254626195&4294967295,A=y+(E<<12&4294967295|E>>>20),E=S+(x^A&(y^x))+T[14]+2792965006&4294967295,S=A+(E<<17&4294967295|E>>>15),E=x+(y^S&(A^y))+T[15]+1236535329&4294967295,x=S+(E<<22&4294967295|E>>>10),E=y+(S^A&(x^S))+T[1]+4129170786&4294967295,y=x+(E<<5&4294967295|E>>>27),E=A+(x^S&(y^x))+T[6]+3225465664&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^x&(A^y))+T[11]+643717713&4294967295,S=A+(E<<14&4294967295|E>>>18),E=x+(A^y&(S^A))+T[0]+3921069994&4294967295,x=S+(E<<20&4294967295|E>>>12),E=y+(S^A&(x^S))+T[5]+3593408605&4294967295,y=x+(E<<5&4294967295|E>>>27),E=A+(x^S&(y^x))+T[10]+38016083&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^x&(A^y))+T[15]+3634488961&4294967295,S=A+(E<<14&4294967295|E>>>18),E=x+(A^y&(S^A))+T[4]+3889429448&4294967295,x=S+(E<<20&4294967295|E>>>12),E=y+(S^A&(x^S))+T[9]+568446438&4294967295,y=x+(E<<5&4294967295|E>>>27),E=A+(x^S&(y^x))+T[14]+3275163606&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^x&(A^y))+T[3]+4107603335&4294967295,S=A+(E<<14&4294967295|E>>>18),E=x+(A^y&(S^A))+T[8]+1163531501&4294967295,x=S+(E<<20&4294967295|E>>>12),E=y+(S^A&(x^S))+T[13]+2850285829&4294967295,y=x+(E<<5&4294967295|E>>>27),E=A+(x^S&(y^x))+T[2]+4243563512&4294967295,A=y+(E<<9&4294967295|E>>>23),E=S+(y^x&(A^y))+T[7]+1735328473&4294967295,S=A+(E<<14&4294967295|E>>>18),E=x+(A^y&(S^A))+T[12]+2368359562&4294967295,x=S+(E<<20&4294967295|E>>>12),E=y+(x^S^A)+T[5]+4294588738&4294967295,y=x+(E<<4&4294967295|E>>>28),E=A+(y^x^S)+T[8]+2272392833&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^x)+T[11]+1839030562&4294967295,S=A+(E<<16&4294967295|E>>>16),E=x+(S^A^y)+T[14]+4259657740&4294967295,x=S+(E<<23&4294967295|E>>>9),E=y+(x^S^A)+T[1]+2763975236&4294967295,y=x+(E<<4&4294967295|E>>>28),E=A+(y^x^S)+T[4]+1272893353&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^x)+T[7]+4139469664&4294967295,S=A+(E<<16&4294967295|E>>>16),E=x+(S^A^y)+T[10]+3200236656&4294967295,x=S+(E<<23&4294967295|E>>>9),E=y+(x^S^A)+T[13]+681279174&4294967295,y=x+(E<<4&4294967295|E>>>28),E=A+(y^x^S)+T[0]+3936430074&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^x)+T[3]+3572445317&4294967295,S=A+(E<<16&4294967295|E>>>16),E=x+(S^A^y)+T[6]+76029189&4294967295,x=S+(E<<23&4294967295|E>>>9),E=y+(x^S^A)+T[9]+3654602809&4294967295,y=x+(E<<4&4294967295|E>>>28),E=A+(y^x^S)+T[12]+3873151461&4294967295,A=y+(E<<11&4294967295|E>>>21),E=S+(A^y^x)+T[15]+530742520&4294967295,S=A+(E<<16&4294967295|E>>>16),E=x+(S^A^y)+T[2]+3299628645&4294967295,x=S+(E<<23&4294967295|E>>>9),E=y+(S^(x|~A))+T[0]+4096336452&4294967295,y=x+(E<<6&4294967295|E>>>26),E=A+(x^(y|~S))+T[7]+1126891415&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~x))+T[14]+2878612391&4294967295,S=A+(E<<15&4294967295|E>>>17),E=x+(A^(S|~y))+T[5]+4237533241&4294967295,x=S+(E<<21&4294967295|E>>>11),E=y+(S^(x|~A))+T[12]+1700485571&4294967295,y=x+(E<<6&4294967295|E>>>26),E=A+(x^(y|~S))+T[3]+2399980690&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~x))+T[10]+4293915773&4294967295,S=A+(E<<15&4294967295|E>>>17),E=x+(A^(S|~y))+T[1]+2240044497&4294967295,x=S+(E<<21&4294967295|E>>>11),E=y+(S^(x|~A))+T[8]+1873313359&4294967295,y=x+(E<<6&4294967295|E>>>26),E=A+(x^(y|~S))+T[15]+4264355552&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~x))+T[6]+2734768916&4294967295,S=A+(E<<15&4294967295|E>>>17),E=x+(A^(S|~y))+T[13]+1309151649&4294967295,x=S+(E<<21&4294967295|E>>>11),E=y+(S^(x|~A))+T[4]+4149444226&4294967295,y=x+(E<<6&4294967295|E>>>26),E=A+(x^(y|~S))+T[11]+3174756917&4294967295,A=y+(E<<10&4294967295|E>>>22),E=S+(y^(A|~x))+T[2]+718787259&4294967295,S=A+(E<<15&4294967295|E>>>17),E=x+(A^(S|~y))+T[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,v.g[2]=v.g[2]+S&4294967295,v.g[3]=v.g[3]+A&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var x=y-this.blockSize,T=this.B,S=this.h,A=0;A<y;){if(S==0)for(;A<=x;)s(this,v,A),A+=this.blockSize;if(typeof v=="string"){for(;A<y;)if(T[S++]=v.charCodeAt(A++),S==this.blockSize){s(this,T),S=0;break}}else for(;A<y;)if(T[S++]=v[A++],S==this.blockSize){s(this,T),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var x=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=x&255,x/=256;for(this.u(v),v=Array(16),y=x=0;4>y;++y)for(var T=0;32>T;T+=8)v[x++]=this.g[y]>>>T&255;return v};function i(v,y){var x=u;return Object.prototype.hasOwnProperty.call(x,v)?x[v]:x[v]=y(v)}function o(v,y){this.h=y;for(var x=[],T=!0,S=v.length-1;0<=S;S--){var A=v[S]|0;T&&A==y||(x[S]=A,T=!1)}this.g=x}var u={};function c(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return m;if(0>v)return F(h(-v));for(var y=[],x=1,T=0;v>=x;T++)y[T]=v/x|0,x*=4294967296;return new o(y,0)}function p(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return F(p(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(y,8)),T=m,S=0;S<v.length;S+=8){var A=Math.min(8,v.length-S),E=parseInt(v.substring(S,S+A),y);8>A?(A=h(Math.pow(y,A)),T=T.j(A).add(h(E))):(T=T.j(x),T=T.add(h(E)))}return T}var m=c(0),_=c(1),N=c(16777216);t=o.prototype,t.m=function(){if(j(this))return-F(this).m();for(var v=0,y=1,x=0;x<this.g.length;x++){var T=this.i(x);v+=(0<=T?T:4294967296+T)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(R(this))return"0";if(j(this))return"-"+F(this).toString(v);for(var y=h(Math.pow(v,6)),x=this,T="";;){var S=M(x,y).g;x=I(x,S.j(y));var A=((0<x.g.length?x.g[0]:x.h)>>>0).toString(v);if(x=S,R(x))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function R(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function j(v){return v.h==-1}t.l=function(v){return v=I(this,v),j(v)?-1:R(v)?0:1};function F(v){for(var y=v.g.length,x=[],T=0;T<y;T++)x[T]=~v.g[T];return new o(x,~v.h).add(_)}t.abs=function(){return j(this)?F(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),x=[],T=0,S=0;S<=y;S++){var A=T+(this.i(S)&65535)+(v.i(S)&65535),E=(A>>>16)+(this.i(S)>>>16)+(v.i(S)>>>16);T=E>>>16,A&=65535,E&=65535,x[S]=E<<16|A}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(v,y){return v.add(F(y))}t.j=function(v){if(R(this)||R(v))return m;if(j(this))return j(v)?F(this).j(F(v)):F(F(this).j(v));if(j(v))return F(this.j(F(v)));if(0>this.l(N)&&0>v.l(N))return h(this.m()*v.m());for(var y=this.g.length+v.g.length,x=[],T=0;T<2*y;T++)x[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<v.g.length;S++){var A=this.i(T)>>>16,E=this.i(T)&65535,Oe=v.i(S)>>>16,wt=v.i(S)&65535;x[2*T+2*S]+=E*wt,w(x,2*T+2*S),x[2*T+2*S+1]+=A*wt,w(x,2*T+2*S+1),x[2*T+2*S+1]+=E*Oe,w(x,2*T+2*S+1),x[2*T+2*S+2]+=A*Oe,w(x,2*T+2*S+2)}for(T=0;T<y;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=y;T<2*y;T++)x[T]=0;return new o(x,0)};function w(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function b(v,y){this.g=v,this.h=y}function M(v,y){if(R(y))throw Error("division by zero");if(R(v))return new b(m,m);if(j(v))return y=M(F(v),y),new b(F(y.g),F(y.h));if(j(y))return y=M(v,F(y)),new b(F(y.g),y.h);if(30<v.g.length){if(j(v)||j(y))throw Error("slowDivide_ only works with positive integers.");for(var x=_,T=y;0>=T.l(v);)x=L(x),T=L(T);var S=q(x,1),A=q(T,1);for(T=q(T,2),x=q(x,2);!R(T);){var E=A.add(T);0>=E.l(v)&&(S=S.add(x),A=E),T=q(T,1),x=q(x,1)}return y=I(v,S.j(y)),new b(S,y)}for(S=m;0<=v.l(y);){for(x=Math.max(1,Math.floor(v.m()/y.m())),T=Math.ceil(Math.log(x)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=h(x),E=A.j(y);j(E)||0<E.l(v);)x-=T,A=h(x),E=A.j(y);R(A)&&(A=_),S=S.add(A),v=I(v,E)}return new b(S,v)}t.A=function(v){return M(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)&v.i(T);return new o(x,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)|v.i(T);return new o(x,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)^v.i(T);return new o(x,this.h^v.h)};function L(v){for(var y=v.g.length+1,x=[],T=0;T<y;T++)x[T]=v.i(T)<<1|v.i(T-1)>>>31;return new o(x,v.h)}function q(v,y){var x=y>>5;y%=32;for(var T=v.g.length-x,S=[],A=0;A<T;A++)S[A]=0<y?v.i(A+x)>>>y|v.i(A+x+1)<<32-y:v.i(A+x);return new o(S,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Gr=o}).apply(typeof tg<"u"?tg:typeof self<"u"?self:typeof window<"u"?window:{});var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lv,Hi,Ov,Xa,Pd,Fv,Uv,zv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Da=="object"&&Da];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in f))break e;f=f[k]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,g=!1,k={next:function(){if(!g&&f<a.length){var V=f++;return{value:d(V,a[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),a.apply(d,k)}}return function(){return a.apply(d,arguments)}}function _(a,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,_.apply(null,arguments)}function N(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function R(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,k,V){for(var W=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)W[ge-2]=arguments[ge];return d.prototype[k].apply(g,W)}}function j(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function F(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const k=a.length||0,V=g.length||0;a.length=k+V;for(let W=0;W<V;W++)a[k+W]=g[W]}else a.push(g)}}class I{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function b(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function M(a){return M[" "](a),a}M[" "]=function(){};var L=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function q(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function v(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let f,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(f in g)a[f]=g[f];for(let V=0;V<x.length;V++)f=x[V],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function S(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function A(a){u.setTimeout(()=>{throw a},0)}function E(){var a=O;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Oe{constructor(){this.h=this.g=null}add(d,f){const g=wt.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var wt=new I(()=>new C,a=>a.reset());class C{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $,D=!1,O=new Oe,G=()=>{const a=u.Promise.resolve(void 0);$=()=>{a.then(z)}};var z=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(f){A(f)}var d=wt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}D=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function se(a,d){if(P.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{M(d.nodeName);var k=!0;break e}catch{}k=!1}k||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:be[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&se.aa.h.call(this)}}R(se,P);var be={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Fn=0;function ta(a,d,f,g,k){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=k,this.key=++Fn,this.da=this.fa=!1}function Nr(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ar(a){this.src=a,this.g={},this.h=0}Ar.prototype.add=function(a,d,f,g,k){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var W=kr(a,d,g,k);return-1<W?(d=a[W],f||(d.fa=!1)):(d=new ta(d,this.src,V,!!g,k),d.fa=f,a.push(d)),d};function us(a,d){var f=d.type;if(f in a.g){var g=a.g[f],k=Array.prototype.indexOf.call(g,d,void 0),V;(V=0<=k)&&Array.prototype.splice.call(g,k,1),V&&(Nr(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function kr(a,d,f,g){for(var k=0;k<a.length;++k){var V=a[k];if(!V.da&&V.listener==d&&V.capture==!!f&&V.ha==g)return k}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),pn={};function Un(a,d,f,g,k){if(g&&g.once)return Qt(a,d,f,g,k);if(Array.isArray(d)){for(var V=0;V<d.length;V++)Un(a,d[V],f,g,k);return null}return f=Ct(f),a&&a[Fe]?a.K(d,f,h(g)?!!g.capture:!!g,k):zn(a,d,f,!1,g,k)}function zn(a,d,f,g,k,V){if(!d)throw Error("Invalid event type");var W=h(k)?!!k.capture:!!k,ge=Yt(a);if(ge||(a[ye]=ge=new Ar(a)),f=ge.add(d,f,g,W,V),f.proxy)return f;if(g=mn(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)J||(k=W),k===void 0&&(k=!1),a.addEventListener(d.toString(),g,k);else if(a.attachEvent)a.attachEvent(ds(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function mn(){function a(f){return d.call(a.src,a.listener,f)}const d=Rr;return a}function Qt(a,d,f,g,k){if(Array.isArray(d)){for(var V=0;V<d.length;V++)Qt(a,d[V],f,g,k);return null}return f=Ct(f),a&&a[Fe]?a.L(d,f,h(g)?!!g.capture:!!g,k):zn(a,d,f,!0,g,k)}function cs(a,d,f,g,k){if(Array.isArray(d))for(var V=0;V<d.length;V++)cs(a,d[V],f,g,k);else g=h(g)?!!g.capture:!!g,f=Ct(f),a&&a[Fe]?(a=a.i,d=String(d).toString(),d in a.g&&(V=a.g[d],f=kr(V,f,g,k),-1<f&&(Nr(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[d],a.h--)))):a&&(a=Yt(a))&&(d=a.g[d.toString()],a=-1,d&&(a=kr(d,f,g,k)),(f=-1<a?d[a]:null)&&Cr(f))}function Cr(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Fe])us(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(ds(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Yt(d))?(us(f,a),f.h==0&&(f.src=null,d[ye]=null)):Nr(a)}}}function ds(a){return a in pn?pn[a]:pn[a]="on"+a}function Rr(a,d){if(a.da)a=!0;else{d=new se(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Cr(a),a=f.call(g,d)}return a}function Yt(a){return a=a[ye],a instanceof Ar?a:null}var Xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(a){return typeof a=="function"?a:(a[Xt]||(a[Xt]=function(d){return a.handleEvent(d)}),a[Xt])}function Te(){Y.call(this),this.i=new Ar(this),this.M=this,this.F=null}R(Te,Y),Te.prototype[Fe]=!0,Te.prototype.removeEventListener=function(a,d,f,g){cs(this,a,d,f,g)};function Pe(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new P(d,a);else if(d instanceof P)d.target=d.target||a;else{var k=d;d=new P(g,a),T(d,k)}if(k=!0,f)for(var V=f.length-1;0<=V;V--){var W=d.g=f[V];k=Jt(W,g,!0,d)&&k}if(W=d.g=a,k=Jt(W,g,!0,d)&&k,k=Jt(W,g,!1,d)&&k,f)for(V=0;V<f.length;V++)W=d.g=f[V],k=Jt(W,g,!1,d)&&k}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Nr(f[g]);delete a.g[d],a.h--}}this.F=null},Te.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Te.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Jt(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var k=!0,V=0;V<d.length;++V){var W=d[V];if(W&&!W.da&&W.capture==f){var ge=W.listener,We=W.ha||W.src;W.fa&&us(a.i,W),k=ge.call(We,g)!==!1&&k}}return k&&!g.defaultPrevented}function Bn(a,d,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function Pr(a){a.g=Bn(()=>{a.g=null,a.i&&(a.i=!1,Pr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class hs extends Y{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(a){Y.call(this),this.h=a,this.g={}}R(Zt,Y);var yi=[];function vi(a){q(a.g,function(d,f){this.g.hasOwnProperty(f)&&Cr(d)},a),a.g={}}Zt.prototype.N=function(){Zt.aa.N.call(this),vi(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fs=u.JSON.stringify,Pu=u.JSON.parse,jr=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function ju(){}ju.prototype.h=null;function Wf(a){return a.h||(a.h=a.i())}function Gf(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Du(){P.call(this,"d")}R(Du,P);function Vu(){P.call(this,"c")}R(Vu,P);var Dr={},Kf=null;function na(){return Kf=Kf||new Te}Dr.La="serverreachability";function Qf(a){P.call(this,Dr.La,a)}R(Qf,P);function xi(a){const d=na();Pe(d,new Qf(d))}Dr.STAT_EVENT="statevent";function Yf(a,d){P.call(this,Dr.STAT_EVENT,a),this.stat=d}R(Yf,P);function ct(a){const d=na();Pe(d,new Yf(d,a))}Dr.Ma="timingevent";function Xf(a,d){P.call(this,Dr.Ma,a),this.size=d}R(Xf,P);function wi(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function Ei(){this.g=!0}Ei.prototype.xa=function(){this.g=!1};function Qx(a,d,f,g,k,V){a.info(function(){if(a.g)if(V)for(var W="",ge=V.split("&"),We=0;We<ge.length;We++){var he=ge[We].split("=");if(1<he.length){var et=he[0];he=he[1];var tt=et.split("_");W=2<=tt.length&&tt[1]=="type"?W+(et+"="+he+"&"):W+(et+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+d+`
`+f+`
`+W})}function Yx(a,d,f,g,k,V,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+d+`
`+f+`
`+V+" "+W})}function ps(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Jx(a,f)+(g?" "+g:"")})}function Xx(a,d){a.info(function(){return"TIMEOUT: "+d})}Ei.prototype.info=function(){};function Jx(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var V=k[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<k.length;W++)k[W]=""}}}}return fs(f)}catch{return d}}var ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mu;function sa(){}R(sa,ju),sa.prototype.g=function(){return new XMLHttpRequest},sa.prototype.i=function(){return{}},Mu=new sa;function $n(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new Zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zf}function Zf(){this.i=null,this.g="",this.h=!1}var ep={},Lu={};function Ou(a,d,f){a.L=1,a.v=la(gn(d)),a.m=f,a.P=!0,tp(a,null)}function tp(a,d){a.F=Date.now(),ia(a),a.A=gn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),mp(f.i,"t",g),a.C=0,f=a.j.J,a.h=new Zf,a.g=jp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new hs(_(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var k="readystatechange";Array.isArray(k)||(k&&(yi[0]=k.toString()),k=yi);for(var V=0;V<k.length;V++){var W=Un(f,k[V],g||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),xi(),Qx(a.i,a.u,a.A,a.l,a.R,a.m)}$n.prototype.ca=function(a){a=a.target;const d=this.M;d&&yn(a)==3?d.j():this.Y(a)},$n.prototype.Y=function(a){try{if(a==this.g)e:{const tt=yn(this.g);var d=this.g.Ba();const ys=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Ep(this.g)))){this.J||tt!=4||d==7||(d==8||0>=ys?xi(3):xi(2)),Fu(this);var f=this.g.Z();this.X=f;t:if(np(this)){var g=Ep(this.g);a="";var k=g.length,V=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Ti(this);var W="";break t}this.h.i=new u.TextDecoder}for(d=0;d<k;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(V&&d==k-1)});g.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,Yx(this.i,this.u,this.A,this.l,this.R,tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,We=this.g;if((ge=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ge)){var he=ge;break t}}he=null}if(f=he)ps(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uu(this,f);else{this.o=!1,this.s=3,ct(12),Vr(this),Ti(this);break e}}if(this.P){f=!0;let Ot;for(;!this.J&&this.C<W.length;)if(Ot=Zx(this,W),Ot==Lu){tt==4&&(this.s=4,ct(14),f=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==ep){this.s=4,ct(15),ps(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else ps(this.i,this.l,Ot,null),Uu(this,Ot);if(np(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||W.length!=0||this.h.h||(this.s=1,ct(16),f=!1),this.o=this.o&&f,!f)ps(this.i,this.l,W,"[Invalid Chunked Response]"),Vr(this),Ti(this);else if(0<W.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Wu(et),et.M=!0,ct(11))}}else ps(this.i,this.l,W,null),Uu(this,W);tt==4&&Vr(this),this.o&&!this.J&&(tt==4?kp(this.j,this):(this.o=!1,ia(this)))}else g1(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Vr(this),Ti(this)}}}catch{}finally{}};function np(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Zx(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Lu:(f=Number(d.substring(f,g)),isNaN(f)?ep:(g+=1,g+f>d.length?Lu:(d=d.slice(g,g+f),a.C=g+f,d)))}$n.prototype.cancel=function(){this.J=!0,Vr(this)};function ia(a){a.S=Date.now()+a.I,rp(a,a.I)}function rp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=wi(_(a.ba,a),d)}function Fu(a){a.B&&(u.clearTimeout(a.B),a.B=null)}$n.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Xx(this.i,this.A),this.L!=2&&(xi(),ct(17)),Vr(this),this.s=2,Ti(this)):rp(this,this.S-a)};function Ti(a){a.j.G==0||a.J||kp(a.j,a)}function Vr(a){Fu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,vi(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Uu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||zu(f.h,a))){if(!a.K&&zu(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)pa(f),ha(f);else break e;qu(f),ct(18)}}else f.za=k[1],0<f.za-f.T&&37500>k[2]&&f.F&&f.v==0&&!f.C&&(f.C=wi(_(f.Za,f),6e3));if(1>=op(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Lr(f,11)}else if((a.K||f.g==a)&&pa(f),!w(d))for(k=f.Da.g.parse(d),d=0;d<k.length;d++){let he=k[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];const et=he[3];et!=null&&(f.la=et,f.j.info("VER="+f.la));const tt=he[4];tt!=null&&(f.Aa=tt,f.j.info("SVER="+f.Aa));const ys=he[5];ys!=null&&typeof ys=="number"&&0<ys&&(g=1.5*ys,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Ot=a.g;if(Ot){const ga=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var V=g.h;V.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Bu(V,V.h),V.h=null))}if(g.D){const Gu=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;Gu&&(g.ya=Gu,_e(g.I,g.D,Gu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var W=a;if(g.qa=Pp(g,g.J?g.ia:null,g.W),W.K){ap(g.h,W);var ge=W,We=g.L;We&&(ge.I=We),ge.B&&(Fu(ge),ia(ge)),g.g=W}else Np(g);0<f.i.length&&fa(f)}else he[0]!="stop"&&he[0]!="close"||Lr(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?Lr(f,7):Hu(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}xi(4)}catch{}}var e1=class{constructor(a,d){this.g=a,this.map=d}};function sp(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ip(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function op(a){return a.h?1:a.g?a.g.size:0}function zu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Bu(a,d){a.g?a.g.add(d):a.h=d}function ap(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}sp.prototype.cancel=function(){if(this.i=lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function lp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return j(a.i)}function t1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function n1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function up(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=n1(a),g=t1(a),k=g.length,V=0;V<k;V++)d.call(void 0,g[V],f&&f[V],a)}var cp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),k=null;if(0<=g){var V=a[f].substring(0,g);k=a[f].substring(g+1)}else V=a[f];d(V,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Mr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Mr){this.h=a.h,oa(this,a.j),this.o=a.o,this.g=a.g,aa(this,a.s),this.l=a.l;var d=a.i,f=new Si;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),dp(this,f),this.m=a.m}else a&&(d=String(a).match(cp))?(this.h=!1,oa(this,d[1]||"",!0),this.o=Ii(d[2]||""),this.g=Ii(d[3]||"",!0),aa(this,d[4]),this.l=Ii(d[5]||"",!0),dp(this,d[6]||"",!0),this.m=Ii(d[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}Mr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(bi(d,hp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(bi(d,hp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(bi(f,f.charAt(0)=="/"?o1:i1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",bi(f,l1)),a.join("")};function gn(a){return new Mr(a)}function oa(a,d,f){a.j=f?Ii(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function aa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function dp(a,d,f){d instanceof Si?(a.i=d,u1(a.i,a.h)):(f||(d=bi(d,a1)),a.i=new Si(d,a.h))}function _e(a,d,f){a.i.set(d,f)}function la(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ii(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function bi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,s1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function s1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hp=/[#\/\?@]/g,i1=/[#\?:]/g,o1=/[#\?]/g,a1=/[#\?@]/g,l1=/#/g;function Si(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Hn(a){a.g||(a.g=new Map,a.h=0,a.i&&r1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Si.prototype,t.add=function(a,d){Hn(this),this.i=null,a=ms(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function fp(a,d){Hn(a),d=ms(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function pp(a,d){return Hn(a),d=ms(a,d),a.g.has(d)}t.forEach=function(a,d){Hn(this),this.g.forEach(function(f,g){f.forEach(function(k){a.call(d,k,g,this)},this)},this)},t.na=function(){Hn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const k=a[g];for(let V=0;V<k.length;V++)f.push(d[g])}return f},t.V=function(a){Hn(this);let d=[];if(typeof a=="string")pp(this,a)&&(d=d.concat(this.g.get(ms(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Hn(this),this.i=null,a=ms(this,a),pp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function mp(a,d,f){fp(a,d),0<f.length&&(a.i=null,a.g.set(ms(a,d),j(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const V=encodeURIComponent(String(g)),W=this.V(g);for(g=0;g<W.length;g++){var k=V;W[g]!==""&&(k+="="+encodeURIComponent(String(W[g]))),a.push(k)}}return this.i=a.join("&")};function ms(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function u1(a,d){d&&!a.j&&(Hn(a),a.i=null,a.g.forEach(function(f,g){var k=g.toLowerCase();g!=k&&(fp(this,g),mp(this,k,f))},a)),a.j=d}function c1(a,d){const f=new Ei;if(u.Image){const g=new Image;g.onload=N(qn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=N(qn,f,"TestLoadImage: error",!1,d,g),g.onabort=N(qn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=N(qn,f,"TestLoadImage: timeout",!1,d,g),u.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function d1(a,d){const f=new Ei,g=new AbortController,k=setTimeout(()=>{g.abort(),qn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(k),V.ok?qn(f,"TestPingServer: ok",!0,d):qn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(k),qn(f,"TestPingServer: error",!1,d)})}function qn(a,d,f,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(f)}catch{}}function h1(){this.g=new jr}function f1(a,d,f){const g=f||"";try{up(a,function(k,V){let W=k;h(k)&&(W=fs(k)),d.push(g+V+"="+encodeURIComponent(W))})}catch(k){throw d.push(g+"type="+encodeURIComponent("_badmap")),k}}function ua(a){this.l=a.Ub||null,this.j=a.eb||!1}R(ua,ju),ua.prototype.g=function(){return new ca(this.l,this.j)},ua.prototype.i=function(a){return function(){return a}}({});function ca(a,d){Te.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(ca,Te),t=ca.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ai(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function gp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ni(this):Ai(this),this.readyState==3&&gp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ni(this))},t.Qa=function(a){this.g&&(this.response=a,Ni(this))},t.ga=function(){this.g&&Ni(this)};function Ni(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ai(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ai(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yp(a){let d="";return q(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function $u(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=yp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):_e(a,d,f))}function Ce(a){Te.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ce,Te);var p1=/^https?$/i,m1=["POST","PUT"];t=Ce.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mu.g(),this.v=this.o?Wf(this.o):Wf(Mu),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){vp(this,V);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)f.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())f.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),k=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(m1,d,void 0))||g||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of f)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wp(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){vp(this,V)}};function vp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,_p(a),da(a)}function _p(a){a.A||(a.A=!0,Pe(a,"complete"),Pe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Pe(this,"complete"),Pe(this,"abort"),da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xp(this):this.bb())},t.bb=function(){xp(this)};function xp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||yn(a)!=4||a.Z()!=2)){if(a.u&&yn(a)==4)Bn(a.Ea,0,a);else if(Pe(a,"readystatechange"),yn(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=W===0){var k=String(a.D).match(cp)[1]||null;!k&&u.self&&u.self.location&&(k=u.self.location.protocol.slice(0,-1)),g=!p1.test(k?k.toLowerCase():"")}f=g}if(f)Pe(a,"complete"),Pe(a,"success");else{a.m=6;try{var V=2<yn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",_p(a)}}finally{da(a)}}}}function da(a,d){if(a.g){wp(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Pe(a,"ready");try{f.onreadystatechange=g}catch{}}}function wp(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function yn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Pu(d)}};function Ep(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function g1(a){const d={};a=(a.g&&2<=yn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var f=S(a[g]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=d[k]||[];d[k]=V,V.push(f)}v(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Tp(a){this.Aa=0,this.i=[],this.j=new Ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ki("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ki("baseRetryDelayMs",5e3,a),this.cb=ki("retryDelaySeedMs",1e4,a),this.Wa=ki("forwardChannelMaxRetries",2,a),this.wa=ki("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new sp(a&&a.concurrentRequestLimit),this.Da=new h1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){ct(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Pp(this,null,this.W),fa(this)};function Hu(a){if(Ip(a),a.G==3){var d=a.U++,f=gn(a.I);if(_e(f,"SID",a.K),_e(f,"RID",d),_e(f,"TYPE","terminate"),Ci(a,f),d=new $n(a,a.j,d),d.L=2,d.v=la(gn(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=jp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ia(d)}Rp(a)}function ha(a){a.g&&(Wu(a),a.g.cancel(),a.g=null)}function Ip(a){ha(a),a.u&&(u.clearTimeout(a.u),a.u=null),pa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function fa(a){if(!ip(a.h)&&!a.s){a.s=!0;var d=a.Ga;$||G(),D||($(),D=!0),O.add(d,a),a.B=0}}function y1(a,d){return op(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=wi(_(a.Ga,a,d),Cp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const k=new $n(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),T(V,this.S)):V=this.S),this.m!==null||this.O||(k.H=V,V=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Sp(this,k,d),f=gn(this.I),_e(f,"RID",a),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Ci(this,f),V&&(this.O?d="headers="+encodeURIComponent(String(yp(V)))+"&"+d:this.m&&$u(f,this.m,V)),Bu(this.h,k),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",d),_e(f,"SID","null"),k.T=!0,Ou(k,f,null)):Ou(k,f,d),this.G=2}}else this.G==3&&(a?bp(this,a):this.i.length==0||ip(this.h)||bp(this))};function bp(a,d){var f;d?f=d.l:f=a.U++;const g=gn(a.I);_e(g,"SID",a.K),_e(g,"RID",f),_e(g,"AID",a.T),Ci(a,g),a.m&&a.o&&$u(g,a.m,a.o),f=new $n(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Sp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bu(a.h,f),Ou(f,g,d)}function Ci(a,d){a.H&&q(a.H,function(f,g){_e(d,g,f)}),a.l&&up({},function(f,g){_e(d,g,f)})}function Sp(a,d,f){f=Math.min(a.i.length,f);var g=a.l?_(a.l.Na,a.l,a):null;e:{var k=a.i;let V=-1;for(;;){const W=["count="+f];V==-1?0<f?(V=k[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let ge=!0;for(let We=0;We<f;We++){let he=k[We].g;const et=k[We].map;if(he-=V,0>he)V=Math.max(0,k[We].g-100),ge=!1;else try{f1(et,W,"req"+he+"_")}catch{g&&g(et)}}if(ge){g=W.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function Np(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;$||G(),D||($(),D=!0),O.add(d,a),a.v=0}}function qu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=wi(_(a.Fa,a),Cp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ap(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=wi(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),ha(this),Ap(this))};function Wu(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Ap(a){a.g=new $n(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=gn(a.qa);_e(d,"RID","rpc"),_e(d,"SID",a.K),_e(d,"AID",a.T),_e(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(d,"TO",a.ja),_e(d,"TYPE","xmlhttp"),Ci(a,d),a.m&&a.o&&$u(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=la(gn(d)),f.m=null,f.P=!0,tp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ha(this),qu(this),ct(19))};function pa(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function kp(a,d){var f=null;if(a.g==d){pa(a),Wu(a),a.g=null;var g=2}else if(zu(a.h,d))f=d.D,ap(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var k=a.B;g=na(),Pe(g,new Xf(g,f)),fa(a)}else Np(a);else if(k=d.s,k==3||k==0&&0<d.X||!(g==1&&y1(a,d)||g==2&&qu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),k){case 1:Lr(a,5);break;case 4:Lr(a,10);break;case 3:Lr(a,6);break;default:Lr(a,2)}}}function Cp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Lr(a,d){if(a.j.info("Error code "+d),d==2){var f=_(a.fb,a),g=a.Xa;const k=!g;g=new Mr(g||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||oa(g,"https"),la(g),k?c1(g.toString(),f):d1(g.toString(),f)}else ct(2);a.G=0,a.l&&a.l.sa(d),Rp(a),Ip(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Rp(a){if(a.G=0,a.ka=[],a.l){const d=lp(a.h);(d.length!=0||a.i.length!=0)&&(F(a.ka,d),F(a.ka,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.ra()}}function Pp(a,d,f){var g=f instanceof Mr?gn(f):new Mr(f);if(g.g!="")d&&(g.g=d+"."+g.g),aa(g,g.s);else{var k=u.location;g=k.protocol,d=d?d+"."+k.hostname:k.hostname,k=+k.port;var V=new Mr(null);g&&oa(V,g),d&&(V.g=d),k&&aa(V,k),f&&(V.l=f),g=V}return f=a.D,d=a.ya,f&&d&&_e(g,f,d),_e(g,"VER",a.la),Ci(a,g),g}function jp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ce(new ua({eb:f})):new Ce(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dp(){}t=Dp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ma(){}ma.prototype.g=function(a,d){return new Et(a,d)};function Et(a,d){Te.call(this),this.g=new Tp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new gs(this)}R(Et,Te),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Hu(this.g)},Et.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=fs(a),a=f);d.i.push(new e1(d.Ya++,a)),d.G==3&&fa(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,Hu(this.g),delete this.g,Et.aa.N.call(this)};function Vp(a){Du.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(Vp,Du);function Mp(){Vu.call(this),this.status=1}R(Mp,Vu);function gs(a){this.g=a}R(gs,Dp),gs.prototype.ua=function(){Pe(this.g,"a")},gs.prototype.ta=function(a){Pe(this.g,new Vp(a))},gs.prototype.sa=function(a){Pe(this.g,new Mp)},gs.prototype.ra=function(){Pe(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,zv=function(){return new ma},Uv=function(){return na()},Fv=Dr,Pd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ra.NO_ERROR=0,ra.TIMEOUT=8,ra.HTTP_ERROR=6,Xa=ra,Jf.COMPLETE="complete",Ov=Jf,Gf.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",Te.prototype.listen=Te.prototype.K,Hi=Gf,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,Lv=Ce}).apply(typeof Da<"u"?Da:typeof self<"u"?self:typeof window<"u"?window:{});const ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new Qh("@firebase/firestore");function Fi(){return es.logLevel}function X(t,...e){if(es.logLevel<=ue.DEBUG){const n=e.map(Jh);es.debug(`Firestore (${di}): ${t}`,...n)}}function Pn(t,...e){if(es.logLevel<=ue.ERROR){const n=e.map(Jh);es.error(`Firestore (${di}): ${t}`,...n)}}function ei(t,...e){if(es.logLevel<=ue.WARN){const n=e.map(Jh);es.warn(`Firestore (${di}): ${t}`,...n)}}function Jh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${di}) INTERNAL ASSERTION FAILED: `+t;throw Pn(e),new Error(e)}function me(t,e){t||ne()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class AI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kI{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new Bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new it(e)}}class CI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new CI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new PI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=DI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function ti(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Be(0,0))}static max(){return new ie(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ao.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ao?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Ao{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const VI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Ao{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return VI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new Q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(we.fromString(e))}static fromName(e){return new ee(we.fromString(e).popFirst(5))}static empty(){return new ee(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new we(e.slice()))}}function MI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new xr(s,ee.empty(),e)}function LI(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(ie.min(),ee.empty(),-1)}static max(){return new xr(ie.max(),ee.empty(),-1)}}function OI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==FI)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++u,u===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function zI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zh.oe=-1;function mu(t){return t==null}function Vl(t){return t===0&&1/t==-1/0}function BI(t){return typeof t=="number"&&Number.isInteger(t)&&!Vl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}}class Va{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sg(this.data.getIterator())}getIteratorFrom(e){return new sg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class sg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new $t([])}unionWith(e){let n=new Xe(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qv("Invalid base64 string: "+i):i}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const $I=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(t){if(me(!!t),typeof t=="string"){let e=0;const n=$I.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tf(t){const e=t.mapValue.fields.__previous_value__;return ef(e)?tf(e):e}function ko(t){const e=wr(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,s,i,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class Co{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ef(t)?4:WI(t)?9007199254740991:qI(t)?10:11:ne()}function fn(t,e){if(t===e)return!0;const n=ns(t);if(n!==ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ko(t).isEqual(ko(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=wr(s.timestampValue),u=wr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ts(s.bytesValue).isEqual(ts(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),u=je(i.doubleValue);return o===u?Vl(o)===Vl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ti(t.arrayValue.values||[],e.arrayValue.values||[],fn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(rg(o)!==rg(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!fn(o[c],u[c])))return!1;return!0}(t,e);default:return ne()}}function Ro(t,e){return(t.values||[]).find(n=>fn(n,e))!==void 0}function ni(t,e){if(t===e)return 0;const n=ns(t),r=ns(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=je(i.integerValue||i.doubleValue),c=je(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return ig(t.timestampValue,e.timestampValue);case 4:return ig(ko(t),ko(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(i,o){const u=ts(i),c=ts(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=fe(u[h],c[h]);if(p!==0)return p}return fe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=fe(je(i.latitude),je(o.latitude));return u!==0?u:fe(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return og(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,h,p;const m=i.fields||{},_=o.fields||{},N=(u=m.value)===null||u===void 0?void 0:u.arrayValue,R=(c=_.value)===null||c===void 0?void 0:c.arrayValue,j=fe(((h=N==null?void 0:N.values)===null||h===void 0?void 0:h.length)||0,((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0);return j!==0?j:og(N,R)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ma.mapValue&&o===Ma.mapValue)return 0;if(i===Ma.mapValue)return 1;if(o===Ma.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const _=fe(c[m],p[m]);if(_!==0)return _;const N=ni(u[c[m]],h[p[m]]);if(N!==0)return N}return fe(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ne()}}function ig(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=wr(t),r=wr(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function og(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ni(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function ri(t){return jd(t)}function jd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=jd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${jd(n.fields[o])}`;return s+"}"}(t.mapValue):ne()}function ag(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dd(t){return!!t&&"integerValue"in t}function nf(t){return!!t&&"arrayValue"in t}function lg(t){return!!t&&"nullValue"in t}function ug(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ja(t){return!!t&&"mapValue"in t}function qI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ro(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ro(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ro(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ro(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=ro(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jt(ro(this.value))}}function Wv(t){const e=[];return hi(t.fields,(n,r)=>{const s=new Qe([n]);if(Ja(r)){const i=Wv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new at(e,0,ie.min(),ie.min(),ie.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,ie.min(),ie.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,ie.min(),ie.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.position=e,this.inclusive=n}}function cg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=ni(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function dg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n="asc"){this.field=e,this.dir=n}}function GI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gv=class{};class Le extends Gv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new QI(e,n,r):n==="array-contains"?new JI(e,r):n==="in"?new ZI(e,r):n==="not-in"?new e2(e,r):n==="array-contains-any"?new t2(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YI(e,r):new XI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ni(n,this.value)):n!==null&&ns(this.value)===ns(n)&&this.matchesComparison(ni(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends Gv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kt(e,n)}matches(e){return Kv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kv(t){return t.op==="and"}function Qv(t){return KI(t)&&Kv(t)}function KI(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function Vd(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+ri(t.value);if(Qv(t))return t.filters.map(e=>Vd(e)).join(",");{const e=t.filters.map(n=>Vd(n)).join(",");return`${t.op}(${e})`}}function Yv(t,e){return t instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.field.isEqual(s.field)&&fn(r.value,s.value)}(t,e):t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Yv(o,s.filters[u]),!0):!1}(t,e):void ne()}function Xv(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${ri(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(Xv).join(" ,")+"}"}(t):"Filter"}class QI extends Le{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class YI extends Le{constructor(e,n){super(e,"in",n),this.keys=Jv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XI extends Le{constructor(e,n){super(e,"not-in",n),this.keys=Jv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Jv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class JI extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nf(n)&&Ro(n.arrayValue,this.value)}}class ZI extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ro(this.value.arrayValue,n)}}class e2 extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ro(this.value.arrayValue,n)}}class t2 extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ro(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function hg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new n2(t,e,n,r,s,i,o)}function rf(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ri(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ri(r)).join(",")),e.ue=n}return e.ue}function sf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dg(t.startAt,e.startAt)&&dg(t.endAt,e.endAt)}function Md(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function r2(t,e,n,r,s,i,o,u){return new fi(t,e,n,r,s,i,o,u)}function of(t){return new fi(t)}function fg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zv(t){return t.collectionGroup!==null}function so(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Xe(Qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Po(i,r))}),n.has(Qe.keyField().canonicalString())||e.ce.push(new Po(Qe.keyField(),r))}return e.ce}function an(t){const e=oe(t);return e.le||(e.le=s2(e,so(t))),e.le}function s2(t,e){if(t.limitType==="F")return hg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Po(s.field,i)});const n=t.endAt?new Ml(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ml(t.startAt.position,t.startAt.inclusive):null;return hg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ld(t,e){const n=t.filters.concat([e]);return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Od(t,e,n){return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gu(t,e){return sf(an(t),an(e))&&t.limitType===e.limitType}function e_(t){return`${rf(an(t))}|lt:${t.limitType}`}function _s(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Xv(s)).join(", ")}]`),mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ri(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ri(s)).join(",")),`Target(${r})`}(an(t))}; limitType=${t.limitType})`}function yu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of so(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=cg(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,so(r),s)||r.endAt&&!function(o,u,c){const h=cg(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,so(r),s))}(t,e)}function i2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function t_(t){return(e,n)=>{let r=!1;for(const s of so(t)){const i=o2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function o2(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?ni(c,h):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Hv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new ke(ee.comparator);function jn(){return a2}const n_=new ke(ee.comparator);function qi(...t){let e=n_;for(const n of t)e=e.insert(n.key,n);return e}function r_(t){let e=n_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return io()}function s_(){return io()}function io(){return new pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const l2=new ke(ee.comparator),u2=new Xe(ee.comparator);function le(...t){let e=u2;for(const n of t)e=e.add(n);return e}const c2=new Xe(fe);function d2(){return c2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vl(e)?"-0":e}}function i_(t){return{integerValue:""+t}}function h2(t,e){return BI(e)?i_(e):af(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this._=void 0}}function f2(t,e,n){return t instanceof Ll?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ef(i)&&(i=tf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof jo?a_(t,e):t instanceof Do?l_(t,e):function(s,i){const o=o_(s,i),u=pg(o)+pg(s.Pe);return Dd(o)&&Dd(s.Pe)?i_(u):af(s.serializer,u)}(t,e)}function p2(t,e,n){return t instanceof jo?a_(t,e):t instanceof Do?l_(t,e):n}function o_(t,e){return t instanceof Ol?function(r){return Dd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ll extends vu{}class jo extends vu{constructor(e){super(),this.elements=e}}function a_(t,e){const n=u_(e);for(const r of t.elements)n.some(s=>fn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Do extends vu{constructor(e){super(),this.elements=e}}function l_(t,e){let n=u_(e);for(const r of t.elements)n=n.filter(s=>!fn(s,r));return{arrayValue:{values:n}}}class Ol extends vu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function pg(t){return je(t.integerValue||t.doubleValue)}function u_(t){return nf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function m2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jo&&s instanceof jo||r instanceof Do&&s instanceof Do?ti(r.elements,s.elements,fn):r instanceof Ol&&s instanceof Ol?fn(r.Pe,s.Pe):r instanceof Ll&&s instanceof Ll}(t.transform,e.transform)}class g2{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Za(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _u{}function c_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lf(t.key,Wt.none()):new qo(t.key,t.data,Wt.none());{const n=t.data,r=jt.empty();let s=new Xe(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new as(t.key,r,new $t(s.toArray()),Wt.none())}}function y2(t,e,n){t instanceof qo?function(s,i,o){const u=s.value.clone(),c=gg(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof as?function(s,i,o){if(!Za(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=gg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(d_(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oo(t,e,n,r){return t instanceof qo?function(i,o,u,c){if(!Za(i.precondition,o))return u;const h=i.value.clone(),p=yg(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof as?function(i,o,u,c){if(!Za(i.precondition,o))return u;const h=yg(i.fieldTransforms,c,o),p=o.data;return p.setAll(d_(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return Za(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function v2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=o_(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function mg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ti(r,s,(i,o)=>m2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qo extends _u{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class as extends _u{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function d_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gg(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,p2(o,u,n[s]))}return r}function yg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,f2(i,o,e))}return r}class lf extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _2 extends _u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&y2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=s_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=c_(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ti(this.mutations,e.mutations,(n,r)=>mg(n,r))&&ti(this.baseMutations,e.baseMutations,(n,r)=>mg(n,r))}}class uf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return l2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new uf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,ce;function T2(t){switch(t){default:return ne();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function h_(t){if(t===void 0)return Pn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ve.OK:return U.OK;case Ve.CANCELLED:return U.CANCELLED;case Ve.UNKNOWN:return U.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return U.INTERNAL;case Ve.UNAVAILABLE:return U.UNAVAILABLE;case Ve.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ve.NOT_FOUND:return U.NOT_FOUND;case Ve.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ve.ABORTED:return U.ABORTED;case Ve.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ve.DATA_LOSS:return U.DATA_LOSS;default:return ne()}}(ce=Ve||(Ve={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Gr([4294967295,4294967295],0);function vg(t){const e=I2().encode(t),n=new Mv;return n.update(e),new Uint8Array(n.digest())}function _g(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gr([n,r],0),new Gr([s,i],0)]}class cf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Gr.fromNumber(r)));return s.compare(b2)===1&&(s=new Gr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=vg(e),[r,s]=_g(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new cf(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=vg(e),[r,s]=_g(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xu(ie.min(),s,new ke(fe),jn(),le())}}class Wo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wo(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class f_{constructor(e,n){this.targetId=e,this.me=n}}class p_{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class xg{constructor(){this.fe=0,this.ge=Eg(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne()}}),new Wo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Eg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class S2{constructor(e){this.Le=e,this.Be=new Map,this.ke=jn(),this.qe=wg(),this.Qe=new ke(fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Md(i))if(r===0){const o=new ee(i.path);this.Ue(n,o,at.newNoDocument(o,ie.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=ts(r).toUint8Array()}catch(c){if(c instanceof qv)return ei("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new cf(o,s,i)}catch(c){return ei(c instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&Md(u.target)){const c=new ee(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,at.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=le();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new xu(e,n,this.Qe,this.ke,r);return this.ke=jn(),this.qe=wg(),this.Qe=new ke(fe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new xg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wg(){return new ke(ee.comparator)}function Eg(){return new ke(ee.comparator)}const N2=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),A2=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),k2=(()=>({and:"AND",or:"OR"}))();class C2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fd(t,e){return t.useProto3Json||mu(e)?e:{value:e}}function Fl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R2(t,e){return Fl(t,e.toTimestamp())}function ln(t){return me(!!t),ie.fromTimestamp(function(n){const r=wr(n);return new Be(r.seconds,r.nanos)}(t))}function df(t,e){return Ud(t,e).canonicalString()}function Ud(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function g_(t){const e=we.fromString(t);return me(w_(e)),e}function zd(t,e){return df(t.databaseId,e.path)}function bc(t,e){const n=g_(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(v_(n))}function y_(t,e){return df(t.databaseId,e)}function P2(t){const e=g_(t);return e.length===4?we.emptyPath():v_(e)}function Bd(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function v_(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Tg(t,e,n){return{name:zd(t,e),fields:n.value.mapValue.fields}}function j2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(me(p===void 0||typeof p=="string"),Ze.fromBase64String(p||"")):(me(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ze.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const p=h.code===void 0?U.UNKNOWN:h_(h.code);return new Q(p,h.message||"")}(o);n=new p_(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bc(t,r.document.name),i=ln(r.document.updateTime),o=r.document.createTime?ln(r.document.createTime):ie.min(),u=new jt({mapValue:{fields:r.document.fields}}),c=at.newFoundDocument(s,i,o,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new el(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bc(t,r.document),i=r.readTime?ln(r.readTime):ie.min(),o=at.newNoDocument(s,i),u=r.removedTargetIds||[];n=new el([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bc(t,r.document),i=r.removedTargetIds||[];n=new el([],i,s,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new E2(s,i),u=r.targetId;n=new f_(u,o)}}return n}function D2(t,e){let n;if(e instanceof qo)n={update:Tg(t,e.key,e.value)};else if(e instanceof lf)n={delete:zd(t,e.key)};else if(e instanceof as)n={update:Tg(t,e.key,e.data),updateMask:$2(e.fieldMask)};else{if(!(e instanceof _2))return ne();n={verify:zd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Do)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ol)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:R2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne()}(t,e.precondition)),n}function V2(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?ln(s.updateTime):ln(i);return o.isEqual(ie.min())&&(o=ln(i)),new g2(o,s.transformResults||[])}(n,e))):[]}function M2(t,e){return{documents:[y_(t,e.path)]}}function L2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=y_(t,s);const i=function(h){if(h.length!==0)return x_(Kt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:xs(_.field),direction:U2(_.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Fd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function O2(t){let e=P2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const _=__(m);return _ instanceof Kt&&Qv(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(_=>function(R){return new Po(ws(R.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(m){let _;return _=typeof m=="object"?m.value:m,mu(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(m){const _=!!m.before,N=m.values||[];return new Ml(N,_)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const _=!m.before,N=m.values||[];return new Ml(N,_)}(n.endAt)),r2(e,s,o,i,u,"F",c,h)}function F2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function __(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ws(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ws(n.unaryFilter.field);return Le.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ws(n.unaryFilter.field);return Le.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ws(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(ws(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>__(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function U2(t){return N2[t]}function z2(t){return A2[t]}function B2(t){return k2[t]}function xs(t){return{fieldPath:t.canonicalString()}}function ws(t){return Qe.fromServerFormat(t.fieldPath)}function x_(t){return t instanceof Le?function(n){if(n.op==="=="){if(ug(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NAN"}};if(lg(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ug(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NOT_NAN"}};if(lg(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xs(n.field),op:z2(n.op),value:n.value}}}(t):t instanceof Kt?function(n){const r=n.getFilters().map(s=>x_(s));return r.length===1?r[0]:{compositeFilter:{op:B2(n.op),filters:r}}}(t):ne()}function $2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function w_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,s,i=ie.min(),o=ie.min(),u=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.ct=e}}function q2(t){const e=O2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Od(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.un=new G2}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(xr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class G2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new si(0)}static kn(){return new si(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.changes=new pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&oo(r.mutation,s,$t.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=Hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=jn();const o=io(),u=function(){return io()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof as)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),oo(p.mutation,h,p.mutation.getFieldMask(),Be.now())):o.set(h.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return u.set(h,new Q2(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=io();let s=new ke((o,u)=>o-u),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||$t.empty();p=u.applyToLocalView(h,p),r.set(c,p);const m=(s.get(u.batchId)||le()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,m=s_();p.forEach(_=>{if(!i.has(_)){const N=c_(n.get(_),r.get(_));N!==null&&m.set(_,N),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Hr());let u=-1,c=i;return o.next(h=>B.forEach(h,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(p)?B.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,le())).next(p=>({batchId:u,changes:r_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=qi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qi();return this.indexManager.getCollectionParents(e,i).next(u=>B.forEach(u,c=>{const h=function(m,_){return new fi(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,at.newInvalidDocument(p)))});let u=qi();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&oo(p.mutation,h,$t.empty(),Be.now()),yu(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ln(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:q2(s.bundledQuery),readTime:ln(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.overlays=new ke(ee.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new ee(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Hr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=Hr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=s)););return B.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new w2(n,r));let i=this.Ir.get(n);i===void 0&&(i=le(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.Tr=new Xe($e.Er),this.dr=new Xe($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new we([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new we([])),r=new $e(n,e),s=new $e(n,e+1);let i=le();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe($e.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new x2(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new $e(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(fe);return n.forEach(s=>{const i=new $e(s,0),o=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new $e(new ee(i),0);let u=new Xe(fe);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.wr)),!0)},o),B.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.Mr=e,this.docs=function(){return new ke(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=jn();const o=n.path,u=new ee(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||OI(LI(p),r)<=0||(s.has(p.key)||yu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nb(this)}getSize(e){return B.resolve(this.size)}}class nb extends K2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.persistence=e,this.Nr=new pi(n=>rf(n),sf),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hf,this.targetCount=0,this.kr=si.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new si(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zh(0),this.Kr=!1,this.Kr=!0,this.$r=new Z2,this.referenceDelegate=e(this),this.Ur=new rb(this),this.indexManager=new W2,this.remoteDocumentCache=function(s){return new tb(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new H2(n),this.Gr=new X2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new J2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new eb(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new ib(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ib extends UI{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.Jr=new hf,this.Yr=null}static Zr(e){return new ff(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const s=ee.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lT()?8:zI(ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ob;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Fi()<=ue.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",_s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Fi()<=ue.DEBUG&&X("QueryEngine","Query:",_s(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Fi()<=ue.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",_s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):B.resolve())}Yi(e,n){if(fg(n))return B.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Od(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=le(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,Od(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return fg(n)||s.isEqual(ie.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?B.resolve(null):(Fi()<=ue.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_s(n)),this.rs(e,o,n,MI(s,-1)).next(u=>u))})}ts(e,n){let r=new Xe(t_(e));return n.forEach((s,i)=>{yu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Fi()<=ue.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",_s(n)),this.Ji.getDocumentsMatchingQuery(e,n,xr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ke(fe),this._s=new pi(i=>rf(i),sf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ub(t,e,n,r){return new lb(t,e,n,r)}async function E_(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=le();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function cb(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const m=h.batch,_=m.keys();let N=B.resolve();return _.forEach(R=>{N=N.next(()=>p.getEntry(c,R)).next(j=>{const F=h.docVersions.get(R);me(F!==null),j.version.compareTo(F)<0&&(m.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=le();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function T_(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function db(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const _=s.get(m);if(!_)return;u.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let N=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?N=N.withResumeToken(Ze.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):p.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(p.resumeToken,r)),s=s.insert(m,N),function(j,F,I){return j.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,N,p)&&u.push(n.Ur.updateTargetData(i,N))});let c=jn(),h=le();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),u.push(hb(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(ie.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(p)}return B.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function hb(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=jn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):X("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function fb(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pb(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function $d(t,e,n){const r=oe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ho(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ig(t,e,n){const r=oe(t);let s=ie.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=oe(c),_=m._s.get(p);return _!==void 0?B.resolve(m.os.get(_)):m.Ur.getTargetData(h,p)}(r,o,an(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:le())).next(u=>(mb(r,i2(e),u),{documents:u,Ts:i})))}function mb(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class bg{constructor(){this.activeTargetIds=d2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gb{constructor(){this.so=new bg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La=null;function Sc(){return La===null?La=function(){return 268435456+Math.round(2147483648*Math.random())}():La++,"0x"+La.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class xb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=Sc(),c=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(X("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw ei("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+di}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=vb[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Sc();return new Promise((o,u)=>{const c=new Lv;c.setWithCredentials(!0),c.listenOnce(Ov.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xa.NO_ERROR:const p=c.getResponseJson();X(st,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Xa.TIMEOUT:X(st,`RPC '${e}' ${i} timed out`),u(new Q(U.DEADLINE_EXCEEDED,"Request time out"));break;case Xa.HTTP_ERROR:const m=c.getStatus();if(X(st,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const N=_==null?void 0:_.error;if(N&&N.status&&N.message){const R=function(F){const I=F.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(I)>=0?I:U.UNKNOWN}(N.status);u(new Q(R,N.message))}else u(new Q(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Q(U.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{X(st,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);X(st,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Sc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zv(),u=Uv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");X(st,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let _=!1,N=!1;const R=new _b({Io:F=>{N?X(st,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(_||(X(st,`Opening RPC '${e}' stream ${s} transport.`),m.open(),_=!0),X(st,`RPC '${e}' stream ${s} sending:`,F),m.send(F))},To:()=>m.close()}),j=(F,I,w)=>{F.listen(I,b=>{try{w(b)}catch(M){setTimeout(()=>{throw M},0)}})};return j(m,Hi.EventType.OPEN,()=>{N||(X(st,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),j(m,Hi.EventType.CLOSE,()=>{N||(N=!0,X(st,`RPC '${e}' stream ${s} transport closed`),R.So())}),j(m,Hi.EventType.ERROR,F=>{N||(N=!0,ei(st,`RPC '${e}' stream ${s} transport errored:`,F),R.So(new Q(U.UNAVAILABLE,"The operation could not be completed")))}),j(m,Hi.EventType.MESSAGE,F=>{var I;if(!N){const w=F.data[0];me(!!w);const b=w,M=b.error||((I=b[0])===null||I===void 0?void 0:I.error);if(M){X(st,`RPC '${e}' stream ${s} received error:`,M);const L=M.status;let q=function(x){const T=Ve[x];if(T!==void 0)return h_(T)}(L),v=M.message;q===void 0&&(q=U.INTERNAL,v="Unknown error status: "+L+" with message "+M.message),N=!0,R.So(new Q(q,v)),m.close()}else X(st,`RPC '${e}' stream ${s} received:`,w),R.bo(w)}}),j(u,Fv.STAT_EVENT,F=>{F.stat===Pd.PROXY?X(st,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===Pd.NOPROXY&&X(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Nc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){return new C2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new I_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Pn(n.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wb extends b_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=j2(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?ln(o.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Bd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Md(c)?{documents:M2(i,c)}:{query:L2(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=m_(i,o.resumeToken);const h=Fd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(ie.min())>0){u.readTime=Fl(i,o.snapshotVersion.toTimestamp());const h=Fd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=F2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Bd(this.serializer),n.removeTarget=e,this.a_(n)}}class Eb extends b_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=V2(e.writeResults,e.commitTime),r=ln(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Bd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>D2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ud(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Ud(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ib{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pn(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ls(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=oe(c);h.L_.add(4),await Go(h),h.q_.set("Unknown"),h.L_.delete(4),await Eu(h)}(this))})}),this.q_=new Ib(r,s)}}async function Eu(t){if(ls(t))for(const e of t.B_)await e(!0)}async function Go(t){for(const e of t.B_)await e(!1)}function S_(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vf(n)?yf(n):mi(n).r_()&&gf(n,e))}function mf(t,e){const n=oe(t),r=mi(n);n.N_.delete(e),r.r_()&&N_(n,e),n.N_.size===0&&(r.r_()?r.o_():ls(n)&&n.q_.set("Unknown"))}function gf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mi(t).A_(e)}function N_(t,e){t.Q_.xe(e),mi(t).R_(e)}function yf(t){t.Q_=new S2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mi(t).start(),t.q_.v_()}function vf(t){return ls(t)&&!mi(t).n_()&&t.N_.size>0}function ls(t){return oe(t).L_.size===0}function A_(t){t.Q_=void 0}async function Sb(t){t.q_.set("Online")}async function Nb(t){t.N_.forEach((e,n)=>{gf(t,e)})}async function Ab(t,e){A_(t),vf(t)?(t.q_.M_(e),yf(t)):t.q_.set("Unknown")}async function kb(t,e,n){if(t.q_.set("Online"),e instanceof p_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ul(t,r)}else if(e instanceof el?t.Q_.Ke(e):e instanceof f_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const r=await T_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(Ze.EMPTY_BYTE_STRING,p.snapshotVersion)),N_(i,c);const m=new sr(p.target,c,h,p.sequenceNumber);gf(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Ul(t,r)}}async function Ul(t,e,n){if(!Ho(e))throw e;t.L_.add(1),await Go(t),t.q_.set("Offline"),n||(n=()=>T_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Eu(t)})}function k_(t,e){return e().catch(n=>Ul(t,n,e))}async function Tu(t){const e=oe(t),n=Er(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Cb(e);)try{const s=await fb(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Rb(e,s)}catch(s){await Ul(e,s)}C_(e)&&R_(e)}function Cb(t){return ls(t)&&t.O_.length<10}function Rb(t,e){t.O_.push(e);const n=Er(t);n.r_()&&n.V_&&n.m_(e.mutations)}function C_(t){return ls(t)&&!Er(t).n_()&&t.O_.length>0}function R_(t){Er(t).start()}async function Pb(t){Er(t).p_()}async function jb(t){const e=Er(t);for(const n of t.O_)e.m_(n.mutations)}async function Db(t,e,n){const r=t.O_.shift(),s=uf.from(r,e,n);await k_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Tu(t)}async function Vb(t,e){e&&Er(t).V_&&await async function(r,s){if(function(o){return T2(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Er(r).s_(),await k_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Tu(r)}}(t,e),C_(t)&&R_(t)}async function Ng(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ls(n);n.L_.add(3),await Go(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Eu(n)}async function Mb(t,e){const n=oe(t);e?(n.L_.delete(2),await Eu(n)):e||(n.L_.add(2),await Go(n),n.q_.set("Unknown"))}function mi(t){return t.K_||(t.K_=function(n,r,s){const i=oe(n);return i.w_(),new wb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Sb.bind(null,t),Ro:Nb.bind(null,t),mo:Ab.bind(null,t),d_:kb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vf(t)?yf(t):t.q_.set("Unknown")):(await t.K_.stop(),A_(t))})),t.K_}function Er(t){return t.U_||(t.U_=function(n,r,s){const i=oe(n);return i.w_(),new Eb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Pb.bind(null,t),mo:Vb.bind(null,t),f_:jb.bind(null,t),g_:Db.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Tu(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new _f(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xf(t,e){if(Pn("AsyncQueue",`${e}: ${t}`),Ho(t))return new Q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=qi(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new zs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.W_=new ke(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ii{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new ii(e,n,zs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ob{constructor(){this.queries=kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=kg(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new Q(U.ABORTED,"Firestore shutting down"))}}function kg(){return new pi(t=>e_(t),gu)}async function P_(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Lb,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=xf(o,`Initialization of query '${_s(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&wf(n)}async function j_(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Fb(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&wf(n)}function Ub(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function wf(t){t.Y_.forEach(e=>{e.next()})}var Hd,Cg;(Cg=Hd||(Hd={})).ea="default",Cg.Cache="cache";class D_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this.key=e}}class M_{constructor(e){this.key=e}}class zb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=t_(e),this.Ra=new zs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ag,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const _=s.get(p),N=yu(this.query,m)?m:null,R=!!_&&this.mutatedKeys.has(_.key),j=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let F=!1;_&&N?_.data.isEqual(N.data)?R!==j&&(r.track({type:3,doc:N}),F=!0):this.ga(_,N)||(r.track({type:2,doc:N}),F=!0,(c&&this.Aa(N,c)>0||h&&this.Aa(N,h)<0)&&(u=!0)):!_&&N?(r.track({type:0,doc:N}),F=!0):_&&!N&&(r.track({type:1,doc:_}),F=!0,(c||h)&&(u=!0)),F&&(N?(o=o.add(N),i=j?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(N,R){const j=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return j(N)-j(R)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new ii(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ag,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new M_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new V_(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ii.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Bb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $b{constructor(e){this.key=e,this.va=!1}}class Hb{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new pi(u=>e_(u),gu),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(ee.comparator),this.Na=new Map,this.La=new hf,this.Ba={},this.ka=new Map,this.qa=si.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function qb(t,e,n=!0){const r=B_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await L_(r,e,n,!0),s}async function Wb(t,e){const n=B_(t);await L_(n,e,!0,!1)}async function L_(t,e,n,r){const s=await pb(t.localStore,an(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await Gb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&S_(t.remoteStore,s),u}async function Gb(t,e,n,r,s){t.Ka=(m,_,N)=>async function(j,F,I,w){let b=F.view.ma(I);b.ns&&(b=await Ig(j.localStore,F.query,!1).then(({documents:v})=>F.view.ma(v,b)));const M=w&&w.targetChanges.get(F.targetId),L=w&&w.targetMismatches.get(F.targetId)!=null,q=F.view.applyChanges(b,j.isPrimaryClient,M,L);return Pg(j,F.targetId,q.wa),q.snapshot}(t,m,_,N);const i=await Ig(t.localStore,e,!0),o=new zb(e,i.Ts),u=o.ma(i.documents),c=Wo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);Pg(t,n,h.wa);const p=new Bb(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function Kb(t,e,n){const r=oe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!gu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $d(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&mf(r.remoteStore,s.targetId),qd(r,s.targetId)}).catch($o)):(qd(r,s.targetId),await $d(r.localStore,s.targetId,!0))}async function Qb(t,e){const n=oe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mf(n.remoteStore,r.targetId))}async function Yb(t,e,n){const r=rS(t);try{const s=await function(o,u){const c=oe(o),h=Be.now(),p=u.reduce((N,R)=>N.add(R.key),le());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",N=>{let R=jn(),j=le();return c.cs.getEntries(N,p).next(F=>{R=F,R.forEach((I,w)=>{w.isValidDocument()||(j=j.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(N,R)).next(F=>{m=F;const I=[];for(const w of u){const b=v2(w,m.get(w.key).overlayedDocument);b!=null&&I.push(new as(w.key,b,Wv(b.value.mapValue),Wt.exists(!0)))}return c.mutationQueue.addMutationBatch(N,h,I,u)}).next(F=>{_=F;const I=F.applyToLocalDocumentSet(m,j);return c.documentOverlayCache.saveOverlays(N,F.batchId,I)})}).then(()=>({batchId:_.batchId,changes:r_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new ke(fe)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Ko(r,s.changes),await Tu(r.remoteStore)}catch(s){const i=xf(s,"Failed to persist write");n.reject(i)}}async function O_(t,e){const n=oe(t);try{const r=await db(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?me(o.va):s.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await Ko(n,r,e)}catch(r){await $o(r)}}function Rg(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=oe(o);c.onlineState=u;let h=!1;c.queries.forEach((p,m)=>{for(const _ of m.j_)_.Z_(u)&&(h=!0)}),h&&wf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Xb(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new ke(ee.comparator);o=o.insert(i,at.newNoDocument(i,ie.min()));const u=le().add(i),c=new xu(ie.min(),new Map,new ke(fe),o,u);await O_(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ef(r)}else await $d(r.localStore,e,!1).then(()=>qd(r,e,n)).catch($o)}async function Jb(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await cb(n.localStore,e);U_(n,r,null),F_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ko(n,s)}catch(s){await $o(s)}}async function Zb(t,e,n){const r=oe(t);try{const s=await function(o,u){const c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(me(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);U_(r,e,n),F_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ko(r,s)}catch(s){await $o(s)}}function F_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function U_(t,e,n){const r=oe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function qd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||z_(t,r)})}function z_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ef(t))}function Pg(t,e,n){for(const r of n)r instanceof V_?(t.La.addReference(r.key,e),eS(t,r)):r instanceof M_?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||z_(t,r.key)):ne()}function eS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ef(t))}function Ef(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(we.fromString(e)),r=t.qa.next();t.Na.set(r,new $b(n)),t.Oa=t.Oa.insert(n,r),S_(t.remoteStore,new sr(an(of(n.path)),r,"TargetPurposeLimboResolution",Zh.oe))}}async function Ko(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=pf.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=oe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(h,_=>B.forEach(_.$i,N=>p.persistence.referenceDelegate.addReference(m,_.targetId,N)).next(()=>B.forEach(_.Ui,N=>p.persistence.referenceDelegate.removeReference(m,_.targetId,N)))))}catch(m){if(!Ho(m))throw m;X("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const N=p.os.get(_),R=N.snapshotVersion,j=N.withLastLimboFreeSnapshotVersion(R);p.os=p.os.insert(_,j)}}}(r.localStore,i))}async function tS(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await E_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new Q(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ko(n,r.hs)}}function nS(t,e){const n=oe(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let s=le();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function B_(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=O_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xb.bind(null,e),e.Ca.d_=Fb.bind(null,e.eventManager),e.Ca.$a=Ub.bind(null,e.eventManager),e}function rS(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zb.bind(null,e),e}class zl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ub(this.persistence,new ab,e.initialUser,this.serializer)}Ga(e){return new sb(ff.Zr,this.serializer)}Wa(e){return new gb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zl.provider={build:()=>new zl};class Wd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tS.bind(null,this.syncEngine),await Mb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ob}()}createDatastore(e){const n=wu(e.databaseInfo.databaseId),r=function(i){return new xb(i)}(e.databaseInfo);return function(i,o,u,c){return new Tb(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new bb(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Rg(this.syncEngine,n,0),function(){return Sg.D()?new Sg:new yb}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,p){const m=new Hb(s,i,o,u,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Go(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wd.provider={build:()=>new Wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=$v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ac(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await E_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iS(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ng(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ng(e.remoteStore,s)),t._onlineComponents=e}async function iS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ac(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ei("Error using user provided cache. Falling back to memory cache: "+n),await Ac(t,new zl)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Ac(t,new zl);return t._offlineComponents}async function H_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await jg(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await jg(t,new Wd))),t._onlineComponents}function oS(t){return H_(t).then(e=>e.syncEngine)}async function Gd(t){const e=await H_(t),n=e.eventManager;return n.onListen=qb.bind(null,e.syncEngine),n.onUnlisten=Kb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Qb.bind(null,e.syncEngine),n}function aS(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const p=new $_({next:_=>{p.Za(),o.enqueueAndForget(()=>j_(i,m)),_.fromCache&&c.source==="server"?h.reject(new Q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new D_(u,p,{includeMetadataChanges:!0,_a:!0});return P_(i,m)}(await Gd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e,n){if(!n)throw new Q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lS(t,e,n,r){if(e===!0&&r===!0)throw new Q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vg(t){if(!ee.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mg(t){if(ee.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iu(t);throw new Q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NI;switch(r.type){case"firstParty":return new RI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dg.get(n);r&&(X("ComponentProvider","Removing Datastore"),Dg.delete(n),r.terminate())}(this),Promise.resolve()}}function uS(t,e,n,r={}){var s;const i=(t=un(t,bu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=it.MOCK_USER;else{u=tT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new it(h)}t._authCredentials=new AI(new Bv(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sr(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class yr extends Sr{constructor(e,n,r){super(e,n,of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new ee(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function cS(t,e,...n){if(t=Nt(t),W_("collection","path",e),t instanceof bu){const r=we.fromString(e,...n);return Mg(r),new yr(t,null,r)}{if(!(t instanceof xt||t instanceof yr))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Mg(r),new yr(t.firestore,null,r)}}function Tf(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=$v.newId()),W_("doc","path",e),t instanceof bu){const r=we.fromString(e,...n);return Vg(r),new xt(t,null,new ee(r))}{if(!(t instanceof xt||t instanceof yr))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Vg(r),new xt(t.firestore,t instanceof yr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new I_(this,"async_queue_retry"),this.Vu=()=>{const r=Nc();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Nc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Nc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ho(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw Pn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=_f.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Fg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class rs extends bu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Og,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Og(e),this._firestoreClient=void 0,await e}}}function dS(t,e){const n=typeof t=="object"?t:jv(),r=typeof t=="string"?t:e||"(default)",s=Xh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ZE("firestore");i&&uS(s,...i)}return s}function If(t){if(t._terminated)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hS(t),t._firestoreClient}function hS(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,h,p){return new HI(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,q_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new sS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(Ze.fromBase64String(e))}catch(n){throw new Q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oi(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=/^__.*__$/;class pS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new as(e,this.data,this.fieldMask,n,this.fieldTransforms):new qo(e,this.data,n,this.fieldTransforms)}}function K_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Af{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(K_(this.Cu)&&fS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wu(e)}Qu(e,n,r,s=!1){return new Af({Cu:e,methodName:n,qu:r,path:Qe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kf(t){const e=t._freezeSettings(),n=wu(t._databaseId);return new mS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q_(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);J_("Data must be an object, but it was:",o,r);const u=Y_(r,o);let c,h;if(i.merge)c=new $t(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const _=yS(e,m,n);if(!o.contains(_))throw new Q(U.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);_S(p,_)||p.push(_)}c=new $t(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new pS(new jt(u),c,h)}function gS(t,e,n,r=!1){return Cf(n,t.Qu(r?4:3,e))}function Cf(t,e){if(X_(t=Nt(t)))return J_("Unsupported field value:",e,t),Y_(t,e);if(t instanceof G_)return function(r,s){if(!K_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Cf(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Fl(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fl(s.serializer,i)}}if(r instanceof Sf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oi)return{bytesValue:m_(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:df(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nf)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return af(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Iu(r)}`)}(t,e)}function Y_(t,e){const n={};return Hv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,s)=>{const i=Cf(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function X_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Sf||t instanceof oi||t instanceof xt||t instanceof G_||t instanceof Nf)}function J_(t,e,n){if(!X_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Iu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function yS(t,e,n){if((e=Nt(e))instanceof bf)return e._internalPath;if(typeof e=="string")return Z_(t,e);throw Bl("Field path arguments must be of type string or ",t,!1,void 0,n)}const vS=new RegExp("[~\\*/\\[\\]]");function Z_(t,e,n){if(e.search(vS)>=0)throw Bl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bf(...e.split("."))._internalPath}catch{throw Bl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(U.INVALID_ARGUMENT,u+t+c)}function _S(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Su("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xS extends ex{data(){return super.data()}}function Su(t,e){return typeof e=="string"?Z_(t,e):e instanceof bf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rf{}class nx extends Rf{}function Nu(t,e,...n){let r=[];e instanceof Rf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Pf).length,u=i.filter(c=>c instanceof Au).length;if(o>1||o>0&&u>0)throw new Q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Au extends nx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Au(e,n,r)}_apply(e){const n=this._parse(e);return sx(e._query,n),new Sr(e.firestore,e.converter,Ld(e._query,n))}_parse(e){const n=kf(e.firestore);return function(i,o,u,c,h,p,m){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){zg(m,p);const N=[];for(const R of m)N.push(Ug(c,i,R));_={arrayValue:{values:N}}}else _=Ug(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||zg(m,p),_=gS(u,o,m,p==="in"||p==="not-in");return Le.create(h,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wS(t,e,n){const r=e,s=Su("where",t);return Au._create(s,r,n)}class Pf extends Rf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)sx(o,c),o=Ld(o,c)}(e._query,n),new Sr(e.firestore,e.converter,Ld(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jf extends nx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Po(i,o)}(e._query,this._field,this._direction);return new Sr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new fi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function rx(t,e="asc"){const n=e,r=Su("orderBy",t);return jf._create(r,n)}function Ug(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new Q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&n.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!ee.isDocumentKey(r))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ag(t,new ee(r))}if(n instanceof xt)return ag(t,n._key);throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(n)}.`)}function zg(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sx(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ES{convertValue(e,n="none"){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new Nf(i)}convertGeoPoint(e){return new Sf(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ko(e));default:return null}}convertTimestamp(e){const n=wr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);me(w_(r));const s=new Co(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||Pn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ox extends ex{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Su("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tl extends ox{data(e={}){return super.data(e)}}class ax{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tl(this._firestore,this._userDataWriter,r.key,r,new Gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new tl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Gi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new tl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Gi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:TS(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}class Df extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function lx(t){t=un(t,Sr);const e=un(t.firestore,rs),n=If(e),r=new Df(e);return tx(t._query),aS(n,t._query).then(s=>new ax(e,r,t,s))}function IS(t,e,n){t=un(t,xt);const r=un(t.firestore,rs),s=ix(t.converter,e,n);return Mf(r,[Q_(kf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wt.none())])}function bS(t){return Mf(un(t.firestore,rs),[new lf(t._key,Wt.none())])}function $l(t,e){const n=un(t.firestore,rs),r=Tf(t),s=ix(t.converter,e);return Mf(n,[Q_(kf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}function Vf(t,...e){var n,r,s;t=Nt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Fg(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Fg(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof xt)h=un(t.firestore,rs),p=of(t._key.path),c={next:m=>{e[o]&&e[o](SS(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=un(t,Sr);h=un(m.firestore,rs),p=m._query;const _=new Df(h);c={next:N=>{e[o]&&e[o](new ax(h,_,m,N))},error:e[o+1],complete:e[o+2]},tx(t._query)}return function(_,N,R,j){const F=new $_(j),I=new D_(N,F,R);return _.asyncQueue.enqueueAndForget(async()=>P_(await Gd(_),I)),()=>{F.Za(),_.asyncQueue.enqueueAndForget(async()=>j_(await Gd(_),I))}}(If(h),p,u,c)}function Mf(t,e){return function(r,s){const i=new gr;return r.asyncQueue.enqueueAndForget(async()=>Yb(await oS(r),s,i)),i.promise}(If(t),e)}function SS(t,e,n){const r=n.docs.get(e._key),s=new Df(t);return new ox(t,s,e._key,r,new Gi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){di=s})(ci),Zs(new Zr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new rs(new kI(r.getProvider("auth-internal")),new jI(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),mr(ng,"4.7.3",e),mr(ng,"4.7.3","esm2017")})();function Lf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NS=ux,cx=new zo("auth","Firebase",ux());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Qh("@firebase/auth");function AS(t,...e){Hl.logLevel<=ue.WARN&&Hl.warn(`Auth (${ci}): ${t}`,...e)}function nl(t,...e){Hl.logLevel<=ue.ERROR&&Hl.error(`Auth (${ci}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw Of(t,...e)}function cn(t,...e){return Of(t,...e)}function dx(t,e,n){const r=Object.assign(Object.assign({},NS()),{[e]:n});return new zo("auth","Firebase",r).create(e,{appName:t.name})}function Sn(t){return dx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Of(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cx.create(t,...e)}function te(t,e,...n){if(!t)throw Of(e,...n)}function En(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nl(e),new Error(e)}function Vn(t,e){t||En(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kS(){return Bg()==="http:"||Bg()==="https:"}function Bg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kS()||iT()||"connection"in navigator)?navigator.onLine:!0}function RS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vn(n>e,"Short delay should be less than long delay!"),this.isMobile=nT()||oT()}get(){return CS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e){Vn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;En("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;En("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;En("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Qo(3e4,6e4);function Yo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gi(t,e,n,r,s={}){return fx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Bo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return sT()||(h.referrerPolicy="no-referrer"),hx.fetch()(px(t,t.config.apiHost,n,u),h)})}async function fx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PS),e);try{const s=new DS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Oa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Oa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Oa(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw dx(t,p,h);Dn(t,p)}}catch(s){if(s instanceof On)throw s;Dn(t,"network-request-failed",{message:String(s)})}}async function Uf(t,e,n,r,s={}){const i=await gi(t,e,n,r,s);return"mfaPendingCredential"in i&&Dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function px(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ff(t.config,s):`${t.config.apiScheme}://${s}`}class DS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),jS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Oa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(t,e){return gi(t,"POST","/v1/accounts:delete",e)}async function mx(t,e){return gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MS(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=zf(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ao(kc(s.auth_time)),issuedAtTime:ao(kc(s.iat)),expirationTime:ao(kc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function kc(t){return Number(t)*1e3}function zf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Sv(n);return s?JSON.parse(s):(nl("Failed to decode base64 JWT payload"),null)}catch(s){return nl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $g(t){const e=zf(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&LS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ao(this.lastLoginAt),this.creationTime=ao(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vo(t,mx(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?gx(i.providerUserInfo):[],u=US(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Qd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function FS(t){const e=Nt(t);await ql(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function US(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gx(t){return t.map(e=>{var{providerId:n}=e,r=Lf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(t,e){const n=await fx(t,{},async()=>{const r=Bo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=px(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",hx.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BS(t,e){return gi(t,"POST","/v2/accounts:revokeToken",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$g(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=$g(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Bs;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bs,this.toJSON())}_performRefresh(){return En("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Lf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MS(this,e)}reload(){return FS(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ql(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(Sn(this.auth));const e=await this.getIdToken();return await Vo(this,VS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,N=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(u=n.tenantId)!==null&&u!==void 0?u:void 0,F=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:b,emailVerified:M,isAnonymous:L,providerData:q,stsTokenManager:v}=n;te(b&&v,e,"internal-error");const y=Bs.fromJSON(this.name,v);te(typeof b=="string",e,"internal-error"),Gn(m,e.name),Gn(_,e.name),te(typeof M=="boolean",e,"internal-error"),te(typeof L=="boolean",e,"internal-error"),Gn(N,e.name),Gn(R,e.name),Gn(j,e.name),Gn(F,e.name),Gn(I,e.name),Gn(w,e.name);const x=new Tn({uid:b,auth:e,email:_,emailVerified:M,displayName:m,isAnonymous:L,photoURL:R,phoneNumber:N,tenantId:j,stsTokenManager:y,createdAt:I,lastLoginAt:w});return q&&Array.isArray(q)&&(x.providerData=q.map(T=>Object.assign({},T))),F&&(x._redirectEventId=F),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bs;s.updateFromServerResponse(n);const i=new Tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ql(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Bs;u.updateFromIdToken(r);const c=new Tn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=new Map;function In(t){Vn(t instanceof Function,"Expected a class definition");let e=Hg.get(t);return e?(Vn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yx.type="NONE";const qg=yx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e,n){return`firebase:${t}:${e}:${n}`}class $s{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=rl(this.userKey,s.apiKey,i),this.fullPersistenceKey=rl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Tn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $s(In(qg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||In(qg);const o=rl(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Tn._fromJSON(e,p);h!==i&&(u=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new $s(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new $s(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tx(e))return"Blackberry";if(Ix(e))return"Webos";if(_x(e))return"Safari";if((e.includes("chrome/")||xx(e))&&!e.includes("edge/"))return"Chrome";if(Ex(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vx(t=ut()){return/firefox\//i.test(t)}function _x(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xx(t=ut()){return/crios\//i.test(t)}function wx(t=ut()){return/iemobile/i.test(t)}function Ex(t=ut()){return/android/i.test(t)}function Tx(t=ut()){return/blackberry/i.test(t)}function Ix(t=ut()){return/webos/i.test(t)}function Bf(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $S(t=ut()){var e;return Bf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HS(){return aT()&&document.documentMode===10}function bx(t=ut()){return Bf(t)||Ex(t)||Ix(t)||Tx(t)||/windows phone/i.test(t)||wx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t,e=[]){let n;switch(t){case"Browser":n=Wg(ut());break;case"Worker":n=`${Wg(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ci}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e={}){return gi(t,"GET","/v2/passwordPolicy",Yo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=6;class KS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:GS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gg(this),this.idTokenSubscription=new Gg(this),this.beforeStateQueue=new qS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=In(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await $s.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mx(this,{idToken:e}),r=await Tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ql(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(Sn(this));const n=e?Nt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(Sn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(Sn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(In(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WS(this),n=new KS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&In(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await $s.create(this,[In(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xo(t){return Nt(t)}class Gg{constructor(e){this.auth=e,this.observer=null,this.addObserver=mT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YS(t){$f=t}function XS(t){return $f.loadJS(t)}function JS(){return $f.gapiScript}function ZS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t,e){const n=Xh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(jl(i,e??{}))return s;Dn(s,"already-initialized")}return n.initialize({options:e})}function tN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(In);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nN(t,e,n){const r=Xo(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Nx(e),{host:o,port:u}=rN(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||sN()}function Nx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rN(t){const e=Nx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Kg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Kg(o)}}}function Kg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return En("not implemented")}_getIdTokenResponse(e){return En("not implemented")}_linkToIdToken(e,n){return En("not implemented")}_getReauthenticationResolver(e){return En("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e){return Uf(t,"POST","/v1/accounts:signInWithIdp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="http://localhost";class ss extends Ax{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Lf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ss(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}buildRequest(){const e={requestUri:iN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends kx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends Jo{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ss._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Jo{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Jo{constructor(){super("twitter.com")}static credential(e,n){return ss._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.TWITTER_SIGN_IN_METHOD="twitter.com";tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t,e){return Uf(t,"POST","/v1/accounts:signUp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tn._fromIdTokenResponse(e,r,s),o=Qg(r);return new Mn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Qg(r);return new Mn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Qg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(t){var e;if(rn(t.app))return Promise.reject(Sn(t));const n=Xo(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Mn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await oN(n,{returnSecureToken:!0}),s=await Mn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends On{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wl(e,n,r,s)}}function Cx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wl._fromErrorAndOperation(t,i,e,r):i})}async function lN(t,e,n=!1){const r=await Vo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mn._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e,n=!1){const{auth:r}=t;if(rn(r.app))return Promise.reject(Sn(r));const s="reauthenticate";try{const i=await Vo(t,Cx(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=zf(i.idToken);te(o,r,"internal-error");const{sub:u}=o;return te(t.uid===u,r,"user-mismatch"),Mn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e,n=!1){if(rn(t.app))return Promise.reject(Sn(t));const r="signIn",s=await Cx(t,r,e),i=await Mn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e){return Uf(t,"POST","/v1/accounts:signInWithCustomToken",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(t,e){if(rn(t.app))return Promise.reject(Sn(t));const n=Xo(t),r=await dN(n,{token:e,returnSecureToken:!0}),s=await Mn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}function fN(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function pN(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}const Gl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=1e3,gN=10;class Px extends Rx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);HS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,gN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Px.type="LOCAL";const yN=Px;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx extends Rx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jx.type="SESSION";const Dx=jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ku(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async h=>h(n.origin,i)),c=await vN(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ku.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const h=Hf("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const _=m;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(_.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return window}function xN(t){dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}async function wN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TN(){return Vx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="firebaseLocalStorageDb",IN=1,Kl="firebaseLocalStorage",Lx="fbase_key";class Zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cu(t,e){return t.transaction([Kl],e?"readwrite":"readonly").objectStore(Kl)}function bN(){const t=indexedDB.deleteDatabase(Mx);return new Zo(t).toPromise()}function Yd(){const t=indexedDB.open(Mx,IN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kl,{keyPath:Lx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kl)?e(r):(r.close(),await bN(),e(await Yd()))})})}async function Yg(t,e,n){const r=Cu(t,!0).put({[Lx]:e,value:n});return new Zo(r).toPromise()}async function SN(t,e){const n=Cu(t,!1).get(e),r=await new Zo(n).toPromise();return r===void 0?null:r.value}function Xg(t,e){const n=Cu(t,!0).delete(e);return new Zo(n).toPromise()}const NN=800,AN=3;class Ox{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>AN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ku._getInstance(TN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wN(),!this.activeServiceWorker)return;this.sender=new _N(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await Yg(e,Gl,"1"),await Xg(e,Gl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>SN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Cu(s,!1).getAll();return new Zo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ox.type="LOCAL";const kN=Ox;new Qo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){return e?In(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends Ax{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RN(t){return cN(t.auth,new qf(t),t.bypassAuthState)}function PN(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),uN(n,new qf(t),t.bypassAuthState)}async function jN(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),lN(n,new qf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RN;case"linkViaPopup":case"linkViaRedirect":return jN;case"reauthViaPopup":case"reauthViaRedirect":return PN;default:Dn(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new Qo(2e3,1e4);class Ds extends Fx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Vn(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DN.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="pendingRedirect",sl=new Map;class MN extends Fx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sl.get(this.auth._key());if(!e){try{const r=await LN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sl.set(this.auth._key(),e)}return this.bypassAuthState||sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LN(t,e){const n=UN(e),r=FN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ON(t,e){sl.set(t._key(),e)}function FN(t){return In(t._redirectPersistence)}function UN(t){return rl(VN,t.config.apiKey,t.name)}async function zN(t,e,n=!1){if(rn(t.app))return Promise.reject(Sn(t));const r=Xo(t),s=CN(r,e),o=await new MN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=10*60*1e3;class $N{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ux(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jg(e))}saveEventToCache(e){this.cachedEventUids.add(Jg(e)),this.lastProcessedEventTime=Date.now()}}function Jg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ux({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ux(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e={}){return gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GN=/^https?/;async function KN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qN(t);for(const n of e)try{if(QN(n))return}catch{}Dn(t,"unauthorized-domain")}function QN(t){const e=Kd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!GN.test(n))return!1;if(WN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Qo(3e4,6e4);function Zg(){const t=dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XN(t){return new Promise((e,n)=>{var r,s,i;function o(){Zg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zg(),n(cn(t,"network-request-failed"))},timeout:YN.get()})}if(!((s=(r=dn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=dn().gapi)===null||i===void 0)&&i.load)o();else{const u=ZS("iframefcb");return dn()[u]=()=>{gapi.load?o():n(cn(t,"network-request-failed"))},XS(`${JS()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw il=null,e})}let il=null;function JN(t){return il=il||XN(t),il}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Qo(5e3,15e3),eA="__/auth/iframe",tA="emulator/auth/iframe",nA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sA(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ff(e,tA):`https://${t.config.authDomain}/${eA}`,r={apiKey:e.apiKey,appName:t.name,v:ci},s=rA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Bo(r).slice(1)}`}async function iA(t){const e=await JN(t),n=dn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:sA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=cn(t,"network-request-failed"),u=dn().setTimeout(()=>{i(o)},ZN.get());function c(){dn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aA=500,lA=600,uA="_blank",cA="http://localhost";class e0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dA(t,e,n,r=aA,s=lA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},oA),{width:r.toString(),height:s.toString(),top:i,left:o}),h=ut().toLowerCase();n&&(u=xx(h)?uA:n),vx(h)&&(e=e||cA,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[N,R])=>`${_}${N}=${R},`,"");if($S(h)&&u!=="_self")return hA(e||"",u),new e0(null);const m=window.open(e||"",u,p);te(m,t,"popup-blocked");try{m.focus()}catch{}return new e0(m)}function hA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="__/auth/handler",pA="emulator/auth/handler",mA=encodeURIComponent("fac");async function t0(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ci,eventId:s};if(e instanceof kx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(i||{}))o[p]=m}if(e instanceof Jo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),h=c?`#${mA}=${encodeURIComponent(c)}`:"";return`${gA(t)}?${Bo(u).slice(1)}${h}`}function gA({config:t}){return t.emulator?Ff(t,pA):`https://${t.authDomain}/${fA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="webStorageSupport";class yA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dx,this._completeRedirectFn=zN,this._overrideRedirectResult=ON}async _openPopup(e,n,r,s){var i;Vn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await t0(e,n,r,Kd(),s);return dA(e,o,Hf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await t0(e,n,r,Kd(),s);return xN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Vn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iA(e),r=new $N(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cc,{type:Cc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Cc];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bx()||_x()||Bf()}}const vA=yA;var n0="@firebase/auth",r0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wA(t){Zs(new Zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sx(t)},h=new QS(r,s,i,c);return tN(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zs(new Zr("auth-internal",e=>{const n=Xo(e.getProvider("auth").getImmediate());return(r=>new _A(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(n0,r0,xA(t)),mr(n0,r0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=5*60,TA=kv("authIdTokenMaxAge")||EA;let s0=null;const IA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TA)return;const s=n==null?void 0:n.token;s0!==s&&(s0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bA(t=jv()){const e=Xh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eN(t,{popupRedirectResolver:vA,persistence:[kN,yN,Dx]}),r=kv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=IA(i.toString());pN(n,o,()=>o(n.currentUser)),fN(n,u=>o(u))}}const s=Nv("auth");return s&&nN(n,`http://${s}`),n}function SA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}YS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",SA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wA("Browser");const NA={apiKey:"AIzaSyCUSBzbKBE2JRiiHZAwtkvJzy72RgrRoEU",authDomain:"smen-italcar.firebaseapp.com",projectId:"smen-italcar",storageBucket:"smen-italcar.firebasestorage.app",messagingSenderId:"188301662792",appId:"1:188301662792:web:1eca55e7e122582a8ed67d"},zx=Pv(NA),Bx=dS(zx),i0=bA(zx);var AA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CA=(t,e)=>{const n=Z.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:u,...c},h)=>Z.createElement("svg",{ref:h,...AA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${kA(t)}`,...c},[...e.map(([p,m])=>Z.createElement(p,m)),...(Array.isArray(u)?u:[u])||[]]));return n.displayName=`${t}`,n};var re=CA;const ol=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),RA=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ql=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ru=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),PA=re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Yl=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Xd=re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Jd=re("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),lo=re("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),jA=re("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Zd=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),DA=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),o0=re("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),VA=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),a0=re("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),MA=re("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),LA=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),l0=re("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),OA=re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),FA=re("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),UA=re("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),u0=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),zA=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),$x=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Hx=re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),c0=re("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),BA=re("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),$A=re("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),qx=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),d0=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),HA=re("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Rc=re("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),al=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Wx=re("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),qA=re("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),WA=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Pc=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Gx=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),GA=re("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),KA=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),QA=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),eh=re("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),jc=re("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),qs=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xl=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),YA="https://italcar.tn/wp-content/uploads/2020/12/logo-italcar.png",hn=t=>cS(Bx,t),ea=({size:t="h-10"})=>l.jsx("img",{src:YA,alt:"ITALCAR Logo",className:`${t} object-contain`,onError:e=>{e.target.onerror=null,e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),XA=()=>l.jsx("div",{className:"hidden items-center justify-center bg-blue-900 text-white font-black p-2 rounded text-xs",children:"ITALCAR"}),Kx=({darkText:t=!1})=>{const[e,n]=Z.useState(new Date),[r,s]=Z.useState({temp:"--",code:0});Z.useEffect(()=>{const u=setInterval(()=>n(new Date),1e3),c=async()=>{try{const m=await(await fetch("https://api.open-meteo.com/v1/forecast?latitude=36.8065&longitude=10.1815&current_weather=true")).json();m.current_weather&&s({temp:m.current_weather.temperature,code:m.current_weather.weathercode})}catch{console.log("Weather fetch failed")}};c();const h=setInterval(c,6e5);return()=>{clearInterval(u),clearInterval(h)}},[]);const i=t?"text-slate-800":"text-white",o=t?"text-slate-500":"text-white/80";return l.jsxs("div",{className:`flex items-center gap-8 ${i}`,children:[l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsxs("div",{className:"text-3xl font-black leading-none flex items-center gap-2",children:[r.temp," ",l.jsx(Wx,{size:20,className:"text-orange-500"})]}),l.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${o}`,children:"Tunis"})]}),l.jsx("div",{className:`h-10 w-px ${t?"bg-slate-300":"bg-white/30"}`}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("div",{className:"text-3xl font-black leading-none",children:e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),l.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${o}`,children:e.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"short"})})]})]})},JA=({onLogin:t})=>{const[e,n]=Z.useState(""),[r,s]=Z.useState(""),[i,o]=Z.useState(""),[u,c]=Z.useState(!1),h=async p=>{if(p.preventDefault(),c(!0),o(""),e==="RMI"&&r==="RMI2026$"){setTimeout(()=>{t({username:"RMI",role:"ADMIN"}),c(!1)},800);return}try{const m=Nu(hn("users"),wS("username","==",e)),_=await lx(m);if(_.empty){if(e==="admin"&&r==="0000"){t({username:"Admin Test",role:"ADMIN"});return}o("Utilisateur inconnu"),c(!1);return}let N=null;_.forEach(R=>{const j=R.data();j.password===r&&(N={...j,id:R.id})}),N?t(N):o("Mot de passe incorrect")}catch(m){console.error(m),o("Erreur de connexion base de donnes")}c(!1)};return l.jsxs("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 z-0",children:l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-slate-200 skew-x-12 opacity-50"})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-10 w-full max-w-md z-10 border-t-4 border-blue-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsxs("div",{className:"flex justify-center mb-4",children:[l.jsx(ea,{size:"h-16"}),l.jsx(XA,{})]}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Portail nergie"}),l.jsx("p",{className:"text-slate-400 text-sm mt-1 font-medium",children:"Systme de Management de l'nergie"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Identifiant"}),l.jsxs("div",{className:"relative",children:[l.jsx(KA,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"Nom d'utilisateur",value:e,onChange:p=>n(p.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx(FA,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:border-blue-900 focus:ring-1 focus:ring-blue-900 font-bold text-slate-700 outline-none transition-all",placeholder:"",value:r,onChange:p=>s(p.target.value)})]})]}),i&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center font-bold flex items-center justify-center border border-red-100",children:[l.jsx(RA,{size:16,className:"mr-2"}),i]}),l.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-900 hover:bg-blue-800 text-white font-bold py-3.5 rounded-lg shadow-lg shadow-blue-900/20 transition-all uppercase tracking-wide text-sm",children:u?"Connexion...":"Se Connecter"})]}),l.jsx("div",{className:"mt-8 text-center text-[10px] text-slate-400 font-mono",children:"v8.2.0  ITALCAR SA"})]})]})},ZA=({onBack:t,userRole:e})=>{const[n,r]=Z.useState(1),[s,i]=Z.useState([]),[o,u]=Z.useState(!1),[c,h]=Z.useState(!1),[p,m]=Z.useState(null),[_,N]=Z.useState(!1);Z.useEffect(()=>{const P=Nu(hn("steg_logs"),rx("id","desc")),J=Vf(P,se=>{i(se.docs.map(be=>({...be.data(),docId:be.id})))});return()=>J()},[]);const R=[{id:1,name:"MT 1 - Mgrine",code:"MEG-001",type:"MT",icon:a0},{id:2,name:"MT 2 - El Khadhra",code:"ELK-002",type:"MT",icon:Xd},{id:3,name:"MT 3 - Naassen",code:"NAS-003",type:"MT",icon:Xd},{id:4,name:"BT 1 - Showroom Lac",code:"SHR-001",type:"BT_PV",icon:Rc},{id:5,name:"BT 2 - Azur City",code:"AZU-002",type:"BT",icon:Rc},{id:6,name:"BT 3 - Rue de Carthage",code:"CAR-003",type:"BT",icon:Rc}],[j,F]=Z.useState({unitPriceKwh:.291,powerUnitPrice:5,unitPriceKwhBT:.391,fixedFeesBT:115.5,servicesBT:0,fteGazBT:0,vatRate:19,rtt:3.5,municipalTaxRate:.01,taxCLRate:.005,taxFTERate:.005,powerOverrunPenalty:25}),[I,w]=Z.useState({1:{subscribedPower:250,emptyLosses:1300},2:{subscribedPower:70,emptyLosses:670},3:{subscribedPower:30,emptyLosses:160},4:{subscribedPower:30,emptyLosses:0},5:{subscribedPower:20,emptyLosses:0},6:{subscribedPower:15,emptyLosses:0}}),[b,M]=Z.useState(!1),[L,q]=Z.useState({date:new Date().toISOString().slice(0,7),lastIndex:"",newIndex:"",lastIndexPv:"",newIndexPv:"",previousBalance:"",cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:""}),v=P=>P==null?void 0:P.toLocaleString("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:3}),y=P=>P==null?void 0:P.toLocaleString("fr-TN",{maximumFractionDigits:2}),x=P=>P===""||P===void 0||P===null?"":P.toString().replace(/[^0-9.-]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g," "),T=P=>P.replace(/\s/g,"");Z.useEffect(()=>{const P=s.filter(J=>J.siteId===n).sort((J,se)=>se.id-J.id);if(P.length>0){const J=P[0],se=R.find(be=>be.id===n).type;q(be=>({...be,lastIndex:J.newIndex,...se==="BT_PV"?{lastIndexPv:J.newIndexPv,previousBalance:J.newCarryOver}:{},manualLastIndex:!1}))}else q(J=>({...J,lastIndex:"",lastIndexPv:"",previousBalance:""}))},[n,s]);const S=(P,J)=>{const se=["lastIndex","newIndex","lastIndexPv","newIndexPv","previousBalance","maxPower","reactiveCons"].includes(P)?T(J):J;q(be=>({...be,[P]:se}))},A=(P,J)=>F(se=>({...se,[P]:J})),E=(P,J)=>w(se=>({...se,[n]:{...se[n],[P]:J}})),Oe=()=>{const P=R.find(ye=>ye.id===n),J=I[n],se=j,be=parseFloat(L.newIndex)||0,Fe=parseFloat(L.lastIndex)||0,Fn=Math.max(0,be-Fe),ta=parseFloat(L.lateFees)||0,Nr=parseFloat(L.relanceFees)||0,Ar=parseFloat(L.adjustment)||0,us=parseFloat(se.rtt)||0,kr=(parseFloat(se.vatRate)||0)/100;if(P.type.startsWith("BT")){let ye=Fn,pn=0,Un=0,zn=0,mn=0,Qt=0;if(P.type==="BT_PV"){const hs=parseFloat(L.newIndexPv)||0,Zt=parseFloat(L.lastIndexPv)||0;zn=parseFloat(L.previousBalance)||0,Un=Math.max(0,hs-Zt),mn=Fn-Un,Qt=mn+zn,Qt>0?(ye=Qt,pn=0):(ye=0,pn=Qt)}const cs=parseFloat(se.unitPriceKwhBT)||.391,Cr=parseFloat(se.fixedFeesBT)||115.5,ds=parseFloat(se.servicesBT)||0,Rr=ye*cs,Yt=Cr+ds,Xt=Rr+Yt,Ct=Xt*(1+kr),Te=ye*(parseFloat(se.taxCLRate)||.005),Pe=ye*(parseFloat(se.taxFTERate)||.005),Jt=parseFloat(se.fteGazBT)||0,Bn=Ct+Te+us+Pe+Jt,Pr=Bn+Ar+ta+Nr;return{type:P.type,consumptionGrid:Fn,productionPv:Un,currentMonthBalance:mn,prevBalance:zn,totalBalance:Qt,billedKwh:ye,newCarryOver:pn,consoAmountHT:Rr,fixedAmountHT:Yt,totalTTC:Ct,contributionCL:Te,fteElec:Pe,fteGaz:Jt,netToPay:Pr,totalFinalTTC:Bn,totalHT:Xt}}else{const ye=parseFloat(L.cosPhi)||1,pn=parseFloat(L.maxPower)||0,Un=parseFloat(L.reactiveCons)||0,zn=parseFloat(se.unitPriceKwh)||.291,mn=parseFloat(J.subscribedPower)||0,Qt=parseFloat(se.powerUnitPrice)||5,cs=parseFloat(se.municipalTaxRate)||.01,Cr=parseFloat(J.emptyLosses)||0,ds=parseFloat(se.powerOverrunPenalty)||25,Rr=Fn*.02,Yt=Fn+Cr+Rr,Xt=Yt*zn;let Ct=0,Te="none";if(ye>=.91&&ye<=1)Ct=-(Math.round((ye-.9)*100)*.005),Te="bonus";else if(ye>=.8&&ye<=.9)Ct=0,Te="neutral";else{Te="penalty";let jr=0;ye<.8&&(jr+=Math.round((.8-Math.max(ye,.75))*100)*.005),ye<.75&&(jr+=Math.round((.75-Math.max(ye,.7))*100)*.01),ye<.7&&(jr+=Math.round((.7-Math.max(ye,.6))*100)*.015),ye<.6&&(jr+=Math.round((.6-ye)*100)*.02),Ct=jr}const Pe=Xt*Ct,Jt=Math.max(0,pn-mn),Bn=Jt*ds,Pr=Xt+Pe,hs=Pr*(1+kr),Zt=mn*Qt,yi=Zt+ta+Nr+Bn,vi=yi*(1+kr),fs=Yt*cs,Pu=hs+vi+us+fs+Ar;return{type:"MT",energyRecorded:Fn,loadLosses:Rr,billedKwh:Yt,baseEnergyAmountHT:Xt,adjustmentRate:Ct,adjustmentType:Te,cosPhiAdjustmentAmount:Pe,total1_TTC:hs,total1_HT:Pr,powerPremium:Zt,total2_HT:yi,total2_TTC:vi,municipalTax:fs,netToPay:Pu,powerOverrun:Jt,powerOverrunAmount:Bn,reactiveCons:Un,subPower:mn}}},wt=async P=>{P.preventDefault();const J=R.find(Fe=>Fe.id===n),se=Oe(),be={id:Date.now(),recordDate:L.date,timestamp:new Date().toLocaleTimeString("fr-FR"),siteId:n,siteName:J.name,siteType:J.type,...L,...se};try{await $l(hn("steg_logs"),be),m({msg:"Relev enregistr dans le Cloud",type:"success"}),q(Fe=>({...Fe,lastIndex:L.newIndex,newIndex:"",...J.type==="BT_PV"?{lastIndexPv:L.newIndexPv,newIndexPv:"",previousBalance:se.newCarryOver}:{},cosPhi:"",reactiveCons:"",maxPower:"",lateFees:"",relanceFees:"",adjustment:"",manualLastIndex:!1}))}catch{m({msg:"Erreur sauvegarde",type:"error"})}setTimeout(()=>m(null),3e3)},C=Oe(),$=s.filter(P=>P.siteId===n),D=R.find(P=>P.id===n),O=D.type.startsWith("BT"),G=D.type==="MT",z=C,Y=D.icon;return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-2 md:mb-0",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:l.jsx(Ru,{size:20})}),l.jsx("div",{className:`p-2 rounded-lg ${O?"bg-red-50 text-red-600":"bg-blue-50 text-blue-900"}`,children:l.jsx(Y,{size:24})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-black text-slate-800 tracking-tight leading-none uppercase",children:["Facturation ",D.name]}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-500 mt-1",children:[l.jsx("span",{className:`px-2 py-0.5 rounded font-bold uppercase tracking-wider text-[9px] ${O?"bg-red-600 text-white":"bg-blue-900 text-white"}`,children:O?"BASSE TENSION":"MOYENNE TENSION"}),l.jsxs("span",{className:"flex items-center",children:[l.jsx($x,{size:10,className:"mr-1"})," ",D.code]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(Kx,{darkText:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[l.jsx(Yl,{size:16,className:"mr-2"})," Guide"]}),G&&l.jsxs("button",{onClick:()=>u(!0),className:"flex items-center bg-blue-50 hover:bg-blue-100 px-3 py-2 rounded-lg text-xs font-bold text-blue-600 transition-colors border border-blue-100",children:[l.jsx(l0,{size:16,className:"mr-2"})," Cos "]})]})]})]})}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-4xl w-full shadow-2xl relative overflow-hidden h-[80vh] flex flex-col",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[l.jsx(Yl,{className:"mr-3 text-blue-900",size:28})," Guide de Collecte"]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Procdures physiques pour les relevs d'index"})]}),l.jsx("button",{onClick:()=>h(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:l.jsx(qs,{size:20,className:"text-slate-600"})})]}),l.jsxs("div",{className:"overflow-y-auto flex-1 space-y-8 pr-2",children:[l.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200",children:[l.jsxs("h4",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[l.jsx(a0,{className:"mr-2"})," Compteurs Moyenne Tension (MT)"]}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Mgrine, El Khadhra, Naassen."}),l.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-900",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Procdure de Relev"}),l.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed text-justify",children:["Pour la lecture des donnes du compteur, Appuyer brivement sur le bouton poussoir suprieur (Disp.) pour faire apparatre le contrle display puis Appuyer brivement une seconde fois, l'indication ST-DATA s'affiche.",l.jsx("br",{}),l.jsx("br",{}),"Ensuite, Appuyer et maintenir la pression, jusqu' l'apparition du premier affichage (ncompteur).",l.jsx("br",{}),l.jsx("br",{}),"Puis, une brve impulsion sur ce mme bouton fait avancer d'un pas le dfilement des index. A la fin de la liste, END s'affiche."]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-2",children:"Codes OBIS  Relever"}),l.jsxs("ul",{className:"text-xs text-slate-500 space-y-1 font-mono",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"1.8.0"})," : Cumul nergie Active (kWh) [Puissance]"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Ractif"})," : (Index Energie Ractive)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Cos Phi"})," : Relever le facteur de puissance affich"]}),l.jsx("li",{className:"text-slate-400 italic",children:"(Pas de relev Soir/Nuit ni Pointe requis)"})]})]})]})]}),l.jsxs("div",{className:"bg-orange-50 p-6 rounded-xl border border-orange-200",children:[l.jsxs("h4",{className:"text-lg font-bold text-orange-800 mb-4 flex items-center",children:[l.jsx(al,{className:"mr-2"})," Photovoltaque & BT"]}),l.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Concerne : Showroom Lac (BT+PV)."}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-100",children:[l.jsx("h5",{className:"font-bold text-slate-800 mb-1",children:"Compteur STEG Bidirectionnel"}),l.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Ce compteur affiche deux sens de flux :"}),l.jsxs("ul",{className:"text-xs text-slate-500 list-disc pl-5",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Code 1.8.0"})," : Consommation prise du rseau (Import)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Code 2.8.0"})," : Surplus inject dans le rseau (Export)."]})]})]})})]})]})]})}),o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",onClick:()=>u(!1),children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl max-w-3xl w-full shadow-2xl relative overflow-hidden",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-start mb-8",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center",children:[l.jsx(l0,{className:"mr-3 text-blue-600",size:28})," Comprendre le Cos "]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Impact sur la facturation et l'efficacit nergtique"})]}),l.jsx("button",{onClick:()=>u(!1),className:"bg-slate-100 hover:bg-slate-200 p-2 rounded-full",children:l.jsx(qs,{size:20,className:"text-slate-600"})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider px-1",children:[l.jsx("span",{className:"text-red-600",children:"Pnalit"}),l.jsx("span",{className:"text-slate-500",children:"Neutre"}),l.jsx("span",{className:"text-emerald-600",children:"Bonus"})]}),l.jsxs("div",{className:"h-12 w-full rounded-xl flex overflow-hidden shadow-inner border border-slate-200 relative",children:[l.jsx("div",{className:"w-[40%] bg-red-100 flex items-center justify-center text-red-700 font-bold text-xs border-r border-white",title:"< 0.8",children:"< 0.80"}),l.jsx("div",{className:"w-[30%] bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-xs border-r border-white",title:"0.8 - 0.9",children:"0.8 - 0.90"}),l.jsx("div",{className:"w-[30%] bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-xs",title:"> 0.9",children:"> 0.90"})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1 font-mono",children:[l.jsx("span",{children:"0.50"}),l.jsx("span",{children:"0.80"}),l.jsx("span",{children:"0.90"}),l.jsx("span",{children:"1.00"})]})]}),l.jsx("div",{className:"text-sm text-slate-600 bg-blue-50 p-4 rounded-xl border border-blue-100",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Note :"})," Le Cosinus Phi mesure l'efficacit de votre installation. Un mauvais Cos  (infrieur  0.8) entrane une facturation de l'nergie ractive par la STEG. Assurez-vous que vos batteries de condensateurs fonctionnent correctement."]})})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[l.jsx("div",{className:"grid grid-cols-3 gap-2",children:R.map(P=>l.jsxs("button",{onClick:()=>r(P.id),className:`p-3 rounded-xl border text-xs font-bold transition-all flex flex-col items-center justify-center text-center h-20 group relative overflow-hidden
                            ${n===P.id?P.type.startsWith("BT")?"bg-red-600 text-white shadow-lg border-red-600":"bg-blue-900 text-white shadow-lg border-blue-900":"bg-white text-slate-500 border-slate-200 hover:border-blue-200 hover:bg-slate-50"}`,children:[l.jsx(P.icon,{size:20,className:`mb-1 transition-transform ${n===P.id?"opacity-100":"opacity-60 group-hover:scale-110"}`}),l.jsx("span",{children:P.name})]},P.id))}),l.jsxs("form",{onSubmit:wt,className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 space-y-6 relative overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center",children:[l.jsx(Jd,{className:"mr-2 text-slate-400",size:20})," Priode de Facturation"]}),l.jsx("input",{type:"month",value:L.date,onChange:P=>q({...L,date:P.target.value}),className:"bg-slate-50 border border-slate-200 rounded px-3 py-1.5 font-bold text-slate-700 cursor-pointer focus:ring-2 focus:ring-blue-900 outline-none"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[l.jsx(Xl,{size:12,className:"mr-1"})," Index Actif"]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3 relative",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"flex justify-between text-xs font-bold text-slate-500 mb-1",children:["Ancien Index",e==="ADMIN"&&l.jsx(Hx,{size:12,className:"cursor-pointer text-slate-400 hover:text-blue-900",onClick:()=>N(!_)})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:x(L.lastIndex),onChange:P=>S("lastIndex",P.target.value),readOnly:e!=="ADMIN"&&!_,className:`w-full border rounded p-2 text-sm font-mono ${e!=="ADMIN"&&!_?"bg-slate-200 text-slate-500":"bg-white border-orange-300"}`}),e!=="ADMIN"&&!_&&l.jsx(u0,{size:12,className:"absolute right-3 top-3 text-slate-400"})]}),_&&l.jsxs("p",{className:"text-[10px] text-orange-600 mt-1 flex items-center",children:[l.jsx(Ql,{size:10,className:"mr-1"})," Modification manuelle active"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-blue-900 mb-1 block",children:"Nouvel Index *"}),l.jsx("input",{type:"text",required:!0,value:x(L.newIndex),onChange:P=>S("newIndex",P.target.value),className:"w-full text-lg border-2 border-blue-200 rounded p-2 font-mono focus:border-blue-900 outline-none"})]}),l.jsxs("div",{className:"text-right text-xs font-bold text-blue-600",children:["Conso: ",y(C.consumptionGrid||C.energyRecorded)," kWh"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center",children:[O?l.jsx(al,{size:12,className:"mr-1"}):l.jsx(d0,{size:12,className:"mr-1"}),O?"Photovoltaque & Solde":"Paramtres Techniques"]}),D.type==="BT_PV"?l.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Ancien PV"}),l.jsx("input",{type:"text",value:x(L.lastIndexPv),onChange:P=>S("lastIndexPv",P.target.value),className:"w-full text-xs p-1 border rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-orange-800",children:"Nouveau PV"}),l.jsx("input",{type:"text",value:x(L.newIndexPv),onChange:P=>S("newIndexPv",P.target.value),className:"w-full text-xs p-1 border rounded font-mono"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-600",children:"Solde N-1"}),l.jsx("input",{type:"text",value:x(L.previousBalance),onChange:P=>S("previousBalance",P.target.value),className:"w-full text-sm p-2 border rounded"})]})]}):D.type==="MT"?l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Cos  *"}),l.jsx("input",{type:"number",step:"0.01",required:!0,value:L.cosPhi,onChange:P=>S("cosPhi",P.target.value),className:"w-full border p-2 rounded text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"P. Max (kVA) *"}),l.jsx("input",{type:"number",required:!0,value:L.maxPower,onChange:P=>S("maxPower",P.target.value),className:"w-full border p-2 rounded text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500",children:"Ractif (kVarh)"}),l.jsx("input",{type:"number",value:L.reactiveCons,onChange:P=>S("reactiveCons",P.target.value),className:"w-full border p-2 rounded text-sm"})]})]}):l.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 text-xs text-slate-500 text-center italic",children:"Site BT Standard - Paramtres fixes appliqus."})]})]}),l.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[l.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Frais & Ajustements"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Retard",value:L.lateFees,onChange:P=>S("lateFees",P.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Relance",value:L.relanceFees,onChange:P=>S("relanceFees",P.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-2 top-2 text-slate-400 text-xs",children:"DT"}),l.jsx("input",{type:"number",placeholder:"Ajustement",value:L.adjustment,onChange:P=>S("adjustment",P.target.value),className:"w-full pl-8 p-2 border rounded text-sm"})]})]})]}),l.jsxs("button",{type:"submit",className:`w-full text-white font-bold py-3 rounded-xl shadow-lg transition-transform active:scale-95 flex items-center justify-center ${O?"bg-red-600 hover:bg-red-700":"bg-blue-900 hover:bg-blue-800"}`,children:[l.jsx(qx,{size:18,className:"mr-2"})," Valider & Sauvegarder"]})]}),l.jsxs("div",{className:"bg-slate-100 rounded-xl border border-slate-200 overflow-hidden",children:[l.jsxs("button",{onClick:()=>M(!b),className:"w-full px-6 py-3 flex justify-between items-center text-xs font-bold text-slate-500 uppercase hover:bg-slate-200",children:[l.jsxs("span",{children:[l.jsx(d0,{size:14,className:"inline mr-2"})," Configuration Avance (",O?"BT":"MT",")"]}),b?l.jsx(GA,{size:14,className:"text-red-500"}):l.jsx(u0,{size:14})]}),b&&l.jsx("div",{className:"p-4 bg-white border-t border-slate-200 animate-in slide-in-from-top-2",children:O?l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-xs",children:[l.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-red-800 uppercase tracking-widest border-b pb-1",children:"Paramtres Basse Tension"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix kWh BT"}),l.jsx("input",{type:"number",value:j.unitPriceKwhBT,onChange:P=>A("unitPriceKwhBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Redevance Fixe"}),l.jsx("input",{type:"number",value:j.fixedFeesBT,onChange:P=>A("fixedFeesBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Services"}),l.jsx("input",{type:"number",value:j.servicesBT,onChange:P=>A("servicesBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Taxe CL (Taux)"}),l.jsx("input",{type:"number",value:j.taxCLRate,onChange:P=>A("taxCLRate",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Elec (Taux)"}),l.jsx("input",{type:"number",value:j.taxFTERate,onChange:P=>A("taxFTERate",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"FTE Gaz (Montant)"}),l.jsx("input",{type:"number",value:j.fteGazBT,onChange:P=>A("fteGazBT",P.target.value),className:"border p-1 w-full rounded font-mono"})]})]}):l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[l.jsx("div",{className:"col-span-full mb-1 text-[10px] font-black text-blue-900 uppercase tracking-widest border-b pb-1",children:"Paramtres Moyenne Tension"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"P. Souscrite (kVA)"}),l.jsx("input",{type:"number",value:I[n].subscribedPower,onChange:P=>E("subscribedPower",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix nergie (DT/kWh)"}),l.jsx("input",{type:"number",value:j.unitPriceKwh,onChange:P=>A("unitPriceKwh",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Prix Puissance (DT/kVA)"}),l.jsx("input",{type:"number",value:j.powerUnitPrice,onChange:P=>A("powerUnitPrice",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"TVA (%)"}),l.jsx("input",{type:"number",value:j.vatRate,onChange:P=>A("vatRate",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Pnalit Dpassement"}),l.jsx("input",{type:"number",value:j.powerOverrunPenalty,onChange:P=>A("powerOverrunPenalty",P.target.value),className:"border p-1 w-full rounded font-mono bg-red-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"Pertes  Vide (kWh)"}),l.jsx("input",{type:"number",value:I[n].emptyLosses,onChange:P=>E("emptyLosses",P.target.value),className:"border p-1 w-full rounded font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-400 mb-1",children:"RTT (DT)"}),l.jsx("input",{type:"number",value:j.rtt,onChange:P=>A("rtt",P.target.value),className:"border p-1 w-full rounded font-mono"})]})]})})]})]}),l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-lg border transition-all duration-300 relative overflow-hidden ${O?"border-red-200 ring-2 ring-red-50":"border-blue-200 ring-2 ring-blue-50"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:O?l.jsx(al,{size:100}):l.jsx(Xl,{size:100})}),l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-100 pb-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-bold uppercase ${O?"text-red-600":"text-blue-900"}`,children:O?"FACTURE BT":"FACTURE MT"}),l.jsx("p",{className:"text-xs text-slate-400",children:D.name})]}),l.jsx("div",{className:"text-right",children:l.jsx("p",{className:"text-xs text-slate-400 font-mono",children:L.date})})]}),l.jsxs("div",{className:"space-y-3 text-sm",children:[D.type==="BT_PV"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-slate-600",children:[l.jsx("span",{children:"Conso Rseau"}),l.jsxs("span",{className:"font-mono",children:[y(z.consumptionGrid)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-orange-600",children:[l.jsx("span",{children:"Prod Photovoltaque"}),l.jsxs("span",{className:"font-mono",children:["-",y(z.productionPv)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-slate-500 text-xs bg-slate-50 p-1 rounded",children:[l.jsx("span",{children:"Solde N-1"}),l.jsxs("span",{className:"font-mono",children:[y(z.prevBalance)," kWh"]})]}),l.jsxs("div",{className:`flex justify-between font-bold p-2 rounded ${z.totalBalance>0?"bg-red-50 text-red-700":"bg-emerald-50 text-emerald-700"}`,children:[l.jsx("span",{children:"Solde Final"}),l.jsxs("span",{children:[y(z.totalBalance)," kWh"]})]}),z.totalBalance<=0?l.jsx("div",{className:"text-xs text-center text-emerald-600 italic",children:"Crdit report au mois prochain"}):l.jsxs("div",{className:"flex justify-between text-slate-800 font-bold border-t pt-2",children:[l.jsxs("span",{children:["Factur (",y(z.billedKwh)," kWh)"]}),l.jsx("span",{children:v(z.consoAmountHT)})]})]}),l.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Redevances Fixes"}),l.jsx("span",{children:v(z.fixedAmountHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (TVA, CL, FTE)"}),l.jsx("span",{children:v(z.totalFinalTTC-(z.consoAmountHT+z.fixedAmountHT))})]})]})]}):O?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:l.jsxs("div",{className:"flex justify-between font-bold text-slate-700",children:[l.jsxs("span",{children:["Conso (",y(z.consumptionGrid)," kWh)"]}),l.jsx("span",{children:v(z.consoAmountHT)})]})}),l.jsxs("div",{className:"space-y-1 text-xs text-slate-500 pt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Redevances (Fixe + Serv)"}),l.jsx("span",{children:v(z.fixedAmountHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (TVA,CL,FTE)"}),l.jsx("span",{children:v(z.totalFinalTTC-z.totalHT)})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed",children:[l.jsxs("div",{className:"flex justify-between text-slate-600",children:[l.jsx("span",{children:"nergie Enregistre"}),l.jsxs("span",{className:"font-mono",children:[y(z.energyRecorded)," kWh"]})]}),l.jsxs("div",{className:"flex justify-between text-slate-500 text-xs pl-2",children:[l.jsx("span",{children:"+ Pertes"}),l.jsx("span",{className:"font-mono",children:y(z.billedKwh-z.energyRecorded)})]}),l.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mt-1 bg-slate-50 px-2 py-1 rounded",children:[l.jsx("span",{children:"Factur"}),l.jsx("span",{children:v(z.baseEnergyAmountHT)})]})]}),l.jsxs("div",{className:"pb-3 border-b border-slate-50 border-dashed space-y-1 pt-2",children:[l.jsxs("div",{className:`flex justify-between text-xs ${z.cosPhiAdjustmentAmount>0?"text-red-600":"text-emerald-600"}`,children:[l.jsx("span",{children:"Ajustement Cos "}),l.jsx("span",{children:v(z.cosPhiAdjustmentAmount)})]}),l.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[l.jsxs("span",{children:["Prime Fixe (",z.subPower,"kVA x ",y(j.powerUnitPrice),")"]}),l.jsx("span",{children:v(z.powerPremium)})]}),z.powerOverrunAmount>0&&l.jsxs("div",{className:"flex justify-between text-xs text-red-600 font-bold bg-red-50 p-1 rounded",children:[l.jsxs("span",{children:["Pnalit Puissance (",y(z.powerOverrun)," kVA x ",j.powerOverrunPenalty,")"]}),l.jsx("span",{children:v(z.powerOverrunAmount)})]})]}),l.jsxs("div",{className:"text-xs text-slate-500 pt-2 space-y-1 border-t mt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total nergie TTC"}),l.jsx("span",{children:v(z.total1_TTC)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Fixe TTC"}),l.jsx("span",{children:v(z.total2_TTC)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Taxes (RTT+Muni)"}),l.jsx("span",{children:v(j.rtt+z.municipalTax)})]})]})]}),(parseFloat(L.lateFees)>0||parseFloat(L.relanceFees)>0||parseFloat(L.adjustment)!==0)&&l.jsxs("div",{className:"pt-2 text-xs text-orange-600 border-t mt-2 flex justify-between font-bold",children:[l.jsx("span",{children:"Frais & Ajustements"}),l.jsx("span",{children:v((parseFloat(L.lateFees)||0)+(parseFloat(L.relanceFees)||0)+(parseFloat(L.adjustment)||0))})]})]}),l.jsx("div",{className:"mt-6 border-t-2 border-slate-800 pt-4",children:l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("span",{className:"text-lg font-black text-slate-900 uppercase",children:"Net  Payer"}),l.jsx("span",{className:`text-3xl font-black font-mono tracking-tight ${O?"text-red-700":"text-blue-900"}`,children:v(z.netToPay)})]})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 h-[400px] flex flex-col",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center",children:[l.jsx(Zd,{size:12,className:"mr-1"})," Historique Cloud"]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:$.map(P=>l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 text-xs hover:bg-blue-50 transition-colors",children:[l.jsxs("div",{className:"flex justify-between font-bold text-slate-700 mb-1",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(Jd,{size:12,className:"mr-1"})," ",P.recordDate]}),l.jsx("span",{className:"text-blue-600",children:v(P.netToPay)})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[10px] text-slate-500 mt-2 border-t pt-2 border-slate-200",children:[l.jsxs("div",{children:["Conso: ",l.jsx("span",{className:"font-mono text-slate-700",children:y(P.type==="MT"?P.energyRecorded:P.consumptionGrid)})," kWh"]}),l.jsx("div",{children:P.type==="MT"?`P.Max: ${P.maxPower} kVA`:P.type==="BT_PV"?`PV: ${y(P.productionPv)}`:"Standard"}),P.type==="MT"&&l.jsxs("div",{children:["Cos : ",l.jsx("span",{className:P.cosPhi<.8?"text-red-500 font-bold":"text-emerald-600",children:P.cosPhi})]}),P.type==="MT"&&P.reactiveCons>0&&l.jsxs("div",{children:["Ractif: ",P.reactiveCons]})]})]},P.docId))})]})]})]}),p&&l.jsx("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl",children:p.msg})]})},ek=({onBack:t,userRole:e})=>{const[n,r]=Z.useState(1),[s,i]=Z.useState([]),[o,u]=Z.useState(null),[c,h]=Z.useState(!1),[p,m]=Z.useState(null),[_,N]=Z.useState(w(new Date)),[R,j]=Z.useState(!1),[F,I]=Z.useState({elecPrice:.291,offLoadFactor:.3});function w(C){C=new Date(Date.UTC(C.getFullYear(),C.getMonth(),C.getDate())),C.setUTCDate(C.getUTCDate()+4-(C.getUTCDay()||7));var $=new Date(Date.UTC(C.getUTCFullYear(),0,1)),D=Math.ceil(((C-$)/864e5+1)/7);return`${C.getUTCFullYear()}-W${D}`}Z.useEffect(()=>{const C=Nu(hn("air_logs"),rx("id","desc")),$=Vf(C,D=>{i(D.docs.map(O=>({...O.data(),docId:O.id})))});return()=>$()},[]);const b=[{id:1,name:"Compresseur 1",serial:"CAI 827281",model:"Ceccato CSB 30",power:22},{id:2,name:"Compresseur 2",serial:"CAI 808264",model:"Ceccato CSB 30",power:22}],M={oilFilter:2e3,airFilter:2e3,separator:2e3,oil:2e3,general:500},L={oilFilter:"Filtre  Huile",airFilter:"Filtre  Air",separator:"Sparateur",oil:"Huile",general:"Inspection"},q={oilFilter:LA,airFilter:eh,separator:o0,oil:o0,general:VA},[v,y]=Z.useState({1:{lastRun:19960,newRun:"",lastLoad:10500,newLoad:"",description:"",lastMaint:{oilFilter:19960,airFilter:19960,separator:19960,oil:19960,general:19960}},2:{lastRun:18500,newRun:"",lastLoad:9200,newLoad:"",description:"",lastMaint:{oilFilter:18500,airFilter:18500,separator:18500,oil:18500,general:18500}}});Z.useEffect(()=>{const C=s.filter($=>$.compName===b.find(D=>D.id===n).name);if(C.length>0){const $=C.find(z=>z.type==="WEEKLY_REPORT"),D=$?$.newRun:v[n].lastRun,O=$?$.newLoad:v[n].lastLoad,G={...v[n].lastMaint};Object.keys(M).forEach(z=>{const Y=C.find(P=>P.type==="MAINTENANCE"&&P.maintType===L[z]);Y&&(G[z]=Y.indexDone)}),y(z=>({...z,[n]:{...z[n],lastRun:D,lastLoad:O,lastMaint:G}}))}},[n,s]);const x=(C,$)=>y(D=>({...D,[n]:{...D[n],[C]:$}})),T=()=>{const C=v[n],$=b.find(se=>se.id===n),D=Math.max(0,(parseFloat(C.newRun)||0)-(parseFloat(C.lastRun)||0)),O=Math.max(0,(parseFloat(C.newLoad)||0)-(parseFloat(C.lastLoad)||0)),G=D>0?O/D*100:0,z=D/47.5*100,Y=O*$.power+(D-O)*$.power*F.offLoadFactor,P=parseFloat(C.newRun)||parseFloat(C.lastRun)||0,J={};return Object.keys(M).forEach(se=>{const Fe=(C.lastMaint[se]||0)+M[se]-P;J[se]={remaining:Fe}}),{runDelta:D,loadDelta:O,loadRate:G,utilRate:z,energyKwh:Y,costHT:Y*F.elecPrice,maintStatus:J}},S=async()=>{const C=T(),$=v[n];if(!$.newRun){m("Index manquant");return}const D={id:Date.now(),type:"WEEKLY_REPORT",week:_,compName:b.find(O=>O.id===n).name,...$,...C};await $l(hn("air_logs"),D),y(O=>({...O,[n]:{...O[n],lastRun:$.newRun,newRun:"",lastLoad:$.newLoad,newLoad:"",description:""}})),m("Enregistr"),setTimeout(()=>m(null),3e3)},A=(C,$)=>{const D=parseFloat(v[n].newRun)||parseFloat(v[n].lastRun),O={...v[n].lastMaint,[C]:D};y(z=>({...z,[n]:{...z[n],lastMaint:O}}));const G={id:Date.now(),type:"MAINTENANCE",date:new Date().toLocaleDateString(),compName:b.find(z=>z.id===n).name,maintType:L[C],indexDone:D,details:$};$l(hn("air_logs"),G),u(null),m("Maintenance valide")},E=T(),Oe=(C,$)=>C<=0?"text-red-600 font-bold":C<$*.2?"text-amber-500 font-bold":"text-emerald-600",wt=(C,$)=>C<=0?"bg-red-600":C<$*.2?"bg-amber-500":"bg-emerald-500";return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-10",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-2 md:mb-0",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full mr-2 transition-colors text-slate-500",children:l.jsx(Ru,{size:20})}),l.jsx(ea,{size:"h-8"}),l.jsx("div",{className:"w-px h-8 bg-slate-200"}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-black text-blue-900 flex items-center",children:[l.jsx(eh,{className:"mr-2",size:20})," Air Comprim"]}),l.jsxs("div",{className:"flex items-center text-xs text-slate-500 mt-1",children:[l.jsx($x,{size:10,className:"mr-1"})," Site Mgrine",l.jsx("span",{className:"mx-2",children:""}),l.jsx(Jd,{size:10,className:"mr-1"})," Semaine ",_.split("-W")[1]," ",_.split("-W")[0]]})]})]}),l.jsx("div",{className:"flex gap-4",children:l.jsxs("button",{onClick:()=>h(!0),className:"flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-lg text-xs font-bold text-slate-600 transition-colors",children:[l.jsx(Yl,{size:16,className:"mr-2"})," Guide & Consignes"]})})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 shadow-2xl relative",onClick:C=>C.stopPropagation(),children:[l.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:""}),l.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center text-lg",children:[l.jsx(Yl,{className:"mr-2 text-blue-900"})," Instructions ES3000"]}),l.jsxs("div",{className:"space-y-6 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[l.jsxs("h4",{className:"font-bold text-blue-900 mb-3 flex items-center",children:[l.jsx(ol,{size:16,className:"mr-2"})," Navigation Contrleur"]}),l.jsxs("ol",{className:"text-sm text-slate-600 space-y-3 list-decimal pl-5",children:[l.jsxs("li",{children:["L'cran affiche par dfaut la ",l.jsx("strong",{children:"Pression de sortie"}),"."]}),l.jsxs("li",{children:["Appuyez sur la flche ",l.jsx("strong",{children:"DROITE"})," (Tab) pour faire dfiler le menu principal."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Heures Totales :"})," Cherchez le symbole  (Horloge pleine). Notez la valeur."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Heures en Charge :"})," Continuez de dfiler jusqu'au symbole  (Piston/clair). C'est le temps de travail effectif."]}),l.jsxs("li",{children:["Pour revenir, appuyez sur ",l.jsx("strong",{children:"C (Cancel)"})," ou attendez 30s."]})]})]}),l.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[l.jsxs("h4",{className:"font-bold text-orange-900 mb-3 flex items-center",children:[l.jsx(Ql,{size:16,className:"mr-2"})," Bonnes Pratiques & Scurit"]}),l.jsxs("ul",{className:"text-sm text-slate-700 space-y-2 list-disc pl-5",children:[l.jsx("li",{children:"Vrifier le niveau d'huile visuel avant chaque dmarrage ou relev (hublot latral)."}),l.jsx("li",{children:"couter s'il y a des bruits anormaux ou des fuites d'air audibles lors de la mise en charge."}),l.jsx("li",{children:"Purger le rservoir d'air quotidiennement si la purge auto est dfaillante."}),l.jsx("li",{children:"Ne jamais ouvrir le capot machine en marche."})]})]})]})]})}),l.jsxs("main",{className:"p-8 max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[l.jsx("div",{className:"flex gap-2",children:b.map(C=>l.jsxs("button",{onClick:()=>r(C.id),className:`flex-1 p-4 rounded-xl border text-left transition-all ${n===C.id?"bg-white border-blue-900 shadow-md ring-1 ring-blue-900":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[l.jsx("div",{className:"font-bold text-slate-700",children:C.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[C.model," - ",C.serial]})]},C.id))}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[l.jsxs("h2",{className:"font-bold flex items-center text-slate-800",children:[l.jsx(qA,{className:"mr-2 text-blue-900"})," Saisie Relev"]}),l.jsxs("div",{className:"flex items-center text-sm bg-slate-100 px-3 py-1 rounded-lg",children:[l.jsx("span",{className:"font-bold text-slate-500 mr-2",children:"Semaine :"}),l.jsx("input",{type:"week",value:_,onChange:C=>N(C.target.value),className:"bg-transparent font-bold text-slate-800 outline-none cursor-pointer"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Heures Marche"}),e==="ADMIN"&&l.jsx("button",{onClick:()=>j(!R),className:"text-[10px] text-blue-900 hover:underline",children:"Modifier Prcdent"})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),l.jsx("input",{type:"number",readOnly:!R,className:`w-full text-xs bg-transparent font-mono ${R?"border rounded bg-white p-1":""}`,value:v[n].lastRun||"",onChange:C=>x("lastRun",C.target.value)})]}),l.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:v[n].newRun||"",onChange:C=>x("newRun",C.target.value)})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block uppercase",children:"Heures Charge"}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Prc:"}),l.jsx("input",{type:"number",readOnly:!R,className:`w-full text-xs bg-transparent font-mono ${R?"border rounded bg-white p-1":""}`,value:v[n].lastLoad||"",onChange:C=>x("lastLoad",C.target.value)})]}),l.jsx("input",{type:"number",className:"w-full border-2 border-slate-200 p-2 rounded-lg text-lg font-mono font-bold focus:border-blue-900 outline-none transition-colors",placeholder:"Nouveau...",value:v[n].newLoad||"",onChange:C=>x("newLoad",C.target.value)})]})]}),l.jsx("textarea",{className:"w-full border p-3 rounded-lg text-sm mb-2 focus:border-blue-900 outline-none",rows:"3",placeholder:"Note / Observation sur l'tat du compresseur...",value:v[n].description,onChange:C=>x("description",C.target.value)})]})]}),l.jsx("div",{className:"lg:col-span-5 space-y-6",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden",children:[l.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center border-b pb-2",children:[l.jsx(ol,{className:"mr-2 text-blue-900"})," Analyse Performance"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-emerald-50 p-3 rounded-xl border border-emerald-100",children:[l.jsx("div",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider mb-1",children:"Taux Charge"}),l.jsxs("div",{className:"font-black text-2xl text-emerald-800",children:[E.loadRate.toFixed(1),"%"]}),l.jsx("div",{className:"w-full bg-emerald-200 h-1.5 rounded-full mt-2 overflow-hidden",children:l.jsx("div",{className:"bg-emerald-600 h-full rounded-full transition-all duration-500",style:{width:`${E.loadRate}%`}})})]}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100",children:[l.jsx("div",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-wider mb-1",children:"Taux Utilisation"}),l.jsxs("div",{className:"font-black text-2xl text-blue-800",children:[E.utilRate.toFixed(1),"%"]}),l.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"Base hebdo 47.5h"})]})]}),l.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg border border-slate-200 mb-6",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Cot lec. Estim"}),l.jsxs("span",{className:"font-mono font-black text-slate-800 text-lg",children:[E.costHT.toFixed(0)," ",l.jsx("span",{className:"text-xs",children:"DT"})]})]}),l.jsxs("button",{onClick:S,className:"w-full bg-blue-900 text-white py-3 rounded-xl font-bold hover:bg-blue-800 shadow-lg transition-all flex items-center justify-center",children:[l.jsx(lo,{size:18,className:"mr-2"})," Valider Relev"]})]})}),l.jsx("div",{className:"lg:col-span-12",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("h3",{className:"font-bold text-slate-700 mb-6 flex items-center",children:[l.jsx(jc,{className:"mr-2 text-red-600"})," Tableau de Maintenance"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4",children:Object.keys(M).map(C=>{const $=q[C],D=E.maintStatus[C].remaining,O=M[C],G=D<O*.2;return l.jsxs("div",{className:`flex flex-col p-4 border rounded-xl hover:shadow-lg transition-all relative overflow-hidden group ${G?"bg-red-50 border-red-200":"bg-slate-50"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:l.jsx($,{size:40})}),l.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:L[C]}),l.jsxs("div",{className:`text-xl font-black mb-2 ${Oe(D,O)}`,children:[D," h"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mb-2 overflow-hidden",children:l.jsx("div",{className:`h-full ${wt(D,O)}`,style:{width:`${Math.min(100,D/O*100)}%`}})}),G&&l.jsxs("div",{className:"text-[10px] text-red-600 font-bold mb-2 flex items-center",children:[l.jsx(Ql,{size:10,className:"mr-1"})," Planifier"]}),l.jsx("button",{onClick:()=>u(C),className:"mt-auto w-full py-2 bg-white border border-slate-200 rounded text-xs font-bold hover:bg-slate-800 hover:text-white transition-colors",children:"Faire Maint."})]},C)})})]})}),l.jsx("div",{className:"lg:col-span-12",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center tracking-wider",children:[l.jsx(OA,{size:16,className:"mr-2"})," Historique Dtaill"]}),l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold uppercase text-xs",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 rounded-l-lg",children:"Date / Semaine"}),l.jsx("th",{className:"p-3",children:"Type"}),l.jsx("th",{className:"p-3",children:"Dtails / Index"}),l.jsx("th",{className:"p-3",children:"Technicien"}),l.jsx("th",{className:"p-3 text-right rounded-r-lg",children:"Cot / Statut"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:s.filter(C=>C.compName===b.find($=>$.id===n).name).sort((C,$)=>$.id-C.id).map(C=>{var $,D,O;return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsx("td",{className:"p-3 font-medium text-slate-700",children:C.type==="MAINTENANCE"?C.date:`Semaine ${(($=C.week)==null?void 0:$.split("-W")[1])||"?"}`}),l.jsx("td",{className:"p-3",children:C.type==="MAINTENANCE"?l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-amber-100 text-amber-700 text-xs font-bold",children:[l.jsx(jc,{size:10,className:"mr-1"})," ",C.maintType]}):l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-700 text-xs font-bold",children:[l.jsx(ol,{size:10,className:"mr-1"})," Relev"]})}),l.jsx("td",{className:"p-3 text-slate-600 text-xs",children:C.type==="MAINTENANCE"?`Effectu  ${C.indexDone} h`:`Marche: ${C.newRun}h | Charge: ${C.newLoad}h`}),l.jsx("td",{className:"p-3 text-slate-500 text-xs font-mono",children:C.type==="MAINTENANCE"?(D=C.details)==null?void 0:D.tech:"-"}),l.jsx("td",{className:"p-3 text-right font-bold",children:C.type==="MAINTENANCE"?l.jsx("span",{className:"text-emerald-600",children:"OK"}):l.jsxs("span",{className:"text-slate-700",children:[(O=C.costHT)==null?void 0:O.toFixed(0)," DT"]})})]},C.docId)})})]}),s.length===0&&l.jsx("div",{className:"text-center p-8 text-slate-400 italic",children:"Aucun historique disponible"})]})]})})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm shadow-2xl transform transition-all scale-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-100 pb-3",children:[l.jsxs("h3",{className:"font-bold text-slate-800 flex items-center",children:[l.jsx(jc,{className:"mr-2 text-red-600",size:20})," Validation Maint."]}),l.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600",children:l.jsx(qs,{size:20})})]}),l.jsxs("div",{className:"mb-4 text-sm text-slate-600 bg-amber-50 p-3 rounded-lg border border-amber-100",children:["Vous validez la maintenance : ",l.jsx("strong",{children:L[o]})]}),l.jsxs("form",{onSubmit:C=>{C.preventDefault();const $=new FormData(C.target);A(o,{date:$.get("date"),tech:$.get("tech"),ref:$.get("ref"),notes:$.get("notes")})},children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Date Intervention *"}),l.jsx("input",{name:"date",type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Intervenant / Technicien *"}),l.jsx("input",{name:"tech",placeholder:"Nom du technicien",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rf. Fiche Intervention *"}),l.jsx("input",{name:"ref",placeholder:"ex: FI-2024-001",required:!0,className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Notes / Observations"}),l.jsx("textarea",{name:"notes",placeholder:"Dtails supplmentaires...",className:"w-full border border-slate-200 p-2 rounded-lg text-sm focus:border-red-600 outline-none",rows:"2"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-slate-100",children:[l.jsx("button",{type:"button",onClick:()=>u(null),className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-50 rounded-lg transition-colors",children:"Annuler"}),l.jsxs("button",{type:"submit",className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold shadow-lg transition-all flex items-center",children:[l.jsx(jA,{size:18,className:"mr-2"})," Valider"]})]})]})]})}),p&&l.jsxs("div",{className:"fixed bottom-6 right-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center",children:[l.jsx(lo,{className:"mr-2"})," ",p]})]})},tk=({onBack:t})=>{const[e,n]=Z.useState([]),[r,s]=Z.useState({username:"",password:"",role:"EQUIPE_ENERGIE"}),[i,o]=Z.useState(!1),[u,c]=Z.useState(null);Z.useEffect(()=>{const m=Nu(hn("users")),_=Vf(m,N=>{n(N.docs.map(R=>({...R.data(),id:R.id})))});return()=>_()},[]);const h=async m=>{m.preventDefault(),!(!r.username||!r.password)&&(o(!0),await $l(hn("users"),r),s({username:"",password:"",role:"EQUIPE_ENERGIE"}),o(!1))},p=async m=>{if(u===m)try{await bS(Tf(hn("users"),m)),c(null)}catch(_){console.error("Erreur suppression:",_),alert("Erreur lors de la suppression. Vrifiez vos droits.")}else c(m),setTimeout(()=>c(null),3e3)};return l.jsxs("div",{className:"min-h-screen bg-slate-100 p-8",children:[l.jsx("header",{className:"max-w-4xl mx-auto mb-8 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:t,className:"mr-4 p-2 bg-white rounded-full shadow hover:bg-slate-50",children:l.jsx(Ru,{size:20})}),l.jsx(ea,{size:"h-8"}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 ml-4",children:"Administration"})]})}),l.jsxs("main",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 h-fit",children:[l.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-blue-900",children:[l.jsx(BA,{className:"mr-2"})," Ajouter Utilisateur"]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Nom d'utilisateur"}),l.jsx("input",{type:"text",value:r.username,onChange:m=>s({...r,username:m.target.value}),className:"w-full border p-2 rounded",placeholder:"ex: Maintenance"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Mot de passe"}),l.jsx("input",{type:"text",value:r.password,onChange:m=>s({...r,password:m.target.value}),className:"w-full border p-2 rounded",placeholder:"******"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Rle"}),l.jsxs("select",{value:r.role,onChange:m=>s({...r,role:m.target.value}),className:"w-full border p-2 rounded bg-white font-bold text-slate-700",children:[l.jsx("option",{value:"ADMIN",children:"Administrateur (Accs Total)"}),l.jsx("option",{value:"EQUIPE_ENERGIE",children:"quipe nergie (Saisie)"}),l.jsx("option",{value:"DIRECTION",children:"Direction (Visuel Uniquement)"})]})]}),l.jsx("button",{disabled:i,className:"w-full bg-blue-900 text-white py-2 rounded font-bold hover:bg-blue-800",children:i?"...":"Ajouter"})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center text-slate-700",children:[l.jsx(QA,{className:"mr-2"})," Liste Utilisateurs (",e.length,")"]}),l.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:e.map(m=>l.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg hover:bg-slate-50 group",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold",children:m.username}),l.jsx("div",{className:`text-[10px] px-2 py-0.5 rounded w-fit uppercase font-bold 
                                        ${m.role==="ADMIN"?"bg-red-100 text-red-700":m.role==="DIRECTION"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:m.role==="ADMIN"?"Admin":m.role==="DIRECTION"?"Direction":"quipe"})]}),l.jsx("button",{onClick:()=>p(m.id),className:`p-2 rounded transition-all flex items-center ${u===m.id?"bg-red-600 text-white w-24 justify-center text-xs font-bold":"text-slate-300 hover:text-red-600"}`,children:u===m.id?"Confirmer ?":l.jsx(WA,{size:16})})]},m.id))})]})]})]})},nk=({onBack:t,userRole:e})=>{const[n,r]=Z.useState("MEGRINE"),[s,i]=Z.useState({}),[o,u]=Z.useState(!1),[c,h]=Z.useState(!1),[p,m]=Z.useState(new Date().toISOString().slice(0,7)),[_,N]=Z.useState(null),[R,j]=Z.useState(!1),[F,I]=Z.useState({MEGRINE:{name:"Mgrine",area:32500,covered:3e4,open:2500,glazed:365,details:"Showroom 1000m  Atelier FIAT 10000m  Atelier IVECO 9000m  ITALCAR Gros 10000m",energyMix:[{name:"lectricit",value:97,color:"bg-blue-900"},{name:"Gaz",value:3,color:"bg-orange-500"}],elecUsage:[{name:"Clim/Chauffage",value:40,kpi:"kWh/m",significant:!0},{name:"clairage",value:27,kpi:"kWh/m",significant:!0},{name:"Air Comprim",value:17,kpi:"kWh/Nm",significant:!0,subDetails:[{n:"Equipements",v:"40%"},{n:"Rcup. Huile",v:"30%"},{n:"Gonflage",v:"30%"}]},{name:"Informatique",value:8,kpi:"-",significant:!1},{name:"Services",value:5,kpi:"-",significant:!1},{name:"Gaz (Primaire)",value:3,kpi:"kWh/Vhicule",significant:!1}]},ELKHADHRA:{name:"El Khadhra",area:9500,covered:7e3,open:2500,glazed:40,details:"Rception 1000m  Atelier FIAT 3000m  ITALCAR Gros 3000m",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Clim/Chauffage",value:61,kpi:"kWh/m",significant:!0},{name:"clairage",value:23,kpi:"kWh/m",significant:!0},{name:"Air Comprim",value:6,kpi:"kWh/Nm",significant:!1},{name:"Informatique",value:5,kpi:"-",significant:!1},{name:"Services",value:5,kpi:"-",significant:!1}]},NAASSEN:{name:"Naassen",area:32500,covered:1820,open:30680,glazed:0,details:"Admin 920m  Atelier 900m  Parc Neuf 30680m",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"clairage (80% Ext)",value:78,kpi:"kWh/m",significant:!0},{name:"Clim/Chauffage",value:14,kpi:"kWh/m",significant:!1},{name:"Air Comprim",value:5,kpi:"kWh/Nm",significant:!1},{name:"Services",value:2,kpi:"-",significant:!1},{name:"Informatique",value:1,kpi:"-",significant:!1}]},LAC:{name:"Lac",area:2050,covered:850,open:1200,glazed:116,details:"Showroom 850m  Espace Ouvert 1200m",energyMix:[],elecUsage:[{name:"clairage (60% Int)",value:58,kpi:"kWh/m",significant:!0},{name:"Clim/Chauffage",value:36,kpi:"kWh/m",significant:!0},{name:"Informatique",value:3,kpi:"-",significant:!1},{name:"Services",value:3,kpi:"-",significant:!1}]},CARTHAGE:{name:"Rue de Carthage",area:1200,covered:1200,open:0,glazed:50,details:"Sige Social  Bureaux",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Clim/Chauffage",value:65,kpi:"kWh/m",significant:!0},{name:"clairage",value:25,kpi:"kWh/m",significant:!0},{name:"Informatique",value:10,kpi:"-",significant:!0}]},AZUR:{name:"Azur City",area:800,covered:800,open:0,glazed:80,details:"Showroom Commercial",energyMix:[{name:"lectricit",value:100,color:"bg-blue-900"}],elecUsage:[{name:"Eclairage",value:60,kpi:"kWh/m",significant:!0},{name:"Clim",value:35,kpi:"kWh/m",significant:!0},{name:"Services",value:5,kpi:"-",significant:!1}]}}),[w,b]=Z.useState({reductionRate:5,greenRate:2}),M=[{year:2018,temp:19.4},{year:2019,temp:19.6},{year:2020,temp:19.9},{year:2021,temp:20.3},{year:2022,temp:20.8},{year:2023,temp:21.2},{year:2024,temp:21.5},{year:2025,temp:21.8}],L=["REF",2018,2019,2020,2021,2022,2023,2024,2025];Z.useEffect(()=>{lx(hn("site_history")).then(C=>{const $={};C.forEach(D=>{const[O,G]=D.id.split("_");$[O]||($[O]={}),$[O][G]=D.data()}),i(D=>({...D,...$}))})},[]);const q=C=>{if(!s[C]){const $={};L.forEach(D=>{C==="LAC"?$[D]={grid:Array(12).fill(""),pv:Array(12).fill(""),export:Array(12).fill("")}:$[D]={months:Array(12).fill("")}}),i(D=>({...D,[C]:$}))}},v=F[n]||F.MEGRINE,y=(C,$,D="grid")=>{var G;const O=(G=s[C])==null?void 0:G[$];return O?C==="LAC"?O[D]||Array(12).fill(""):O.months||Array(12).fill(""):Array(12).fill("")},x=(C,$,D,O="months")=>{i(G=>{const z=G[n]||{},Y=z[C]||{};let P;if(n==="LAC"){const J=Y[O]?[...Y[O]]:Array(12).fill("");J[$]=D,P={...Y,[O]:J}}else{const J=Y.months?[...Y.months]:Array(12).fill("");J[$]=D,P={...Y,months:J}}return{...G,[n]:{...z,[C]:P}}})},T=async()=>{const C=n;if(s[C]){try{for(const $ of Object.keys(s[C]))await IS(Tf(Bx,"artifacts",appId,"public","data","site_history",`${C}_${$}`),s[C][$]);N("Historique sauvegard"),u(!1)}catch($){console.error($),N("Erreur")}setTimeout(()=>N(null),3e3)}},S=Z.useMemo(()=>{if(n!=="LAC")return v.energyMix;const C=new Date().getFullYear()-1,$=y("LAC",C,"grid").reduce((P,J)=>P+(parseFloat(J)||0),0),D=y("LAC",C,"pv").reduce((P,J)=>P+(parseFloat(J)||0),0),O=y("LAC",C,"export").reduce((P,J)=>P+(parseFloat(J)||0),0),G=Math.max(0,D-O),z=$+G;if(z===0)return[{name:"Rseau STEG",value:100,color:"bg-blue-900"}];const Y=Math.round(G/z*100);return[{name:"Rseau STEG",value:100-Y,color:"bg-blue-900"},{name:"Solaire PV (Autocons.)",value:Y,color:"bg-orange-500"}]},[n,s,v]),A=()=>{const C=L.filter(z=>z!=="REF").map(z=>y(n,z,n==="LAC"?"grid":"months").reduce((P,J)=>P+(parseFloat(J)||0),0));let $=5e4;for(let z=C.length-1;z>=0;z--)if(C[z]>0){$=C[z];break}const D=[2026,2027,2028,2029,2030],O=D.map((z,Y)=>{const P=Math.pow(1-w.reductionRate/100,Y+1);return $*P}),G=Math.max(...C,...O)*1.1||1e5;return l.jsxs("div",{className:"bg-slate-900 rounded-xl shadow-lg p-6 text-white overflow-hidden relative",children:[l.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-white uppercase tracking-wider text-xs mb-1",children:"Trajectoire & Vision"}),l.jsx("p",{className:"text-slate-400 text-xs",children:"Historique 2018-2025 et Projection 2030"})]}),l.jsxs("div",{className:"flex gap-4 text-right",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[9px] text-slate-400 uppercase",children:"Obj. Rduction"}),l.jsxs("div",{className:"font-bold text-emerald-400",children:["-",w.reductionRate,"% / an"]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[9px] text-slate-400 uppercase",children:"Part Verte (Vision)"}),l.jsxs("div",{className:"font-bold text-emerald-400",children:["+",w.greenRate,"% / an"]})]})]})]}),l.jsxs("div",{className:"flex items-end gap-1 h-48 relative z-10",children:[C.map((z,Y)=>l.jsxs("div",{className:"flex-1 flex flex-col justify-end group",children:[l.jsx("div",{className:"w-full bg-blue-600/80 hover:bg-blue-500 rounded-t relative transition-all",style:{height:`${z/G*100}%`},children:l.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 text-[9px] opacity-0 group-hover:opacity-100 bg-white text-slate-900 px-1 rounded font-bold",children:[Math.round(z/1e3),"k"]})}),l.jsx("div",{className:"text-[9px] text-slate-500 text-center mt-1 border-t border-slate-700 pt-1",children:L.filter(P=>P!=="REF")[Y]})]},Y)),O.map((z,Y)=>l.jsxs("div",{className:"flex-1 flex flex-col justify-end group",children:[l.jsx("div",{className:"w-full bg-emerald-500/30 hover:bg-emerald-500/60 border-t-2 border-emerald-500 border-dashed rounded-t relative transition-all",style:{height:`${z/G*100}%`},children:l.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-emerald-500",style:{height:`${Math.min(100,(Y+1)*w.greenRate)}%`}})}),l.jsx("div",{className:"text-[9px] text-emerald-500/70 text-center mt-1 border-t border-slate-700 pt-1 font-bold",children:D[Y]})]},Y))]}),e==="ADMIN"&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700 flex gap-4 text-xs",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-400",children:"Vision Rduction:"}),l.jsx("input",{type:"number",value:w.reductionRate,onChange:z=>b({...w,reductionRate:z.target.value}),className:"bg-slate-800 border border-slate-600 rounded w-12 px-1 text-center text-white font-bold"}),l.jsx("span",{className:"text-slate-500",children:"%"})]}),l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-400",children:"Vision Verte:"}),l.jsx("input",{type:"number",value:w.greenRate,onChange:z=>b({...w,greenRate:z.target.value}),className:"bg-slate-800 border border-slate-600 rounded w-12 px-1 text-center text-white font-bold"}),l.jsx("span",{className:"text-slate-500",children:"%"})]})]})]})},E=()=>{const C=y(n,"REF",n==="LAC"?"grid":"months"),$=2025,D=10,O=y(n,$,n==="LAC"?"grid":"months")[D],G=C[D],z=parseFloat(O)||0,Y=parseFloat(G)||0,P=Y>0?(z-Y)/Y*100:0,J=P<=0;return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6 flex flex-col md:flex-row items-center justify-between animate-in slide-in-from-top-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`p-3 rounded-full ${J?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:J?l.jsx(Pc,{size:24}):l.jsx(Gx,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Performance Dernire Clture"}),l.jsxs("div",{className:"font-black text-slate-800 text-lg",children:["Novembre ",$," ",l.jsx("span",{className:"text-slate-400 font-normal",children:"vs"})," Rf (Baseline)"]})]})]}),l.jsxs("div",{className:"flex gap-8 mt-4 md:mt-0 text-center md:text-right",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Rfrence"}),l.jsxs("div",{className:"font-mono font-bold text-slate-600",children:[Y.toLocaleString()," kWh"]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Ralis"}),l.jsxs("div",{className:"font-mono font-black text-slate-800",children:[z.toLocaleString()," kWh"]})]}),l.jsxs("div",{className:`flex items-center font-black text-xl ${J?"text-emerald-600":"text-red-600"}`,children:[P>0?"+":"",P.toFixed(1),"%"]})]})]})},Oe=()=>{const G=M.map((z,Y)=>{const P=Y/(M.length-1)*300,J=100-(z.temp-18)/(23-18)*100;return`${P},${J}`}).join(" ");return l.jsx("div",{className:"relative h-32 w-full",children:l.jsxs("svg",{viewBox:"0 0 300 100",className:"w-full h-full overflow-visible",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"tempGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#f97316",stopOpacity:"0.4"}),l.jsx("stop",{offset:"100%",stopColor:"#f97316",stopOpacity:"0"})]})}),l.jsx("path",{d:`M0,100 ${G} L300,100 Z`,fill:"url(#tempGradient)"}),l.jsx("polyline",{fill:"none",stroke:"#f97316",strokeWidth:"3",points:G,strokeLinecap:"round",strokeLinejoin:"round"})]})})},wt=(C,$)=>{const D=[...v.elecUsage];D[C]={...D[C],value:parseFloat($)||0},I(O=>({...O,[n]:{...O[n],elecUsage:D}}))};return l.jsxs("div",{className:"bg-slate-50 min-h-screen pb-20 relative font-sans text-slate-600",children:[l.jsx("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-40 border-b border-slate-200",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:t,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors text-slate-600",children:l.jsx(Ru,{size:20})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-xl text-slate-800 tracking-tight",children:"DASHBOARD NERGIE"}),l.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Vision Globale & Performance"})]})]}),l.jsx("div",{className:"flex bg-white rounded-full shadow-sm border border-slate-200 p-1.5 gap-1 mt-4 md:mt-0 overflow-x-auto max-w-full",children:Object.keys(F).map(C=>l.jsxs("button",{onClick:()=>r(C),className:`px-4 py-2 rounded-full text-xs font-bold transition-all flex items-center whitespace-nowrap
                            ${n===C?"bg-blue-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[n===C&&l.jsx(lo,{size:12,className:"mr-2"}),F[C].name]},C))})]})}),R&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[70] flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-2xl p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Configuration Rpartition (Admin)"}),l.jsx("button",{onClick:()=>j(!1),children:l.jsx(qs,{className:"text-slate-400"})})]}),l.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[l.jsxs("p",{className:"text-xs text-slate-500 italic bg-amber-50 p-2 rounded",children:[l.jsx(Ql,{size:12,className:"inline mr-1"}),"Tout changement doit tre justifi par un audit ou une campagne de mesure."]}),v.elecUsage.map((C,$)=>l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold w-1/3",children:C.name}),l.jsx("input",{type:"number",value:C.value,onChange:D=>wt($,D.target.value),className:"border p-2 rounded w-20 text-center font-bold"}),l.jsx("span",{className:"text-sm",children:"%"})]},$)),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Justification du changement *"}),l.jsx("textarea",{className:"w-full border p-2 rounded text-sm",placeholder:"Ex: Audit bureau d'tudes Dc. 2025..."})]})]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:()=>j(!1),className:"bg-blue-900 text-white px-4 py-2 rounded-lg font-bold",children:"Valider"})})]})}),o&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/40 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[l.jsx("div",{children:l.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center",children:[l.jsx(Zd,{className:"mr-2 text-blue-900"})," Saisie Historique - ",v.name]})}),l.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-slate-200 rounded-full text-slate-500",children:l.jsx(qs,{size:20})})]}),l.jsx("div",{className:"overflow-y-auto flex-1 p-6 space-y-8",children:L.map(C=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`font-bold text-sm ${C==="REF"?"text-red-600":"text-slate-700"}`,children:C==="REF"?"ANNE DE RFRENCE (Baseline)":C}),l.jsx("div",{className:"h-px bg-slate-100 flex-1"})]}),l.jsx("div",{className:"pl-4 border-l-2 border-slate-100 overflow-x-auto",children:l.jsxs("div",{className:"flex items-center gap-2 pb-2 min-w-max",children:[l.jsx("div",{className:"w-32 flex-shrink-0 text-[10px] font-bold uppercase text-slate-600",children:n==="LAC"?"Grid / PV / Export":"Consommation"}),["JAN","FV","MAR","AVR","MAI","JUN","JUL","AO","SEP","OCT","NOV","DC"].map(($,D)=>l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-slate-400",children:$}),l.jsx("input",{type:"number",className:"w-20 p-2 text-center text-sm border border-slate-300 rounded focus:border-blue-900 outline-none font-mono font-bold",placeholder:"-",value:y(n,C,n==="LAC"&&$==="Grid"?"grid":"months")[D],onChange:O=>x(C,D,O.target.value,n==="LAC"&&$==="Grid"?"grid":"months")})]},D))]})})]},C))}),l.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end",children:l.jsxs("button",{onClick:T,className:"bg-blue-900 hover:bg-blue-800 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition-all flex items-center",children:[l.jsx(qx,{className:"mr-2",size:18})," Enregistrer"]})})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/80 z-[60] overflow-auto p-4 md:p-8 flex justify-center",children:l.jsxs("div",{className:"max-w-[29.7cm] w-full bg-white shadow-2xl min-h-[21cm] relative print:w-full print:absolute print:top-0 print:left-0 print:shadow-none print:m-0",children:[l.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 no-print bg-slate-100 p-2 rounded-full hover:bg-red-50 hover:text-red-600 transition-colors",children:l.jsx(qs,{})}),l.jsxs("div",{className:"no-print absolute top-4 right-16 flex gap-2",children:[l.jsx("input",{type:"month",value:p,onChange:C=>m(C.target.value),className:"border rounded p-2 text-sm font-bold text-slate-700"}),l.jsxs("button",{onClick:()=>window.print(),className:"bg-blue-900 text-white p-2 rounded-full flex items-center gap-2 px-4 text-xs font-bold hover:bg-blue-800",children:[l.jsx(DA,{size:16})," Imprimer / PDF"]})]}),l.jsxs("div",{className:"p-12 h-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8 border-b-4 border-blue-900 pb-4",children:[l.jsx(ea,{size:"h-20"}),l.jsxs("div",{className:"text-right",children:[l.jsx("h1",{className:"text-4xl font-black text-blue-900 uppercase tracking-tight",children:"Rapport Mensuel nergie"}),l.jsxs("p",{className:"text-slate-500 text-lg font-bold mt-1",children:["Site : ",v.name,"  ",new Date(p).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-8 mb-8",children:[l.jsxs("div",{className:"bg-slate-50 p-6 border-l-4 border-blue-900 rounded-r-xl",children:[l.jsx("h3",{className:"font-bold text-blue-900 mb-2 uppercase text-xs tracking-wider",children:"Conso. Mensuelle"}),l.jsxs("div",{className:"text-5xl font-black text-slate-800",children:["45,230 ",l.jsx("span",{className:"text-lg font-normal text-slate-500",children:"kWh"})]}),l.jsxs("div",{className:"text-sm text-emerald-600 font-bold mt-2 flex items-center",children:[l.jsx(Pc,{size:16,className:"mr-1"})," -4.2% vs N-1"]})]}),l.jsxs("div",{className:"bg-slate-50 p-6 border-l-4 border-blue-900 rounded-r-xl",children:[l.jsx("h3",{className:"font-bold text-blue-900 mb-2 uppercase text-xs tracking-wider",children:"Ratio Performance"}),l.jsxs("div",{className:"text-5xl font-black text-slate-800",children:["54 ",l.jsx("span",{className:"text-lg font-normal text-slate-500",children:"kWh/m"})]}),l.jsx("div",{className:"text-sm text-slate-400 font-bold mt-2",children:"Cible: 50 kWh/m"})]}),l.jsxs("div",{className:"bg-slate-50 p-6 border-l-4 border-blue-900 rounded-r-xl",children:[l.jsx("h3",{className:"font-bold text-blue-900 mb-2 uppercase text-xs tracking-wider",children:"Cot Estim"}),l.jsxs("div",{className:"text-5xl font-black text-slate-800",children:["13,150 ",l.jsx("span",{className:"text-lg font-normal text-slate-500",children:"DT"})]}),l.jsx("div",{className:"text-sm text-slate-400 font-bold mt-2",children:"Prix Moy: 0.291 DT/kWh"})]})]}),l.jsxs("div",{className:"mb-8 flex-1",children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[l.jsx(PA,{className:"mr-2"})," 1. volution Annuelle ",new Date().getFullYear()]}),l.jsx("div",{className:"border rounded-xl p-6 h-64 flex items-end justify-between px-12 bg-slate-50 gap-4",children:[42,38,35,45,58,65,70,68,55,48,45,50].map((C,$)=>l.jsxs("div",{className:"w-full flex flex-col justify-end group h-full",children:[l.jsx("div",{className:"w-full bg-blue-900 rounded-t shadow-sm print:bg-blue-900 print:print-color-adjust-exact",style:{height:`${C}%`}}),l.jsx("div",{className:"text-center text-xs font-bold text-slate-500 mt-2 border-t border-slate-300 pt-1",children:["J","F","M","A","M","J","J","A","S","O","N","D"][$]})]},$))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-8",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[l.jsx(c0,{className:"mr-2"})," 2. Rpartition (UES)"]}),l.jsx("div",{className:"space-y-4",children:v.elecUsage.map((C,$)=>l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 pb-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${C.significant?"bg-blue-900":"bg-slate-300"} print:print-color-adjust-exact`}),l.jsx("span",{className:"font-bold text-slate-700",children:C.name})]}),l.jsxs("span",{className:"font-mono font-black text-slate-900 text-lg",children:[C.value,"%"]})]},$))})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center text-lg",children:[l.jsx(lo,{className:"mr-2"})," 3. Actions & Observations"]}),l.jsx("div",{className:"border rounded-xl p-6 h-full bg-slate-50 text-slate-600 text-sm leading-relaxed italic print:bg-slate-50 print:print-color-adjust-exact",children:l.jsxs("ul",{className:"list-disc pl-5 space-y-3",children:[l.jsx("li",{children:"Analyse approfondie des dpassements de puissance constats en heures de pointe (11h-14h)."}),l.jsx("li",{children:"Campagne de dtection de fuites sur le rseau d'air comprim planifie pour la Semaine 3."}),l.jsx("li",{children:"Optimisation des horaires de l'clairage extrieur effectue suite au changement de saison."}),l.jsx("li",{children:"Maintenance prventive des batteries de condensateurs recommande pour amliorer le Cos ."})]})})]})]}),l.jsx("div",{className:"mt-auto pt-8 border-t border-slate-200 text-center",children:l.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:" 2025 ITALCAR SA  Energy Management System  Document Interne"})})]})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[l.jsx(E,{}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex flex-col justify-center col-span-2",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-900 border-b border-slate-50 pb-2",children:[l.jsx(Xl,{size:18}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Mix nergtique & PV"})]}),l.jsxs("div",{className:"space-y-4",children:[(n==="LAC"?S:v.energyMix).map((C,$)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700 mb-1",children:[l.jsx("span",{children:C.name}),l.jsxs("span",{children:[C.value,"%"]})]}),l.jsx("div",{className:"w-full bg-slate-100 h-3 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full ${C.color}`,style:{width:`${C.value}%`}})})]},$)),n==="LAC"&&l.jsxs("div",{className:"flex justify-between items-center text-xs bg-orange-50 p-2 rounded border border-orange-100 text-orange-800",children:[l.jsx("span",{children:"Export vers STEG (Excdent)"}),l.jsx("span",{className:"font-bold",children:"12% de la Prod."})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex flex-col justify-center col-span-2",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 text-red-600",children:[l.jsx(ol,{size:20}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Ratio Global 2024"})]}),l.jsxs("div",{className:"text-3xl font-black text-slate-800",children:[n==="MEGRINE"?"54.2":n==="LAC"?"128.4":"--",l.jsx("span",{className:"text-sm font-medium text-slate-400 ml-1",children:"kWh/m"})]}),l.jsxs("div",{className:"text-xs font-bold text-emerald-600 mt-1 flex items-center",children:[l.jsx(Pc,{size:14,className:"mr-1"})," Objectif 2025 : -5%"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h3",{className:"font-bold text-slate-700 uppercase tracking-wider text-xs flex items-center",children:[l.jsx(c0,{className:"mr-2"})," Rpartition (UES)"]}),e==="ADMIN"&&l.jsxs("button",{onClick:()=>j(!0),className:"text-xs bg-slate-100 hover:bg-slate-200 px-2 py-1 rounded flex items-center text-slate-600 transition-colors",children:[l.jsx(Hx,{size:12,className:"mr-1"})," Config"]})]}),l.jsx("div",{className:"space-y-6",children:v.elecUsage.map((C,$)=>l.jsxs("div",{className:"group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:`text-sm ${C.significant?"font-bold text-slate-800":"text-slate-500"}`,children:C.name}),l.jsxs("span",{className:"font-bold text-slate-800",children:[C.value,"%"]})]}),l.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden mb-2",children:l.jsx("div",{className:`h-full ${C.significant?"bg-blue-900":"bg-slate-300"}`,style:{width:`${C.value}%`}})}),C.subDetails&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-1 ml-2",children:C.subDetails.map((D,O)=>l.jsxs("div",{className:"bg-slate-50 px-2 py-1 rounded border border-slate-100 text-[10px] text-slate-500 flex items-center",children:[l.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full mr-1"}),D.n,": ",l.jsx("b",{children:D.v})]},O))})]},$))})]}),l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex-1",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase flex items-center",children:[l.jsx(MA,{size:14,className:"mr-1"})," Fiche Technique"]}),l.jsx("div",{className:"bg-blue-50 text-blue-900 p-2 rounded",children:l.jsx(Xd,{size:20})})]}),l.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[l.jsx("div",{className:"text-4xl font-black text-slate-800",children:v.area.toLocaleString()}),l.jsx("div",{className:"text-sm font-bold text-slate-400",children:"m Totaux"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-4 border-t border-slate-100",children:[l.jsxs("div",{className:"text-center bg-slate-50 p-2 rounded",children:[l.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-bold mb-1",children:"Couverte"}),l.jsx("div",{className:"text-sm font-black text-slate-700",children:v.covered.toLocaleString()})]}),l.jsxs("div",{className:"text-center bg-slate-50 p-2 rounded",children:[l.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-bold mb-1",children:"Vitre"}),l.jsx("div",{className:"text-sm font-black text-blue-600",children:v.glazed})]}),l.jsxs("div",{className:"text-center bg-slate-50 p-2 rounded",children:[l.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-bold mb-1",children:"Ouverte"}),l.jsx("div",{className:"text-sm font-black text-slate-500",children:v.open.toLocaleString()})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex-1",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase flex items-center",children:[l.jsx(Wx,{size:14,className:"mr-1"})," Donnes Climatiques"]}),l.jsx("div",{className:"bg-orange-50 text-orange-600 p-2 rounded",children:l.jsx(al,{size:20})})]}),l.jsx(Oe,{}),l.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-4 pt-2 border-t border-slate-100 font-medium px-2",children:[l.jsx("span",{children:"Min: 9C (Jan)"}),l.jsx("span",{children:"Moy: 21.8C"}),l.jsx("span",{children:"Max: 34C (Aot)"})]})]})]})]}),l.jsx(A,{})]}),l.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col gap-3 z-50 no-print",children:[e==="ADMIN"&&l.jsxs("button",{onClick:()=>{q(n),u(!0)},className:"bg-slate-800 hover:bg-slate-700 text-white p-4 rounded-full shadow-lg shadow-slate-400 transition-transform hover:scale-110 group relative",children:[l.jsx(Zd,{size:20}),l.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-slate-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none",children:"Historique"})]}),l.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-900 hover:bg-blue-800 text-white p-4 rounded-full shadow-xl shadow-blue-300 transition-transform hover:scale-110 group relative",children:[l.jsx($A,{size:24}),l.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-blue-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none",children:"Rapport Mensuel"})]})]}),_&&l.jsxs("div",{className:"fixed bottom-6 left-6 px-6 py-4 bg-emerald-600 text-white rounded-xl shadow-xl z-50 font-bold flex items-center animate-in slide-in-from-bottom-4",children:[l.jsx(lo,{className:"mr-2"})," ",_]})]})},rk=({user:t,onNavigate:e,onLogout:n})=>{const r=o=>t.role==="ADMIN"?!0:t.role==="EQUIPE_ENERGIE"?["steg","air","sites"].includes(o):t.role==="DIRECTION"?o==="sites":!1,s=()=>{const o=new Date().getHours();return o<12?"Bonjour":o<18?"Bonne aprs-midi":"Bonsoir"},i=()=>{const o=["Pensez  vrifier les fuites d'air comprim chaque semaine.","Un cos  > 0.95 peut rduire la facture de 5%.","Scurit avant tout : Portez vos EPI lors des relevs.","teignez les lumires des zones inoccupes (Atelier Midi).","Nettoyez les filtres des compresseurs pour optimiser le rendement."];return o[Math.floor(Math.random()*o.length)]};return Z.useState(i()),l.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[l.jsxs("div",{className:"z-10 w-full max-w-6xl flex justify-between items-center mb-12 bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(ea,{size:"h-12"}),l.jsx("div",{className:"h-10 w-px bg-slate-200"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black mb-0 tracking-tight text-blue-900",children:"PORTAIL NERGIE"}),l.jsxs("p",{className:"text-slate-400 text-sm",children:[s(),", ",l.jsx("span",{className:"text-slate-800 font-bold",children:t.username})]})]})]}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx(Kx,{darkText:!0}),l.jsxs("div",{className:"bg-emerald-50 text-emerald-800 text-[10px] px-3 py-1 rounded-full font-bold border border-emerald-100 flex items-center",children:[l.jsx(Gx,{size:12,className:"mr-2"})," Performance Globale en hausse"]})]})]}),l.jsxs("div",{className:"z-10 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl w-full",children:[l.jsxs("button",{disabled:!r("steg"),onClick:()=>e("steg"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("steg")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("steg")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(Xl,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"nergie & Facturation"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Suivi des consommations STEG, Factures MT/BT, Analyse Cos  et dpassements de puissance."})]}),l.jsxs("button",{disabled:!r("air"),onClick:()=>e("air"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("air")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("air")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(eh,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Air Comprim"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Relevs hebdomadaires des compresseurs, suivi des heures de charge et planning de maintenance."})]}),l.jsxs("button",{disabled:!r("sites"),onClick:()=>e("sites"),className:`group relative border-2 rounded-3xl p-8 transition-all text-left bg-white shadow-sm hover:shadow-xl hover:-translate-y-1 ${r("sites")?"border-slate-100 hover:border-blue-900":"opacity-50 cursor-not-allowed border-slate-100"}`,children:[l.jsx("div",{className:`mb-6 p-4 rounded-2xl w-fit ${r("sites")?"bg-blue-50 text-blue-900 group-hover:bg-blue-900 group-hover:text-white transition-colors":"bg-slate-100 text-slate-400"}`,children:l.jsx(UA,{size:32})}),l.jsx("h2",{className:"text-xl font-black mb-2 text-slate-800 group-hover:text-blue-900",children:"Tableau de Bord Sites"}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Vision globale des sites ITALCAR : Surfaces, Mix nergtique et Trajectoire Carbone 2030."})]})]}),t.role==="ADMIN"&&l.jsx("div",{className:"z-10 mt-8 w-full max-w-6xl flex justify-end",children:l.jsxs("button",{onClick:()=>e("admin"),className:"text-slate-400 hover:text-blue-900 text-xs font-bold flex items-center transition-colors",children:[l.jsx(HA,{size:14,className:"mr-1"})," Administration"]})}),l.jsx("div",{className:"mt-12 text-center text-slate-400 text-xs font-medium uppercase tracking-widest",children:" 2025 ITALCAR SA  Energy Management System"}),l.jsx("div",{className:"absolute top-6 right-6",children:l.jsx("button",{onClick:n,className:"bg-white hover:bg-red-50 text-slate-400 hover:text-red-600 p-2 rounded-full shadow-sm transition-colors border border-slate-100",children:l.jsx(zA,{size:18})})})]})},sk=()=>{const[t,e]=Z.useState(null),[n,r]=Z.useState("dashboard"),[s,i]=Z.useState(!1);Z.useEffect(()=>{(async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await hN(i0,__initial_auth_token):await aN(i0)}catch(h){console.error("Auth failed",h)}finally{i(!0)}})()},[]);const o=c=>{e(c),r("dashboard")},u=()=>{e(null),r("dashboard")};return s?t?l.jsxs(l.Fragment,{children:[n==="dashboard"&&l.jsx(rk,{user:t,onNavigate:r,onLogout:u}),n==="admin"&&l.jsx(tk,{onBack:()=>r("dashboard")}),n==="steg"&&l.jsx(ZA,{onBack:()=>r("dashboard"),userRole:t.role}),n==="air"&&l.jsx(ek,{onBack:()=>r("dashboard"),userRole:t.role}),n==="sites"&&l.jsx(nk,{onBack:()=>r("dashboard"),userRole:t.role})]}):l.jsx(JA,{onLogin:o}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Connexion au Cloud..."})};Dc.createRoot(document.getElementById("root")).render(l.jsx(D1.StrictMode,{children:l.jsx(sk,{})}));
